   1:				title	M$ BASIC Interpreter
   2:				name	('MBASIC')
   3:			
   4:			; DASMed version of Microsoft BASIC interpreter MBASIC.COM
   5:			; By W. Cirsovius
   6:			
   7:				.z80
   8:				aseg
   9:	0100          		org	0100h
  10:			
  11:	0000          	FALSE	equ	0
  12:	FFFF          	TRUE	equ	NOT FALSE
  13:			
  14:	0000          	OS	equ	0000h
  15:	0005          	BDOS	equ	0005h
  16:	0080          	CCP	equ	0080h
  17:	0080          	DMA	equ	0080h
  18:			
  19:	0002          	_@CST	equ	2
  20:			
  21:	000C          	.vers	equ	12
  22:	000D          	.resdsk	equ	13
  23:	000E          	.logdsk	equ	14
  24:	000F          	.open	equ	15
  25:	0010          	.close	equ	16
  26:	0011          	.srcfrs	equ	17
  27:	0012          	.srcnxt	equ	18
  28:	0013          	.delete	equ	19
  29:	0014          	.rdseq	equ	20
  30:	0015          	.wrseq	equ	21
  31:	0016          	.make	equ	22
  32:	0017          	.rename	equ	23
  33:	0019          	.retdsk	equ	25
  34:	001A          	.setdma	equ	26
  35:	0021          	.rdrnd	equ	33
  36:	0022          	.wrrnd	equ	34
  37:			
  38:	00FF          	OSerr	equ	255
  39:			
  40:	0001          	_drv	equ	1
  41:	0008          	_nam	equ	8
  42:	0003          	_ext	equ	3
  43:			
  44:	000C          	_EX	equ	12
  45:	0021          	_RRN	equ	33
  46:			
  47:	0080          	reclng	equ	128
  48:			
  49:	0000          	null	equ	00h
  50:	0003          	CtrlC	equ	'C'-'@'
  51:	0007          	bell	equ	07h
  52:	0008          	bs	equ	08h
  53:	0009          	tab	equ	09h
  54:	000A          	lf	equ	0ah
  55:	000D          	cr	equ	0dh
  56:	001A          	eof	equ	1ah
  57:	001B          	esc	equ	1bh
  58:	007F          	rubout	equ	7fh
  59:			
  60:	007F          	NoMSB	equ	01111111b
  61:	0080          	MSB	equ	10000000b
  62:			
  63:	013B          	TOKLEN	equ	315		; Length of token line ??
  64:			
  65:	0D0B          	$PROT$	equ	13*256+11	; Init loop for protection
  66:			
  67:			_OR	macro
  68:				db	0f6h
  69:				endm
  70:			
  71:			_CP	macro
  72:				db	0feh
  73:				endm
  74:			
  75:			_LD.BC	macro
  76:				db	001h
  77:				endm
  78:			
  79:			_LD.DE	macro
  80:				db	011h
  81:				endm
  82:			
  83:			_LD.HL	macro
  84:				db	021h
  85:				endm
  86:			
  87:			_LD.A	macro
  88:				db	03eh
  89:				endm
  90:			
  91:			_LD.B	macro
  92:				db	006h
  93:				endm
  94:			
  95:			_LD.C	macro
  96:				db	00eh
  97:				endm
  98:			
  99:			_LD.D	macro
 100:				db	016h
 101:				endm
 102:			
 103:			_LD.L	macro
 104:				db	02eh
 105:				endm
 106:			
 107:			_LDA	macro
 108:				db	03ah
 109:				endm
 110:			
 111:			_JP.NZ	macro
 112:				db	0c2h
 113:				endm
 114:			
 115:			_JP.Z	macro
 116:				db	0cah
 117:				endm
 118:			
 119:			_JP.NC	macro
 120:				db	0d2h
 121:				endm
 122:			
 123:			_JP.C	macro
 124:				db	0dah
 125:				endm
 126:			
 127:			_JP.M	macro
 128:				db	0fah
 129:				endm
 130:			
 131:	0000          	l0000	equ	00h
 132:	0001          	l0001	equ	01h
 133:	0002          	l0002	equ	02h
 134:	0004          	l0004	equ	04h
 135:	0005          	l0005	equ	05h
 136:	0006          	l0006	equ	06h
 137:	0007          	l0007	equ	07h
 138:	0008          	l0008	equ	08h
 139:	0009          	l0009	equ	09h
 140:	000A          	l000a	equ	0ah
 141:	000D          	l000d	equ	0dh
 142:	000E          	l000e	equ	0eh
 143:	000F          	l000f	equ	0fh
 144:	0010          	l0010	equ	10h
 145:	0011          	l0011	equ	11h
 146:	0014          	l0014	equ	14h
 147:	001E          	l001e	equ	1eh
 148:	0021          	l0021	equ	21h
 149:	0022          	l0022	equ	22h
 150:	0025          	l0025	equ	25h
 151:	0026          	l0026	equ	26h
 152:	0027          	l0027	equ	27h
 153:	0028          	l0028	equ	28h
 154:	0029          	l0029	equ	29h
 155:	0042          	l0042	equ	42h
 156:	004E          	l004e	equ	4eh
 157:	007F          	l007f	equ	7fh
 158:	0080          	l0080	equ	80h
 159:	0082          	l0082	equ	82h
 160:	00A9          	l00a9	equ	0a9h
 161:	00AA          	l00aa	equ	0aah
 162:	00AB          	l00ab	equ	0abh
 163:	00AD          	l00ad	equ	0adh
 164:	00AE          	l00ae	equ	0aeh
 165:	00B0          	l00b0	equ	0b0h
 166:	00B1          	l00b1	equ	0b1h
 167:	00B2          	l00b2	equ	0b2h
 168:	00B4          	l00b4	equ	0b4h
 169:	00B8          	l00b8	equ	0b8h
 170:	00C5          	l00c5	equ	0c5h
 171:	00FF          	l00ff	equ	0ffh
 172:	6404          	l6404	equ	6404h
 173:	7218          	l7218	equ	7218h
 174:	772B          	l772b	equ	772bh
 175:	7E22          	l7e22	equ	7e22h
 176:	7F00          	l7f00	equ	7f00h
 177:	7F80          	l7f80	equ	7f80h
 178:	8000          	l8000	equ	8000h
 179:	8031          	l8031	equ	8031h
 180:	8080          	l8080	equ	8080h
 181:	8138          	l8138	equ	8138h
 182:	9080          	l9080	equ	9080h
 183:	9143          	l9143	equ	9143h
 184:	9180          	l9180	equ	9180h
 185:	9474          	l9474	equ	9474h
 186:	AA3B          	laa3b	equ	0aa3bh
 187:	B60E          	lb60e	equ	0b60eh
 188:	F983          	lf983	equ	0f983h
 189:	FFAA          	lffaa	equ	0ffaah
 190:	FFC0          	lffc0	equ	0ffc0h
 191:	FFF8          	lfff8	equ	0fff8h
 192:	FFF9          	lfff9	equ	0fff9h
 193:	FFFA          	lfffa	equ	0fffah
 194:	FFFE          	lfffe	equ	0fffeh
 195:	FFFF          	lffff	equ	0ffffh
 196:			
 197:	0100  C38C5D  		jp	l5d8c
 198:			;
 199:	0103  7A29    		dw	_CINT
 200:	0105  DC29    		dw	st.INT
 201:			;
 202:			; Statement table
 203:			;
 204:	0107          	l0107:
 205:	0107  0644    		dw	_END		; 0x81 : END
 206:	0109  BF11    		dw	l11bf		; 0x82 : FOR
 207:	010B  9E45    		dw	l459e		; 0x83 : NEXT
 208:	010D  EC14    		dw	_DATA		; 0x84 : DATA
 209:	010F  6318    		dw	l1863		; 0x85 : INPUT
 210:	0111  8639    		dw	_DIM		; 0x86 : DIM
 211:	0113  4019    		dw	l1940		; 0x87 : READ
 212:	0115  1815    		dw	_LET		; 0x88 : LET
 213:	0117  9514    		dw	l1495		; 0x89 : GOTO
 214:	0119  6714    		dw	_RUN		; 0x8a : RUN
 215:	011B  5116    		dw	l1651		; 0x8b : IF
 216:	011D  E643    		dw	l43e6		; 0x8c : RESTORE
 217:	011F  7D14    		dw	l147d		; 0x8d : GOSUB
 218:	0121  D114    		dw	l14d1		; 0x8e : RETURN
 219:	0123  EE14    		dw	l14ee		; 0x8f : REM
 220:	0125  0144    		dw	l4401		; 0x90 : STOP
 221:	0127  9C16    		dw	l169c		; 0x91 : PRINT
 222:	0129  0E45    		dw	l450e		; 0x92 : CLEAR
 223:	012B  8920    		dw	l2089		; 0x93 : LIST
 224:	012D  2043    		dw	l4320		; 0x94 : NEW
 225:	012F  8515    		dw	l1585		; 0x95 : ON
 226:	0131  7344    		dw	l4473		; 0x96 : NULL
 227:	0133  0320    		dw	l2003		; 0x97 : WAIT
 228:	0135  2B1E    		dw	l1e2b		; 0x98 : DEF
 229:	0137  C022    		dw	l22c0		; 0x99 : POKE
 230:	0139  5D44    		dw	l445d		; 0x9a : CONT
 231:	013B  C90C    		dw	l0cc9		; 0x9b : ??
 232:	013D  C90C    		dw	l0cc9		; 0x9c : ??
 233:	013F  FD1F    		dw	l1ffd		; 0x9d : OUT
 234:	0141  9416    		dw	l1694		; 0x9e : LPRINT
 235:	0143  8420    		dw	l2084		; 0x9f : LLIST
 236:	0145  0000    		dw	0
 237:	0147  2420    		dw	l2024		; 0xa1 : WIDTH
 238:	0149  EE14    		dw	l14ee		; 0xa2 : ELSE
 239:	014B  7C44    		dw	l447c		; 0xa3 : TRON
 240:	014D  7D44    		dw	l447d		; 0xa4 : TROFF
 241:	014F  8244    		dw	l4482		; 0xa5 : SWAP
 242:	0151  C444    		dw	l44c4		; 0xa6 : ERASE
 243:	0153  E33C    		dw	l3ce3		; 0xa7 : EDIT
 244:	0155  1016    		dw	l1610		; 0xa8 : ERROR
 245:	0157  D315    		dw	l15d3		; 0xa9 : RESUME
 246:	0159  7C22    		dw	l227c		; 0xaa : DELETE
 247:	015B  1B16    		dw	l161b		; 0xab : AUTO
 248:	015D  F922    		dw	l22f9		; 0xac : RENUM
 249:	015F  C913    		dw	l13c9		; 0xad : DEFSTR
 250:	0161  CC13    		dw	l13cc		; 0xae : DEFINT
 251:	0163  CF13    		dw	l13cf		; 0xaf : DEFSNG
 252:	0165  D213    		dw	l13d2		; 0xb0 : DEFDBL
 253:	0167  F517    		dw	l17f5		; 0xb1 : LINE
 254:	0169  0000    		dw	0
 255:	016B  0000    		dw	0
 256:	016D  584C    		dw	l4c58		; 0xb4 : WHILE
 257:	016F  7B4C    		dw	l4c7b		; 0xb5 : WEND
 258:	0171  F14C    		dw	l4cf1		; 0xb6 : CALL
 259:	0173  7B50    		dw	l507b		; 0xb7 : WRITE
 260:	0175  EC14    		dw	_DATA		; 0xb8 : COMMON
 261:	0177  744D    		dw	l4d74		; 0xb9 : CHAIN
 262:	0179  3D24    		dw	l243d		; 0xba : OPTION
 263:	017B  8724    		dw	l2487		; 0xbb : RANDOMIZE
 264:	017D  0000    		dw	0
 265:	017F  B759    		dw	l59b7		; 0xbd : SYSTEM
 266:	0181  0000    		dw	0
 267:	0183  BA58    		dw	_OPEN		; 0xbf : OPEN
 268:	0185  1754    		dw	l5417		; 0xc0 : FIELD
 269:	0187  FE5A    		dw	l5afe		; 0xc1 : GET
 270:	0189  FD5A    		dw	l5afd		; 0xc2 : PUT
 271:	018B  D953    		dw	l53d9		; 0xc3 : CLOSE
 272:	018D  9B52    		dw	l529b		; 0xc4 : LOAD
 273:	018F  5C53    		dw	l535c		; 0xc5 : MERGE
 274:	0191  045A    		dw	l5a04		; 0xc6 : FILES
 275:	0193  6558    		dw	l5865		; 0xc7 : NAME
 276:	0195  D759    		dw	l59d7		; 0xc8 : ??
 277:	0197  7B54    		dw	l547b		; 0xc9 : LSET
 278:	0199  7A54    		dw	l547a		; 0xca : RSET
 279:	019B  9A53    		dw	l539a		; 0xcb : SAVE
 280:	019D  BE59    		dw	l59be		; 0xcc : RESET
 281:			;
 282:			; Function table
 283:			;
 284:	019F          	l019f:
 285:	019F  4849    		dw	l4948		; 0x01 : LEFT$
 286:	01A1  7949    		dw	l4979		; 0x02 : RIGHT$
 287:	01A3  8349    		dw	l4983		; 0x03 : MID$
 288:	01A5  7C28    		dw	l287c		; 0x04 : SGN
 289:	01A7  802A    		dw	l2a80		; 0x05 : INT
 290:	01A9  6728    		dw	l2867		; 0x06 : ABS
 291:	01AB  C036    		dw	l36c0		; 0x07 : SQR
 292:	01AD  DD37    		dw	l37dd		; 0x08 : RND
 293:	01AF  7F38    		dw	l387f		; 0x09 : SIN
 294:	01B1  BD26    		dw	l26bd		; 0x0a : LOG
 295:	01B3  2B37    		dw	l372b		; 0x0b : EXP
 296:	01B5  7938    		dw	l3879		; 0x0c : COS
 297:	01B7  1C39    		dw	l391c		; 0x0d : TAN
 298:	01B9  3139    		dw	l3931		; 0x0e : ATN
 299:	01BB  F64A    		dw	l4af6		; 0x0f : FRE
 300:	01BD  F21F    		dw	l1ff2		; 0x10 : INP
 301:	01BF  D11D    		dw	l1dd1		; 0x11 : POS
 302:	01C1  D648    		dw	l48d6		; 0x12 : LEN
 303:	01C3  9646    		dw	l4696		; 0x13 : STR$
 304:	01C5  A449    		dw	l49a4		; 0x14 : VAL
 305:	01C7  E248    		dw	l48e2		; 0x15 : ASC
 306:	01C9  F248    		dw	l48f2		; 0x16 : CHR$
 307:	01CB  B622    		dw	l22b6		; 0x17 : PEEK
 308:	01CD  2B49    		dw	l492b		; 0x18 : SPACE$
 309:	01CF  8A46    		dw	l468a		; 0x19 : OCT$
 310:	01D1  9046    		dw	l4690		; 0x1a : HEX$
 311:	01D3  CB1D    		dw	l1dcb		; 0x1b : LPOS
 312:	01D5  7A29    		dw	_CINT		; 0x1c : CINT
 313:	01D7  F429    		dw	l29f4		; 0x1d : CSNG
 314:	01D9  202A    		dw	l2a20		; 0x1e : CDBL
 315:	01DB  6D2A    		dw	l2a6d		; 0x1f : FIX
 316:	01DD  0000    		dw	0
 317:	01DF  0000    		dw	0
 318:	01E1  0000    		dw	0
 319:	01E3  0000    		dw	0
 320:	01E5  0000    		dw	0
 321:	01E7  0000    		dw	0
 322:	01E9  0000    		dw	0
 323:	01EB  0000    		dw	0
 324:	01ED  0000    		dw	0
 325:	01EF  0000    		dw	0
 326:	01F1  0000    		dw	0
 327:	01F3  7A51    		dw	l517a		; 0x2b : CVI
 328:	01F5  7D51    		dw	l517d		; 0x2c : CVS
 329:	01F7  8051    		dw	l5180		; 0x2d : CVD
 330:	01F9  0000    		dw	0
 331:	01FB  8E55    		dw	l558e		; 0x2f : EOF
 332:	01FD  4056    		dw	l5640		; 0x30 : LOC
 333:	01FF  5856    		dw	l5658		; 0x31 : LOF
 334:	0201  6151    		dw	l5161		; 0x32 : MKI$
 335:	0203  6451    		dw	l5164		; 0x33 : MKS$
 336:	0205  6751    		dw	l5167		; 0x34 : MKD$
 337:			;
 338:			; Keyword table
 339:			;
 340:	0207          	l0207:
 341:	0207  3B02    		dw	l023b		; A
 342:	0209  4C02    		dw	l024c
 343:	020B  4D02    		dw	l024d
 344:	020D  8702    		dw	l0287
 345:	020F  B002    		dw	l02b0
 346:	0211  D502    		dw	l02d5
 347:	0213  EB02    		dw	l02eb
 348:	0215  FD02    		dw	l02fd
 349:	0217  0203    		dw	l0302
 350:	0219  1E03    		dw	l031e
 351:	021B  1F03    		dw	l031f
 352:	021D  2403    		dw	l0324
 353:	021F  5803    		dw	l0358
 354:	0221  7103    		dw	l0371
 355:	0223  8403    		dw	l0384
 356:	0225  9A03    		dw	l039a
 357:	0227  AE03    		dw	l03ae
 358:	0229  AF03    		dw	l03af
 359:	022B  ED03    		dw	l03ed
 360:	022D  2204    		dw	l0422
 361:	022F  3904    		dw	l0439
 362:	0231  4204    		dw	l0442
 363:	0233  4C04    		dw	l044c
 364:	0235  6404    		dw	l0464
 365:	0237  6804    		dw	l0468
 366:	0239  6904    		dw	l0469
 367:			;
 368:			; A..
 369:			;
 370:	023B          	l023b:
 371:	023B  5554CF  		dc	'UTO'
 372:	023E  AB      		db	0abh
 373:	023F  4EC4    		dc	'ND'
 374:	0241  F7      		db	0f7h
 375:	0242  42D3    		dc	'BS'
 376:	0244  06      		db	006h
 377:	0245  54CE    		dc	'TN'
 378:	0247  0E      		db	00eh
 379:	0248  53C3    		dc	'SC'
 380:	024A  15      		db	015h
 381:	024B  00      		db	0
 382:			;
 383:			; B..
 384:			;
 385:	024C          	l024c:
 386:	024C  00      		db	0
 387:			;
 388:			; C..
 389:			;
 390:	024D          	l024d:
 391:	024D  4C4F53C5		dc	'LOSE'
 392:	0251  C3      		db	0c3h
 393:	0252  4F4ED4  		dc	'ONT'
 394:	0255  9A      		db	09ah
 395:	0256  4C4541D2		dc	'LEAR'
 396:	025A  92      		db	092h
 397:	025B  494ED4  		dc	'INT'
 398:	025E  1C      		db	01ch
 399:	025F  534EC7  		dc	'SNG'
 400:	0262  1D      		db	01dh
 401:	0263  4442CC  		dc	'DBL'
 402:	0266  1E      		db	01eh
 403:	0267  56C9    		dc	'VI'
 404:	0269  2B      		db	02bh
 405:	026A  56D3    		dc	'VS'
 406:	026C  2C      		db	02ch
 407:	026D  56C4    		dc	'VD'
 408:	026F  2D      		db	02dh
 409:	0270  4FD3    		dc	'OS'
 410:	0272  0C      		db	00ch
 411:	0273  4852A4  		dc	'HR$'
 412:	0276  16      		db	016h
 413:	0277  414CCC  		dc	'ALL'
 414:	027A  B6      		db	0b6h
 415:	027B  4F4D4D4F		dc	'OMMON'
	      CE
 416:	0280  B8      		db	0b8h
 417:	0281  484149CE		dc	'HAIN'
 418:	0285  B9      		db	0b9h
 419:	0286  00      		db	0
 420:			;
 421:			; D..
 422:			;
 423:	0287          	l0287:
 424:	0287  454C4554		dc	'ELETE'
	      C5
 425:	028C  AA      		db	0aah
 426:	028D  4154C1  		dc	'ATA'
 427:	0290  84      		db	084h
 428:	0291  49CD    		dc	'IM'
 429:	0293  86      		db	086h
 430:	0294  45465354		dc	'EFSTR'
	      D2
 431:	0299  AD      		db	0adh
 432:	029A  4546494E		dc	'EFINT'
	      D4
 433:	029F  AE      		db	0aeh
 434:	02A0  4546534E		dc	'EFSNG'
	      C7
 435:	02A5  AF      		db	0afh
 436:	02A6  45464442		dc	'EFDBL'
	      CC
 437:	02AB  B0      		db	0b0h
 438:	02AC  45C6    		dc	'EF'
 439:	02AE  98      		db	098h
 440:	02AF  00      		db	0
 441:			;
 442:			; E..
 443:			;
 444:	02B0          	l02b0:
 445:	02B0  4C53C5  		dc	'LSE'
 446:	02B3  A2      		db	0a2h
 447:	02B4  4EC4    		dc	'ND'
 448:	02B6  81      		db	081h
 449:	02B7  524153C5		dc	'RASE'
 450:	02BB  A6      		db	0a6h
 451:	02BC  4449D4  		dc	'DIT'
 452:	02BF  A7      		db	0a7h
 453:	02C0  52524FD2		dc	'RROR'
 454:	02C4  A8      		db	0a8h
 455:	02C5  52CC    		dc	'RL'
 456:	02C7  D6      		db	0d6h
 457:	02C8  52D2    		dc	'RR'
 458:	02CA  D7      		db	0d7h
 459:	02CB  58D0    		dc	'XP'
 460:	02CD  0B      		db	00bh
 461:	02CE  4FC6    		dc	'OF'
 462:	02D0  2F      		db	02fh
 463:	02D1  51D6    		dc	'QV'
 464:	02D3  FA      		db	0fah
 465:	02D4  00      		db	0
 466:			;
 467:			; F..
 468:			;
 469:	02D5          	l02d5:
 470:	02D5  4FD2    		dc	'OR'
 471:	02D7  82      		db	082h
 472:	02D8  49454CC4		dc	'IELD'
 473:	02DC  C0      		db	0c0h
 474:	02DD  494C45D3		dc	'ILES'
 475:	02E1  C6      		db	0c6h
 476:	02E2  CE      		dc	'N'
 477:	02E3  D3      		db	0d3h
 478:	02E4  52C5    		dc	'RE'
 479:	02E6  0F      		db	00fh
 480:	02E7  49D8    		dc	'IX'
 481:	02E9  1F      		db	01fh
 482:	02EA  00      		db	0
 483:			;
 484:			; G..
 485:			;
 486:	02EB          	l02eb:
 487:	02EB  4F54CF  		dc	'OTO'
 488:	02EE  89      		db	089h
 489:	02EF  4F2054CF		dc	'O TO'
 490:	02F3  89      		db	089h
 491:	02F4  4F5355C2		dc	'OSUB'
 492:	02F8  8D      		db	08dh
 493:	02F9  45D4    		dc	'ET'
 494:	02FB  C1      		db	0c1h
 495:	02FC  00      		db	0
 496:			;
 497:			; H..
 498:			;
 499:	02FD          	l02fd:
 500:	02FD  4558A4  		dc	'EX$'
 501:	0300  1A      		db	01ah
 502:	0301  00      		db	0
 503:			;
 504:			; I..
 505:			;
 506:	0302          	l0302:
 507:	0302  4E5055D4		dc	'NPUT'
 508:	0306  85      		db	085h
 509:	0307  C6      		dc	'F'
 510:	0308  8B      		db	08bh
 511:	0309  4E5354D2		dc	'NSTR'
 512:	030D  DA      		db	0dah
 513:	030E  4ED4    		dc	'NT'
 514:	0310  05      		db	005h
 515:	0311  4ED0    		dc	'NP'
 516:	0313  10      		db	010h
 517:	0314  4DD0    		dc	'MP'
 518:	0316  FB      		db	0fbh
 519:	0317  4E4B4559		dc	'NKEY$'
	      A4
 520:	031C  DD      		db	0ddh
 521:	031D  00      		db	0
 522:			;
 523:			; J..
 524:			;
 525:	031E          	l031e:
 526:	031E  00      		db	0
 527:			;
 528:			; K..
 529:			;
 530:	031F          	l031f:
 531:	031F  494CCC  		dc	'ILL'
 532:	0322  C8      		db	0c8h
 533:	0323  00      		db	0
 534:			;
 535:			; L..
 536:			;
 537:	0324          	l0324:
 538:	0324  5052494E		dc	'PRINT'
	      D4
 539:	0329  9E      		db	09eh
 540:	032A  4C4953D4		dc	'LIST'
 541:	032E  9F      		db	09fh
 542:	032F  504FD3  		dc	'POS'
 543:	0332  1B      		db	01bh
 544:	0333  45D4    		dc	'ET'
 545:	0335  88      		db	088h
 546:	0336  494EC5  		dc	'INE'
 547:	0339  B1      		db	0b1h
 548:	033A  4F41C4  		dc	'OAD'
 549:	033D  C4      		db	0c4h
 550:	033E  5345D4  		dc	'SET'
 551:	0341  C9      		db	0c9h
 552:	0342  4953D4  		dc	'IST'
 553:	0345  93      		db	093h
 554:	0346  4FC7    		dc	'OG'
 555:	0348  0A      		db	00ah
 556:	0349  4FC3    		dc	'OC'
 557:	034B  30      		db	030h
 558:	034C  45CE    		dc	'EN'
 559:	034E  12      		db	012h
 560:	034F  454654A4		dc	'EFT$'
 561:	0353  01      		db	001h
 562:	0354  4FC6    		dc	'OF'
 563:	0356  31      		db	031h
 564:	0357  00      		db	0
 565:			;
 566:			; M..
 567:			;
 568:	0358          	l0358:
 569:	0358  455247C5		dc	'ERGE'
 570:	035C  C5      		db	0c5h
 571:	035D  4FC4    		dc	'OD'
 572:	035F  FC      		db	0fch
 573:	0360  4B49A4  		dc	'KI$'
 574:	0363  32      		db	032h
 575:	0364  4B53A4  		dc	'KS$'
 576:	0367  33      		db	033h
 577:	0368  4B44A4  		dc	'KD$'
 578:	036B  34      		db	034h
 579:	036C  4944A4  		dc	'ID$'
 580:	036F  03      		db	003h
 581:	0370  00      		db	0
 582:			;
 583:			; N..
 584:			;
 585:	0371          	l0371:
 586:	0371  4558D4  		dc	'EXT'
 587:	0374  83      		db	083h
 588:	0375  554CCC  		dc	'ULL'
 589:	0378  96      		db	096h
 590:	0379  414DC5  		dc	'AME'
 591:	037C  C7      		db	0c7h
 592:	037D  45D7    		dc	'EW'
 593:	037F  94      		db	094h
 594:	0380  4FD4    		dc	'OT'
 595:	0382  D5      		db	0d5h
 596:	0383  00      		db	0
 597:			;
 598:			; O..
 599:			;
 600:	0384          	l0384:
 601:	0384  5045CE  		dc	'PEN'
 602:	0387  BF      		db	0bfh
 603:	0388  55D4    		dc	'UT'
 604:	038A  9D      		db	09dh
 605:	038B  CE      		dc	'N'
 606:	038C  95      		db	095h
 607:	038D  D2      		dc	'R'
 608:	038E  F8      		db	0f8h
 609:	038F  4354A4  		dc	'CT$'
 610:	0392  19      		db	019h
 611:	0393  5054494F		dc	'PTION'
	      CE
 612:	0398  BA      		db	0bah
 613:	0399  00      		db	0
 614:			;
 615:			; P..
 616:			;
 617:	039A          	l039a:
 618:	039A  52494ED4		dc	'RINT'
 619:	039E  91      		db	091h
 620:	039F  55D4    		dc	'UT'
 621:	03A1  C2      		db	0c2h
 622:	03A2  4F4BC5  		dc	'OKE'
 623:	03A5  99      		db	099h
 624:	03A6  4FD3    		dc	'OS'
 625:	03A8  11      		db	011h
 626:	03A9  4545CB  		dc	'EEK'
 627:	03AC  17      		db	017h
 628:	03AD  00      		db	0
 629:			;
 630:			; Q..
 631:			;
 632:	03AE          	l03ae:
 633:	03AE  00      		db	0
 634:			;
 635:			; R..
 636:			;
 637:	03AF          	l03af:
 638:	03AF  45545552		dc	'ETURN'
	      CE
 639:	03B4  8E      		db	08eh
 640:	03B5  4541C4  		dc	'EAD'
 641:	03B8  87      		db	087h
 642:	03B9  55CE    		dc	'UN'
 643:	03BB  8A      		db	08ah
 644:	03BC  4553544F		dc	'ESTORE'
	      52C5
 645:	03C2  8C      		db	08ch
 646:	03C3  45CD    		dc	'EM'
 647:	03C5  8F      		db	08fh
 648:	03C6  4553554D		dc	'ESUME'
	      C5
 649:	03CB  A9      		db	0a9h
 650:	03CC  5345D4  		dc	'SET'
 651:	03CF  CA      		db	0cah
 652:	03D0  49474854		dc	'IGHT$'
	      A4
 653:	03D5  02      		db	002h
 654:	03D6  4EC4    		dc	'ND'
 655:	03D8  08      		db	008h
 656:	03D9  454E55CD		dc	'ENUM'
 657:	03DD  AC      		db	0ach
 658:	03DE  455345D4		dc	'ESET'
 659:	03E2  CC      		db	0cch
 660:	03E3  414E444F		dc	'ANDOMIZE'
	      4D495AC5
 661:	03EB  BB      		db	0bbh
 662:	03EC  00      		db	0
 663:			;
 664:			; S..
 665:			;
 666:	03ED          	l03ed:
 667:	03ED  544FD0  		dc	'TOP'
 668:	03F0  90      		db	090h
 669:	03F1  5741D0  		dc	'WAP'
 670:	03F4  A5      		db	0a5h
 671:	03F5  4156C5  		dc	'AVE'
 672:	03F8  CB      		db	0cbh
 673:	03F9  5043A8  		dc	'PC('
 674:	03FC  D4      		db	0d4h
 675:	03FD  5445D0  		dc	'TEP'
 676:	0400  D1      		db	0d1h
 677:	0401  47CE    		dc	'GN'
 678:	0403  04      		db	004h
 679:	0404  51D2    		dc	'QR'
 680:	0406  07      		db	007h
 681:	0407  49CE    		dc	'IN'
 682:	0409  09      		db	009h
 683:	040A  5452A4  		dc	'TR$'
 684:	040D  13      		db	013h
 685:	040E  5452494E		dc	'TRING$'
	      47A4
 686:	0414  D8      		db	0d8h
 687:	0415  50414345		dc	'PACE$'
	      A4
 688:	041A  18      		db	018h
 689:	041B  59535445		dc	'YSTEM'
	      CD
 690:	0420  BD      		db	0bdh
 691:	0421  00      		db	0
 692:			;
 693:			; T..
 694:			;
 695:	0422          	l0422:
 696:	0422  4845CE  		dc	'HEN'
 697:	0425  CF      		db	0cfh
 698:	0426  524FCE  		dc	'RON'
 699:	0429  A3      		db	0a3h
 700:	042A  524F46C6		dc	'ROFF'
 701:	042E  A4      		db	0a4h
 702:	042F  4142A8  		dc	'AB('
 703:	0432  D0      		db	0d0h
 704:	0433  CF      		dc	'O'
 705:	0434  CE      		db	0ceh
 706:	0435  41CE    		dc	'AN'
 707:	0437  0D      		db	00dh
 708:	0438  00      		db	0
 709:			;
 710:			; U..
 711:			;
 712:	0439          	l0439:
 713:	0439  53494EC7		dc	'SING'
 714:	043D  D9      		db	0d9h
 715:	043E  53D2    		dc	'SR'
 716:	0440  D2      		db	0d2h
 717:	0441  00      		db	0
 718:			;
 719:			; V..
 720:			;
 721:	0442          	l0442:
 722:	0442  41CC    		dc	'AL'
 723:	0444  14      		db	014h
 724:	0445  41525054		dc	'ARPTR'
	      D2
 725:	044A  DC      		db	0dch
 726:	044B  00      		db	0
 727:			;
 728:			; W..
 729:			;
 730:	044C          	l044c:
 731:	044C  494454C8		dc	'IDTH'
 732:	0450  A1      		db	0a1h
 733:	0451  4149D4  		dc	'AIT'
 734:	0454  97      		db	097h
 735:	0455  48494CC5		dc	'HILE'
 736:	0459  B4      		db	0b4h
 737:	045A  454EC4  		dc	'END'
 738:	045D  B5      		db	0b5h
 739:	045E  524954C5		dc	'RITE'
 740:	0462  B7      		db	0b7h
 741:	0463  00      		db	0
 742:			;
 743:			; X..
 744:			;
 745:	0464          	l0464:
 746:	0464  4FD2    		dc	'OR'
 747:	0466  F9      		db	0f9h
 748:	0467  00      		db	0
 749:			;
 750:			; Y..
 751:			;
 752:	0468          	l0468:
 753:	0468  00      		db	0
 754:			;
 755:			; Z..
 756:			;
 757:	0469          	l0469:
 758:	0469  00      		db	0
 759:			;
 760:			; Operator table
 761:			;
 762:	046A          	l046a:
 763:	046A  AB      		dc	'+'
 764:	046B  F2      		db		0f2h
 765:	046C  AD      		dc	'-'
 766:	046D  F3      		db		0f3h
 767:	046E  AA      		dc	'*'
 768:	046F  F4      		db		0f4h
 769:	0470  AF      		dc	'/'
 770:	0471  F5      		db		0f5h
 771:	0472  DE      		dc	'^'
 772:	0473  F6      		db		0f6h
 773:	0474  DC      		dc	'\'
 774:	0475  FD      		db		0fdh
 775:	0476  A7      		dc	''''
 776:	0477  DB      		db		0dbh
 777:	0478  BE      		dc	'>'
 778:	0479  EF      		db		0efh
 779:	047A  BD      		dc	'='
 780:	047B  F0      		db		0f0h
 781:	047C  BC      		dc	'<'
 782:	047D  F1      		db		0f1h
 783:	047E  00      		db	0
 784:	047F          	l047f:
 785:	047F  79797C7C		db	79h,79h,7ch,7ch,7fh,50h
	      7F50
 786:	0485  463C3228		db	46h,3ch,32h,28h,7ah,7bh
	      7A7B
 787:	048B          	l048b:
 788:	048B  202A    		dw	l2a20
 789:	048D  0000    		dw	0
 790:	048F  7A29    		dw	_CINT
 791:	0491  3B2A    		dw	vrf.str
 792:	0493  F429    		dw	l29f4
 793:	0495          	l0495:
 794:	0495  262C    		dw	l2c26
 795:	0497  1F2C    		dw	l2c1f
 796:	0499  642D    		dw	l2d64
 797:	049B  442E    		dw	l2e44
 798:	049D  7329    		dw	l2973
 799:	049F          	l049f:
 800:	049F  8825    		dw	l2588
 801:	04A1  8525    		dw	l2585
 802:	04A3  0327    		dw	l2703
 803:	04A5  6927    		dw	l2769
 804:	04A7  0629    		dw	l2906
 805:	04A9          	l04a9:
 806:	04A9  312B    		dw	l2b31
 807:	04AB  252B    		dw	l2b25
 808:	04AD  512B    		dw	l2b51
 809:	04AF  841B    		dw	l1b84
 810:	04B1  3329    		dw	l2933
 811:	04B3          	l04b3:
 812:	04B3  00      		db	null
 813:	04B4  4E455854		db	'NEXT without FOR',null
	      20776974
	      686F7574
	      20464F52
	      00
 814:	04C5  53796E74		db	'Syntax error',null
	      61782065
	      72726F72
	      00
 815:	04D2  52455455		db	'RETURN without GOSUB',null
	      524E2077
	      6974686F
	      75742047
	      4F535542
	      00
 816:	04E7  4F757420		db	'Out of DATA',null
	      6F662044
	      41544100
 817:	04F3  496C6C65		db	'Illegal function call',null
	      67616C20
	      66756E63
	      74696F6E
	      2063616C
	      6C00
 818:	0509          	l0509:
 819:	0509  4F766572		db	'Overflow',null
	      666C6F77
	      00
 820:	0512  4F757420		db	'Out of memory',null
	      6F66206D
	      656D6F72
	      7900
 821:	0520  556E6465		db	'Undefined line number',null
	      66696E65
	      64206C69
	      6E65206E
	      756D6265
	      7200
 822:	0536  53756273		db	'Subscript out of range',null
	      63726970
	      74206F75
	      74206F66
	      2072616E
	      676500
 823:	054D  4475706C		db	'Duplicate Definition',null
	      69636174
	      65204465
	      66696E69
	      74696F6E
	      00
 824:	0562          	l0562:
 825:	0562  44697669		db	'Division by zero',null
	      73696F6E
	      20627920
	      7A65726F
	      00
 826:	0573  496C6C65		db	'Illegal direct',null
	      67616C20
	      64697265
	      637400
 827:	0582  54797065		db	'Type mismatch',null
	      206D6973
	      6D617463
	      6800
 828:	0590  4F757420		db	'Out of string space',null
	      6F662073
	      7472696E
	      67207370
	      61636500
 829:	05A4  53747269		db	'String too long',null
	      6E672074
	      6F6F206C
	      6F6E6700
 830:	05B4  53747269		db	'String formula too complex',null
	      6E672066
	      6F726D75
	      6C612074
	      6F6F2063
	      6F6D706C
	      657800
 831:	05CF  43616E27		db	'Can''t continue',null
	      7420636F
	      6E74696E
	      756500
 832:	05DE  556E6465		db	'Undefined user function',null
	      66696E65
	      64207573
	      65722066
	      756E6374
	      696F6E00
 833:	05F6  4E6F2052		db	'No RESUME',null
	      4553554D
	      4500
 834:	0600  52455355		db	'RESUME without error',null
	      4D452077
	      6974686F
	      75742065
	      72726F72
	      00
 835:	0615  556E7072		db	'Unprintable error',null
	      696E7461
	      626C6520
	      6572726F
	      7200
 836:	0627  4D697373		db	'Missing operand',null
	      696E6720
	      6F706572
	      616E6400
 837:	0637  4C696E65		db	'Line buffer overflow',null
	      20627566
	      66657220
	      6F766572
	      666C6F77
	      00
 838:	064C  3F00    		db	'?',null
 839:	064E  3F00    		db	'?',null
 840:	0650  464F5220		db	'FOR Without NEXT',null
	      57697468
	      6F757420
	      4E455854
	      00
 841:	0661  3F00    		db	'?',null
 842:	0663  3F00    		db	'?',null
 843:	0665  5748494C		db	'WHILE without WEND',null
	      45207769
	      74686F75
	      74205745
	      4E4400
 844:	0678  57454E44		db	'WEND without WHILE',null
	      20776974
	      686F7574
	      20574849
	      4C4500
 845:			;
 846:			; 50 .. 67 -> mapped to 31 .. 48
 847:			;
 848:	068B  4649454C		db	'FIELD overflow',null
	      44206F76
	      6572666C
	      6F7700
 849:	069A  496E7465		db	'Internal error',null
	      726E616C
	      20657272
	      6F7200
 850:	06A9  42616420		db	'Bad file number',null
	      66696C65
	      206E756D
	      62657200
 851:	06B9  46696C65		db	'File not found',null
	      206E6F74
	      20666F75
	      6E6400
 852:	06C8  42616420		db	'Bad file mode',null
	      66696C65
	      206D6F64
	      6500
 853:	06D6  46696C65		db	'File already open',null
	      20616C72
	      65616479
	      206F7065
	      6E00
 854:	06E8  3F00    		db	'?',null
 855:	06EA  4469736B		db	'Disk I/O error',null
	      20492F4F
	      20657272
	      6F7200
 856:	06F9  46696C65		db	'File already exists',null
	      20616C72
	      65616479
	      20657869
	      73747300
 857:	070D  3F00    		db	'?',null
 858:	070F  3F00    		db	'?',null
 859:	0711  4469736B		db	'Disk full',null
	      2066756C
	      6C00
 860:	071B  496E7075		db	'Input past end',null
	      74207061
	      73742065
	      6E6400
 861:	072A  42616420		db	'Bad record number',null
	      7265636F
	      7264206E
	      756D6265
	      7200
 862:	073C  42616420		db	'Bad file name',null
	      66696C65
	      206E616D
	      6500
 863:	074A  3F00    		db	'?',null
 864:	074C  44697265		db	'Direct statement in file',null
	      63742073
	      74617465
	      6D656E74
	      20696E20
	      66696C65
	      00
 865:	0765  546F6F20		db	'Too many files',null
	      6D616E79
	      2066696C
	      657300
 866:	0774          	l0774:
 867:	0774  18141814		db	18h,14h,18h,14h,18h,14h,18h
	      181418
 868:	077B  14181418		db	14h,18h,14h,18h,14h,18h,14h
	      141814
 869:	0782  18141814		db	18h,14h,18h,14h,18h,14h
	      1814
 870:	0788          	l0788:
 871:	0788  01      		db	1
 872:	0789          	l0789:
 873:	0789  00      		db	0
 874:	078A          	err.num:
 875:	078A  0000    		dw	0
 876:	078C          	colLST:
 877:	078C  00      		db	0		; Printer column
 878:	078D          	iodev:
 879:	078D  00      		db	0		; Character device (0 is console)
 880:	078E          	l078e:
 881:	078E  70      		db	70h
 882:	078F          	l078f:
 883:	078F  84      		db	84h
 884:	0790          	l0790:
 885:	0790  50      		db	80
 886:	0791          	l0791:
 887:	0791  38      		db	56
 888:	0792          	rub.flg:
 889:	0792  00      		db	0
 890:	0793          	_brk:
 891:	0793  00      		db	0
 892:	0794          	FP:
 893:	0794  0000    		dw	0		; Current file pointer
 894:	0796          	heap:
 895:	0796  A360    		dw	l60a3
 896:	0798          	dir.mode:
 897:	0798  FEFF    		dw	lfffe
 898:	079A          	prg.base:
 899:	079A  4060    		dw	l6040
 900:	079C          	l079c:
 901:	079C  0905    		dw	l0509
 902:	079E          	l079e:
 903:	079E  00      		db	0
 904:	079F          	opnsave:
 905:	079F  00      		db	0
 906:	07A0          	l07a0:
 907:	07A0  0000    		dw	0
 908:	07A2          	F.ptr:
 909:	07A2  0000    		dw	0
 910:	07A4          	F.arr:
 911:	07A4 .. 07C3 00		ds	2*16		; File array
 912:	07C4          	opnfiles:
 913:	07C4  00      		db	0		; Max open files (/F)
 914:	07C5          	l07c5:
 915:	07C5  00      		db	0
 916:	07C6          	l07c6:
 917:	07C6 .. 07EB 00		ds	38
 918:	07EC          	l07ec:
 919:	07EC  0000    		dw	0
 920:	07EE          	l07ee:
 921:	07EE .. 07FD 00		ds	16
 922:	07FE          	@@FCB:
 923:	07FE .. 081E 00		ds	33
 924:	081F          	OSvers:
 925:	081F  00      		db	0	; OS version (0 is not CP/M 2.x or 3.x)
 926:	0820          	f_rd:
 927:	0820  00      		db	0	; File read function
 928:	0821          	f_wr:
 929:	0821  00      		db	0	; File write function
 930:	0822          	l0822:
 931:	0822  3A      		db	':'
 932:	0823          	@TOKEN:
 933:	0823 .. 0960 00		ds	TOKLEN+3
 934:	0961          	l0961:
 935:	0961  2C      		db	','
 936:	0962          	$LINE:
 937:	0962 .. 0A63 00		ds	258
 938:	0A64          	l0a64:
 939:	0A64  00      		db	0
 940:	0A65          	colCON:
 941:	0A65  00      		db	0		; Console column
 942:	0A66          	l0a66:
 943:	0A66  00      		db	0
 944:	0A67          	$ARGLEN:
 945:	0A67  00      		db	0
 946:	0A68          	l0a68:
 947:	0A68  00      		db	0
 948:	0A69          	l0a69:
 949:	0A69  00      		db	0
 950:	0A6A          	l0a6a:
 951:	0A6A  0000    		dw	0
 952:	0A6C          	l0a6c:
 953:	0A6C  00      		db	0
 954:	0A6D          	l0a6d:
 955:	0A6D  00      		db	0
 956:	0A6E          	l0a6e:
 957:	0A6E  0000    		dw	0
 958:	0A70          	l0a70:
 959:	0A70 .. 0A75 00		ds	6
 960:	0A76          	himem:
 961:	0A76  0000    		dw	0		; Hi memory (/M)
 962:	0A78          	STR.ptr:
 963:	0A78  0000    		dw	0
 964:	0A7A          	STR.arr:
 965:	0A7A .. 0A9A 00		ds	11*3
 966:	0A9B          	mem.top:
 967:	0A9B  0000    		dw	0
 968:	0A9D          	l0a9d:
 969:	0A9D  0000    		dw	0
 970:	0A9F          	_f.$$:
 971:	0A9F  0000    		dw	0
 972:	0AA1          	l0aa1:
 973:	0AA1  0000    		dw	0
 974:	0AA3          	direct_1:
 975:	0AA3  0000    		dw	0
 976:	0AA5          	l0aa5:
 977:	0AA5  00      		db	0
 978:	0AA6          	l0aa6:
 979:	0AA6  00      		db	0
 980:	0AA7          	@@ptr:
 981:	0AA7  0000    		dw	0
 982:	0AA9          	l0aa9:
 983:	0AA9  00      		db	0
 984:	0AAA          	auto.mode:
 985:	0AAA  00      		db	0
 986:	0AAB          	AUTO.inc:
 987:	0AAB  0000    		dw	0
 988:	0AAD          	AUTO.line:
 989:	0AAD  0000    		dw	0
 990:	0AAF          	l0aaf:
 991:	0AAF  0000    		dw	0
 992:	0AB1          	curstk:
 993:	0AB1  0000    		dw	0
 994:	0AB3          	direct_2:
 995:	0AB3  0000    		dw	0
 996:	0AB5          	l0ab5:
 997:	0AB5  0000    		dw	0
 998:	0AB7          	l0ab7:
 999:	0AB7  0000    		dw	0
1000:	0AB9          	l0ab9:
1001:	0AB9  0000    		dw	0
1002:	0ABB          	l0abb:
1003:	0ABB  00      		db	0
1004:	0ABC          	l0abc:
1005:	0ABC  0000    		dw	0
1006:	0ABE          	direct_4:
1007:	0ABE  0000    		dw	0
1008:	0AC0          	cont.mode:
1009:	0AC0  0000    		dw	0
1010:	0AC2          	prg.top:
1011:	0AC2  0000    		dw	0
1012:	0AC4          	l0ac4:
1013:	0AC4  0000    		dw	0
1014:	0AC6          	l0ac6:
1015:	0AC6  0000    		dw	0
1016:	0AC8          	DATA.ptr:
1017:	0AC8  0000    		dw	0
1018:	0ACA          	l0aca:
1019:	0ACA .. 0AE3 00		ds	26
1020:	0AE4          	l0ae4:
1021:	0AE4  0000    		dw	0
1022:	0AE6          	l0ae6:
1023:	0AE6  0000    		dw	0
1024:	0AE8          	l0ae8:
1025:	0AE8 .. 0B4B 00		ds	100
1026:	0B4C          	l0b4c:
1027:	0B4C  0000    		dw	0
1028:	0B4E          	l0b4e:
1029:	0B4E  0000    		dw	0
1030:	0B50          	l0b50:
1031:	0B50 .. 0BB3 00		ds	100
1032:	0BB4          	l0bb4:
1033:	0BB4  00      		db	0
1034:	0BB5          	l0bb5:
1035:	0BB5  00      		db	0
1036:	0BB6          	l0bb6:
1037:	0BB6  00      		db	0
1038:	0BB7          	l0bb7:
1039:	0BB7  00      		db	0
1040:	0BB8          	l0bb8:
1041:	0BB8  0000    		dw	0
1042:	0BBA          	l0bba:
1043:	0BBA  0000    		dw	0
1044:	0BBC          	l0bbc:
1045:	0BBC  00      		db	0
1046:	0BBD          	l0bbd:
1047:	0BBD  0000    		dw	0
1048:	0BBF          	l0bbf:
1049:	0BBF  00      		db	0
1050:	0BC0          	l0bc0:
1051:	0BC0 .. 0BC3 00		ds	4
1052:	0BC4          	direct_3:
1053:	0BC4  0000    		dw	0
1054:	0BC6          	l0bc6:
1055:	0BC6  00      		db	0
1056:	0BC7          	l0bc7:
1057:	0BC7 .. 0BE5 00		ds	31
1058:	0BE6          	l0be6:
1059:	0BE6  00      		db	0
1060:	0BE7          	l0be7:
1061:	0BE7  00      		db	0
1062:	0BE8          	l0be8:
1063:	0BE8  0000    		dw	0
1064:	0BEA          	recsiz:
1065:	0BEA  0000    		dw	0		; File record size (/S)
1066:	0BEC          	_prot:
1067:	0BEC  00      		db	0
1068:	0BED          	l0bed:
1069:	0BED  00      		db	0
1070:	0BEE          	l0bee:
1071:	0BEE  00      		db	0
1072:	0BEF          	l0bef:
1073:	0BEF  0000    		dw	0
1074:	0BF1          	l0bf1:
1075:	0BF1  0000    		dw	0
1076:	0BF3          	l0bf3:
1077:	0BF3  00      		db	0
1078:	0BF4          	l0bf4:
1079:	0BF4  0000    		dw	0
1080:	0BF6          	l0bf6:
1081:	0BF6 .. 0BFD 00		ds	8
1082:	0BFE          	trcflg:
1083:	0BFE  00      		db	0		; TRON/TROFF (0 is TROFF)
1084:	0BFF          	l0bff:
1085:	0BFF  00      		db	0
1086:	0C00          	$$ARG:
1087:	0C00 .. 0C07 00		ds	8
1088:	0C08          	l0c08:
1089:	0C08  00      		db	0
1090:	0C09          	l0c09:
1091:	0C09  00      		db	0
1092:	0C0A          	l0c0a:
1093:	0C0A  00      		db	0
1094:	0C0B          	l0c0b:
1095:	0C0B  00      		db	0
1096:	0C0C          	l0c0c:
1097:	0C0C  00      		db	0
1098:	0C0D          	l0c0d:
1099:	0C0D .. 0C12 00		ds	6
1100:	0C13          	l0c13:
1101:	0C13  00      		db	0
1102:	0C14          	l0c14:
1103:	0C14  00      		db	0
1104:	0C15          	l0c15:
1105:	0C15  00      		db	0
1106:	0C16          	l0c16:
1107:	0C16 .. 0C2F 00		ds	26
1108:	0C30          	l0c30:
1109:	0C30 .. 0C35 00		ds	6
1110:	0C36          	l0c36:
1111:	0C36  00      		db	0
1112:	0C37          	l0c37:
1113:	0C37 .. 0C3F 00		ds	9
1114:	0C40          	l0c40:
1115:	0C40  20696E20		db	' in '
1116:	0C44          	l0c44:
1117:	0C44  00      		db	0
1118:	0C45          	l0c45:
1119:	0C45  4F6B0D0A		db	'Ok',cr,lf,null
	      00
1120:	0C4A          	l0c4a:
1121:	0C4A  42726561		db	'Break',null
	      6B00
1122:			;
1123:			; Find FOR or WHILE - Zero set indicates either found
1124:			;
1125:	0C50          	l0c50:
1126:	0C50  210400  		ld	hl,2*2
1127:	0C53  39      		add	hl,sp		; Get stack pointer base
1128:	0C54          	l0c54:
1129:	0C54  7E      		ld	a,(hl)		; Get token
1130:	0C55  23      		inc	hl
1131:	0C56  FEB4    		cp	0b4h		; Test WHILE
1132:	0C58  C2620C  		jp	nz,l0c62
1133:	0C5B  010600  		ld	bc,2*3
1134:	0C5E  09      		add	hl,bc		; .. fix pointer
1135:	0C5F  C3540C  		jp	l0c54		; .. try next
1136:	0C62          	l0c62:
1137:	0C62  FE82    		cp	082h		; Test FOR
1138:	0C64  C0      		ret	nz		; .. nope
1139:	0C65  4E      		ld	c,(hl)		; Fetch ???
1140:	0C66  23      		inc	hl
1141:	0C67  46      		ld	b,(hl)
1142:	0C68  23      		inc	hl
1143:	0C69  E5      		push	hl
1144:	0C6A  60      		ld	h,b
1145:	0C6B  69      		ld	l,c
1146:	0C6C  7A      		ld	a,d		; Test zero
1147:	0C6D  B3      		or	e
1148:	0C6E  EB      		ex	de,hl
1149:	0C6F  CA760C  		jp	z,l0c76		; .. yeap, skip
1150:	0C72  EB      		ex	de,hl
1151:	0C73  CDCD43  		call	cp.r		; Compare HL:DE
1152:	0C76          	l0c76:
1153:	0C76  011000  		ld	bc,2*8
1154:	0C79  E1      		pop	hl		; Get back pointer
1155:	0C7A  C8      		ret	z		; .. end
1156:	0C7B  09      		add	hl,bc		; .. bump and fix next
1157:	0C7C  C3540C  		jp	l0c54
1158:			;
1159:			; ENTRY	Reg HL holds current stack pointer
1160:			;
1161:	0C7F          	l0c7f:
1162:	0C7F  01860D  		ld	bc,l0d86	; Load execution address
1163:	0C82  C3FC0C  		jp	l0cfc		; .. reset error environment
1164:			;
1165:			;
1166:			;
1167:	0C85          	l0c85:
1168:	0C85  2A9807  		ld	hl,(dir.mode)	; Get direct mode
1169:	0C88  7C      		ld	a,h
1170:	0C89  A5      		and	l
1171:	0C8A  3C      		inc	a
1172:	0C8B  CA970C  		jp	z,l0c97		; .. -1 is valid direct
1173:	0C8E  3ABB0A  		ld	a,(l0abb)
1174:	0C91  B7      		or	a
1175:	0C92  1E13    		ld	e,19		; No RESUME
1176:	0C94  C2E30C  		jp	nz,_error
1177:	0C97          	l0c97:
1178:	0C97  C31944  		jp	l4419
1179:			;
1180:			; Disk full
1181:			;
1182:	0C9A          	l0c9a:
1183:	0C9A  1E3D    		ld	e,61
1184:	0C9C          		_LD.BC
1185:			;
1186:			; Disk I/O error
1187:			;
1188:	0C9D          	l0c9d:
1189:	0C9D  1E39    		ld	e,57
1190:	0C9F          		_LD.BC
1191:			;
1192:			; Bad file mode
1193:			;
1194:	0CA0          	l0ca0:
1195:	0CA0  1E36    		ld	e,54
1196:	0CA2          		_LD.BC
1197:			;
1198:			; File not found
1199:			;
1200:	0CA3          	l0ca3:
1201:	0CA3  1E35    		ld	e,53
1202:	0CA5          		_LD.BC
1203:			;
1204:			; Bad file number
1205:			;
1206:	0CA6          	l0ca6:
1207:	0CA6  1E34    		ld	e,52
1208:	0CA8          		_LD.BC
1209:			;
1210:			; Internal error
1211:			;
1212:	0CA9          	l0ca9:
1213:	0CA9  1E33    		ld	e,51
1214:	0CAB          		_LD.BC
1215:			;
1216:			; Input past end
1217:			;
1218:	0CAC          	l0cac:
1219:	0CAC  1E3E    		ld	e,62
1220:	0CAE          		_LD.BC
1221:			;
1222:			; File already open
1223:			;
1224:	0CAF          	l0caf:
1225:	0CAF  1E37    		ld	e,55
1226:	0CB1          		_LD.BC
1227:			;
1228:			; Bad file name
1229:			;
1230:	0CB2          	l0cb2:
1231:	0CB2  1E40    		ld	e,64
1232:	0CB4          		_LD.BC
1233:			;
1234:			; Bad record number
1235:			;
1236:	0CB5          	l0cb5:
1237:	0CB5  1E3F    		ld	e,63
1238:	0CB7          		_LD.BC
1239:			;
1240:			; Field overflow
1241:			;
1242:	0CB8          	l0cb8:
1243:	0CB8  1E32    		ld	e,50
1244:	0CBA          		_LD.BC
1245:			;
1246:			; Too many files
1247:			;
1248:	0CBB          	l0cbb:
1249:	0CBB  1E43    		ld	e,67
1250:	0CBD          		_LD.BC
1251:			;
1252:			; File already exists
1253:			;
1254:	0CBE          	l0cbe:
1255:	0CBE  1E3A    		ld	e,58
1256:	0CC0  C3E30C  		jp	_error
1257:			;
1258:			;
1259:			;
1260:	0CC3          	l0cc3:
1261:	0CC3  2AA30A  		ld	hl,(direct_1)	; Get direct state
1262:	0CC6  229807  		ld	(dir.mode),hl	; .. set it
1263:			;
1264:			; Statement : 0x9b : ??
1265:			;             0x9c : ??
1266:			;
1267:			; Syntax error
1268:			;
1269:	0CC9          	l0cc9:
1270:	0CC9  1E02    		ld	e,2
1271:	0CCB          		_LD.BC
1272:			;
1273:			; Division by zero
1274:			;
1275:	0CCC          	l0ccc:
1276:	0CCC  1E0B    		ld	e,11
1277:	0CCE          		_LD.BC
1278:			;
1279:			; NEXT without FOR
1280:			;
1281:	0CCF          	l0ccf:
1282:	0CCF  1E01    		ld	e,1
1283:	0CD1          		_LD.BC
1284:			;
1285:			; Redimensioned array
1286:			;
1287:	0CD2          	l0cd2:
1288:	0CD2  1E0A    		ld	e,10
1289:	0CD4          		_LD.BC
1290:			;
1291:			; Undefined user function
1292:			;
1293:	0CD5          	l0cd5:
1294:	0CD5  1E12    		ld	e,18
1295:	0CD7          		_LD.BC
1296:			;
1297:			; RESUME without error
1298:			;
1299:	0CD8          	l0cd8:
1300:	0CD8  1E14    		ld	e,20
1301:	0CDA          		_LD.BC
1302:			;
1303:			; Overflow
1304:			;
1305:	0CDB          	l0cdb:
1306:	0CDB  1E06    		ld	e,6
1307:	0CDD          		_LD.BC
1308:			;
1309:			; Missing operand
1310:			;
1311:	0CDE          	l0cde:
1312:	0CDE  1E16    		ld	e,22
1313:	0CE0          		_LD.BC
1314:			;
1315:			; Type mismatch
1316:			;
1317:	0CE1          	l0ce1:
1318:	0CE1  1E0D    		ld	e,13
1319:			;
1320:			; Process error - Error # in reg E
1321:			;
1322:	0CE3          	_error:
1323:	0CE3  2A9807  		ld	hl,(dir.mode)	; Get direct mode
1324:	0CE6  22B30A  		ld	(direct_2),hl	; .. save
1325:	0CE9  AF      		xor	a
1326:	0CEA  32ED0B  		ld	(l0bed),a
1327:	0CED  32F30B  		ld	(l0bf3),a
1328:	0CF0  7C      		ld	a,h
1329:	0CF1  A5      		and	l
1330:	0CF2  3C      		inc	a
1331:	0CF3  CAF90C  		jp	z,l0cf9
1332:	0CF6  22B50A  		ld	(l0ab5),hl
1333:	0CF9          	l0cf9:
1334:	0CF9  01020D  		ld	bc,l0d02	; Get return address
1335:	0CFC          	l0cfc:
1336:	0CFC  2AB10A  		ld	hl,(curstk)	; .. get stack
1337:	0CFF  C3A243  		jp	l43a2		; .. reset error environment
1338:			;
1339:			; Error processing cont'd
1340:			;
1341:	0D02          	l0d02:
1342:	0D02  C1      		pop	bc
1343:	0D03  7B      		ld	a,e		; Get error number
1344:	0D04  4B      		ld	c,e
1345:	0D05  328A07  		ld	(err.num),a	; .. save
1346:	0D08  2AAF0A  		ld	hl,(l0aaf)
1347:	0D0B  22B70A  		ld	(l0ab7),hl
1348:	0D0E  EB      		ex	de,hl
1349:	0D0F  2AB30A  		ld	hl,(direct_2)	; Get direct mode
1350:	0D12  7C      		ld	a,h
1351:	0D13  A5      		and	l
1352:	0D14  3C      		inc	a
1353:	0D15  CA1F0D  		jp	z,l0d1f		; .. -1 is direct
1354:	0D18  22BE0A  		ld	(direct_4),hl	; .. save
1355:	0D1B  EB      		ex	de,hl
1356:	0D1C  22C00A  		ld	(cont.mode),hl	; .. set CONT state
1357:	0D1F          	l0d1f:
1358:	0D1F  2AB90A  		ld	hl,(l0ab9)
1359:	0D22  7C      		ld	a,h
1360:	0D23  B5      		or	l
1361:	0D24  EB      		ex	de,hl
1362:	0D25  21BB0A  		ld	hl,l0abb
1363:	0D28  CA340D  		jp	z,l0d34
1364:	0D2B  A6      		and	(hl)
1365:	0D2C  C2340D  		jp	nz,l0d34
1366:	0D2F  35      		dec	(hl)
1367:	0D30  EB      		ex	de,hl
1368:	0D31  C3C012  		jp	l12c0
1369:	0D34          	l0d34:
1370:	0D34  AF      		xor	a
1371:	0D35  77      		ld	(hl),a
1372:	0D36  59      		ld	e,c
1373:	0D37  329307  		ld	(_brk),a	; Set echo mode
1374:	0D3A  CD1442  		call	cls.CON		; Clear console
1375:	0D3D  21B304  		ld	hl,l04b3	; Init message pointer
1376:	0D40  7B      		ld	a,e		; Get error number
1377:	0D41  FE44    		cp	67+1		; Test range
1378:	0D43  D2500D  		jp	nc,l0d50
1379:	0D46  FE32    		cp	50		; Test I/O error
1380:	0D48  D2520D  		jp	nc,l0d52	; .. yeap
1381:	0D4B  FE1F    		cp	30+1		; Test within standard
1382:	0D4D  DA550D  		jp	c,l0d55		; .. yeap
1383:	0D50          	l0d50:
1384:	0D50  3E28    		ld	a,21+50-30-1	; Map for unprintable error
1385:	0D52          	l0d52:
1386:	0D52  D613    		sub	50-30-1		; .. gap in 30-50
1387:	0D54  5F      		ld	e,a		; Set count
1388:	0D55          	l0d55:
1389:	0D55  CDEE14  		call	l14ee		; Skip message
1390:	0D58  23      		inc	hl
1391:	0D59  1D      		dec	e
1392:	0D5A  C2550D  		jp	nz,l0d55	; .. till found
1393:	0D5D  E5      		push	hl
1394:	0D5E  2AB30A  		ld	hl,(direct_2)	; Get direct mode
1395:	0D61  E3      		ex	(sp),hl		; Get back message
1396:	0D62          	l0d62:
1397:	0D62  7E      		ld	a,(hl)
1398:	0D63  FE3F    		cp	'?'		; Test defined
1399:	0D65  C26F0D  		jp	nz,l0d6f	; .. nope
1400:	0D68  E1      		pop	hl
1401:	0D69  21B304  		ld	hl,l04b3	; .. reset pointer
1402:	0D6C  C3500D  		jp	l0d50		; .. tell unprintable error
1403:	0D6F          	l0d6f:
1404:	0D6F  CD2347  		call	l4723
1405:	0D72  E1      		pop	hl
1406:	0D73  11FEFF  		ld	de,lfffe
1407:	0D76  CDCD43  		call	cp.r
1408:	0D79  CC2142  		call	z,fnl		; HL = DE, new line
1409:	0D7C  CABB59  		jp	z,l59bb
1410:	0D7F  7C      		ld	a,h
1411:	0D80  A5      		and	l
1412:	0D81  3C      		inc	a
1413:	0D82  C41231  		call	nz,l3112
1414:	0D85          		_LD.A
1415:			;
1416:			;
1417:			;
1418:	0D86          	l0d86:
1419:	0D86  C1      		pop	bc
1420:			;
1421:			; (Re)start BASIC interpreter
1422:			;
1423:	0D87          	l0d87::
1424:	0D87  CD4441  		call	cls.dev_io	; Clear I/O
1425:	0D8A  AF      		xor	a
1426:	0D8B  329307  		ld	(_brk),a	; Set echo mode
1427:	0D8E  CD4D53  		call	l534d
1428:	0D91  CD1442  		call	cls.CON		; Clear console
1429:	0D94  21450C  		ld	hl,l0c45
1430:	0D97  CD0000  		call	$-$		; Tell ok
1431:	0D98          	@@MSG	equ	$-2
1432:	0D9A  3A8A07  		ld	a,(err.num)	; Get error number
1433:	0D9D  D602    		sub	2		; Test syntax error
1434:	0D9F  CCD53C  		call	z,l3cd5		; .. yeap
1435:	0DA2          	l0da2:
1436:	0DA2  21FFFF  		ld	hl,lffff
1437:	0DA5  229807  		ld	(dir.mode),hl	; Set direct mode
1438:	0DA8  3AAA0A  		ld	a,(auto.mode)	; Get AUTO mode
1439:	0DAB  B7      		or	a
1440:	0DAC  CAF90D  		jp	z,l0df9		; .. no AUTO selected
1441:	0DAF  2AAB0A  		ld	hl,(AUTO.inc)	; Get AUTO increment
1442:	0DB2  E5      		push	hl
1443:	0DB3  CD1A31  		call	l311a
1444:	0DB6  D1      		pop	de
1445:	0DB7  D5      		push	de
1446:	0DB8  CDF80E  		call	l0ef8
1447:	0DBB  3E2A    		ld	a,'*'
1448:	0DBD  DAC20D  		jp	c,l0dc2
1449:	0DC0  3E20    		ld	a,' '
1450:	0DC2          	l0dc2:
1451:	0DC2  CDD640  		call	putchar		; Print blank or '*'
1452:	0DC5  CD284B  		call	gets		; Input a line
1453:	0DC8  D1      		pop	de
1454:	0DC9  D2DA0D  		jp	nc,l0dda	; .. ok
1455:	0DCC  AF      		xor	a
1456:	0DCD  32AA0A  		ld	(auto.mode),a	; .. clear AUTO mode
1457:	0DD0  C3870D  		jp	l0d87
1458:	0DD3          	l0dd3:
1459:	0DD3  AF      		xor	a
1460:	0DD4  32AA0A  		ld	(auto.mode),a	; .. clear AUTO mode
1461:	0DD7  C3EF0D  		jp	l0def
1462:	0DDA          	l0dda:
1463:	0DDA  2AAD0A  		ld	hl,(AUTO.line)	; Get AUTO line
1464:	0DDD  19      		add	hl,de		; Add increment
1465:	0DDE  DAD30D  		jp	c,l0dd3		; .. out of range
1466:	0DE1  D5      		push	de
1467:	0DE2  11F9FF  		ld	de,lfff9	; Get max line
1468:	0DE5  CDCD43  		call	cp.r		; Compare HL:DE
1469:	0DE8  D1      		pop	de
1470:	0DE9  D2D30D  		jp	nc,l0dd3	; HL >= DE
1471:	0DEC  22AB0A  		ld	(AUTO.inc),hl	; .. set increment
1472:	0DEF          	l0def:
1473:	0DEF  3A6209  		ld	a,($LINE)	; Test any in line
1474:	0DF2  B7      		or	a
1475:	0DF3  CAA20D  		jp	z,l0da2		; .. nope
1476:	0DF6  C3E23E  		jp	l3ee2
1477:	0DF9          	l0df9::
1478:	0DF9  CD284B  		call	gets		; Input a line
1479:	0DFC  DAA20D  		jp	c,l0da2		; .. end of file
1480:	0DFF  CD0513  		call	get.tok		; Get from line
1481:	0E02  3C      		inc	a		; Test any character here
1482:	0E03  3D      		dec	a
1483:	0E04  CAA20D  		jp	z,l0da2		; .. nope
1484:	0E07  F5      		push	af
1485:	0E08  CD2814  		call	l1428
1486:	0E0B  CDAC11  		call	trlskip		; Skip trailing blanks
1487:	0E0E  7E      		ld	a,(hl)		; .. get character
1488:	0E0F  FE20    		cp	' '		; Test blank
1489:	0E11  CCBE28  		call	z,inc.hl	; .. yeap, skip it
1490:	0E14          	l0e14:
1491:	0E14  D5      		push	de
1492:	0E15  CD180F  		call	cp.token	; Copy token line
1493:	0E18  D1      		pop	de
1494:	0E19  F1      		pop	af
1495:	0E1A  22AF0A  		ld	(l0aaf),hl	; Init buffer
1496:	0E1D  D28A53  		jp	nc,l538a
1497:	0E20  D5      		push	de
1498:	0E21  C5      		push	bc
1499:	0E22  CD655D  		call	l5d65
1500:	0E25  CD0513  		call	get.tok
1501:	0E28  B7      		or	a
1502:	0E29  F5      		push	af
1503:	0E2A  EB      		ex	de,hl
1504:	0E2B  22B50A  		ld	(l0ab5),hl
1505:	0E2E  EB      		ex	de,hl
1506:	0E2F  CDF80E  		call	l0ef8
1507:	0E32  DA3B0E  		jp	c,l0e3b
1508:	0E35  F1      		pop	af
1509:	0E36  F5      		push	af
1510:	0E37  CACC14  		jp	z,l14cc
1511:	0E3A  B7      		or	a
1512:	0E3B          	l0e3b:
1513:	0E3B  C5      		push	bc
1514:	0E3C  F5      		push	af
1515:	0E3D  E5      		push	hl
1516:	0E3E  CD3524  		call	l2435
1517:	0E41  E1      		pop	hl
1518:	0E42  F1      		pop	af
1519:	0E43  C1      		pop	bc
1520:	0E44  C5      		push	bc
1521:	0E45  DCA222  		call	c,l22a2
1522:	0E48  D1      		pop	de
1523:	0E49  F1      		pop	af
1524:	0E4A  D5      		push	de
1525:	0E4B  CA870E  		jp	z,l0e87
1526:	0E4E  D1      		pop	de
1527:	0E4F  3AF30B  		ld	a,(l0bf3)
1528:	0E52  B7      		or	a
1529:	0E53  C25C0E  		jp	nz,l0e5c
1530:	0E56  2A760A  		ld	hl,(himem)	; Get high memory
1531:	0E59  229B0A  		ld	(mem.top),hl	; .. save for top
1532:	0E5C          	l0e5c:
1533:	0E5C  2AC20A  		ld	hl,(prg.top)	; Get top of program
1534:	0E5F  E3      		ex	(sp),hl
1535:	0E60  C1      		pop	bc
1536:	0E61  E5      		push	hl
1537:	0E62  09      		add	hl,bc
1538:	0E63  E5      		push	hl
1539:	0E64  CDB642  		call	l42b6
1540:	0E67  E1      		pop	hl
1541:	0E68  22C20A  		ld	(prg.top),hl	; .. save new top
1542:	0E6B  EB      		ex	de,hl
1543:	0E6C  74      		ld	(hl),h
1544:	0E6D  C1      		pop	bc
1545:	0E6E  D1      		pop	de
1546:	0E6F  E5      		push	hl
1547:	0E70  23      		inc	hl
1548:	0E71  23      		inc	hl
1549:	0E72  73      		ld	(hl),e
1550:	0E73  23      		inc	hl
1551:	0E74  72      		ld	(hl),d
1552:	0E75  23      		inc	hl
1553:	0E76  112308  		ld	de,@TOKEN	; Load token buffer
1554:	0E79  0B      		dec	bc		; .. fix length
1555:	0E7A  0B      		dec	bc
1556:	0E7B  0B      		dec	bc
1557:	0E7C  0B      		dec	bc
1558:	0E7D          	l0e7d:
1559:	0E7D  1A      		ld	a,(de)		; Unpack token
1560:	0E7E  77      		ld	(hl),a
1561:	0E7F  23      		inc	hl
1562:	0E80  13      		inc	de
1563:	0E81  0B      		dec	bc
1564:	0E82  79      		ld	a,c
1565:	0E83  B0      		or	b
1566:	0E84  C27D0E  		jp	nz,l0e7d
1567:	0E87          	l0e87:
1568:	0E87  D1      		pop	de
1569:	0E88  CDAF0E  		call	l0eaf
1570:	0E8B  218000  		ld	hl,l0080
1571:	0E8E  3600    		ld	(hl),0
1572:	0E90  22A407  		ld	(F.arr),hl	; .. save into file array
1573:	0E93  2A9407  		ld	hl,(FP)		; Get file pointer
1574:	0E96  22BC0A  		ld	(l0abc),hl
1575:	0E99  CD3743  		call	l4337
1576:	0E9C  2AA207  		ld	hl,(F.ptr)	; Get base file pointer
1577:	0E9F  22A407  		ld	(F.arr),hl	; .. into array
1578:	0EA2  2ABC0A  		ld	hl,(l0abc)
1579:	0EA5  229407  		ld	(FP),hl		; .. reset file pointer
1580:	0EA8  C3A20D  		jp	l0da2
1581:	0EAB          	l0eab:
1582:	0EAB  2A9A07  		ld	hl,(prg.base)	; Get base of program
1583:	0EAE  EB      		ex	de,hl
1584:	0EAF          	l0eaf:
1585:	0EAF  62      		ld	h,d
1586:	0EB0  6B      		ld	l,e
1587:	0EB1  7E      		ld	a,(hl)
1588:	0EB2  23      		inc	hl
1589:	0EB3  B6      		or	(hl)
1590:	0EB4  C8      		ret	z
1591:	0EB5  23      		inc	hl
1592:	0EB6  23      		inc	hl
1593:	0EB7          	l0eb7:
1594:	0EB7  23      		inc	hl
1595:	0EB8  7E      		ld	a,(hl)
1596:	0EB9          	l0eb9:
1597:	0EB9  B7      		or	a
1598:	0EBA  CAD00E  		jp	z,l0ed0
1599:	0EBD  FE20    		cp	' '
1600:	0EBF  D2B70E  		jp	nc,l0eb7
1601:	0EC2  FE0B    		cp	lf+1
1602:	0EC4  DAB70E  		jp	c,l0eb7
1603:	0EC7  CD0613  		call	l1306
1604:	0ECA  CD0513  		call	get.tok
1605:	0ECD  C3B90E  		jp	l0eb9
1606:	0ED0          	l0ed0:
1607:	0ED0  23      		inc	hl
1608:	0ED1  EB      		ex	de,hl
1609:	0ED2  73      		ld	(hl),e
1610:	0ED3  23      		inc	hl
1611:	0ED4  72      		ld	(hl),d
1612:	0ED5  C3AF0E  		jp	l0eaf
1613:	0ED8          	l0ed8:
1614:	0ED8  110000  		ld	de,l0000
1615:	0EDB  D5      		push	de
1616:	0EDC  CAEB0E  		jp	z,l0eeb
1617:	0EDF  D1      		pop	de
1618:	0EE0  CD1D14  		call	l141d
1619:	0EE3  D5      		push	de
1620:	0EE4  CAF40E  		jp	z,l0ef4
1621:	0EE7  CDD343  		call	ilcmp
1622:	0EEA  F3      		db	0f3h
1623:	0EEB          	l0eeb:
1624:	0EEB  11FAFF  		ld	de,lfffa
1625:	0EEE  C41D14  		call	nz,l141d
1626:	0EF1  C2C90C  		jp	nz,l0cc9
1627:	0EF4          	l0ef4:
1628:	0EF4  EB      		ex	de,hl
1629:	0EF5  D1      		pop	de
1630:	0EF6          	l0ef6:
1631:	0EF6  E3      		ex	(sp),hl
1632:	0EF7  E5      		push	hl
1633:	0EF8          	l0ef8:
1634:	0EF8  2A9A07  		ld	hl,(prg.base)	; Get base of program
1635:	0EFB          	l0efb:
1636:	0EFB  44      		ld	b,h
1637:	0EFC  4D      		ld	c,l
1638:	0EFD  7E      		ld	a,(hl)
1639:	0EFE  23      		inc	hl
1640:	0EFF  B6      		or	(hl)
1641:	0F00  2B      		dec	hl
1642:	0F01  C8      		ret	z
1643:	0F02  23      		inc	hl
1644:	0F03  23      		inc	hl
1645:	0F04  7E      		ld	a,(hl)
1646:	0F05  23      		inc	hl
1647:	0F06  66      		ld	h,(hl)
1648:	0F07  6F      		ld	l,a
1649:	0F08  CDCD43  		call	cp.r		; Compare HL:DE
1650:	0F0B  60      		ld	h,b
1651:	0F0C  69      		ld	l,c
1652:	0F0D  7E      		ld	a,(hl)
1653:	0F0E  23      		inc	hl
1654:	0F0F  66      		ld	h,(hl)
1655:	0F10  6F      		ld	l,a
1656:	0F11  3F      		ccf
1657:	0F12  C8      		ret	z		; .. same
1658:	0F13  3F      		ccf
1659:	0F14  D0      		ret	nc
1660:	0F15  C3FB0E  		jp	l0efb
1661:			;
1662:			; Copy token line from reg HL
1663:			; EXIT	Reg BC holds length of token line
1664:			;	Reg HL points to token buffer
1665:			;
1666:	0F18          	cp.token::
1667:	0F18  AF      		xor	a		; Init some values
1668:	0F19  32690A  		ld	(l0a69),a
1669:	0F1C  32680A  		ld	(l0a68),a
1670:	0F1F  013B01  		ld	bc,TOKLEN	; Init length
1671:	0F22  112308  		ld	de,@TOKEN	; .. and destination
1672:	0F25          	l0f25:
1673:	0F25  7E      		ld	a,(hl)		; Get next
1674:	0F26  B7      		or	a		; .. test end
1675:	0F27  C23D0F  		jp	nz,l0f3d	; .. nope
1676:	0F2A          	l0f2a:
1677:	0F2A  214001  		ld	hl,TOKLEN+5
1678:	0F2D  7D      		ld	a,l		; Calculate current length
1679:	0F2E  91      		sub	c
1680:	0F2F  4F      		ld	c,a
1681:	0F30  7C      		ld	a,h
1682:	0F31  98      		sbc	a,b
1683:	0F32  47      		ld	b,a
1684:	0F33  212208  		ld	hl,l0822	; Set buffer address
1685:	0F36  AF      		xor	a
1686:	0F37  12      		ld	(de),a		; Close next three bytes
1687:	0F38  13      		inc	de
1688:	0F39  12      		ld	(de),a
1689:	0F3A  13      		inc	de
1690:	0F3B  12      		ld	(de),a
1691:	0F3C  C9      		ret
1692:	0F3D          	l0f3d:
1693:	0F3D  FE22    		cp	'"'		; Test string follows
1694:	0F3F  CA790F  		jp	z,l0f79		; .. yeap
1695:	0F42  FE20    		cp	' '		; Test blank
1696:	0F44  CA4F0F  		jp	z,l0f4f		; .. yeap
1697:	0F47  3A680A  		ld	a,(l0a68)
1698:	0F4A  B7      		or	a
1699:	0F4B  7E      		ld	a,(hl)
1700:	0F4C  CA820F  		jp	z,l0f82
1701:	0F4F          	l0f4f:
1702:	0F4F  23      		inc	hl
1703:	0F50  F5      		push	af
1704:	0F51  CD5911  		call	_st.token	; Save token
1705:	0F54  F1      		pop	af
1706:	0F55  D63A    		sub	':'
1707:	0F57  CA610F  		jp	z,l0f61
1708:	0F5A  FE4A    		cp	084h-':'
1709:	0F5C  C2670F  		jp	nz,l0f67
1710:	0F5F  3E01    		ld	a,1
1711:	0F61          	l0f61:
1712:	0F61  32680A  		ld	(l0a68),a	; (Re)Set values
1713:	0F64  32690A  		ld	(l0a69),a
1714:	0F67          	l0f67:
1715:	0F67  D655    		sub	08fh-':'
1716:	0F69  C2250F  		jp	nz,l0f25
1717:	0F6C  F5      		push	af
1718:	0F6D          	l0f6d:
1719:	0F6D  7E      		ld	a,(hl)
1720:	0F6E  B7      		or	a
1721:	0F6F  E3      		ex	(sp),hl
1722:	0F70  7C      		ld	a,h
1723:	0F71  E1      		pop	hl
1724:	0F72  CA2A0F  		jp	z,l0f2a
1725:	0F75  BE      		cp	(hl)
1726:	0F76  CA4F0F  		jp	z,l0f4f
1727:	0F79          	l0f79:
1728:	0F79  F5      		push	af		; Save delimiter
1729:	0F7A  7E      		ld	a,(hl)		; Get character
1730:	0F7B          	l0f7b:
1731:	0F7B  23      		inc	hl
1732:	0F7C  CD5911  		call	_st.token	; Save token
1733:	0F7F  C36D0F  		jp	l0f6d
1734:	0F82          	l0f82:
1735:	0F82  FE3F    		cp	'?'		; Test special
1736:	0F84  3E91    		ld	a,091h
1737:	0F86  D5      		push	de
1738:	0F87  C5      		push	bc
1739:	0F88  CA4810  		jp	z,l1048		; .. map to PRINT
1740:	0F8B  116A04  		ld	de,l046a				;;;????????
1741:	0F8E  CD5A1C  		call	toupper_	; Get upper case
1742:	0F91  CD0445  		call	isalph_		; Test A..Z
1743:			;;::
1744:	0F94  DA9710  		jp	c,l1097		; .. nope, maybe number
1745:	0F97  E5      		push	hl		; Save pointer
1746:	0F98  11CC0F  		ld	de,l0fcc
1747:	0F9B  CDBE0F  		call	cp.str		; Find GO
1748:	0F9E  C2D60F  		jp	nz,key.token	; .. nope, get token
1749:	0FA1  CD0513  		call	get.tok
1750:	0FA4  11D00F  		ld	de,l0fd0
1751:	0FA7  CDBE0F  		call	cp.str		; Find TO
1752:	0FAA  3E89    		ld	a,089h		; .. set GOTO
1753:	0FAC  CAB80F  		jp	z,l0fb8		; .. got it		;;;?????????
1754:	0FAF  11D30F  		ld	de,l0fd3
1755:	0FB2  CDBE0F  		call	cp.str		; Find SUB
1756:	0FB5  C2D60F  		jp	nz,key.token	; .. nope, get token
1757:	0FB8          	l0fb8:
1758:	0FB8  3E8D    		ld	a,08dh		; Set GOSUB
1759:	0FBA  C1      		pop	bc
1760:	0FBB  C34810  		jp	l1048
1761:			;
1762:			; Compare strings in DE:HL - Zero set indicates match
1763:			;
1764:	0FBE          	cp.str:
1765:	0FBE  1A      		ld	a,(de)		; Get from 1st string
1766:	0FBF  B7      		or	a
1767:	0FC0  C8      		ret	z		; End if zero
1768:	0FC1  4F      		ld	c,a		; .. save
1769:	0FC2  CD5A1C  		call	toupper_	; Get upper case
1770:	0FC5  B9      		cp	c
1771:	0FC6  C0      		ret	nz
1772:	0FC7  23      		inc	hl
1773:	0FC8  13      		inc	de
1774:	0FC9  C3BE0F  		jp	cp.str
1775:			;
1776:	0FCC          	l0fcc:
1777:	0FCC  474F2000		db	'GO ',null
1778:	0FD0          	l0fd0:
1779:	0FD0  544F00  		db	'TO',null
1780:	0FD3          	l0fd3:
1781:	0FD3  554200  		db	'UB',null
1782:			;
1783:			; Find key word in token table
1784:			;
1785:	0FD6          	key.token:
1786:	0FD6  E1      		pop	hl		; Get back pointer
1787:	0FD7  CD5A1C  		call	toupper_	; Get upper case
1788:	0FDA  E5      		push	hl
1789:	0FDB  210702  		ld	hl,l0207	; Init key table
1790:	0FDE  D641    		sub	'A'		; Strip off offset
1791:	0FE0  87      		add	a,a
1792:	0FE1  4F      		ld	c,a		; .. for index
1793:	0FE2  0600    		ld	b,0
1794:	0FE4  09      		add	hl,bc		; .. into table
1795:	0FE5  5E      		ld	e,(hl)		; Fetch corresponding $address
1796:	0FE6  23      		inc	hl
1797:	0FE7  56      		ld	d,(hl)
1798:	0FE8  E1      		pop	hl
1799:	0FE9  23      		inc	hl
1800:	0FEA          	l0fea:
1801:	0FEA  E5      		push	hl
1802:	0FEB          	l0feb:
1803:	0FEB  CD5A1C  		call	toupper_	; Get upper case
1804:	0FEE  4F      		ld	c,a
1805:	0FEF  1A      		ld	a,(de)
1806:	0FF0  E67F    		and	NoMSB		; No hi bit
1807:	0FF2  CA6411  		jp	z,l1164		; .. end of table
1808:	0FF5  23      		inc	hl
1809:	0FF6  B9      		cp	c		; Compare
1810:	0FF7  C23C10  		jp	nz,l103c	; .. maybe next one
1811:	0FFA  1A      		ld	a,(de)
1812:	0FFB  13      		inc	de
1813:	0FFC  B7      		or	a		; Test match
1814:	0FFD  F2EB0F  		jp	p,l0feb		; .. no, maybe next time :-)
1815:	1000  79      		ld	a,c
1816:	1001  FE28    		cp	'('		; Test open argument
1817:	1003  CA2110  		jp	z,l1021		; .. yeap
1818:	1006  1A      		ld	a,(de)		; Fetch token
1819:	1007  FED3    		cp	0d3h		; Test FN
1820:	1009  CA2110  		jp	z,l1021
1821:	100C  FED2    		cp	0d2h		; .. or USR
1822:	100E  CA2110  		jp	z,l1021
1823:	1011  CD5A1C  		call	toupper_	; Get upper case
1824:	1014  FE2E    		cp	'.'
1825:	1016  CA1C10  		jp	z,l101c
1826:	1019  CDE221  		call	l21e2
1827:	101C          	l101c:
1828:	101C  3E00    		ld	a,0
1829:	101E  D26411  		jp	nc,l1164
1830:	1021          	l1021:
1831:	1021  F1      		pop	af
1832:	1022  1A      		ld	a,(de)		; Get token
1833:	1023  B7      		or	a		; Test range
1834:	1024  FA4710  		jp	m,l1047		; .. 0x80 .. 0xFF
1835:	1027  C1      		pop	bc
1836:	1028  D1      		pop	de
1837:	1029  F680    		or	MSB		; Set bit 0x80
1838:	102B  F5      		push	af
1839:	102C  3EFF    		ld	a,0ffh
1840:	102E  CD5911  		call	_st.token	; Give token prefix
1841:	1031  AF      		xor	a
1842:	1032  32690A  		ld	(l0a69),a	; Clear ??
1843:	1035  F1      		pop	af
1844:	1036  CD5911  		call	_st.token	; .. store token
1845:	1039  C3250F  		jp	l0f25
1846:	103C          	l103c:
1847:	103C  E1      		pop	hl
1848:	103D          	l103d:
1849:	103D  1A      		ld	a,(de)		; .. fix table for next one
1850:	103E  13      		inc	de
1851:	103F  B7      		or	a
1852:	1040  F23D10  		jp	p,l103d
1853:	1043  13      		inc	de
1854:	1044  C3EA0F  		jp	l0fea
1855:	1047          	l1047:
1856:	1047  2B      		dec	hl
1857:	1048          	l1048:
1858:	1048  F5      		push	af		; Save token
1859:	1049  115A10  		ld	de,l105a	; Init table
1860:	104C  4F      		ld	c,a
1861:	104D          	l104d:
1862:	104D  1A      		ld	a,(de)		; Get token
1863:	104E  B7      		or	a		; Test end
1864:	104F  CA6910  		jp	z,l1069		; .. yeap
1865:	1052  13      		inc	de
1866:	1053  B9      		cp	c		; .. compare
1867:	1054  C24D10  		jp	nz,l104d	; .. nop found
1868:	1057  C36B10  		jp	l106b		; .. hit it
1869:			;
1870:			; Token table
1871:			;
1872:	105A          	l105a:
1873:	105A  8C      		db	08ch		; RESTORE
1874:	105B  AB      		db	0abh		; AUTO
1875:	105C  AC      		db	0ach		; RENUM
1876:	105D  AA      		db	0aah		; DELETE
1877:	105E  A7      		db	0a7h		; EDIT
1878:	105F  A9      		db	0a9h		; RESUME
1879:	1060  D6      		db	0d6h		; FRE
1880:	1061  A2      		db	0a2h		; ELSE
1881:	1062  8A      		db	08ah		; RUN
1882:	1063  93      		db	093h		; LIST
1883:	1064  9F      		db	09fh		; LLIST
1884:	1065  89      		db	089h		; GOTO
1885:	1066  CF      		db	0cfh		; THEN
1886:	1067  8D      		db	08dh		; GOSUB
1887:	1068  00      		db	0
1888:			;
1889:			; -> Did *NOT* find token in above table
1890:			;
1891:	1069          	l1069::
1892:	1069  AF      		xor	a
1893:	106A          		_JP.NZ
1894:			;
1895:			; -> Did find token in above table
1896:			;
1897:	106B          	l106b:
1898:	106B  3E01    		ld	a,1
1899:	106D          	l106d:
1900:	106D  32690A  		ld	(l0a69),a	; Set flag
1901:	1070  F1      		pop	af		; Get back token
1902:	1071  C1      		pop	bc
1903:	1072  D1      		pop	de
1904:	1073  FEA2    		cp	0a2h		; Test ELSE
1905:	1075  F5      		push	af
1906:	1076  CC5711  		call	z,_st.delim	; Store delimiter ':' if so
1907:	1079  F1      		pop	af
1908:	107A  FEB4    		cp	0b4h		; Test WHILE
1909:	107C  C28410  		jp	nz,l1084
1910:	107F  CD5911  		call	_st.token	; .. store token
1911:	1082  3EF2    		ld	a,0f2h		; .. map it
1912:	1084          	l1084:
1913:	1084  FEDB    		cp	0dbh		; Test ???
1914:	1086  C23511  		jp	nz,l1135
1915:	1089  F5      		push	af
1916:	108A  CD5711  		call	_st.delim	; Store delimiter ':'
1917:	108D  3E8F    		ld	a,08fh		; Map REM
1918:	108F  CD5911  		call	_st.token
1919:	1092  F1      		pop	af
1920:	1093  F5      		push	af
1921:	1094  C37B0F  		jp	l0f7b
1922:			;
1923:			; -> Got not letter A..Z, so try digit
1924:			;
1925:	1097          	l1097::
1926:	1097  7E      		ld	a,(hl)		; Get next
1927:	1098  FE2E    		cp	'.'		; .. test special
1928:	109A  CAA710  		jp	z,l10a7
1929:	109D  FE3A    		cp	'9'+1		; Test digit
1930:	109F  D22211  		jp	nc,l1122	; .. nope
1931:	10A2  FE30    		cp	'0'
1932:	10A4  DA2211  		jp	c,l1122
1933:	10A7          	l10a7:
1934:	10A7  3A690A  		ld	a,(l0a69)
1935:	10AA  B7      		or	a
1936:	10AB  7E      		ld	a,(hl)
1937:	10AC  C1      		pop	bc
1938:	10AD  D1      		pop	de
1939:	10AE  FA4F0F  		jp	m,l0f4f
1940:	10B1  CAD310  		jp	z,l10d3
1941:	10B4  FE2E    		cp	'.'		; Test special
1942:	10B6  CA4F0F  		jp	z,l0f4f
1943:	10B9  3E0E    		ld	a,00eh
1944:	10BB  CD5911  		call	_st.token	; Store ???
1945:	10BE  D5      		push	de
1946:	10BF  CD2814  		call	l1428		; Fix for next
1947:	10C2  CDAC11  		call	trlskip		; Skip trailing blanks
1948:	10C5          	l10c5:
1949:	10C5  E3      		ex	(sp),hl
1950:	10C6  EB      		ex	de,hl
1951:	10C7          	l10c7:
1952:	10C7  7D      		ld	a,l
1953:	10C8  CD5911  		call	_st.token	; Store low number
1954:	10CB  7C      		ld	a,h
1955:	10CC          	l10cc:
1956:	10CC  E1      		pop	hl
1957:	10CD  CD5911  		call	_st.token	; Store high number
1958:	10D0  C3250F  		jp	l0f25
1959:	10D3          	l10d3::
1960:	10D3  D5      		push	de
1961:	10D4  C5      		push	bc
1962:	10D5  7E      		ld	a,(hl)					;;** WHY
1963:	10D6  CDD12E  		call	cnvnum		; Convert to number
1964:	10D9  CDAC11  		call	trlskip		; Skip trailing blanks
1965:	10DC  C1      		pop	bc
1966:	10DD  D1      		pop	de
1967:	10DE  E5      		push	hl
1968:	10DF  3A670A  		ld	a,($ARGLEN)	; Get length
1969:	10E2  FE02    		cp	2		; Test word
1970:	10E4  C2FF10  		jp	nz,l10ff	; .. nope
1971:	10E7  2A040C  		ld	hl,($$ARG+4)	; Fetch result
1972:	10EA  7C      		ld	a,h
1973:	10EB  B7      		or	a
1974:	10EC  3E02    		ld	a,2
1975:	10EE  C2FF10  		jp	nz,l10ff
1976:	10F1  7D      		ld	a,l		; Set byte
1977:	10F2  65      		ld	h,l
1978:	10F3  2E0F    		ld	l,00fh		; .. set default token
1979:	10F5  FE0A    		cp	9+1		; Test 0..9
1980:	10F7  D2C710  		jp	nc,l10c7	; .. nope, save as byte
1981:	10FA  C611    		add	a,011h		; .. map 0..9 to 0x11..0x1A
1982:	10FC  C3CC10  		jp	l10cc		; .. save
1983:	10FF          	l10ff:
1984:	10FF  F5      		push	af
1985:	1100  0F      		rrca
1986:	1101  C61B    		add	a,01bh
1987:	1103  CD5911  		call	_st.token	; Store number prefix
1988:	1106  21040C  		ld	hl,$$ARG+4
1989:	1109  CD641D  		call	get.type	; Get type
1990:	110C  DA1211  		jp	c,l1112		; .. single precision
1991:	110F  21000C  		ld	hl,$$ARG	; Fix for double precision
1992:	1112          	l1112:
1993:	1112  F1      		pop	af
1994:	1113          	l1113:
1995:	1113  F5      		push	af
1996:	1114  7E      		ld	a,(hl)
1997:	1115  CD5911  		call	_st.token	; Store number
1998:	1118  F1      		pop	af
1999:	1119  23      		inc	hl
2000:	111A  3D      		dec	a
2001:	111B  C21311  		jp	nz,l1113
2002:	111E  E1      		pop	hl
2003:	111F  C3250F  		jp	l0f25
2004:			;
2005:			; -> Neither letter nor digit, try operator
2006:			;
2007:	1122          	l1122::
2008:	1122  116904  		ld	de,l046a-1	; Init table
2009:	1125          	l1125:
2010:	1125  13      		inc	de
2011:	1126  1A      		ld	a,(de)		; Get operator
2012:	1127  E67F    		and	NoMSB		; Strip off MSB
2013:	1129  CA8E11  		jp	z,l118e		; .. not found
2014:	112C  13      		inc	de
2015:	112D  BE      		cp	(hl)		; .. compare
2016:	112E  1A      		ld	a,(de)
2017:	112F  C22511  		jp	nz,l1125	; .. no match
2018:	1132  C3A011  		jp	l11a0		; .. set it
2019:	1135          	l1135:
2020:	1135  FE26    		cp	'&'
2021:	1137  C24F0F  		jp	nz,l0f4f
2022:	113A  E5      		push	hl
2023:	113B  CD0513  		call	get.tok
2024:	113E  E1      		pop	hl
2025:	113F  CD5B1C  		call	toupper		; Get upper case
2026:	1142  FE48    		cp	'H'
2027:	1144  3E0B    		ld	a,00bh
2028:	1146  C24B11  		jp	nz,l114b
2029:	1149  3E0C    		ld	a,00ch
2030:	114B          	l114b:
2031:	114B  CD5911  		call	_st.token	; Store ???
2032:	114E  D5      		push	de
2033:	114F  C5      		push	bc
2034:	1150  CD691C  		call	ato??_		; Get number
2035:	1153  C1      		pop	bc
2036:	1154  C3C510  		jp	l10c5		; .. store number
2037:			;
2038:			; Save delimter ':' into buffer ^DE - remaining length in BC
2039:			;
2040:	1157          	_st.delim:
2041:	1157  3E3A    		ld	a,':'
2042:			;
2043:			; Save Accu into buffer ^DE - remaining length in BC
2044:			;
2045:	1159          	_st.token:
2046:	1159  12      		ld	(de),a		; .. save it
2047:	115A  13      		inc	de		; Bump buffer
2048:	115B  0B      		dec	bc		; .. count down
2049:	115C  79      		ld	a,c
2050:	115D  B0      		or	b		; Test remainder
2051:	115E  C0      		ret	nz		; .. yeap
2052:	115F          	l115f:
2053:	115F  1E17    		ld	e,23		; Line overflow
2054:	1161  C3E30C  		jp	_error
2055:			;
2056:			; -> Got no keyword in table
2057:			;
2058:	1164          	l1164:
2059:	1164  E1      		pop	hl
2060:	1165  2B      		dec	hl
2061:	1166  3D      		dec	a
2062:	1167  32690A  		ld	(l0a69),a
2063:	116A  C1      		pop	bc
2064:	116B  D1      		pop	de
2065:	116C  CD5A1C  		call	toupper_	; Get upper case
2066:	116F          	l116f:
2067:	116F  CD5911  		call	_st.token	; Store variable name
2068:	1172  23      		inc	hl
2069:	1173  CD5A1C  		call	toupper_	; Get upper case
2070:	1176  CD0445  		call	isalph_		; Test A..Z
2071:	1179  D26F11  		jp	nc,l116f	; .. yeap
2072:	117C  FE3A    		cp	'9'+1
2073:	117E  D28B11  		jp	nc,l118b
2074:	1181  FE30    		cp	'0'
2075:	1183  D26F11  		jp	nc,l116f
2076:	1186  FE2E    		cp	'.'
2077:	1188  CA6F11  		jp	z,l116f
2078:	118B          	l118b:
2079:	118B  C3250F  		jp	l0f25
2080:	118E          	l118e:
2081:	118E  7E      		ld	a,(hl)		; Get from line
2082:	118F  FE20    		cp	' '		; Test valid character
2083:	1191  D2A011  		jp	nc,l11a0	; .. yeap
2084:	1194  FE09    		cp	tab		; .. or tab
2085:	1196  CAA011  		jp	z,l11a0
2086:	1199  FE0A    		cp	lf		; .. or line feed
2087:	119B  CAA011  		jp	z,l11a0
2088:	119E  3E20    		ld	a,' '		; Map control
2089:	11A0          	l11a0:
2090:	11A0  F5      		push	af		; Save token
2091:	11A1  3A690A  		ld	a,(l0a69)
2092:	11A4  3C      		inc	a
2093:	11A5  CAA911  		jp	z,l11a9
2094:	11A8  3D      		dec	a
2095:	11A9          	l11a9:
2096:	11A9  C36D10  		jp	l106d
2097:			;
2098:			; Skip trailing blanks
2099:			;
2100:	11AC          	trlskip:
2101:	11AC  2B      		dec	hl		; Get previous
2102:	11AD  7E      		ld	a,(hl)		; .. fetch character
2103:	11AE  FE20    		cp	' '		; Test blank
2104:	11B0  CAAC11  		jp	z,trlskip
2105:	11B3  FE09    		cp	tab		; .. tab
2106:	11B5  CAAC11  		jp	z,trlskip
2107:	11B8  FE0A    		cp	lf		; .. or line feed
2108:	11BA  CAAC11  		jp	z,trlskip
2109:	11BD  23      		inc	hl		; .. fix pointer
2110:	11BE  C9      		ret
2111:			;
2112:			; Statement : FOR <var>=<exp> TO <exp> [STEP <exp>]
2113:			;
2114:	11BF          	l11bf:
2115:	11BF  3E64    		ld	a,64h
2116:	11C1  32A50A  		ld	(l0aa5),a
2117:	11C4  CD8B39  		call	var.adr		; Get address of variable
2118:	11C7  CDD343  		call	ilcmp		; Verify '='
2119:	11CA  F0      		db	0f0h
2120:	11CB  D5      		push	de
2121:	11CC  EB      		ex	de,hl
2122:	11CD  22A70A  		ld	(@@ptr),hl	; .. save address
2123:	11D0  EB      		ex	de,hl
2124:	11D1  3A670A  		ld	a,($ARGLEN)	; Get length of value
2125:	11D4  F5      		push	af
2126:	11D5  CD021A  		call	EXPR		; Get expression
2127:	11D8  F1      		pop	af
2128:	11D9  E5      		push	hl
2129:	11DA  CDAC1F  		call	l1fac
2130:	11DD  21C00B  		ld	hl,l0bc0
2131:	11E0  CDC028  		call	l28c0
2132:	11E3  E1      		pop	hl
2133:	11E4  D1      		pop	de
2134:	11E5  C1      		pop	bc
2135:	11E6  E5      		push	hl
2136:	11E7  CDEC14  		call	_DATA		; .. process data field
2137:	11EA  22A10A  		ld	(l0aa1),hl
2138:	11ED  210200  		ld	hl,l0002
2139:	11F0  39      		add	hl,sp
2140:	11F1          	l11f1:
2141:	11F1  CD540C  		call	l0c54
2142:	11F4  C21112  		jp	nz,l1211
2143:	11F7  09      		add	hl,bc
2144:	11F8  D5      		push	de
2145:	11F9  2B      		dec	hl
2146:	11FA  56      		ld	d,(hl)
2147:	11FB  2B      		dec	hl
2148:	11FC  5E      		ld	e,(hl)
2149:	11FD  23      		inc	hl
2150:	11FE  23      		inc	hl
2151:	11FF  E5      		push	hl
2152:	1200  2AA10A  		ld	hl,(l0aa1)
2153:	1203  CDCD43  		call	cp.r		; Compare HL:DE
2154:	1206  E1      		pop	hl
2155:	1207  D1      		pop	de
2156:	1208  C2F111  		jp	nz,l11f1	; .. HL <> DE
2157:	120B  D1      		pop	de
2158:	120C  F9      		ld	sp,hl		; Set stack
2159:	120D  22B10A  		ld	(curstk),hl	; .. save it
2160:	1210          		_LD.C
2161:	1211          	l1211:
2162:	1211  D1      		pop	de
2163:	1212  EB      		ex	de,hl
2164:	1213  0E08    		ld	c,8
2165:	1215  CDC742  		call	tstmem		; Verify enough memory
2166:	1218  E5      		push	hl
2167:	1219  2AA10A  		ld	hl,(l0aa1)
2168:	121C  E3      		ex	(sp),hl
2169:	121D  E5      		push	hl
2170:	121E  2A9807  		ld	hl,(dir.mode)	; Get direct mode
2171:	1221  E3      		ex	(sp),hl
2172:	1222  CDD343  		call	ilcmp		; Verify TO
2173:	1225  CE      		db	0ceh
2174:	1226  CD641D  		call	get.type	; Get type
2175:	1229  CAE10C  		jp	z,l0ce1		; .. pointer
2176:	122C  D2E10C  		jp	nc,l0ce1	; .. double precision
2177:	122F  F5      		push	af
2178:	1230  CD021A  		call	EXPR		; Get expression
2179:	1233  F1      		pop	af
2180:	1234  E5      		push	hl
2181:	1235  F24E12  		jp	p,l124e
2182:	1238  CD7A29  		call	_CINT		; Get integer
2183:	123B  E3      		ex	(sp),hl
2184:	123C  110100  		ld	de,1		; Set default step
2185:	123F  7E      		ld	a,(hl)		; Get next
2186:	1240  FED1    		cp	0d1h		; Test STEP
2187:	1242  CC5320  		call	z,l2053		; .. yeap, get step
2188:	1245  D5      		push	de
2189:	1246  E5      		push	hl
2190:	1247  EB      		ex	de,hl
2191:	1248  CD9228  		call	l2892
2192:	124B  C37112  		jp	l1271
2193:	124E          	l124e:
2194:	124E  CDF429  		call	l29f4
2195:	1251  CDB428  		call	l28b4
2196:	1254  E1      		pop	hl
2197:	1255  C5      		push	bc
2198:	1256  D5      		push	de
2199:	1257  010081  		ld	bc,081h*256+0
2200:	125A  51      		ld	d,c
2201:	125B  5A      		ld	e,d
2202:	125C  7E      		ld	a,(hl)
2203:	125D  FED1    		cp	0d1h
2204:	125F  3E01    		ld	a,1
2205:	1261  C27212  		jp	nz,l1272
2206:	1264  CD031A  		call	l1a03
2207:	1267  E5      		push	hl
2208:	1268  CDF429  		call	l29f4
2209:	126B  CDB428  		call	l28b4
2210:	126E  CD4528  		call	l2845
2211:	1271          	l1271:
2212:	1271  E1      		pop	hl
2213:	1272          	l1272:
2214:	1272  C5      		push	bc
2215:	1273  D5      		push	de
2216:	1274  4F      		ld	c,a
2217:	1275  CD641D  		call	get.type	; Get type
2218:	1278  47      		ld	b,a		; .. save
2219:	1279  C5      		push	bc
2220:	127A  2B      		dec	hl
2221:	127B  CD0513  		call	get.tok
2222:	127E  C2C90C  		jp	nz,l0cc9
2223:	1281  CDE224  		call	l24e2
2224:	1284  CD0513  		call	get.tok
2225:	1287  E5      		push	hl
2226:	1288  E5      		push	hl
2227:	1289  2AC40B  		ld	hl,(direct_3)	; Set direct mode
2228:	128C  229807  		ld	(dir.mode),hl	; .. reet it
2229:	128F  2AA70A  		ld	hl,(@@ptr)	; Get address of variable
2230:	1292  E3      		ex	(sp),hl
2231:	1293  0682    		ld	b,82h
2232:	1295  C5      		push	bc
2233:	1296  33      		inc	sp
2234:	1297  F5      		push	af
2235:	1298  F5      		push	af
2236:	1299  C3A045  		jp	l45a0
2237:	129C          	l129c:
2238:	129C  0682    		ld	b,82h
2239:	129E  C5      		push	bc
2240:	129F  33      		inc	sp
2241:	12A0          	l12a0:
2242:	12A0  E5      		push	hl
2243:	12A1  CD0000  		call	$-$		; Get console state
2244:	12A2          	$CST1	equ	$-2
2245:	12A4  E1      		pop	hl
2246:	12A5  B7      		or	a
2247:	12A6  C45C42  		call	nz,l425c	; .. got character
2248:	12A9  22AF0A  		ld	(l0aaf),hl
2249:	12AC  EB      		ex	de,hl
2250:	12AD  210000  		ld	hl,0
2251:	12B0  39      		add	hl,sp		; .. copy stack
2252:	12B1  22B10A  		ld	(curstk),hl	; .. save it
2253:	12B4  EB      		ex	de,hl
2254:	12B5  7E      		ld	a,(hl)
2255:	12B6  FE3A    		cp	':'
2256:	12B8  CAE512  		jp	z,l12e5
2257:	12BB  B7      		or	a
2258:	12BC  C2C90C  		jp	nz,l0cc9
2259:	12BF  23      		inc	hl
2260:	12C0          	l12c0:
2261:	12C0  7E      		ld	a,(hl)
2262:	12C1  23      		inc	hl
2263:	12C2  B6      		or	(hl)
2264:	12C3  CA850C  		jp	z,l0c85
2265:	12C6  23      		inc	hl
2266:	12C7  5E      		ld	e,(hl)
2267:	12C8  23      		inc	hl
2268:	12C9  56      		ld	d,(hl)
2269:	12CA  EB      		ex	de,hl
2270:	12CB  229807  		ld	(dir.mode),hl	; Set direct mode
2271:	12CE  3AFE0B  		ld	a,(trcflg)	; Test TRON
2272:	12D1  B7      		or	a
2273:	12D2  CAE412  		jp	z,l12e4		; .. nope
2274:	12D5  D5      		push	de
2275:	12D6  3E5B    		ld	a,'['
2276:	12D8  CDD640  		call	putchar
2277:	12DB  CD1A31  		call	l311a
2278:	12DE  3E5D    		ld	a,']'
2279:	12E0  CDD640  		call	putchar
2280:	12E3  D1      		pop	de
2281:	12E4          	l12e4:
2282:	12E4  EB      		ex	de,hl
2283:	12E5          	l12e5:
2284:	12E5  CD0513  		call	get.tok
2285:	12E8  11A012  		ld	de,l12a0
2286:	12EB  D5      		push	de
2287:	12EC  C8      		ret	z
2288:	12ED          	l12ed:
2289:	12ED  D681    		sub	081h
2290:	12EF  DA1815  		jp	c,_LET		; .. aha, LET it be
2291:	12F2  FE4C    		cp	0cch-081h+1
2292:	12F4  D2E21F  		jp	nc,l1fe2
2293:	12F7  07      		rlca
2294:	12F8  4F      		ld	c,a
2295:	12F9  0600    		ld	b,0
2296:	12FB  EB      		ex	de,hl
2297:	12FC  210701  		ld	hl,l0107
2298:	12FF  09      		add	hl,bc
2299:	1300  4E      		ld	c,(hl)
2300:	1301  23      		inc	hl
2301:	1302  46      		ld	b,(hl)
2302:	1303  C5      		push	bc
2303:	1304  EB      		ex	de,hl
2304:			;
2305:			;
2306:			;
2307:	1305          	get.tok::
2308:	1305  23      		inc	hl
2309:	1306          	l1306:
2310:	1306  7E      		ld	a,(hl)		; Get character
2311:	1307  FE3A    		cp	'9'+1		; Test range
2312:	1309  D0      		ret	nc		; .. not numeric
2313:	130A          	l130a:
2314:	130A  FE20    		cp	' '		; Skip blanks
2315:	130C  CA0513  		jp	z,get.tok
2316:	130F  D28613  		jp	nc,l1386	; .. maybe number
2317:	1312  B7      		or	a
2318:	1313  C8      		ret	z
2319:	1314  FE0B    		cp	lf+1		; Test control
2320:	1316  DA8113  		jp	c,l1381
2321:	1319  FE1E    		cp	'^'-'@'		; Test special
2322:	131B  C22313  		jp	nz,l1323
2323:	131E  3A6C0A  		ld	a,(l0a6c)	; .. map it
2324:	1321  B7      		or	a
2325:	1322  C9      		ret
2326:	1323          	l1323:
2327:	1323  FE10    		cp	'P'-'@'
2328:	1325  CA6013  		jp	z,l1360
2329:	1328  F5      		push	af
2330:	1329  23      		inc	hl
2331:	132A  326C0A  		ld	(l0a6c),a
2332:	132D  D61C    		sub	1ch
2333:	132F  D26613  		jp	nc,l1366
2334:	1332  D6F5    		sub	11h-1ch
2335:	1334  D23E13  		jp	nc,l133e
2336:	1337  FEFE    		cp	0fh-11h
2337:	1339  C25213  		jp	nz,l1352
2338:	133C  7E      		ld	a,(hl)
2339:	133D  23      		inc	hl
2340:	133E          	l133e:
2341:	133E  226A0A  		ld	(l0a6a),hl
2342:	1341  2600    		ld	h,0
2343:	1343          	l1343:
2344:	1343  6F      		ld	l,a
2345:	1344  226E0A  		ld	(l0a6e),hl
2346:	1347  3E02    		ld	a,2
2347:	1349  326D0A  		ld	(l0a6d),a
2348:	134C  218C13  		ld	hl,l138c
2349:	134F  F1      		pop	af
2350:	1350  B7      		or	a
2351:	1351  C9      		ret
2352:	1352          	l1352:
2353:	1352  7E      		ld	a,(hl)
2354:	1353  23      		inc	hl
2355:	1354  23      		inc	hl
2356:	1355  226A0A  		ld	(l0a6a),hl
2357:	1358  2B      		dec	hl
2358:	1359  66      		ld	h,(hl)
2359:	135A  C34313  		jp	l1343
2360:	135D          	l135d:
2361:	135D  CD8E13  		call	l138e
2362:	1360          	l1360:
2363:	1360  2A6A0A  		ld	hl,(l0a6a)	; Get pointer
2364:	1363  C30613  		jp	l1306
2365:	1366          	l1366:
2366:	1366  3C      		inc	a
2367:	1367  07      		rlca
2368:	1368  326D0A  		ld	(l0a6d),a
2369:	136B  D5      		push	de
2370:	136C  C5      		push	bc
2371:	136D  116E0A  		ld	de,l0a6e
2372:	1370  EB      		ex	de,hl
2373:	1371  47      		ld	b,a
2374:	1372  CDCD28  		call	l28cd
2375:	1375  EB      		ex	de,hl
2376:	1376  C1      		pop	bc
2377:	1377  D1      		pop	de
2378:	1378  226A0A  		ld	(l0a6a),hl
2379:	137B  F1      		pop	af
2380:	137C  218C13  		ld	hl,l138c
2381:	137F  B7      		or	a
2382:	1380  C9      		ret
2383:	1381          	l1381:
2384:	1381  FE09    		cp	tab		; .. look for tab
2385:	1383  D20513  		jp	nc,get.tok
2386:	1386          	l1386:
2387:	1386  FE30    		cp	'0'		; Test number
2388:	1388  3F      		ccf
2389:	1389  3C      		inc	a
2390:	138A  3D      		dec	a
2391:	138B  C9      		ret
2392:			;
2393:			;
2394:			;
2395:	138C          	l138c:
2396:	138C  1E10    		ld	e,10h
2397:			;
2398:			;
2399:			;
2400:	138E          	l138e:
2401:	138E  3A6C0A  		ld	a,(l0a6c)
2402:	1391  FE0F    		cp	0fh
2403:	1393  D2AB13  		jp	nc,l13ab
2404:	1396  FE0D    		cp	0dh
2405:	1398  DAAB13  		jp	c,l13ab
2406:	139B  2A6E0A  		ld	hl,(l0a6e)
2407:	139E  C2A813  		jp	nz,l13a8
2408:	13A1  23      		inc	hl
2409:	13A2  23      		inc	hl
2410:	13A3  23      		inc	hl
2411:	13A4  5E      		ld	e,(hl)
2412:	13A5  23      		inc	hl
2413:	13A6  56      		ld	d,(hl)
2414:	13A7  EB      		ex	de,hl
2415:	13A8          	l13a8:
2416:	13A8  C3032C  		jp	l2c03
2417:	13AB          	l13ab:
2418:	13AB  3A6D0A  		ld	a,(l0a6d)
2419:	13AE  32670A  		ld	($ARGLEN),a	; Set length
2420:	13B1  FE08    		cp	8		; Test double precision
2421:	13B3  CAC313  		jp	z,l13c3
2422:	13B6  2A6E0A  		ld	hl,(l0a6e)	; .. unpack single precision
2423:	13B9  22040C  		ld	($$ARG+4),hl
2424:	13BC  2A700A  		ld	hl,(l0a70)
2425:	13BF  22060C  		ld	($$ARG+6),hl
2426:	13C2  C9      		ret
2427:	13C3          	l13c3:
2428:	13C3  216E0A  		ld	hl,l0a6e
2429:	13C6  C3EE28  		jp	l28ee
2430:			;
2431:			; Statement : DEF<type> <range(s) of letters>
2432:			;
2433:			; Statement : DEFSTR
2434:			;
2435:	13C9          	l13c9:
2436:	13C9  1E03    		ld	e,3
2437:	13CB          		_LD.BC
2438:			;
2439:			; Statement : DEFINT
2440:			;
2441:	13CC          	l13cc:
2442:	13CC  1E02    		ld	e,2
2443:	13CE          		_LD.BC
2444:			;
2445:			; Statement : DEFSNG
2446:			;
2447:	13CF          	l13cf:
2448:	13CF  1E04    		ld	e,4
2449:	13D1          		_LD.BC
2450:			;
2451:			; Statement : DEFDBL
2452:			;
2453:	13D2          	l13d2:
2454:	13D2  1E08    		ld	e,8
2455:	13D4          	l13d4:
2456:	13D4  CD0345  		call	isalph		; Test A..Z
2457:	13D7  01C90C  		ld	bc,l0cc9
2458:	13DA  C5      		push	bc
2459:	13DB  D8      		ret	c		; .. nope
2460:	13DC  D641    		sub	'A'
2461:	13DE  4F      		ld	c,a
2462:	13DF  47      		ld	b,a
2463:	13E0  CD0513  		call	get.tok
2464:	13E3  FEF3    		cp	0f3h
2465:	13E5  C2F513  		jp	nz,l13f5
2466:	13E8  CD0513  		call	get.tok
2467:	13EB  CD0345  		call	isalph		; Test A..Z
2468:	13EE  D8      		ret	c		; .. nope
2469:	13EF  D641    		sub	'A'
2470:	13F1  47      		ld	b,a
2471:	13F2  CD0513  		call	get.tok
2472:	13F5          	l13f5:
2473:	13F5  78      		ld	a,b
2474:	13F6  91      		sub	c
2475:	13F7  D8      		ret	c
2476:	13F8  3C      		inc	a
2477:	13F9  E3      		ex	(sp),hl
2478:	13FA  21CA0A  		ld	hl,l0aca
2479:	13FD  0600    		ld	b,0
2480:	13FF  09      		add	hl,bc
2481:	1400          	l1400:
2482:	1400  73      		ld	(hl),e
2483:	1401  23      		inc	hl
2484:	1402  3D      		dec	a
2485:	1403  C20014  		jp	nz,l1400
2486:	1406  E1      		pop	hl
2487:	1407  7E      		ld	a,(hl)
2488:	1408  FE2C    		cp	','
2489:	140A  C0      		ret	nz
2490:	140B  CD0513  		call	get.tok
2491:	140E  C3D413  		jp	l13d4
2492:	1411          	l1411:
2493:	1411  CD0513  		call	get.tok
2494:	1414          	l1414:
2495:	1414  CD5620  		call	l2056
2496:	1417  F0      		ret	p
2497:			;
2498:			; Process illegal function call
2499:			;
2500:	1418          	_ill.func:
2501:	1418  1E05    		ld	e,5		; Illegal function call
2502:	141A  C3E30C  		jp	_error
2503:			;
2504:			;
2505:			;
2506:	141D          	l141d:
2507:	141D  7E      		ld	a,(hl)
2508:	141E  FE2E    		cp	'.'
2509:	1420  EB      		ex	de,hl
2510:	1421  2AB50A  		ld	hl,(l0ab5)
2511:	1424  EB      		ex	de,hl
2512:	1425  CA0513  		jp	z,get.tok
2513:			;
2514:			;
2515:			;
2516:	1428          	l1428:
2517:	1428  2B      		dec	hl
2518:	1429          	l1429:
2519:	1429  CD0513  		call	get.tok
2520:	142C  FE0E    		cp	0eh
2521:	142E  CA3314  		jp	z,l1433
2522:	1431  FE0D    		cp	0dh
2523:	1433          	l1433:
2524:	1433  EB      		ex	de,hl
2525:	1434  2A6E0A  		ld	hl,(l0a6e)
2526:	1437  EB      		ex	de,hl
2527:	1438  CA0513  		jp	z,get.tok
2528:	143B  AF      		xor	a
2529:	143C  326C0A  		ld	(l0a6c),a
2530:	143F  2B      		dec	hl
2531:	1440  110000  		ld	de,l0000
2532:	1443          	l1443:
2533:	1443  CD0513  		call	get.tok
2534:	1446  D0      		ret	nc
2535:	1447  E5      		push	hl
2536:	1448  F5      		push	af
2537:	1449  219819  		ld	hl,l1998
2538:	144C  CDCD43  		call	cp.r
2539:	144F  DA6414  		jp	c,l1464		; HL < DE
2540:	1452  62      		ld	h,d
2541:	1453  6B      		ld	l,e
2542:	1454  19      		add	hl,de
2543:	1455  29      		add	hl,hl
2544:	1456  19      		add	hl,de
2545:	1457  29      		add	hl,hl
2546:	1458  F1      		pop	af
2547:	1459  D630    		sub	'0'
2548:	145B  5F      		ld	e,a
2549:	145C  1600    		ld	d,0
2550:	145E  19      		add	hl,de
2551:	145F  EB      		ex	de,hl
2552:	1460  E1      		pop	hl
2553:	1461  C34314  		jp	l1443
2554:	1464          	l1464:
2555:	1464  F1      		pop	af
2556:	1465  E1      		pop	hl
2557:	1466  C9      		ret
2558:			;
2559:			; Statement : RUN [<line number>]
2560:			;             RUN <filename>[,R]
2561:			;
2562:	1467          	_RUN:
2563:	1467  CA3743  		jp	z,l4337		; .. simple start
2564:	146A  FE0E    		cp	00eh		; Test number follows
2565:	146C  CA7414  		jp	z,l1474
2566:	146F  FE0D    		cp	00dh
2567:	1471  C29A52  		jp	nz,_FRUN	; .. must be file
2568:	1474          	l1474:
2569:	1474  CD3B43  		call	l433b
2570:	1477  01A012  		ld	bc,l12a0
2571:	147A  C39414  		jp	l1494
2572:			;
2573:			; Statement : GOSUB <line number>
2574:			;
2575:	147D          	l147d:
2576:	147D  0E03    		ld	c,3
2577:	147F  CDC742  		call	tstmem		; Verify enough memory
2578:	1482  CD2814  		call	l1428
2579:	1485  C1      		pop	bc
2580:	1486  E5      		push	hl
2581:	1487  E5      		push	hl
2582:	1488  2A9807  		ld	hl,(dir.mode)	; Get direct mode
2583:	148B  E3      		ex	(sp),hl
2584:	148C  3E8D    		ld	a,08dh		; Set GOSUB
2585:	148E  F5      		push	af
2586:	148F  33      		inc	sp
2587:	1490  C5      		push	bc
2588:	1491  C39814  		jp	l1498
2589:	1494          	l1494:
2590:	1494  C5      		push	bc
2591:			;
2592:			; Statement : GOTO <line number>
2593:			;
2594:	1495          	l1495:
2595:	1495  CD2814  		call	l1428
2596:	1498          	l1498:
2597:	1498  3A6C0A  		ld	a,(l0a6c)
2598:	149B  FE0D    		cp	0dh
2599:	149D  EB      		ex	de,hl
2600:	149E  C8      		ret	z
2601:	149F  FE0E    		cp	0eh
2602:	14A1  C2C90C  		jp	nz,l0cc9
2603:	14A4  EB      		ex	de,hl
2604:	14A5  E5      		push	hl
2605:	14A6  2A6A0A  		ld	hl,(l0a6a)
2606:	14A9  E3      		ex	(sp),hl
2607:	14AA  CDEE14  		call	l14ee
2608:	14AD  23      		inc	hl
2609:	14AE  E5      		push	hl
2610:	14AF  2A9807  		ld	hl,(dir.mode)	; Get direct mode
2611:	14B2  CDCD43  		call	cp.r		; Compare HL:DE
2612:	14B5  E1      		pop	hl
2613:	14B6  DCFB0E  		call	c,l0efb		; .. HL < DE
2614:	14B9  D4F80E  		call	nc,l0ef8
2615:	14BC  D2CC14  		jp	nc,l14cc
2616:	14BF  0B      		dec	bc
2617:	14C0  3E0D    		ld	a,0dh
2618:	14C2  32A90A  		ld	(l0aa9),a
2619:	14C5  E1      		pop	hl
2620:	14C6  CD2C24  		call	l242c
2621:	14C9  60      		ld	h,b
2622:	14CA  69      		ld	l,c
2623:	14CB  C9      		ret
2624:	14CC          	l14cc:
2625:	14CC  1E08    		ld	e,8		; Undefined line
2626:	14CE  C3E30C  		jp	_error
2627:			;
2628:			; Statement : RETURN
2629:			;
2630:	14D1          	l14d1:
2631:	14D1  C0      		ret	nz
2632:	14D2  16FF    		ld	d,-1		; Set direction
2633:	14D4  CD500C  		call	l0c50		; .. fix for FOR, WHILE
2634:	14D7  F9      		ld	sp,hl		; Set for stack
2635:	14D8  22B10A  		ld	(curstk),hl	; .. save it
2636:	14DB  FE8D    		cp	8dh
2637:	14DD  1E03    		ld	e,3		; Return without GOSUB
2638:	14DF  C2E30C  		jp	nz,_error
2639:	14E2  E1      		pop	hl
2640:	14E3  229807  		ld	(dir.mode),hl	; .. set direct mode
2641:	14E6  21A012  		ld	hl,l12a0
2642:	14E9  E3      		ex	(sp),hl
2643:	14EA          		_LD.A
2644:	14EB          	l14eb:
2645:	14EB  E1      		pop	hl
2646:			;
2647:			; Statement : DATA <list of constants>
2648:			;             COMMON <list of variables>
2649:			;
2650:	14EC          	_DATA:
2651:	14EC          		_LD.BC
2652:	14ED          		_LDA
2653:			;
2654:			; Statement : REM <remark>
2655:			;             ELSE <statement(s)>|<line number>
2656:			;
2657:	14EE          	l14ee:
2658:	14EE  0E00    		ld	c,0
2659:	14F0  0600    		ld	b,0
2660:	14F2          	l14f2:
2661:	14F2  79      		ld	a,c
2662:	14F3  48      		ld	c,b
2663:	14F4  47      		ld	b,a
2664:	14F5          	l14f5:
2665:	14F5  2B      		dec	hl
2666:	14F6          	l14f6:
2667:	14F6  CD0513  		call	get.tok
2668:	14F9  B7      		or	a
2669:	14FA  C8      		ret	z
2670:	14FB  B8      		cp	b
2671:	14FC  C8      		ret	z
2672:	14FD  23      		inc	hl
2673:	14FE  FE22    		cp	'"'
2674:	1500  CAF214  		jp	z,l14f2
2675:	1503  3C      		inc	a
2676:	1504  CAF614  		jp	z,l14f6
2677:	1507  D68C    		sub	8ch
2678:	1509  C2F514  		jp	nz,l14f5
2679:	150C  B8      		cp	b
2680:	150D  8A      		adc	a,d
2681:	150E  57      		ld	d,a
2682:	150F  C3F514  		jp	l14f5
2683:	1512          	l1512:
2684:	1512  F1      		pop	af
2685:	1513  C603    		add	a,3
2686:	1515  C32D15  		jp	l152d
2687:			;
2688:			; Statement : LET <var>=<expr>
2689:			;
2690:	1518          	_LET:
2691:	1518  CD8B39  		call	var.adr		; Get address of variable
2692:	151B  CDD343  		call	ilcmp		; Verify '='
2693:	151E  F0      		db	0f0h
2694:	151F  EB      		ex	de,hl
2695:	1520  22A70A  		ld	(@@ptr),hl	; Save address
2696:	1523  EB      		ex	de,hl
2697:	1524  D5      		push	de
2698:	1525  3A670A  		ld	a,($ARGLEN)	; Get length of value
2699:	1528  F5      		push	af
2700:	1529  CD021A  		call	EXPR		; Get expression
2701:	152C  F1      		pop	af
2702:	152D          	l152d:
2703:	152D  E3      		ex	(sp),hl
2704:	152E          	l152e:
2705:	152E  47      		ld	b,a
2706:	152F  3A670A  		ld	a,($ARGLEN)	; Get length
2707:	1532  B8      		cp	b		; Test same
2708:	1533  78      		ld	a,b
2709:	1534  CA3D15  		jp	z,l153d		; .. yeap
2710:	1537  CDAC1F  		call	l1fac
2711:	153A          	l153a:
2712:	153A  3A670A  		ld	a,($ARGLEN)	; Get length
2713:	153D          	l153d:
2714:	153D  11040C  		ld	de,$$ARG+4
2715:	1540  FE05    		cp	4+1		; Test integer or single
2716:	1542  DA4815  		jp	c,l1548		; .. yeap
2717:	1545  11000C  		ld	de,$$ARG
2718:	1548          	l1548:
2719:	1548  E5      		push	hl
2720:	1549  FE03    		cp	3		; Test pointer
2721:	154B  C27F15  		jp	nz,l157f	; .. nope
2722:	154E  2A040C  		ld	hl,($$ARG+4)
2723:	1551  E5      		push	hl
2724:	1552  23      		inc	hl
2725:	1553  5E      		ld	e,(hl)
2726:	1554  23      		inc	hl
2727:	1555  56      		ld	d,(hl)
2728:	1556  2A9A07  		ld	hl,(prg.base)	; Get base of program
2729:	1559  CDCD43  		call	cp.r
2730:	155C  D27315  		jp	nc,l1573	; HL >= DE
2731:	155F  2AC60A  		ld	hl,(l0ac6)
2732:	1562  CDCD43  		call	cp.r		; Compare HL:DE
2733:	1565  D1      		pop	de
2734:	1566  D27B15  		jp	nc,l157b	; .. HL >= DE
2735:	1569  21980A  		ld	hl,STR.arr+10*3	; Point to last record
2736:	156C  CDCD43  		call	cp.r
2737:	156F  D27B15  		jp	nc,l157b	; HL >= DE
2738:	1572          		_LD.A
2739:	1573          	l1573:
2740:	1573  D1      		pop	de
2741:	1574  CDC648  		call	l48c6
2742:	1577  EB      		ex	de,hl
2743:	1578  CDA346  		call	l46a3
2744:	157B          	l157b:
2745:	157B  CDC648  		call	l48c6
2746:	157E  E3      		ex	(sp),hl
2747:	157F          	l157f:
2748:	157F  CDC928  		call	l28c9
2749:	1582  D1      		pop	de
2750:	1583  E1      		pop	hl
2751:	1584  C9      		ret
2752:			;
2753:			; Statement : ON ERROR GOTO <line number>
2754:			;             ON <expr> GOSUB <list of line numbers>
2755:			;             ON <expr> GOTO <list of line numbers>
2756:			;
2757:	1585          	l1585:
2758:	1585  FEA8    		cp	0a8h		; Test ERROR
2759:	1587  C2B515  		jp	nz,l15b5	; .. nope
2760:	158A  CD0513  		call	get.tok
2761:	158D  CDD343  		call	ilcmp		; Verify GOTO
2762:	1590  89      		db	089h
2763:	1591  CD2814  		call	l1428
2764:	1594  7A      		ld	a,d
2765:	1595  B3      		or	e
2766:	1596  CAA215  		jp	z,l15a2
2767:	1599  CDF60E  		call	l0ef6
2768:	159C  50      		ld	d,b
2769:	159D  59      		ld	e,c
2770:	159E  E1      		pop	hl
2771:	159F  D2CC14  		jp	nc,l14cc
2772:	15A2          	l15a2:
2773:	15A2  EB      		ex	de,hl
2774:	15A3  22B90A  		ld	(l0ab9),hl
2775:	15A6  EB      		ex	de,hl
2776:	15A7  D8      		ret	c
2777:	15A8  3ABB0A  		ld	a,(l0abb)
2778:	15AB  B7      		or	a
2779:	15AC  7B      		ld	a,e
2780:	15AD  C8      		ret	z
2781:	15AE  3A8A07  		ld	a,(err.num)	; Get error number
2782:	15B1  5F      		ld	e,a
2783:	15B2  C3F90C  		jp	l0cf9		; .. process error
2784:	15B5          	l15b5:
2785:	15B5  CD7520  		call	l2075
2786:	15B8  7E      		ld	a,(hl)
2787:	15B9  47      		ld	b,a
2788:	15BA  FE8D    		cp	08dh		; Test GOSUB
2789:	15BC  CAC415  		jp	z,l15c4
2790:	15BF  CDD343  		call	ilcmp		; Verify GOTO
2791:	15C2  89      		db	089h
2792:	15C3  2B      		dec	hl
2793:	15C4          	l15c4:
2794:	15C4  4B      		ld	c,e
2795:	15C5          	l15c5:
2796:	15C5  0D      		dec	c
2797:	15C6  78      		ld	a,b
2798:	15C7  CAED12  		jp	z,l12ed
2799:	15CA  CD2914  		call	l1429
2800:	15CD  FE2C    		cp	','
2801:	15CF  C0      		ret	nz
2802:	15D0  C3C515  		jp	l15c5
2803:			;
2804:			; Statement : RESUME
2805:			;             RESUME 0
2806:			;             RESUME NEXT
2807:			;             RESUME <line number>
2808:			;
2809:	15D3          	l15d3:
2810:	15D3  11BB0A  		ld	de,l0abb
2811:	15D6  1A      		ld	a,(de)
2812:	15D7  B7      		or	a
2813:	15D8  CAD80C  		jp	z,l0cd8
2814:	15DB  3C      		inc	a
2815:	15DC  328A07  		ld	(err.num),a	; .. bump error number
2816:	15DF  12      		ld	(de),a
2817:	15E0  7E      		ld	a,(hl)
2818:	15E1  FE83    		cp	83h
2819:	15E3  CAF315  		jp	z,l15f3
2820:	15E6  CD2814  		call	l1428
2821:	15E9  C0      		ret	nz
2822:	15EA  7A      		ld	a,d
2823:	15EB  B3      		or	e
2824:	15EC  C29814  		jp	nz,l1498
2825:	15EF  3C      		inc	a
2826:	15F0  C3F715  		jp	l15f7
2827:	15F3          	l15f3:
2828:	15F3  CD0513  		call	get.tok
2829:	15F6  C0      		ret	nz
2830:	15F7          	l15f7:
2831:	15F7  2AB70A  		ld	hl,(l0ab7)
2832:	15FA  EB      		ex	de,hl
2833:	15FB  2AB30A  		ld	hl,(direct_2)	; Get direct mode
2834:	15FE  229807  		ld	(dir.mode),hl	; .. reset it
2835:	1601  EB      		ex	de,hl
2836:	1602  C0      		ret	nz
2837:	1603  7E      		ld	a,(hl)
2838:	1604  B7      		or	a
2839:	1605  C20C16  		jp	nz,l160c
2840:	1608  23      		inc	hl
2841:	1609  23      		inc	hl
2842:	160A  23      		inc	hl
2843:	160B  23      		inc	hl
2844:	160C          	l160c:
2845:	160C  23      		inc	hl
2846:	160D  C3EC14  		jp	_DATA		; .. process DATA
2847:			;
2848:			; Statement : ERROR <integer expr>
2849:			;
2850:	1610          	l1610:
2851:	1610  CD7520  		call	l2075
2852:	1613  C0      		ret	nz
2853:	1614  B7      		or	a
2854:	1615  CA1814  		jp	z,_ill.func	; .. illegal call if zero
2855:	1618  C3E30C  		jp	_error		; .. process error
2856:			;
2857:			; Statement : AUTO [<line number>[,increment>]]
2858:			;
2859:	161B          	l161b:
2860:	161B  110A00  		ld	de,10		; Set default values
2861:	161E  D5      		push	de
2862:	161F  CA3D16  		jp	z,l163d		; .. no argues
2863:	1622  CD1D14  		call	l141d
2864:	1625  EB      		ex	de,hl
2865:	1626  E3      		ex	(sp),hl
2866:	1627  CA3E16  		jp	z,l163e
2867:	162A  EB      		ex	de,hl
2868:	162B  CDD343  		call	ilcmp
2869:	162E  2C      		db	','
2870:	162F  EB      		ex	de,hl
2871:	1630  2AAD0A  		ld	hl,(AUTO.line)	; Get AUTO line
2872:	1633  EB      		ex	de,hl
2873:	1634  CA3D16  		jp	z,l163d
2874:	1637  CD2814  		call	l1428
2875:	163A  C2C90C  		jp	nz,l0cc9
2876:	163D          	l163d:
2877:	163D  EB      		ex	de,hl
2878:	163E          	l163e:
2879:	163E  7C      		ld	a,h		; Test line 0
2880:	163F  B5      		or	l
2881:	1640  CA1814  		jp	z,_ill.func	; Illegal call on line zero
2882:	1643  22AD0A  		ld	(AUTO.line),hl	; Save AUTO line
2883:	1646  32AA0A  		ld	(auto.mode),a	; .. AUTO mode
2884:	1649  E1      		pop	hl
2885:	164A  22AB0A  		ld	(AUTO.inc),hl	; .. AUTO increment
2886:	164D  C1      		pop	bc
2887:	164E  C3A20D  		jp	l0da2
2888:			;
2889:			; Statement : IF <expr> THEN {<statement(s)>|<line number>}
2890:			;                      [ELSE {<statement(s)>|<line number>}]
2891:			;             IF <expr> GOTO <line number>
2892:			;                      [ELSE {<statement(s)>|<line number>}]
2893:			;
2894:	1651          	l1651:
2895:	1651  CD021A  		call	EXPR		; Get expression
2896:	1654  7E      		ld	a,(hl)
2897:	1655  FE2C    		cp	','
2898:	1657  CC0513  		call	z,get.tok
2899:	165A  FE89    		cp	089h		; Test GOTO
2900:	165C  CA6416  		jp	z,l1664
2901:	165F  CDD343  		call	ilcmp		; Verify THEN
2902:	1662  CF      		db	0cfh
2903:	1663  2B      		dec	hl
2904:	1664          	l1664:
2905:	1664  E5      		push	hl
2906:	1665  CD8628  		call	l2886
2907:	1668  E1      		pop	hl
2908:	1669  CA7E16  		jp	z,l167e
2909:	166C          	l166c:
2910:	166C  CD0513  		call	get.tok
2911:	166F  C8      		ret	z
2912:	1670  FE0E    		cp	0eh
2913:	1672  CA9514  		jp	z,l1495
2914:	1675  FE0D    		cp	0dh
2915:	1677  C2ED12  		jp	nz,l12ed
2916:	167A  2A6E0A  		ld	hl,(l0a6e)
2917:	167D  C9      		ret
2918:	167E          	l167e:
2919:	167E  1601    		ld	d,1
2920:	1680          	l1680:
2921:	1680  CDEC14  		call	_DATA		; .. process DATA
2922:	1683  B7      		or	a
2923:	1684  C8      		ret	z
2924:	1685  CD0513  		call	get.tok
2925:	1688  FEA2    		cp	0a2h
2926:	168A  C28016  		jp	nz,l1680
2927:	168D  15      		dec	d
2928:	168E  C28016  		jp	nz,l1680
2929:	1691  C36C16  		jp	l166c
2930:			;
2931:			; Statement : LPRINT [<list of expr>]
2932:			;             LPRINT USING <string expr>;<list of expr>
2933:			;
2934:	1694          	l1694:
2935:	1694  3E01    		ld	a,1
2936:	1696  328D07  		ld	(iodev),a	; Set printer
2937:	1699  C3A116  		jp	l16a1
2938:			;
2939:			; Statement : PRINT [<list of expr>]
2940:			;             PRINT USING <string expr>;<list of expr>
2941:			;             PRINT#<file number>[,<list of expr>]
2942:			;             PRINT#<file number>,USING <string expr>;<list of expr>
2943:			;
2944:	169C          	l169c:
2945:	169C  0E02    		ld	c,2
2946:	169E  CD0D51  		call	l510d
2947:	16A1          	l16a1:
2948:	16A1  2B      		dec	hl
2949:	16A2  CD0513  		call	get.tok
2950:	16A5  CC2142  		call	z,fnl		; .. give new line
2951:	16A8          	l16a8:
2952:	16A8  CAE917  		jp	z,clr.FP	; .. reset file setting on end
2953:	16AB  FED9    		cp	0d9h
2954:	16AD  CAF73E  		jp	z,l3ef7
2955:	16B0  FED0    		cp	0d0h
2956:	16B2  CA6517  		jp	z,l1765
2957:	16B5  FED4    		cp	0d4h
2958:	16B7  CA6517  		jp	z,l1765
2959:	16BA  E5      		push	hl
2960:	16BB  FE2C    		cp	','
2961:	16BD  CA2517  		jp	z,l1725
2962:	16C0  FE3B    		cp	';'
2963:	16C2  CAE217  		jp	z,l17e2
2964:	16C5  C1      		pop	bc
2965:	16C6  CD021A  		call	EXPR		; Get expression
2966:	16C9  E5      		push	hl
2967:	16CA  CD641D  		call	get.type	; Get type
2968:	16CD  CADC16  		jp	z,l16dc		; .. got pointer
2969:	16D0  CD2931  		call	l3129
2970:	16D3  CDC746  		call	l46c7
2971:	16D6  3620    		ld	(hl),' '
2972:	16D8  2A040C  		ld	hl,($$ARG+4)
2973:	16DB  34      		inc	(hl)
2974:	16DC          	l16dc:
2975:	16DC  CD5446  		call	fpact		; Test file active
2976:	16DF  C21E17  		jp	nz,l171e	; .. yeap
2977:	16E2  2A040C  		ld	hl,($$ARG+4)
2978:	16E5  3A8D07  		ld	a,(iodev)	; Test device
2979:	16E8  B7      		or	a
2980:	16E9  CA0517  		jp	z,l1705		; .. console
2981:	16EC  3A8F07  		ld	a,(l078f)
2982:	16EF  47      		ld	b,a
2983:	16F0  3C      		inc	a
2984:	16F1  CA1E17  		jp	z,l171e
2985:	16F4  3A8C07  		ld	a,(colLST)	; Get column
2986:	16F7  B7      		or	a
2987:	16F8  CA1E17  		jp	z,l171e		; .. left side
2988:	16FB  86      		add	a,(hl)
2989:	16FC  3F      		ccf
2990:	16FD  D21B17  		jp	nc,l171b
2991:	1700  3D      		dec	a
2992:	1701  B8      		cp	b
2993:	1702  C31B17  		jp	l171b
2994:	1705          	l1705:
2995:	1705  3A9007  		ld	a,(l0790)
2996:	1708  47      		ld	b,a
2997:	1709  3C      		inc	a
2998:	170A  CA1E17  		jp	z,l171e
2999:	170D  3A650A  		ld	a,(colCON)	; Get column
3000:	1710  B7      		or	a
3001:	1711  CA1E17  		jp	z,l171e		; .. left side
3002:	1714  86      		add	a,(hl)
3003:	1715  3F      		ccf
3004:	1716  D21B17  		jp	nc,l171b
3005:	1719  3D      		dec	a
3006:	171A  B8      		cp	b
3007:	171B          	l171b:
3008:	171B  D42142  		call	nc,fnl		; .. give new line
3009:	171E          	l171e:
3010:	171E  CD2647  		call	l4726
3011:	1721  E1      		pop	hl
3012:	1722  C3A116  		jp	l16a1
3013:	1725          	l1725:
3014:	1725  012800  		ld	bc,l0028
3015:	1728  2A9407  		ld	hl,(FP)		; Get file pointer
3016:	172B  09      		add	hl,bc
3017:	172C  CD5446  		call	fpact		; Test file active
3018:	172F  7E      		ld	a,(hl)
3019:	1730  C25C17  		jp	nz,l175c	; .. yeap
3020:	1733  3A8D07  		ld	a,(iodev)	; Get device
3021:	1736  B7      		or	a
3022:	1737  CA4917  		jp	z,l1749		; .. console
3023:	173A  3A8E07  		ld	a,(l078e)
3024:	173D  47      		ld	b,a
3025:	173E  3C      		inc	a
3026:	173F  3A8C07  		ld	a,(colLST)	; Get column
3027:	1742  CA5C17  		jp	z,l175c
3028:	1745  B8      		cp	b
3029:	1746  C35617  		jp	l1756
3030:	1749          	l1749:
3031:	1749  3A9107  		ld	a,(l0791)
3032:	174C  47      		ld	b,a
3033:	174D  3A650A  		ld	a,(colCON)	; Get column
3034:	1750  FEFF    		cp	255
3035:	1752  CA5C17  		jp	z,l175c
3036:	1755  B8      		cp	b
3037:	1756          	l1756:
3038:	1756  D42142  		call	nc,fnl		; .. give new line
3039:	1759  D2E217  		jp	nc,l17e2
3040:	175C          	l175c:
3041:	175C  D60E    		sub	0eh
3042:	175E  D25C17  		jp	nc,l175c
3043:	1761  2F      		cpl
3044:	1762  C3D717  		jp	l17d7
3045:	1765          	l1765:
3046:	1765  F5      		push	af
3047:	1766  CD0513  		call	get.tok
3048:	1769  CD5620  		call	l2056
3049:	176C  F1      		pop	af
3050:	176D  F5      		push	af
3051:	176E  FED4    		cp	0d4h
3052:	1770  CA7417  		jp	z,l1774
3053:	1773  1B      		dec	de
3054:	1774          	l1774:
3055:	1774  7A      		ld	a,d
3056:	1775  B7      		or	a
3057:	1776  F27C17  		jp	p,l177c
3058:	1779  110000  		ld	de,l0000
3059:	177C          	l177c:
3060:	177C  E5      		push	hl
3061:	177D  CD5446  		call	fpact		; Test file active
3062:	1780  C29B17  		jp	nz,l179b	; .. yeap
3063:	1783  3A8D07  		ld	a,(iodev)	; Get device
3064:	1786  B7      		or	a
3065:	1787  3A8F07  		ld	a,(l078f)
3066:	178A  C29017  		jp	nz,l1790	; .. printer
3067:	178D  3A9007  		ld	a,(l0790)
3068:	1790          	l1790:
3069:	1790  6F      		ld	l,a
3070:	1791  3C      		inc	a
3071:	1792  CA9B17  		jp	z,l179b
3072:	1795  2600    		ld	h,0
3073:	1797  CD0D2C  		call	l2c0d
3074:	179A  EB      		ex	de,hl
3075:	179B          	l179b:
3076:	179B  E1      		pop	hl
3077:	179C  CDD343  		call	ilcmp
3078:	179F  29      		db	')'
3079:	17A0  2B      		dec	hl
3080:	17A1  F1      		pop	af
3081:	17A2  D6D4    		sub	0d4h
3082:	17A4  E5      		push	hl
3083:	17A5  CAC617  		jp	z,l17c6
3084:	17A8  012800  		ld	bc,l0028
3085:	17AB  2A9407  		ld	hl,(FP)		; Get file pointer
3086:	17AE  09      		add	hl,bc
3087:	17AF  CD5446  		call	fpact		; Test file active
3088:	17B2  7E      		ld	a,(hl)
3089:	17B3  C2C617  		jp	nz,l17c6	; .. yeap
3090:	17B6  3A8D07  		ld	a,(iodev)	; Get device
3091:	17B9  B7      		or	a
3092:	17BA  CAC317  		jp	z,l17c3		; .. console
3093:	17BD  3A8C07  		ld	a,(colLST)	; Get printer column
3094:	17C0  C3C617  		jp	l17c6
3095:	17C3          	l17c3:
3096:	17C3  3A650A  		ld	a,(colCON)	; Get console column
3097:	17C6          	l17c6:
3098:	17C6  2F      		cpl
3099:	17C7  83      		add	a,e
3100:	17C8  DAD717  		jp	c,l17d7
3101:	17CB  3C      		inc	a
3102:	17CC  CAE217  		jp	z,l17e2
3103:	17CF  CD2142  		call	fnl		; .. give new line
3104:	17D2  7B      		ld	a,e
3105:	17D3  3D      		dec	a
3106:	17D4  FAE217  		jp	m,l17e2
3107:	17D7          	l17d7:
3108:	17D7  3C      		inc	a
3109:	17D8  47      		ld	b,a
3110:	17D9  3E20    		ld	a,' '
3111:	17DB          	l17db:
3112:	17DB  CDD640  		call	putchar		; .. give blanks
3113:	17DE  05      		dec	b
3114:	17DF  C2DB17  		jp	nz,l17db
3115:	17E2          	l17e2:
3116:	17E2  E1      		pop	hl
3117:	17E3  CD0513  		call	get.tok
3118:	17E6  C3A816  		jp	l16a8
3119:			;
3120:			; Reset file pointer, enable console
3121:			;
3122:	17E9          	clr.FP:
3123:	17E9  AF      		xor	a
3124:	17EA  328D07  		ld	(iodev),a	; Set console
3125:	17ED  E5      		push	hl
3126:	17EE  67      		ld	h,a
3127:	17EF  6F      		ld	l,a
3128:	17F0  229407  		ld	(FP),hl		; Clear file pointer
3129:	17F3  E1      		pop	hl
3130:	17F4  C9      		ret
3131:			;
3132:			; Statement : LINE INPUT [;][<"prompt string">;] <string var>
3133:			;             LINE INPUT#<file number>,<string var>
3134:			;
3135:	17F5          	l17f5:
3136:	17F5  CDD343  		call	ilcmp		; Verify INPUT
3137:	17F8  85      		db	085h
3138:	17F9  FE23    		cp	'#'		; Test from file
3139:	17FB  CAA751  		jp	z,l51a7		; .. yeap
3140:	17FE  CD484C  		call	l4c48
3141:	1801  CD6F18  		call	l186f
3142:	1804  CD8B39  		call	var.adr		; Get address of variable
3143:	1807  CD3B2A  		call	vrf.str		; Verify string
3144:	180A  D5      		push	de
3145:	180B  E5      		push	hl
3146:	180C  CD304B  		call	l4b30
3147:	180F  D1      		pop	de
3148:	1810  C1      		pop	bc
3149:	1811  DA1644  		jp	c,l4416
3150:	1814  C5      		push	bc
3151:	1815  D5      		push	de
3152:	1816  0600    		ld	b,0
3153:	1818  CDCA46  		call	l46ca
3154:	181B  E1      		pop	hl
3155:	181C  3E03    		ld	a,3
3156:	181E  C32D15  		jp	l152d
3157:	1821          	l1821:
3158:	1821  3F526564		db	'?Redo from start',cr,lf,null
	      6F206672
	      6F6D2073
	      74617274
	      0D0A00
3159:			;
3160:			;
3161:			;
3162:	1834          	l1834:
3163:	1834  23      		inc	hl
3164:	1835  7E      		ld	a,(hl)
3165:	1836  B7      		or	a
3166:	1837  CAC90C  		jp	z,l0cc9
3167:	183A  FE22    		cp	'"'
3168:	183C  C23418  		jp	nz,l1834
3169:	183F  C3DA18  		jp	l18da
3170:	1842          	l1842:
3171:	1842  E1      		pop	hl
3172:	1843  E1      		pop	hl
3173:	1844  C34E18  		jp	l184e
3174:	1847          	l1847:
3175:	1847  3AA60A  		ld	a,(l0aa6)
3176:	184A  B7      		or	a
3177:	184B  C2C30C  		jp	nz,l0cc3
3178:	184E          	l184e:
3179:	184E  C1      		pop	bc
3180:	184F  212118  		ld	hl,l1821
3181:	1852  CD2347  		call	l4723
3182:	1855  2AAF0A  		ld	hl,(l0aaf)
3183:	1858  C9      		ret
3184:			;
3185:			;
3186:			;
3187:	1859          	l1859:
3188:	1859  CD0B51  		call	l510b
3189:	185C  E5      		push	hl
3190:	185D  216109  		ld	hl,l0961
3191:	1860  C33B19  		jp	l193b
3192:			;
3193:			; Statement : INPUT [;][<"prompt string">;] <list of variables>
3194:			;             INPUT#<file number>,<list of variables>
3195:			;
3196:	1863          	l1863:
3197:	1863  FE23    		cp	'#'		; Test from file
3198:	1865  CA5918  		jp	z,l1859		; .. yeap
3199:	1868  CD484C  		call	l4c48
3200:	186B  019918  		ld	bc,l1899
3201:	186E  C5      		push	bc		; Set return address
3202:	186F          	l186f:
3203:	186F  FE22    		cp	'"'		; Test string follows
3204:	1871  3E00    		ld	a,FALSE
3205:	1873  329307  		ld	(_brk),a	; Set echo mode
3206:	1876  3EFF    		ld	a,TRUE
3207:	1878  32E70B  		ld	(l0be7),a	; Set no string follows
3208:	187B  C0      		ret	nz		; .. no string
3209:	187C  CDC846  		call	l46c8
3210:	187F  7E      		ld	a,(hl)
3211:	1880  FE2C    		cp	','		; Test list
3212:	1882  C28F18  		jp	nz,l188f
3213:	1885  AF      		xor	a
3214:	1886  32E70B  		ld	(l0be7),a	; .. set string follows
3215:	1889  CD0513  		call	get.tok
3216:	188C  C39318  		jp	l1893
3217:	188F          	l188f:
3218:	188F  CDD343  		call	ilcmp		; Verify delimiter
3219:	1892  3B      		db	';'
3220:	1893          	l1893:
3221:	1893  E5      		push	hl
3222:	1894  CD2647  		call	l4726
3223:	1897  E1      		pop	hl
3224:	1898  C9      		ret
3225:			;
3226:			;
3227:			;
3228:	1899          	l1899:
3229:	1899  E5      		push	hl
3230:	189A  3AE70B  		ld	a,(l0be7)	; Test previous string
3231:	189D  B7      		or	a
3232:	189E  CAAB18  		jp	z,l18ab		; .. nope
3233:	18A1  3E3F    		ld	a,'?'
3234:	18A3  CDD640  		call	putchar		; Indicate input requested
3235:	18A6  3E20    		ld	a,' '
3236:	18A8  CDD640  		call	putchar
3237:	18AB          	l18ab:
3238:	18AB  CD304B  		call	l4b30
3239:	18AE  C1      		pop	bc
3240:	18AF  DA1644  		jp	c,l4416
3241:	18B2  C5      		push	bc
3242:	18B3  AF      		xor	a
3243:	18B4  32A60A  		ld	(l0aa6),a
3244:	18B7  362C    		ld	(hl),','
3245:	18B9  EB      		ex	de,hl
3246:	18BA  E1      		pop	hl
3247:	18BB  E5      		push	hl
3248:	18BC  D5      		push	de
3249:	18BD  D5      		push	de
3250:	18BE  2B      		dec	hl
3251:	18BF          	l18bf:
3252:	18BF  3E80    		ld	a,80h
3253:	18C1  32A50A  		ld	(l0aa5),a
3254:	18C4  CD0513  		call	get.tok
3255:	18C7  CD893A  		call	l3a89
3256:	18CA  7E      		ld	a,(hl)
3257:	18CB  2B      		dec	hl
3258:	18CC  FE5B    		cp	5bh
3259:	18CE  CAD618  		jp	z,l18d6
3260:	18D1  FE28    		cp	'('
3261:	18D3  C2FD18  		jp	nz,l18fd
3262:	18D6          	l18d6:
3263:	18D6  23      		inc	hl
3264:	18D7  0600    		ld	b,0
3265:	18D9          	l18d9:
3266:	18D9  04      		inc	b
3267:	18DA          	l18da:
3268:	18DA  CD0513  		call	get.tok
3269:	18DD  CAC90C  		jp	z,l0cc9
3270:	18E0  FE22    		cp	'"'
3271:	18E2  CA3418  		jp	z,l1834
3272:	18E5  FE28    		cp	'('
3273:	18E7  CAD918  		jp	z,l18d9
3274:	18EA  FE5B    		cp	'['
3275:	18EC  CADA18  		jp	z,l18da
3276:	18EF  FE5D    		cp	']'
3277:	18F1  CAF918  		jp	z,l18f9
3278:	18F4  FE29    		cp	')'
3279:	18F6  C2DA18  		jp	nz,l18da
3280:	18F9          	l18f9:
3281:	18F9  05      		dec	b
3282:	18FA  C2DA18  		jp	nz,l18da
3283:	18FD          	l18fd:
3284:	18FD  CD0513  		call	get.tok
3285:	1900  CA0819  		jp	z,l1908
3286:	1903  FE2C    		cp	','
3287:	1905  C2C90C  		jp	nz,l0cc9
3288:	1908          	l1908:
3289:	1908  E3      		ex	(sp),hl
3290:	1909  7E      		ld	a,(hl)
3291:	190A  FE2C    		cp	','
3292:	190C  C24218  		jp	nz,l1842
3293:	190F  3E01    		ld	a,1
3294:	1911  320A0C  		ld	(l0c0a),a
3295:	1914  CD6419  		call	l1964
3296:	1917  3A0A0C  		ld	a,(l0c0a)
3297:	191A  3D      		dec	a
3298:	191B  C24218  		jp	nz,l1842
3299:	191E  E5      		push	hl
3300:	191F  CD641D  		call	get.type	; Get type
3301:	1922  CCA848  		call	z,l48a8		; .. process pointer
3302:	1925  E1      		pop	hl
3303:	1926  2B      		dec	hl
3304:	1927  CD0513  		call	get.tok
3305:	192A  E3      		ex	(sp),hl
3306:	192B  7E      		ld	a,(hl)
3307:	192C  FE2C    		cp	','
3308:	192E  CABF18  		jp	z,l18bf
3309:	1931  E1      		pop	hl
3310:	1932  2B      		dec	hl
3311:	1933  CD0513  		call	get.tok
3312:	1936  B7      		or	a
3313:	1937  E1      		pop	hl
3314:	1938  C24E18  		jp	nz,l184e
3315:	193B          	l193b:
3316:	193B  362C    		ld	(hl),','
3317:	193D  C34519  		jp	l1945
3318:			;
3319:			; Statement : READ <list of variables>
3320:			;
3321:	1940          	l1940:
3322:	1940  E5      		push	hl
3323:	1941  2AC80A  		ld	hl,(DATA.ptr)	; Get DATA pointer
3324:	1944          		_OR
3325:	1945          	l1945:
3326:	1945  AF      		xor	a
3327:	1946  32A60A  		ld	(l0aa6),a
3328:	1949  E3      		ex	(sp),hl
3329:	194A  C35119  		jp	l1951
3330:	194D          	l194d:
3331:	194D  CDD343  		call	ilcmp
3332:	1950  2C      		db	','
3333:	1951          	l1951:
3334:	1951  CD8B39  		call	var.adr		; Get address of variable
3335:	1954  E3      		ex	(sp),hl
3336:	1955  D5      		push	de
3337:	1956  7E      		ld	a,(hl)
3338:	1957  FE2C    		cp	','
3339:	1959  CA6319  		jp	z,l1963
3340:	195C  3AA60A  		ld	a,(l0aa6)
3341:	195F  B7      		or	a
3342:	1960  C2D319  		jp	nz,l19d3
3343:	1963          	l1963:
3344:	1963          		_OR
3345:	1964          	l1964:
3346:	1964  AF      		xor	a
3347:	1965  32BC0B  		ld	(l0bbc),a
3348:	1968  CD5446  		call	fpact		; Test file active
3349:	196B  C29751  		jp	nz,l5197	; .. yeap
3350:	196E  CD641D  		call	get.type	; Get type
3351:	1971  F5      		push	af
3352:	1972  C2A219  		jp	nz,l19a2	; .. not a pointer
3353:	1975  CD0513  		call	get.tok
3354:	1978  57      		ld	d,a
3355:	1979  47      		ld	b,a
3356:	197A  FE22    		cp	'"'
3357:	197C  CA8C19  		jp	z,l198c
3358:	197F  3AA60A  		ld	a,(l0aa6)
3359:	1982  B7      		or	a
3360:	1983  57      		ld	d,a
3361:	1984  CA8919  		jp	z,l1989
3362:	1987  163A    		ld	d,':'
3363:	1989          	l1989:
3364:	1989  062C    		ld	b,','
3365:	198B  2B      		dec	hl
3366:	198C          	l198c:
3367:	198C  CDCB46  		call	l46cb
3368:	198F          	l198f:
3369:	198F  F1      		pop	af		; Get back type
3370:	1990  C603    		add	a,3		; .. fix for real
3371:	1992  4F      		ld	c,a
3372:	1993  3ABC0B  		ld	a,(l0bbc)
3373:	1996  B7      		or	a
3374:	1997  C8      		ret	z
3375:	1998          	l1998:
3376:	1998  79      		ld	a,c
3377:	1999  EB      		ex	de,hl
3378:	199A  21B119  		ld	hl,l19b1
3379:	199D  E3      		ex	(sp),hl
3380:	199E  D5      		push	de
3381:	199F  C32E15  		jp	l152e
3382:	19A2          	l19a2:
3383:	19A2  CD0513  		call	get.tok
3384:	19A5  F1      		pop	af
3385:	19A6  F5      		push	af
3386:	19A7  018F19  		ld	bc,l198f
3387:	19AA  C5      		push	bc		; Set return address
3388:	19AB  DAD12E  		jp	c,cnvnum	; .. get single
3389:	19AE  C3CA2E  		jp	cnvdoub		; .. double
3390:	19B1          	l19b1:
3391:	19B1  2B      		dec	hl
3392:	19B2  CD0513  		call	get.tok
3393:	19B5  CABD19  		jp	z,l19bd
3394:	19B8  FE2C    		cp	','
3395:	19BA  C24718  		jp	nz,l1847
3396:	19BD          	l19bd:
3397:	19BD  E3      		ex	(sp),hl
3398:	19BE  2B      		dec	hl
3399:	19BF  CD0513  		call	get.tok
3400:	19C2  C24D19  		jp	nz,l194d
3401:	19C5  D1      		pop	de
3402:	19C6  3AA60A  		ld	a,(l0aa6)
3403:	19C9  B7      		or	a
3404:	19CA  EB      		ex	de,hl
3405:	19CB  C2FC43  		jp	nz,l43fc
3406:	19CE  D5      		push	de
3407:	19CF  E1      		pop	hl
3408:	19D0  C3E917  		jp	clr.FP		; Reset file I/O
3409:	19D3          	l19d3:
3410:	19D3  CDEC14  		call	_DATA		; Process DATA
3411:	19D6  B7      		or	a
3412:	19D7  C2EC19  		jp	nz,l19ec
3413:	19DA  23      		inc	hl
3414:	19DB  7E      		ld	a,(hl)
3415:	19DC  23      		inc	hl
3416:	19DD  B6      		or	(hl)
3417:	19DE  1E04    		ld	e,4		; Out of data
3418:	19E0  CAE30C  		jp	z,_error
3419:	19E3  23      		inc	hl
3420:	19E4  5E      		ld	e,(hl)
3421:	19E5  23      		inc	hl
3422:	19E6  56      		ld	d,(hl)
3423:	19E7  EB      		ex	de,hl
3424:	19E8  22A30A  		ld	(direct_1),hl	; Save direct mode
3425:	19EB  EB      		ex	de,hl
3426:	19EC          	l19ec:
3427:	19EC  CD0513  		call	get.tok
3428:	19EF  FE84    		cp	84h
3429:	19F1  C2D319  		jp	nz,l19d3
3430:	19F4  C36319  		jp	l1963
3431:	19F7          	l19f7:
3432:	19F7  CDD343  		call	ilcmp		; Verify '='
3433:	19FA  F0      		db	0f0h
3434:	19FB  C3021A  		jp	EXPR		; .. get expression then
3435:	19FE          	l19fe:
3436:	19FE  CDD343  		call	ilcmp
3437:	1A01  28      		db	'('
3438:			;
3439:			; Get expression
3440:			;
3441:	1A02          	EXPR::
3442:	1A02  2B      		dec	hl
3443:	1A03          	l1a03:
3444:	1A03  1600    		ld	d,0
3445:	1A05          	l1a05:
3446:	1A05  D5      		push	de
3447:	1A06  0E01    		ld	c,1
3448:	1A08  CDC742  		call	tstmem		; Verify enough memory
3449:	1A0B  CD931B  		call	l1b93
3450:	1A0E  AF      		xor	a
3451:	1A0F  32090C  		ld	(l0c09),a
3452:	1A12          	l1a12:
3453:	1A12  22BC0A  		ld	(l0abc),hl
3454:	1A15          	l1a15:
3455:	1A15  2ABC0A  		ld	hl,(l0abc)
3456:	1A18  C1      		pop	bc
3457:	1A19  7E      		ld	a,(hl)
3458:	1A1A  229D0A  		ld	(l0a9d),hl
3459:	1A1D  FEEF    		cp	0efh
3460:	1A1F  D8      		ret	c
3461:	1A20  FEF2    		cp	0f2h
3462:	1A22  DA8E1A  		jp	c,l1a8e
3463:	1A25  D6F2    		sub	0f2h
3464:	1A27  5F      		ld	e,a
3465:	1A28  C2341A  		jp	nz,l1a34
3466:	1A2B  3A670A  		ld	a,($ARGLEN)	; Get length of arg
3467:	1A2E  FE03    		cp	3		; Test pointer
3468:	1A30  7B      		ld	a,e
3469:	1A31  CA5B48  		jp	z,l485b
3470:	1A34          	l1a34:
3471:	1A34  FE0C    		cp	0ch
3472:	1A36  D0      		ret	nc
3473:	1A37  217F04  		ld	hl,l047f
3474:	1A3A  1600    		ld	d,0
3475:	1A3C  19      		add	hl,de
3476:	1A3D  78      		ld	a,b
3477:	1A3E  56      		ld	d,(hl)
3478:	1A3F  BA      		cp	d
3479:	1A40  D0      		ret	nc
3480:	1A41  C5      		push	bc
3481:	1A42  01151A  		ld	bc,l1a15
3482:	1A45  C5      		push	bc
3483:	1A46  7A      		ld	a,d
3484:	1A47  FE7F    		cp	7fh
3485:	1A49  CAAC1A  		jp	z,l1aac
3486:	1A4C  FE51    		cp	'Q'
3487:	1A4E  DABA1A  		jp	c,l1aba
3488:	1A51  E6FE    		and	0feh
3489:	1A53  FE7A    		cp	7ah
3490:	1A55  CABA1A  		jp	z,l1aba
3491:	1A58          	l1a58:
3492:	1A58  21040C  		ld	hl,$$ARG+4
3493:	1A5B  3A670A  		ld	a,($ARGLEN)	; Get length of arg
3494:	1A5E  D603    		sub	3		; Test pointer
3495:	1A60  CAE10C  		jp	z,l0ce1		; .. yeap
3496:	1A63  B7      		or	a
3497:	1A64  4E      		ld	c,(hl)
3498:	1A65  23      		inc	hl
3499:	1A66  46      		ld	b,(hl)
3500:	1A67  C5      		push	bc
3501:	1A68  FA7F1A  		jp	m,l1a7f
3502:	1A6B  23      		inc	hl
3503:	1A6C  4E      		ld	c,(hl)
3504:	1A6D  23      		inc	hl
3505:	1A6E  46      		ld	b,(hl)
3506:	1A6F  C5      		push	bc
3507:	1A70  E27F1A  		jp	po,l1a7f
3508:	1A73  21000C  		ld	hl,$$ARG
3509:	1A76  4E      		ld	c,(hl)
3510:	1A77  23      		inc	hl
3511:	1A78  46      		ld	b,(hl)
3512:	1A79  23      		inc	hl
3513:	1A7A  C5      		push	bc
3514:	1A7B  4E      		ld	c,(hl)
3515:	1A7C  23      		inc	hl
3516:	1A7D  46      		ld	b,(hl)
3517:	1A7E  C5      		push	bc
3518:	1A7F          	l1a7f:
3519:	1A7F  C603    		add	a,3
3520:	1A81  4B      		ld	c,e
3521:	1A82  47      		ld	b,a
3522:	1A83  C5      		push	bc
3523:	1A84  01E31A  		ld	bc,l1ae3
3524:	1A87          	l1a87:
3525:	1A87  C5      		push	bc
3526:	1A88  2A9D0A  		ld	hl,(l0a9d)
3527:	1A8B  C3051A  		jp	l1a05
3528:	1A8E          	l1a8e:
3529:	1A8E  1600    		ld	d,0
3530:	1A90          	l1a90:
3531:	1A90  D6EF    		sub	0efh
3532:	1A92  DAC61A  		jp	c,l1ac6
3533:	1A95  FE03    		cp	3
3534:	1A97  D2C61A  		jp	nc,l1ac6
3535:	1A9A  FE01    		cp	1
3536:	1A9C  17      		rla
3537:	1A9D  AA      		xor	d
3538:	1A9E  BA      		cp	d
3539:	1A9F  57      		ld	d,a
3540:	1AA0  DAC90C  		jp	c,l0cc9
3541:	1AA3  229D0A  		ld	(l0a9d),hl
3542:	1AA6  CD0513  		call	get.tok
3543:	1AA9  C3901A  		jp	l1a90
3544:	1AAC          	l1aac:
3545:	1AAC  CDF429  		call	l29f4
3546:	1AAF  CD9928  		call	l2899
3547:	1AB2  01CC36  		ld	bc,l36cc
3548:	1AB5  167F    		ld	d,7fh
3549:	1AB7  C3871A  		jp	l1a87
3550:	1ABA          	l1aba:
3551:	1ABA  D5      		push	de
3552:	1ABB  CD7A29  		call	_CINT		; Get integer
3553:	1ABE  D1      		pop	de
3554:	1ABF  E5      		push	hl
3555:	1AC0  01751D  		ld	bc,l1d75
3556:	1AC3  C3871A  		jp	l1a87
3557:	1AC6          	l1ac6:
3558:	1AC6  78      		ld	a,b
3559:	1AC7  FE64    		cp	64h
3560:	1AC9  D0      		ret	nc
3561:	1ACA  C5      		push	bc
3562:	1ACB  D5      		push	de
3563:	1ACC  110464  		ld	de,l6404
3564:	1ACF  21421D  		ld	hl,l1d42
3565:	1AD2  E5      		push	hl
3566:	1AD3  CD641D  		call	get.type	; Get type
3567:	1AD6  C2581A  		jp	nz,l1a58	; .. not a pointer
3568:	1AD9  2A040C  		ld	hl,($$ARG+4)
3569:	1ADC  E5      		push	hl
3570:	1ADD  015C46  		ld	bc,l465c
3571:	1AE0  C3871A  		jp	l1a87
3572:	1AE3          	l1ae3:
3573:	1AE3  C1      		pop	bc
3574:	1AE4  79      		ld	a,c
3575:	1AE5  32680A  		ld	(l0a68),a
3576:	1AE8  3A670A  		ld	a,($ARGLEN)	; Get length of arg
3577:	1AEB  B8      		cp	b		; Test same
3578:	1AEC  C2FC1A  		jp	nz,l1afc	; .. nope
3579:	1AEF  FE02    		cp	2		; Test integer
3580:	1AF1  CA181B  		jp	z,l1b18
3581:	1AF4  FE04    		cp	4		; .. or single precision
3582:	1AF6  CA671B  		jp	z,l1b67
3583:	1AF9  D22B1B  		jp	nc,l1b2b
3584:	1AFC          	l1afc:
3585:	1AFC  57      		ld	d,a
3586:	1AFD  78      		ld	a,b
3587:	1AFE  FE08    		cp	8		; Test double precision
3588:	1B00  CA281B  		jp	z,l1b28
3589:	1B03  7A      		ld	a,d
3590:	1B04  FE08    		cp	8
3591:	1B06  CA4F1B  		jp	z,l1b4f
3592:	1B09  78      		ld	a,b
3593:	1B0A  FE04    		cp	4
3594:	1B0C  CA641B  		jp	z,l1b64
3595:	1B0F  7A      		ld	a,d
3596:	1B10  FE03    		cp	3
3597:	1B12  CAE10C  		jp	z,l0ce1
3598:	1B15  D26F1B  		jp	nc,l1b6f
3599:	1B18          	l1b18:
3600:	1B18  21A904  		ld	hl,l04a9
3601:	1B1B  0600    		ld	b,0
3602:	1B1D  09      		add	hl,bc
3603:	1B1E  09      		add	hl,bc
3604:	1B1F  4E      		ld	c,(hl)
3605:	1B20  23      		inc	hl
3606:	1B21  46      		ld	b,(hl)
3607:	1B22  D1      		pop	de
3608:	1B23  2A040C  		ld	hl,($$ARG+4)
3609:	1B26  C5      		push	bc
3610:	1B27  C9      		ret
3611:	1B28          	l1b28:
3612:	1B28  CD202A  		call	l2a20
3613:	1B2B          	l1b2b:
3614:	1B2B  CDF428  		call	l28f4
3615:	1B2E  E1      		pop	hl
3616:	1B2F  22020C  		ld	($$ARG+2),hl
3617:	1B32  E1      		pop	hl
3618:	1B33  22000C  		ld	($$ARG),hl
3619:	1B36          	l1b36:
3620:	1B36  C1      		pop	bc
3621:	1B37  D1      		pop	de
3622:	1B38  CDA928  		call	l28a9
3623:	1B3B          	l1b3b:
3624:	1B3B  CD202A  		call	l2a20
3625:	1B3E  219504  		ld	hl,l0495
3626:	1B41          	l1b41:
3627:	1B41  3A680A  		ld	a,(l0a68)
3628:	1B44  07      		rlca
3629:	1B45  85      		add	a,l
3630:	1B46  6F      		ld	l,a
3631:	1B47  8C      		adc	a,h
3632:	1B48  95      		sub	l
3633:	1B49  67      		ld	h,a
3634:	1B4A  7E      		ld	a,(hl)
3635:	1B4B  23      		inc	hl
3636:	1B4C  66      		ld	h,(hl)
3637:	1B4D  6F      		ld	l,a
3638:	1B4E  E9      		jp	(hl)
3639:	1B4F          	l1b4f:
3640:	1B4F  78      		ld	a,b		; Get length
3641:	1B50  F5      		push	af
3642:	1B51  CDF428  		call	l28f4
3643:	1B54  F1      		pop	af
3644:	1B55  32670A  		ld	($ARGLEN),a	; Set length of arg
3645:	1B58  FE04    		cp	4		; Test single precision
3646:	1B5A  CA361B  		jp	z,l1b36		; .. yeap
3647:	1B5D  E1      		pop	hl
3648:	1B5E  22040C  		ld	($$ARG+4),hl
3649:	1B61  C33B1B  		jp	l1b3b
3650:	1B64          	l1b64:
3651:	1B64  CDF429  		call	l29f4
3652:	1B67          	l1b67:
3653:	1B67  C1      		pop	bc
3654:	1B68  D1      		pop	de
3655:	1B69          	l1b69:
3656:	1B69  219F04  		ld	hl,l049f
3657:	1B6C  C3411B  		jp	l1b41
3658:	1B6F          	l1b6f:
3659:	1B6F  E1      		pop	hl
3660:	1B70  CD9928  		call	l2899
3661:	1B73  CD142A  		call	l2a14
3662:	1B76  CDB428  		call	l28b4
3663:	1B79  E1      		pop	hl
3664:	1B7A  22060C  		ld	($$ARG+6),hl
3665:	1B7D  E1      		pop	hl
3666:	1B7E  22040C  		ld	($$ARG+4),hl
3667:	1B81  C3691B  		jp	l1b69
3668:	1B84          	l1b84:
3669:	1B84  E5      		push	hl
3670:	1B85  EB      		ex	de,hl
3671:	1B86  CD142A  		call	l2a14
3672:	1B89  E1      		pop	hl
3673:	1B8A  CD9928  		call	l2899
3674:	1B8D  CD142A  		call	l2a14
3675:	1B90  C36727  		jp	l2767
3676:			;
3677:			;
3678:			;
3679:	1B93          	l1b93:
3680:	1B93  CD0513  		call	get.tok		; Fetch token
3681:	1B96  CADE0C  		jp	z,l0cde		; .. error, we expect more
3682:	1B99  DAD12E  		jp	c,cnvnum	; .. get number
3683:	1B9C  CD0445  		call	isalph_		; Test A..Z
3684:	1B9F  D24A1C  		jp	nc,l1c4a	; .. yeap
3685:	1BA2  FE20    		cp	' '
3686:	1BA4  DA5D13  		jp	c,l135d
3687:	1BA7  3C      		inc	a
3688:	1BA8  CAD31C  		jp	z,l1cd3
3689:	1BAB  3D      		dec	a
3690:	1BAC  FEF2    		cp	0f2h		; Test unary '+'
3691:	1BAE  CA931B  		jp	z,l1b93		; .. skip it
3692:	1BB1  FEF3    		cp	0f3h		; Test unary '-'
3693:	1BB3  CA3C1C  		jp	z,l1c3c
3694:	1BB6  FE22    		cp	'"'		; Test string
3695:	1BB8  CAC846  		jp	z,l46c8
3696:	1BBB  FED5    		cp	0d5h		; .. NOT
3697:	1BBD  CA4F1D  		jp	z,l1d4f
3698:	1BC0  FE26    		cp	'&'		; .. maybe number
3699:	1BC2  CA691C  		jp	z,ato??_	; .. yeap
3700:	1BC5  FED7    		cp	0d7h		; Test ERR
3701:	1BC7  C2D61B  		jp	nz,l1bd6	; .. nope
3702:	1BCA          	l1bca:
3703:	1BCA  CD0513  		call	get.tok		; Skip token
3704:	1BCD  3A8A07  		ld	a,(err.num)	; Get error number
3705:	1BD0  E5      		push	hl
3706:	1BD1  CDD51D  		call	l1dd5		; .. expand byte
3707:	1BD4  E1      		pop	hl
3708:	1BD5  C9      		ret
3709:	1BD6          	l1bd6:
3710:	1BD6  FED6    		cp	0d6h
3711:	1BD8  C2E71B  		jp	nz,l1be7
3712:	1BDB  CD0513  		call	get.tok
3713:	1BDE  E5      		push	hl
3714:	1BDF  2AB30A  		ld	hl,(direct_2)	; Get direct mode
3715:	1BE2  CD032C  		call	l2c03
3716:	1BE5  E1      		pop	hl
3717:	1BE6  C9      		ret
3718:	1BE7          	l1be7:
3719:	1BE7  FEDC    		cp	0dch
3720:	1BE9  C2161C  		jp	nz,l1c16
3721:	1BEC  CD0513  		call	get.tok
3722:	1BEF  CDD343  		call	ilcmp
3723:	1BF2  28      		db	'('
3724:	1BF3  FE23    		cp	'#'
3725:	1BF5  C2031C  		jp	nz,l1c03
3726:	1BF8  CD7220  		call	l2072
3727:	1BFB  E5      		push	hl
3728:	1BFC  CD5051  		call	l5150
3729:	1BFF  E1      		pop	hl
3730:	1C00  C3061C  		jp	l1c06
3731:	1C03          	l1c03:
3732:	1C03  CD893A  		call	l3a89
3733:	1C06          	l1c06:
3734:	1C06  CDD343  		call	ilcmp
3735:	1C09  29      		db	')'
3736:	1C0A  E5      		push	hl
3737:	1C0B  EB      		ex	de,hl
3738:	1C0C  7C      		ld	a,h
3739:	1C0D  B5      		or	l
3740:	1C0E  CA1814  		jp	z,_ill.func	; .. error if zero
3741:	1C11  CDDC29  		call	st.INT		; Save integer result
3742:	1C14  E1      		pop	hl
3743:	1C15  C9      		ret
3744:	1C16          	l1c16:
3745:	1C16  FED2    		cp	0d2h
3746:	1C18  CADB1D  		jp	z,l1ddb
3747:	1C1B  FEDA    		cp	0dah
3748:	1C1D  CACB49  		jp	z,l49cb
3749:	1C20  FEDD    		cp	0ddh
3750:	1C22  CA6F42  		jp	z,l426f
3751:	1C25  FED8    		cp	0d8h
3752:	1C27  CA0049  		jp	z,l4900
3753:	1C2A  FE85    		cp	85h
3754:	1C2C  CA2755  		jp	z,l5527
3755:	1C2F  FED3    		cp	0d3h
3756:	1C31  CA541E  		jp	z,l1e54
3757:	1C34          	l1c34:
3758:	1C34  CDFE19  		call	l19fe
3759:	1C37  CDD343  		call	ilcmp
3760:	1C3A  29      		db	')'
3761:	1C3B  C9      		ret
3762:			;
3763:			; -> Got unary '-'
3764:			;
3765:	1C3C          	l1c3c:
3766:	1C3C  167D    		ld	d,7dh
3767:	1C3E  CD051A  		call	l1a05
3768:	1C41  2ABC0A  		ld	hl,(l0abc)
3769:	1C44  E5      		push	hl
3770:	1C45  CD6B28  		call	l286b
3771:	1C48          	l1c48:
3772:	1C48  E1      		pop	hl
3773:	1C49  C9      		ret
3774:	1C4A          	l1c4a:
3775:	1C4A  CD8B39  		call	var.adr		; Get address of variable
3776:	1C4D          	l1c4d:
3777:	1C4D  E5      		push	hl
3778:	1C4E  EB      		ex	de,hl
3779:	1C4F  22040C  		ld	($$ARG+4),hl
3780:	1C52  CD641D  		call	get.type	; Get type
3781:	1C55  C4EE28  		call	nz,l28ee	; .. not a pointer
3782:	1C58  E1      		pop	hl
3783:	1C59  C9      		ret
3784:			;
3785:			; Get upper case Accu from ^HL
3786:			;
3787:	1C5A          	toupper_:
3788:	1C5A  7E      		ld	a,(hl)
3789:			;
3790:			; Get upper case Accu
3791:			;
3792:	1C5B          	toupper:
3793:	1C5B  FE61    		cp	'a'
3794:	1C5D  D8      		ret	c
3795:	1C5E  FE7B    		cp	'z'+1
3796:	1C60  D0      		ret	nc
3797:	1C61  E65F    		and	5fh
3798:	1C63  C9      		ret
3799:			;
3800:			; Convert ASCII [decimal,octal,hexadecimal] to binary
3801:			;
3802:	1C64          	ato??:
3803:	1C64  FE26    		cp	'&'		; Test hex or octal
3804:	1C66  C22814  		jp	nz,l1428	; .. nope, get decimal
3805:	1C69          	ato??_:
3806:	1C69  110000  		ld	de,0		; Clear result
3807:	1C6C  CD0513  		call	get.tok
3808:	1C6F  CD5B1C  		call	toupper		; Get upper case
3809:	1C72  FE4F    		cp	'O'		; Test octal
3810:	1C74  CAAD1C  		jp	z,l1cad		; .. yeap
3811:	1C77  FE48    		cp	'H'
3812:	1C79  C2AC1C  		jp	nz,l1cac
3813:	1C7C  0605    		ld	b,5
3814:	1C7E          	l1c7e:
3815:	1C7E  23      		inc	hl
3816:	1C7F  7E      		ld	a,(hl)
3817:	1C80  CD5B1C  		call	toupper		; Get upper case
3818:	1C83  CD0445  		call	isalph_		; Test A..Z
3819:	1C86  EB      		ex	de,hl
3820:	1C87  D2971C  		jp	nc,l1c97	; .. yeap
3821:	1C8A  FE3A    		cp	'9'+1
3822:	1C8C  D2CE1C  		jp	nc,l1cce
3823:	1C8F  D630    		sub	'0'
3824:	1C91  DACE1C  		jp	c,l1cce
3825:	1C94  C39E1C  		jp	l1c9e
3826:	1C97          	l1c97:
3827:	1C97  FE47    		cp	'F'+1
3828:	1C99  D2CE1C  		jp	nc,l1cce
3829:	1C9C  D637    		sub	'A'-10
3830:	1C9E          	l1c9e:
3831:	1C9E  29      		add	hl,hl
3832:	1C9F  29      		add	hl,hl
3833:	1CA0  29      		add	hl,hl
3834:	1CA1  29      		add	hl,hl
3835:	1CA2  B5      		or	l
3836:	1CA3  6F      		ld	l,a
3837:	1CA4  EB      		ex	de,hl
3838:	1CA5  05      		dec	b
3839:	1CA6  C27E1C  		jp	nz,l1c7e
3840:	1CA9  C3DB0C  		jp	l0cdb
3841:	1CAC          	l1cac:
3842:	1CAC  2B      		dec	hl
3843:	1CAD          	l1cad:
3844:	1CAD  CD0513  		call	get.tok
3845:	1CB0  EB      		ex	de,hl
3846:	1CB1  D2CE1C  		jp	nc,l1cce
3847:	1CB4  FE38    		cp	'7'+1
3848:	1CB6  D2C90C  		jp	nc,l0cc9
3849:	1CB9  01DB0C  		ld	bc,l0cdb
3850:	1CBC  C5      		push	bc
3851:	1CBD  29      		add	hl,hl
3852:	1CBE  D8      		ret	c
3853:	1CBF  29      		add	hl,hl
3854:	1CC0  D8      		ret	c
3855:	1CC1  29      		add	hl,hl
3856:	1CC2  D8      		ret	c
3857:	1CC3  C1      		pop	bc
3858:	1CC4  0600    		ld	b,0
3859:	1CC6  D630    		sub	'0'
3860:	1CC8  4F      		ld	c,a
3861:	1CC9  09      		add	hl,bc
3862:	1CCA  EB      		ex	de,hl
3863:	1CCB  C3AD1C  		jp	l1cad
3864:	1CCE          	l1cce:
3865:	1CCE  CDDC29  		call	st.INT		; Save integer result
3866:	1CD1  EB      		ex	de,hl
3867:	1CD2  C9      		ret
3868:			;
3869:			;
3870:			;
3871:	1CD3          	l1cd3:
3872:	1CD3  23      		inc	hl
3873:	1CD4  7E      		ld	a,(hl)
3874:	1CD5  D681    		sub	81h
3875:	1CD7  FE07    		cp	7
3876:	1CD9  C2E81C  		jp	nz,l1ce8
3877:	1CDC  E5      		push	hl
3878:	1CDD  CD0513  		call	get.tok
3879:	1CE0  FE28    		cp	'('
3880:	1CE2  E1      		pop	hl
3881:	1CE3  C2CC37  		jp	nz,l37cc
3882:	1CE6  3E07    		ld	a,7
3883:	1CE8          	l1ce8:
3884:	1CE8  0600    		ld	b,0
3885:	1CEA  07      		rlca
3886:	1CEB  4F      		ld	c,a
3887:	1CEC  C5      		push	bc
3888:	1CED  CD0513  		call	get.tok
3889:	1CF0  79      		ld	a,c
3890:	1CF1  FE05    		cp	5
3891:	1CF3  D20F1D  		jp	nc,l1d0f
3892:	1CF6  CDFE19  		call	l19fe
3893:	1CF9  CDD343  		call	ilcmp
3894:	1CFC  2C      		db	','
3895:	1CFD  CD3B2A  		call	vrf.str		; Verify string follows
3896:	1D00  EB      		ex	de,hl
3897:	1D01  2A040C  		ld	hl,($$ARG+4)
3898:	1D04  E3      		ex	(sp),hl
3899:	1D05  E5      		push	hl
3900:	1D06  EB      		ex	de,hl
3901:	1D07  CD7520  		call	l2075
3902:	1D0A  EB      		ex	de,hl
3903:	1D0B  E3      		ex	(sp),hl
3904:	1D0C  C3291D  		jp	l1d29
3905:	1D0F          	l1d0f:
3906:	1D0F  CD341C  		call	l1c34
3907:	1D12  E3      		ex	(sp),hl
3908:	1D13  7D      		ld	a,l
3909:	1D14  FE0C    		cp	0ch
3910:	1D16  DA201D  		jp	c,l1d20
3911:	1D19  FE1B    		cp	1bh
3912:	1D1B  E5      		push	hl
3913:	1D1C  DCF429  		call	c,l29f4
3914:	1D1F  E1      		pop	hl
3915:	1D20          	l1d20:
3916:	1D20  11481C  		ld	de,l1c48
3917:	1D23  D5      		push	de
3918:	1D24  3E01    		ld	a,1
3919:	1D26  32090C  		ld	(l0c09),a
3920:	1D29          	l1d29:
3921:	1D29  019F01  		ld	bc,l019f
3922:			;
3923:			; Jump thru table in ^BC, indexed by HL
3924:			;
3925:	1D2C          	j.i.bc:
3926:	1D2C  09      		add	hl,bc		; Get table entry
3927:	1D2D  4E      		ld	c,(hl)		; Fetch address
3928:	1D2E  23      		inc	hl
3929:	1D2F  66      		ld	h,(hl)
3930:	1D30  69      		ld	l,c
3931:	1D31  E9      		jp	(hl)		; .. jump
3932:			;
3933:			;
3934:			;
3935:	1D32          	l1d32:
3936:	1D32  15      		dec	d
3937:	1D33  FEF3    		cp	0f3h
3938:	1D35  C8      		ret	z
3939:	1D36  FE2D    		cp	'-'
3940:	1D38  C8      		ret	z
3941:	1D39  14      		inc	d
3942:	1D3A  FE2B    		cp	'+'
3943:	1D3C  C8      		ret	z
3944:	1D3D  FEF2    		cp	0f2h
3945:	1D3F  C8      		ret	z
3946:	1D40  2B      		dec	hl
3947:	1D41  C9      		ret
3948:	1D42          	l1d42:
3949:	1D42  3C      		inc	a
3950:	1D43  8F      		adc	a,a
3951:	1D44  C1      		pop	bc
3952:	1D45  A0      		and	b
3953:	1D46  C6FF    		add	a,0ffh
3954:	1D48  9F      		sbc	a,a
3955:	1D49  CD7F28  		call	l287f
3956:	1D4C  C3611D  		jp	l1d61
3957:			;
3958:			; -> Got NOT
3959:			;
3960:	1D4F          	l1d4f:
3961:	1D4F  165A    		ld	d,05ah
3962:	1D51  CD051A  		call	l1a05
3963:	1D54  CD7A29  		call	_CINT		; Get integer
3964:	1D57  7D      		ld	a,l		; .. build complement
3965:	1D58  2F      		cpl
3966:	1D59  6F      		ld	l,a
3967:	1D5A  7C      		ld	a,h
3968:	1D5B  2F      		cpl
3969:	1D5C  67      		ld	h,a
3970:	1D5D  22040C  		ld	($$ARG+4),hl	; .. save result
3971:	1D60  C1      		pop	bc
3972:	1D61          	l1d61:
3973:	1D61  C3151A  		jp	l1a15
3974:			;
3975:			; Get type of argument
3976:			; EXIT	Z  if pointer
3977:			;	C  if integer, single precision or pointer
3978:			;	M  if integer
3979:			;	PO if single precision
3980:			;	Accu holds type-3
3981:			;
3982:	1D64          	get.type:
3983:	1D64  3A670A  		ld	a,($ARGLEN)	; Get length of arg
3984:	1D67  FE08    		cp	8		; Test double precision
3985:	1D69  D2711D  		jp	nc,l1d71	; .. yeap
3986:	1D6C  D603    		sub	3		; .. subtract for flags
3987:	1D6E  B7      		or	a
3988:	1D6F  37      		scf			; .. indicate result
3989:	1D70  C9      		ret
3990:	1D71          	l1d71:
3991:	1D71  D603    		sub	3		; Fix for offset
3992:	1D73  B7      		or	a		; .. clear flags
3993:	1D74  C9      		ret
3994:			;
3995:			;
3996:			;
3997:	1D75          	l1d75:
3998:	1D75  78      		ld	a,b
3999:	1D76  F5      		push	af
4000:	1D77  CD7A29  		call	_CINT		; Get integer
4001:	1D7A  F1      		pop	af
4002:	1D7B  D1      		pop	de
4003:	1D7C  FE7A    		cp	7ah
4004:	1D7E  CA0D2C  		jp	z,l2c0d
4005:	1D81  FE7B    		cp	7bh
4006:	1D83  CAA82B  		jp	z,l2ba8
4007:	1D86  01D71D  		ld	bc,l1dd7
4008:	1D89  C5      		push	bc		; Set return address
4009:	1D8A  FE46    		cp	'F'
4010:	1D8C  C2951D  		jp	nz,l1d95
4011:	1D8F  7B      		ld	a,e
4012:	1D90  B5      		or	l
4013:	1D91  6F      		ld	l,a
4014:	1D92  7C      		ld	a,h
4015:	1D93  B2      		or	d
4016:	1D94  C9      		ret
4017:	1D95          	l1d95:
4018:	1D95  FE50    		cp	'P'
4019:	1D97  C2A01D  		jp	nz,l1da0
4020:	1D9A  7B      		ld	a,e
4021:	1D9B  A5      		and	l
4022:	1D9C  6F      		ld	l,a
4023:	1D9D  7C      		ld	a,h
4024:	1D9E  A2      		and	d
4025:	1D9F  C9      		ret
4026:	1DA0          	l1da0:
4027:	1DA0  FE3C    		cp	'<'
4028:	1DA2  C2AB1D  		jp	nz,l1dab
4029:	1DA5  7B      		ld	a,e
4030:	1DA6  AD      		xor	l
4031:	1DA7  6F      		ld	l,a
4032:	1DA8  7C      		ld	a,h
4033:	1DA9  AA      		xor	d
4034:	1DAA  C9      		ret
4035:	1DAB          	l1dab:
4036:	1DAB  FE32    		cp	'2'
4037:	1DAD  C2B81D  		jp	nz,l1db8
4038:	1DB0  7B      		ld	a,e
4039:	1DB1  AD      		xor	l
4040:	1DB2  2F      		cpl
4041:	1DB3  6F      		ld	l,a
4042:	1DB4  7C      		ld	a,h
4043:	1DB5  AA      		xor	d
4044:	1DB6  2F      		cpl
4045:	1DB7  C9      		ret
4046:	1DB8          	l1db8:
4047:	1DB8  7D      		ld	a,l
4048:	1DB9  2F      		cpl
4049:	1DBA  A3      		and	e
4050:	1DBB  2F      		cpl
4051:	1DBC  6F      		ld	l,a
4052:	1DBD  7C      		ld	a,h
4053:	1DBE  2F      		cpl
4054:	1DBF  A2      		and	d
4055:	1DC0  2F      		cpl
4056:	1DC1  C9      		ret
4057:	1DC2          	l1dc2:
4058:	1DC2  7D      		ld	a,l
4059:	1DC3  93      		sub	e
4060:	1DC4  6F      		ld	l,a
4061:	1DC5  7C      		ld	a,h
4062:	1DC6  9A      		sbc	a,d
4063:	1DC7  67      		ld	h,a
4064:	1DC8  C3032C  		jp	l2c03
4065:			;
4066:			; Function : LPOS(X)
4067:			;
4068:	1DCB          	l1dcb:
4069:	1DCB  3A8C07  		ld	a,(colLST)	; Get printer position
4070:	1DCE  C3D41D  		jp	l1dd4
4071:			;
4072:			; Function : POS(I)
4073:			;
4074:	1DD1          	l1dd1:
4075:	1DD1  3A650A  		ld	a,(colCON)	; Get console position
4076:	1DD4          	l1dd4:
4077:	1DD4  3C      		inc	a
4078:	1DD5          	l1dd5:
4079:	1DD5  6F      		ld	l,a		; Save byte
4080:	1DD6  AF      		xor	a
4081:	1DD7          	l1dd7:
4082:	1DD7  67      		ld	h,a		; .. expand byte
4083:	1DD8  C3DC29  		jp	st.INT		; .. and save as integer
4084:			;
4085:			;
4086:			;
4087:	1DDB          	l1ddb:
4088:	1DDB  CDFA1D  		call	l1dfa
4089:	1DDE  D5      		push	de
4090:	1DDF  CD341C  		call	l1c34
4091:	1DE2  E3      		ex	(sp),hl
4092:	1DE3  5E      		ld	e,(hl)
4093:	1DE4  23      		inc	hl
4094:	1DE5  56      		ld	d,(hl)
4095:	1DE6  215727  		ld	hl,l2757
4096:	1DE9  E5      		push	hl
4097:	1DEA  D5      		push	de
4098:	1DEB  3A670A  		ld	a,($ARGLEN)	; Get length of arg
4099:	1DEE  F5      		push	af
4100:	1DEF  FE03    		cp	3		; Test pointer
4101:	1DF1  CCA848  		call	z,l48a8
4102:	1DF4  F1      		pop	af
4103:	1DF5  EB      		ex	de,hl
4104:	1DF6  21040C  		ld	hl,$$ARG+4
4105:	1DF9  C9      		ret
4106:	1DFA          	l1dfa:
4107:	1DFA  CD0513  		call	get.tok
4108:	1DFD  010000  		ld	bc,l0000
4109:	1E00  FE1B    		cp	1bh
4110:	1E02  D2131E  		jp	nc,l1e13
4111:	1E05  FE11    		cp	11h
4112:	1E07  DA131E  		jp	c,l1e13
4113:	1E0A  CD0513  		call	get.tok
4114:	1E0D  3A6E0A  		ld	a,(l0a6e)
4115:	1E10  B7      		or	a
4116:	1E11  17      		rla
4117:	1E12  4F      		ld	c,a
4118:	1E13          	l1e13:
4119:	1E13  EB      		ex	de,hl
4120:	1E14  217407  		ld	hl,l0774
4121:	1E17  09      		add	hl,bc
4122:	1E18  EB      		ex	de,hl
4123:	1E19  C9      		ret
4124:	1E1A          	l1e1a:
4125:	1E1A  CDFA1D  		call	l1dfa
4126:	1E1D  D5      		push	de
4127:	1E1E  CDD343  		call	ilcmp
4128:	1E21  F0      		db	0f0h
4129:	1E22  CDD122  		call	l22d1
4130:	1E25  E3      		ex	(sp),hl
4131:	1E26  73      		ld	(hl),e
4132:	1E27  23      		inc	hl
4133:	1E28  72      		ld	(hl),d
4134:	1E29  E1      		pop	hl
4135:	1E2A  C9      		ret
4136:			;
4137:			; Statement : DEF FN<name>[<parameter list>]=<function definition>
4138:			;             DEF<type> <range of letters>
4139:			;             DEF USR[<digit>]=<integer expr>
4140:			;
4141:	1E2B          	l1e2b:
4142:	1E2B  FED2    		cp	0d2h
4143:	1E2D          	l1e2d:
4144:	1E2D  CA1A1E  		jp	z,l1e1a
4145:	1E30  CDD41F  		call	l1fd4
4146:	1E33  CDC61F  		call	l1fc6
4147:	1E36  EB      		ex	de,hl
4148:	1E37  73      		ld	(hl),e
4149:	1E38  23      		inc	hl
4150:	1E39  72      		ld	(hl),d
4151:	1E3A  EB      		ex	de,hl
4152:	1E3B  7E      		ld	a,(hl)
4153:	1E3C  FE28    		cp	'('
4154:	1E3E  C2EC14  		jp	nz,_DATA	; Process DATA
4155:	1E41  CD0513  		call	get.tok
4156:	1E44          	l1e44:
4157:	1E44  CD8B39  		call	var.adr		; Get address of variable
4158:	1E47  7E      		ld	a,(hl)
4159:	1E48  FE29    		cp	')'
4160:	1E4A  CAEC14  		jp	z,_DATA		; Process DATA
4161:	1E4D  CDD343  		call	ilcmp
4162:	1E50  2C      		db	','
4163:	1E51  C3441E  		jp	l1e44
4164:	1E54          	l1e54:
4165:	1E54  CDD41F  		call	l1fd4
4166:	1E57  3A670A  		ld	a,($ARGLEN)	; Get length of arg
4167:	1E5A  B7      		or	a
4168:	1E5B  F5      		push	af
4169:	1E5C  22BC0A  		ld	(l0abc),hl
4170:	1E5F  EB      		ex	de,hl
4171:	1E60  7E      		ld	a,(hl)
4172:	1E61  23      		inc	hl
4173:	1E62  66      		ld	h,(hl)
4174:	1E63  6F      		ld	l,a
4175:	1E64  7C      		ld	a,h
4176:	1E65  B5      		or	l
4177:	1E66  CAD50C  		jp	z,l0cd5
4178:	1E69  7E      		ld	a,(hl)
4179:	1E6A  FE28    		cp	'('
4180:	1E6C  C21E1F  		jp	nz,l1f1e
4181:	1E6F  CD0513  		call	get.tok
4182:	1E72  229D0A  		ld	(l0a9d),hl
4183:	1E75  EB      		ex	de,hl
4184:	1E76  2ABC0A  		ld	hl,(l0abc)
4185:	1E79  CDD343  		call	ilcmp
4186:	1E7C  28      		db	'('
4187:	1E7D  AF      		xor	a
4188:	1E7E  F5      		push	af
4189:	1E7F  E5      		push	hl
4190:	1E80  EB      		ex	de,hl
4191:	1E81          	l1e81:
4192:	1E81  3E80    		ld	a,80h
4193:	1E83  32A50A  		ld	(l0aa5),a
4194:	1E86  CD8B39  		call	var.adr		; Get address of variable
4195:	1E89  EB      		ex	de,hl
4196:	1E8A  E3      		ex	(sp),hl
4197:	1E8B  3A670A  		ld	a,($ARGLEN)	; Get length of arg
4198:	1E8E  F5      		push	af
4199:	1E8F  D5      		push	de
4200:	1E90  CD021A  		call	EXPR		; Get expresison
4201:	1E93  22BC0A  		ld	(l0abc),hl
4202:	1E96  E1      		pop	hl
4203:	1E97  229D0A  		ld	(l0a9d),hl
4204:	1E9A  F1      		pop	af
4205:	1E9B  CDAC1F  		call	l1fac
4206:	1E9E  0E04    		ld	c,4
4207:	1EA0  CDC742  		call	tstmem		; Verify enough memory
4208:	1EA3  21F8FF  		ld	hl,-2*4
4209:	1EA6  39      		add	hl,sp
4210:	1EA7  F9      		ld	sp,hl
4211:	1EA8  CDF728  		call	l28f7
4212:	1EAB  3A670A  		ld	a,($ARGLEN)	; Get length of arg
4213:	1EAE  F5      		push	af
4214:	1EAF  2ABC0A  		ld	hl,(l0abc)
4215:	1EB2  7E      		ld	a,(hl)
4216:	1EB3  FE29    		cp	')'
4217:	1EB5  CACB1E  		jp	z,l1ecb
4218:	1EB8  CDD343  		call	ilcmp
4219:	1EBB  2C      		db	','
4220:	1EBC  E5      		push	hl
4221:	1EBD  2A9D0A  		ld	hl,(l0a9d)
4222:	1EC0  CDD343  		call	ilcmp
4223:	1EC3  2C      		db	','
4224:	1EC4  C3811E  		jp	l1e81
4225:	1EC7          	l1ec7:
4226:	1EC7  F1      		pop	af
4227:	1EC8  324E0B  		ld	(l0b4e),a
4228:	1ECB          	l1ecb:
4229:	1ECB  F1      		pop	af
4230:	1ECC  B7      		or	a
4231:	1ECD  CA0F1F  		jp	z,l1f0f
4232:	1ED0  32670A  		ld	($ARGLEN),a	; .. save length of arg
4233:	1ED3  210000  		ld	hl,l0000
4234:	1ED6  39      		add	hl,sp
4235:	1ED7  CDEE28  		call	l28ee
4236:	1EDA  210800  		ld	hl,l0008
4237:	1EDD  39      		add	hl,sp
4238:	1EDE  F9      		ld	sp,hl
4239:	1EDF  D1      		pop	de
4240:	1EE0  2E03    		ld	l,3
4241:	1EE2          	l1ee2:
4242:	1EE2  2C      		inc	l
4243:	1EE3  1B      		dec	de
4244:	1EE4  1A      		ld	a,(de)
4245:	1EE5  B7      		or	a
4246:	1EE6  FAE21E  		jp	m,l1ee2
4247:	1EE9  1B      		dec	de
4248:	1EEA  1B      		dec	de
4249:	1EEB  1B      		dec	de
4250:	1EEC  3A670A  		ld	a,($ARGLEN)	; Get length of arg
4251:	1EEF  85      		add	a,l
4252:	1EF0  47      		ld	b,a
4253:	1EF1  3A4E0B  		ld	a,(l0b4e)
4254:	1EF4  4F      		ld	c,a
4255:	1EF5  80      		add	a,b
4256:	1EF6  FE64    		cp	64h
4257:	1EF8  D21814  		jp	nc,_ill.func	; .. overflow
4258:	1EFB  F5      		push	af
4259:	1EFC  7D      		ld	a,l
4260:	1EFD  0600    		ld	b,0
4261:	1EFF  21500B  		ld	hl,l0b50
4262:	1F02  09      		add	hl,bc
4263:	1F03  4F      		ld	c,a
4264:	1F04  CDC01F  		call	l1fc0
4265:	1F07  01C71E  		ld	bc,l1ec7
4266:	1F0A  C5      		push	bc
4267:	1F0B  C5      		push	bc
4268:	1F0C  C33A15  		jp	l153a
4269:	1F0F          	l1f0f:
4270:	1F0F  2ABC0A  		ld	hl,(l0abc)
4271:	1F12  CD0513  		call	get.tok
4272:	1F15  E5      		push	hl
4273:	1F16  2A9D0A  		ld	hl,(l0a9d)
4274:	1F19  CDD343  		call	ilcmp
4275:	1F1C  29      		db	')'
4276:	1F1D          		_LD.A
4277:	1F1E          	l1f1e:
4278:	1F1E  D5      		push	de
4279:	1F1F  229D0A  		ld	(l0a9d),hl
4280:	1F22  3AE60A  		ld	a,(l0ae6)
4281:	1F25  C604    		add	a,4
4282:	1F27  F5      		push	af
4283:	1F28  0F      		rrca
4284:	1F29  4F      		ld	c,a
4285:	1F2A  CDC742  		call	tstmem		; Verify enough memory
4286:	1F2D  F1      		pop	af
4287:	1F2E  4F      		ld	c,a
4288:	1F2F  2F      		cpl
4289:	1F30  3C      		inc	a
4290:	1F31  6F      		ld	l,a
4291:	1F32  26FF    		ld	h,-1
4292:	1F34  39      		add	hl,sp
4293:	1F35  F9      		ld	sp,hl
4294:	1F36  E5      		push	hl
4295:	1F37  11E40A  		ld	de,l0ae4
4296:	1F3A  CDC01F  		call	l1fc0
4297:	1F3D  E1      		pop	hl
4298:	1F3E  22E40A  		ld	(l0ae4),hl
4299:	1F41  2A4E0B  		ld	hl,(l0b4e)
4300:	1F44  22E60A  		ld	(l0ae6),hl
4301:	1F47  44      		ld	b,h
4302:	1F48  4D      		ld	c,l
4303:	1F49  21E80A  		ld	hl,l0ae8
4304:	1F4C  11500B  		ld	de,l0b50
4305:	1F4F  CDC01F  		call	l1fc0
4306:	1F52  67      		ld	h,a
4307:	1F53  6F      		ld	l,a
4308:	1F54  224E0B  		ld	(l0b4e),hl
4309:	1F57  2ABA0B  		ld	hl,(l0bba)
4310:	1F5A  23      		inc	hl
4311:	1F5B  22BA0B  		ld	(l0bba),hl
4312:	1F5E  7C      		ld	a,h
4313:	1F5F  B5      		or	l
4314:	1F60  32B70B  		ld	(l0bb7),a
4315:	1F63  2A9D0A  		ld	hl,(l0a9d)
4316:	1F66  CDF719  		call	l19f7
4317:	1F69  2B      		dec	hl
4318:	1F6A  CD0513  		call	get.tok
4319:	1F6D  C2C90C  		jp	nz,l0cc9
4320:	1F70  CD641D  		call	get.type	; Get type
4321:	1F73  C2881F  		jp	nz,l1f88	; .. not a pointer
4322:	1F76  11980A  		ld	de,STR.arr+10*3	; Point to last record
4323:	1F79  2A040C  		ld	hl,($$ARG+4)
4324:	1F7C  CDCD43  		call	cp.r
4325:	1F7F  DA881F  		jp	c,l1f88		; HL < DE
4326:	1F82  CDA346  		call	l46a3
4327:	1F85  CD0147  		call	l4701
4328:	1F88          	l1f88:
4329:	1F88  2AE40A  		ld	hl,(l0ae4)
4330:	1F8B  54      		ld	d,h
4331:	1F8C  5D      		ld	e,l
4332:	1F8D  23      		inc	hl
4333:	1F8E  23      		inc	hl
4334:	1F8F  4E      		ld	c,(hl)
4335:	1F90  23      		inc	hl
4336:	1F91  46      		ld	b,(hl)
4337:	1F92  03      		inc	bc
4338:	1F93  03      		inc	bc
4339:	1F94  03      		inc	bc
4340:	1F95  03      		inc	bc
4341:	1F96  21E40A  		ld	hl,l0ae4
4342:	1F99  CDC01F  		call	l1fc0
4343:	1F9C  EB      		ex	de,hl
4344:	1F9D  F9      		ld	sp,hl
4345:	1F9E  2ABA0B  		ld	hl,(l0bba)
4346:	1FA1  2B      		dec	hl
4347:	1FA2  22BA0B  		ld	(l0bba),hl
4348:	1FA5  7C      		ld	a,h
4349:	1FA6  B5      		or	l
4350:	1FA7  32B70B  		ld	(l0bb7),a
4351:	1FAA  E1      		pop	hl
4352:	1FAB  F1      		pop	af
4353:	1FAC          	l1fac:
4354:	1FAC  E5      		push	hl
4355:	1FAD  E607    		and	00000111b	; Mask
4356:	1FAF  218B04  		ld	hl,l048b
4357:	1FB2  4F      		ld	c,a
4358:	1FB3  0600    		ld	b,0
4359:	1FB5  09      		add	hl,bc
4360:	1FB6  CD2C1D  		call	j.i.bc		; .. jump thru table
4361:	1FB9  E1      		pop	hl
4362:	1FBA  C9      		ret
4363:			;
4364:			; Move BC bytes ^DE -> ^HL
4365:			;
4366:	1FBB          	l1fbb:
4367:	1FBB  1A      		ld	a,(de)
4368:	1FBC  77      		ld	(hl),a
4369:	1FBD  23      		inc	hl
4370:	1FBE  13      		inc	de
4371:	1FBF  0B      		dec	bc
4372:	1FC0          	l1fc0:
4373:	1FC0  78      		ld	a,b
4374:	1FC1  B1      		or	c
4375:	1FC2  C2BB1F  		jp	nz,l1fbb
4376:	1FC5  C9      		ret
4377:			;
4378:			;
4379:			;
4380:	1FC6          	l1fc6:
4381:	1FC6  E5      		push	hl
4382:	1FC7  2A9807  		ld	hl,(dir.mode)	; Get direct mode
4383:	1FCA  23      		inc	hl		; .. map -1 to 0
4384:	1FCB  7C      		ld	a,h
4385:	1FCC  B5      		or	l
4386:	1FCD  E1      		pop	hl
4387:	1FCE  C0      		ret	nz		; .. -1 is direct
4388:	1FCF  1E0C    		ld	e,12		; Illegal direct
4389:	1FD1  C3E30C  		jp	_error
4390:			;
4391:			;
4392:			;
4393:	1FD4          	l1fd4:
4394:	1FD4  CDD343  		call	ilcmp
4395:	1FD7  D3      		db	0d3h
4396:	1FD8  3E80    		ld	a,80h
4397:	1FDA  32A50A  		ld	(l0aa5),a
4398:	1FDD  B6      		or	(hl)
4399:	1FDE  4F      		ld	c,a
4400:	1FDF  C39039  		jp	l3990
4401:	1FE2          	l1fe2:
4402:	1FE2  FE7E    		cp	7eh
4403:	1FE4  C2C90C  		jp	nz,l0cc9
4404:	1FE7  23      		inc	hl
4405:	1FE8  7E      		ld	a,(hl)
4406:	1FE9  23      		inc	hl
4407:	1FEA  FE83    		cp	83h
4408:	1FEC  CA604A  		jp	z,l4a60
4409:	1FEF  C3C90C  		jp	l0cc9
4410:			;
4411:			; Function : INP(I)
4412:			;
4413:	1FF2          	l1ff2:
4414:	1FF2  CD7820  		call	get.byte	; Get port number
4415:	1FF5  32F91F  		ld	(l1ff9),a	; .. save for argue
4416:	1FF8  DB00    		in	a,($-$)		; Fetch byte from port
4417:	1FF9          	l1ff9	equ	$-1
4418:	1FFA  C3D51D  		jp	l1dd5
4419:			;
4420:			; Statement : OUT <port number>,<byte>
4421:			;
4422:	1FFD          	l1ffd:
4423:	1FFD  CD6220  		call	l2062
4424:	2000  D300    		out	($-$),a
4425:	2001          	l2001	equ	$-1
4426:	2002  C9      		ret
4427:			;
4428:			; Statement : WAIT <port number>,<expr>[,<expr>]
4429:			;
4430:	2003          	l2003:
4431:	2003  CD6220  		call	l2062
4432:	2006  F5      		push	af
4433:	2007  1E00    		ld	e,0
4434:	2009  2B      		dec	hl
4435:	200A  CD0513  		call	get.tok
4436:	200D  CA1720  		jp	z,l2017
4437:	2010  CDD343  		call	ilcmp
4438:	2013  2C      		db	','
4439:	2014  CD7520  		call	l2075
4440:	2017          	l2017:
4441:	2017  F1      		pop	af
4442:	2018  57      		ld	d,a
4443:	2019          	l2019:
4444:	2019  DB00    		in	a,($-$)
4445:	201A          	l201a	equ	$-1
4446:	201B  AB      		xor	e
4447:	201C  A2      		and	d
4448:	201D  CA1920  		jp	z,l2019
4449:	2020  C9      		ret
4450:	2021  C3C90C  		jp	l0cc9
4451:			;
4452:			; Statement : WIDTH [LPRINT] <integer expr>
4453:			;
4454:	2024          	l2024:
4455:	2024  FE9E    		cp	9eh
4456:	2026  C23A20  		jp	nz,l203a
4457:	2029  CD0513  		call	get.tok
4458:	202C  CD7520  		call	l2075
4459:	202F  328F07  		ld	(l078f),a
4460:	2032  5F      		ld	e,a
4461:	2033  CD4820  		call	l2048
4462:	2036  328E07  		ld	(l078e),a
4463:	2039  C9      		ret
4464:	203A          	l203a:
4465:	203A  CD7520  		call	l2075
4466:	203D  329007  		ld	(l0790),a
4467:	2040  5F      		ld	e,a
4468:	2041  CD4820  		call	l2048
4469:	2044  329107  		ld	(l0791),a
4470:	2047  C9      		ret
4471:	2048          	l2048:
4472:	2048  D60E    		sub	0eh
4473:	204A  D24820  		jp	nc,l2048
4474:	204D  C61C    		add	a,1ch
4475:	204F  2F      		cpl
4476:	2050  3C      		inc	a
4477:	2051  83      		add	a,e
4478:	2052  C9      		ret
4479:	2053          	l2053:
4480:	2053  CD0513  		call	get.tok
4481:	2056          	l2056:
4482:	2056  CD021A  		call	EXPR		; Get expresison
4483:			;
4484:			; Get word in range 0..32767 - Zero set if range 0..255
4485:			;
4486:	2059          	get.word:
4487:	2059  E5      		push	hl
4488:	205A  CD7A29  		call	_CINT		; Get integer
4489:	205D  EB      		ex	de,hl
4490:	205E  E1      		pop	hl
4491:	205F  7A      		ld	a,d		; Build flag
4492:	2060  B7      		or	a
4493:	2061  C9      		ret
4494:			;
4495:			;
4496:			;
4497:	2062          	l2062:
4498:	2062  CD7520  		call	l2075
4499:	2065  321A20  		ld	(l201a),a
4500:	2068  320120  		ld	(l2001),a
4501:	206B  CDD343  		call	ilcmp
4502:	206E  2C      		db	','
4503:	206F  C37520  		jp	l2075
4504:			;
4505:			;
4506:			;
4507:	2072          	l2072:
4508:	2072  CD0513  		call	get.tok
4509:	2075          	l2075:
4510:	2075  CD021A  		call	EXPR		; Get expresison
4511:			;
4512:			; Get byte in range 0..255
4513:			;
4514:	2078          	get.byte:
4515:	2078  CD5920  		call	get.word	; Get it
4516:	207B  C21814  		jp	nz,_ill.func	; .. should be a byte
4517:	207E  2B      		dec	hl
4518:	207F  CD0513  		call	get.tok		; .. skip token
4519:	2082  7B      		ld	a,e		; .. get byte
4520:	2083  C9      		ret
4521:			;
4522:			; Statement : LLIST [<line number>[-[<line number>]]]
4523:			;
4524:	2084          	l2084:
4525:	2084  3E01    		ld	a,1
4526:	2086  328D07  		ld	(iodev),a	; Set printer
4527:			;
4528:			; Statement : LIST [<line number>[-[<line number>]]]
4529:			;
4530:	2089          	l2089:
4531:	2089  C1      		pop	bc
4532:	208A  CDD80E  		call	l0ed8
4533:	208D  C5      		push	bc
4534:	208E  CD655D  		call	l5d65
4535:	2091          	l2091:
4536:	2091  21FFFF  		ld	hl,lffff
4537:	2094  229807  		ld	(dir.mode),hl	; Set direct mode
4538:	2097  E1      		pop	hl
4539:	2098  D1      		pop	de
4540:	2099  4E      		ld	c,(hl)
4541:	209A  23      		inc	hl
4542:	209B  46      		ld	b,(hl)
4543:	209C  23      		inc	hl
4544:	209D  78      		ld	a,b
4545:	209E  B1      		or	c
4546:	209F  CA870D  		jp	z,l0d87
4547:	20A2  CD5446  		call	fpact		; Test file active
4548:	20A5  CC5142  		call	z,condir	; .. nope, get from console
4549:	20A8  C5      		push	bc
4550:	20A9  4E      		ld	c,(hl)
4551:	20AA  23      		inc	hl
4552:	20AB  46      		ld	b,(hl)
4553:	20AC  23      		inc	hl
4554:	20AD  C5      		push	bc
4555:	20AE  E3      		ex	(sp),hl
4556:	20AF  EB      		ex	de,hl
4557:	20B0  CDCD43  		call	cp.r
4558:	20B3  C1      		pop	bc
4559:	20B4  DA860D  		jp	c,l0d86		; HL < DE
4560:	20B7  E3      		ex	(sp),hl
4561:	20B8  E5      		push	hl
4562:	20B9  C5      		push	bc
4563:	20BA  EB      		ex	de,hl
4564:	20BB  22B50A  		ld	(l0ab5),hl
4565:	20BE  CD1A31  		call	l311a
4566:	20C1  E1      		pop	hl
4567:	20C2  7E      		ld	a,(hl)
4568:	20C3  FE09    		cp	9
4569:	20C5  CACD20  		jp	z,l20cd
4570:	20C8  3E20    		ld	a,' '
4571:	20CA  CDD640  		call	putchar
4572:	20CD          	l20cd:
4573:	20CD  CDE620  		call	l20e6
4574:	20D0  216209  		ld	hl,$LINE
4575:	20D3  CDDC20  		call	l20dc		; Print line
4576:	20D6  CD2142  		call	fnl		; Give new line
4577:	20D9  C39120  		jp	l2091
4578:			;
4579:			; Print line ^HL closed by ZERO
4580:			;
4581:	20DC          	l20dc:
4582:	20DC  7E      		ld	a,(hl)
4583:	20DD  B7      		or	a
4584:	20DE  C8      		ret	z
4585:	20DF  CDA542  		call	l42a5		; Print character, test new line
4586:	20E2  23      		inc	hl
4587:	20E3  C3DC20  		jp	l20dc
4588:			;
4589:			; Find token ???
4590:			;
4591:	20E6          	l20e6:
4592:	20E6  016209  		ld	bc,$LINE	; Init line pointer
4593:	20E9  16FF    		ld	d,255		; .. and length
4594:	20EB  AF      		xor	a
4595:	20EC  32E60B  		ld	(l0be6),a
4596:	20EF  CD655D  		call	l5d65
4597:	20F2  C3F920  		jp	l20f9
4598:	20F5          	l20f5:
4599:	20F5  03      		inc	bc
4600:	20F6  23      		inc	hl
4601:	20F7  15      		dec	d
4602:	20F8  C8      		ret	z
4603:	20F9          	l20f9:
4604:	20F9  7E      		ld	a,(hl)
4605:	20FA  B7      		or	a
4606:	20FB  02      		ld	(bc),a
4607:	20FC  C8      		ret	z
4608:	20FD  FE0B    		cp	0bh
4609:	20FF  DA0821  		jp	c,l2108
4610:	2102  FE20    		cp	' '
4611:	2104  5F      		ld	e,a
4612:	2105  DA1C21  		jp	c,l211c
4613:	2108          	l2108:
4614:	2108  B7      		or	a
4615:	2109  FA4121  		jp	m,l2141
4616:	210C  5F      		ld	e,a
4617:	210D  FE2E    		cp	'.'
4618:	210F  CA1C21  		jp	z,l211c
4619:	2112  CDE221  		call	l21e2		; Test digit
4620:	2115  D21C21  		jp	nc,l211c	; .. yeap
4621:	2118  AF      		xor	a
4622:	2119  C32F21  		jp	l212f
4623:	211C          	l211c:
4624:	211C  3AE60B  		ld	a,(l0be6)
4625:	211F  B7      		or	a
4626:	2120  CA2D21  		jp	z,l212d
4627:	2123  3C      		inc	a
4628:	2124  C22D21  		jp	nz,l212d
4629:	2127  3E20    		ld	a,' '
4630:	2129  02      		ld	(bc),a
4631:	212A  03      		inc	bc
4632:	212B  15      		dec	d
4633:	212C  C8      		ret	z
4634:	212D          	l212d:
4635:	212D  3E01    		ld	a,1
4636:	212F          	l212f:
4637:	212F  32E60B  		ld	(l0be6),a
4638:	2132  7B      		ld	a,e
4639:	2133  FE0B    		cp	0bh
4640:	2135  DA3D21  		jp	c,l213d
4641:	2138  FE20    		cp	' '
4642:	213A  DAED21  		jp	c,l21ed
4643:	213D          	l213d:
4644:	213D  02      		ld	(bc),a
4645:	213E  C3F520  		jp	l20f5
4646:	2141          	l2141:
4647:	2141  3C      		inc	a
4648:	2142  7E      		ld	a,(hl)
4649:	2143  C24A21  		jp	nz,l214a
4650:	2146  23      		inc	hl
4651:	2147  7E      		ld	a,(hl)
4652:	2148  E67F    		and	7fh
4653:	214A          	l214a:
4654:	214A  23      		inc	hl
4655:	214B  FEDB    		cp	0dbh
4656:	214D  C25821  		jp	nz,l2158
4657:	2150  0B      		dec	bc
4658:	2151  0B      		dec	bc
4659:	2152  0B      		dec	bc
4660:	2153  0B      		dec	bc
4661:	2154  14      		inc	d
4662:	2155  14      		inc	d
4663:	2156  14      		inc	d
4664:	2157  14      		inc	d
4665:	2158          	l2158:
4666:	2158  FEA2    		cp	0a2h
4667:	215A  CC6B2A  		call	z,l2a6b
4668:	215D  FEB4    		cp	0b4h
4669:	215F  C26C21  		jp	nz,l216c
4670:	2162  7E      		ld	a,(hl)
4671:	2163  23      		inc	hl
4672:	2164  FEF2    		cp	0f2h
4673:	2166  3EB4    		ld	a,0b4h
4674:	2168  CA6C21  		jp	z,l216c
4675:	216B  2B      		dec	hl
4676:	216C          	l216c:
4677:	216C  E5      		push	hl
4678:	216D  C5      		push	bc
4679:	216E  D5      		push	de
4680:	216F  213A02  		ld	hl,l023b-1	; Init table
4681:	2172  47      		ld	b,a
4682:	2173  0E40    		ld	c,'A'-1		; .. and key
4683:	2175          	l2175:
4684:	2175  0C      		inc	c
4685:	2176          	l2176:
4686:	2176  23      		inc	hl
4687:	2177  54      		ld	d,h
4688:	2178  5D      		ld	e,l
4689:	2179          	l2179:
4690:	2179  7E      		ld	a,(hl)
4691:	217A  B7      		or	a
4692:	217B  CA7521  		jp	z,l2175
4693:	217E  23      		inc	hl
4694:	217F  F27921  		jp	p,l2179
4695:	2182  7E      		ld	a,(hl)
4696:	2183  B8      		cp	b
4697:	2184  C27621  		jp	nz,l2176
4698:	2187  EB      		ex	de,hl
4699:	2188  FED2    		cp	0d2h
4700:	218A  CA8F21  		jp	z,l218f
4701:	218D  FED3    		cp	0d3h
4702:	218F          	l218f:
4703:	218F  79      		ld	a,c
4704:	2190  D1      		pop	de
4705:	2191  C1      		pop	bc
4706:	2192  5F      		ld	e,a
4707:	2193  C2A221  		jp	nz,l21a2
4708:	2196  3AE60B  		ld	a,(l0be6)
4709:	2199  B7      		or	a
4710:	219A  3E00    		ld	a,0
4711:	219C  32E60B  		ld	(l0be6),a
4712:	219F  C3B721  		jp	l21b7
4713:	21A2          	l21a2:
4714:	21A2  FE5B    		cp	'Z'+1
4715:	21A4  C2AE21  		jp	nz,l21ae
4716:	21A7  AF      		xor	a
4717:	21A8  32E60B  		ld	(l0be6),a
4718:	21AB  C3C621  		jp	l21c6
4719:	21AE          	l21ae:
4720:	21AE  3AE60B  		ld	a,(l0be6)
4721:	21B1  B7      		or	a
4722:	21B2  3EFF    		ld	a,0ffh
4723:	21B4  32E60B  		ld	(l0be6),a
4724:	21B7          	l21b7:
4725:	21B7  CAC221  		jp	z,l21c2
4726:	21BA  3E20    		ld	a,' '
4727:	21BC  02      		ld	(bc),a
4728:	21BD  03      		inc	bc
4729:	21BE  15      		dec	d
4730:	21BF  CA5847  		jp	z,pop.a		; .. end
4731:	21C2          	l21c2:
4732:	21C2  7B      		ld	a,e
4733:	21C3  C3C921  		jp	l21c9
4734:	21C6          	l21c6:
4735:	21C6  7E      		ld	a,(hl)
4736:	21C7  23      		inc	hl
4737:	21C8  5F      		ld	e,a
4738:	21C9          	l21c9:
4739:	21C9  E67F    		and	7fh
4740:	21CB  02      		ld	(bc),a
4741:	21CC  03      		inc	bc
4742:	21CD  15      		dec	d
4743:	21CE  CA5847  		jp	z,pop.a		; .. end
4744:	21D1  B3      		or	e
4745:	21D2  F2C621  		jp	p,l21c6
4746:	21D5  FEA8    		cp	0a8h
4747:	21D7  C2DE21  		jp	nz,l21de
4748:	21DA  AF      		xor	a
4749:	21DB  32E60B  		ld	(l0be6),a
4750:	21DE          	l21de:
4751:	21DE  E1      		pop	hl
4752:	21DF  C3F920  		jp	l20f9
4753:			;
4754:			; Test alphanumeric - Carry set says no
4755:			;
4756:	21E2          	l21e2:
4757:	21E2  CD0445  		call	isalph_		; Test A..Z
4758:	21E5  D0      		ret	nc		; .. yeap
4759:	21E6  FE30    		cp	'0'		; .. test 0..9
4760:	21E8  D8      		ret	c
4761:	21E9  FE3A    		cp	'9'+1
4762:	21EB  3F      		ccf
4763:	21EC  C9      		ret
4764:			;
4765:			;
4766:			;
4767:	21ED          	l21ed:
4768:	21ED  2B      		dec	hl
4769:	21EE  CD0513  		call	get.tok
4770:	21F1  D5      		push	de
4771:	21F2  C5      		push	bc
4772:	21F3  F5      		push	af
4773:	21F4  CD8E13  		call	l138e
4774:	21F7  F1      		pop	af
4775:	21F8  010C22  		ld	bc,l220c
4776:	21FB  C5      		push	bc
4777:	21FC  FE0B    		cp	0bh
4778:	21FE  CA6F36  		jp	z,l366f
4779:	2201  FE0C    		cp	0ch
4780:	2203  CA7236  		jp	z,l3672
4781:	2206  2A6E0A  		ld	hl,(l0a6e)
4782:	2209  C32931  		jp	l3129
4783:	220C          	l220c:
4784:	220C  C1      		pop	bc
4785:	220D  D1      		pop	de
4786:	220E  3A6C0A  		ld	a,(l0a6c)
4787:	2211  1E4F    		ld	e,'O'
4788:	2213  FE0B    		cp	0bh
4789:	2215  CA1F22  		jp	z,l221f
4790:	2218  FE0C    		cp	0ch
4791:	221A  1E48    		ld	e,'H'
4792:	221C  C22A22  		jp	nz,l222a
4793:	221F          	l221f:
4794:	221F  3E26    		ld	a,'&'
4795:	2221  02      		ld	(bc),a
4796:	2222  03      		inc	bc
4797:	2223  15      		dec	d
4798:	2224  C8      		ret	z
4799:	2225  7B      		ld	a,e
4800:	2226  02      		ld	(bc),a
4801:	2227  03      		inc	bc
4802:	2228  15      		dec	d
4803:	2229  C8      		ret	z
4804:	222A          	l222a:
4805:	222A  3A6D0A  		ld	a,(l0a6d)
4806:	222D  FE04    		cp	4
4807:	222F  1E00    		ld	e,0
4808:	2231  DA3B22  		jp	c,l223b
4809:	2234  1E21    		ld	e,'!'
4810:	2236  CA3B22  		jp	z,l223b
4811:	2239  1E23    		ld	e,'#'
4812:	223B          	l223b:
4813:	223B  7E      		ld	a,(hl)		; Get next
4814:	223C  FE20    		cp	' '		; Test blank
4815:	223E  CCBE28  		call	z,inc.hl	; .. yeap, skip it
4816:	2241          	l2241:
4817:	2241  7E      		ld	a,(hl)
4818:	2242  23      		inc	hl
4819:	2243  B7      		or	a
4820:	2244  CA6D22  		jp	z,l226d
4821:	2247  02      		ld	(bc),a
4822:	2248  03      		inc	bc
4823:	2249  15      		dec	d
4824:	224A  C8      		ret	z
4825:	224B  3A6D0A  		ld	a,(l0a6d)
4826:	224E  FE04    		cp	4
4827:	2250  DA4122  		jp	c,l2241
4828:	2253  0B      		dec	bc
4829:	2254  0A      		ld	a,(bc)
4830:	2255  03      		inc	bc
4831:	2256  C25E22  		jp	nz,l225e
4832:	2259  FE2E    		cp	'.'
4833:	225B  CA6822  		jp	z,l2268
4834:	225E          	l225e:
4835:	225E  FE44    		cp	'D'
4836:	2260  CA6822  		jp	z,l2268
4837:	2263  FE45    		cp	'E'
4838:	2265  C24122  		jp	nz,l2241
4839:	2268          	l2268:
4840:	2268  1E00    		ld	e,0
4841:	226A  C34122  		jp	l2241
4842:	226D          	l226d:
4843:	226D  7B      		ld	a,e
4844:	226E  B7      		or	a
4845:	226F  CA7622  		jp	z,l2276
4846:	2272  02      		ld	(bc),a
4847:	2273  03      		inc	bc
4848:	2274  15      		dec	d
4849:	2275  C8      		ret	z
4850:	2276          	l2276:
4851:	2276  2A6A0A  		ld	hl,(l0a6a)
4852:	2279  C3F920  		jp	l20f9
4853:			;
4854:			; Statement : DELETE [<line number>[-[<line number>]]]
4855:			;
4856:	227C          	l227c:
4857:	227C  CDD80E  		call	l0ed8
4858:	227F  C5      		push	bc
4859:	2280  CD3524  		call	l2435
4860:	2283  C1      		pop	bc
4861:	2284  D1      		pop	de
4862:	2285  C5      		push	bc
4863:	2286  C5      		push	bc
4864:	2287  CDF80E  		call	l0ef8
4865:	228A  D29422  		jp	nc,l2294
4866:	228D  54      		ld	d,h
4867:	228E  5D      		ld	e,l
4868:	228F  E3      		ex	(sp),hl
4869:	2290  E5      		push	hl
4870:	2291  CDCD43  		call	cp.r		; Compare HL:DE
4871:	2294          	l2294:
4872:	2294  D21814  		jp	nc,_ill.func	; HL >= DE, error
4873:	2297  21450C  		ld	hl,l0c45
4874:	229A  CD2347  		call	l4723
4875:	229D  C1      		pop	bc
4876:	229E  21870E  		ld	hl,l0e87
4877:	22A1  E3      		ex	(sp),hl
4878:	22A2          	l22a2:
4879:	22A2  EB      		ex	de,hl
4880:	22A3  2AC20A  		ld	hl,(prg.top)	; Get top
4881:	22A6          	l22a6:
4882:	22A6  1A      		ld	a,(de)		; .. unpack
4883:	22A7  02      		ld	(bc),a
4884:	22A8  03      		inc	bc
4885:	22A9  13      		inc	de
4886:	22AA  CDCD43  		call	cp.r
4887:	22AD  C2A622  		jp	nz,l22a6	; Loop till HL = DE
4888:	22B0  60      		ld	h,b
4889:	22B1  69      		ld	l,c
4890:	22B2  22C20A  		ld	(prg.top),hl	; .. save new top
4891:	22B5  C9      		ret
4892:			;
4893:			; Function : PEEK(I)
4894:			;
4895:	22B6          	l22b6:
4896:	22B6  CDDB22  		call	l22db
4897:	22B9  CD5C5D  		call	l5d5c
4898:	22BC  7E      		ld	a,(hl)
4899:	22BD  C3D51D  		jp	l1dd5
4900:			;
4901:			; Statement : POKE <address>,<byte>
4902:			;
4903:	22C0          	l22c0:
4904:	22C0  CDD122  		call	l22d1
4905:	22C3  D5      		push	de
4906:	22C4  CD5C5D  		call	l5d5c
4907:	22C7  CDD343  		call	ilcmp
4908:	22CA  2C      		db	','
4909:	22CB  CD7520  		call	l2075
4910:	22CE  D1      		pop	de
4911:	22CF  12      		ld	(de),a
4912:	22D0  C9      		ret
4913:	22D1          	l22d1:
4914:	22D1  CD021A  		call	EXPR		; Get expresison
4915:	22D4  E5      		push	hl
4916:	22D5  CDDB22  		call	l22db
4917:	22D8  EB      		ex	de,hl
4918:	22D9  E1      		pop	hl
4919:	22DA  C9      		ret
4920:	22DB          	l22db:
4921:	22DB  017A29  		ld	bc,_CINT	; Set return address
4922:	22DE  C5      		push	bc
4923:	22DF  CD641D  		call	get.type	; Get type
4924:	22E2  F8      		ret	m		; .. integer
4925:	22E3  3A070C  		ld	a,($$ARG+7)	; Fetch exponent
4926:	22E6  FE90    		cp	90h
4927:	22E8  C0      		ret	nz
4928:	22E9  CD4528  		call	l2845
4929:	22EC  F8      		ret	m
4930:	22ED  CDF429  		call	l29f4
4931:	22F0  018091  		ld	bc,l9180
4932:	22F3  110000  		ld	de,l0000
4933:	22F6  C38825  		jp	l2588
4934:			;
4935:			; Statement : RENUM [[<new number>][,[<old number>][,<increment>]]]
4936:			;
4937:	22F9          	l22f9:
4938:	22F9  010A00  		ld	bc,l000a
4939:	22FC  C5      		push	bc
4940:	22FD  50      		ld	d,b
4941:	22FE  58      		ld	e,b
4942:	22FF  CA2F23  		jp	z,l232f
4943:	2302  FE2C    		cp	','
4944:	2304  CA1123  		jp	z,l2311
4945:	2307  D5      		push	de
4946:	2308  CD1D14  		call	l141d
4947:	230B  42      		ld	b,d
4948:	230C  4B      		ld	c,e
4949:	230D  D1      		pop	de
4950:	230E  CA2F23  		jp	z,l232f
4951:	2311          	l2311:
4952:	2311  CDD343  		call	ilcmp
4953:	2314  2C      		db	','
4954:	2315  CD1D14  		call	l141d
4955:	2318  CA2F23  		jp	z,l232f
4956:	231B  F1      		pop	af
4957:	231C  CDD343  		call	ilcmp
4958:	231F  2C      		db	','
4959:	2320  D5      		push	de
4960:	2321  CD2814  		call	l1428
4961:	2324  C2C90C  		jp	nz,l0cc9
4962:	2327  7A      		ld	a,d
4963:	2328  B3      		or	e
4964:	2329  CA1814  		jp	z,_ill.func	; Error if zero
4965:	232C  EB      		ex	de,hl
4966:	232D  E3      		ex	(sp),hl
4967:	232E  EB      		ex	de,hl
4968:	232F          	l232f:
4969:	232F  C5      		push	bc
4970:	2330  CDF80E  		call	l0ef8
4971:	2333  D1      		pop	de
4972:	2334  D5      		push	de
4973:	2335  C5      		push	bc
4974:	2336  CDF80E  		call	l0ef8
4975:	2339  60      		ld	h,b
4976:	233A  69      		ld	l,c
4977:	233B  D1      		pop	de
4978:	233C  CDCD43  		call	cp.r		; Compare HL:DE
4979:	233F  EB      		ex	de,hl
4980:	2340  DA1814  		jp	c,_ill.func	; HL < DE, error
4981:	2343  D1      		pop	de
4982:	2344  C1      		pop	bc
4983:	2345  F1      		pop	af
4984:	2346  E5      		push	hl
4985:	2347  D5      		push	de
4986:	2348  C35B23  		jp	l235b
4987:	234B          	l234b:
4988:	234B  09      		add	hl,bc
4989:	234C  DA1814  		jp	c,_ill.func	; .. error on overflow
4990:	234F  EB      		ex	de,hl
4991:	2350  E5      		push	hl
4992:	2351  21F9FF  		ld	hl,lfff9
4993:	2354  CDCD43  		call	cp.r		; Compare HL:DE
4994:	2357  E1      		pop	hl
4995:	2358  DA1814  		jp	c,_ill.func	; HL < DE, error
4996:	235B          	l235b:
4997:	235B  D5      		push	de
4998:	235C  5E      		ld	e,(hl)
4999:	235D  23      		inc	hl
5000:	235E  56      		ld	d,(hl)
5001:	235F  7A      		ld	a,d
5002:	2360  B3      		or	e
5003:	2361  EB      		ex	de,hl
5004:	2362  D1      		pop	de
5005:	2363  CA6E23  		jp	z,l236e
5006:	2366  7E      		ld	a,(hl)
5007:	2367  23      		inc	hl
5008:	2368  B6      		or	(hl)
5009:	2369  2B      		dec	hl
5010:	236A  EB      		ex	de,hl
5011:	236B  C24B23  		jp	nz,l234b
5012:	236E          	l236e:
5013:	236E  C5      		push	bc
5014:	236F  CD9123  		call	l2391
5015:	2372  C1      		pop	bc
5016:	2373  D1      		pop	de
5017:	2374  E1      		pop	hl
5018:	2375          	l2375:
5019:	2375  D5      		push	de
5020:	2376  5E      		ld	e,(hl)
5021:	2377  23      		inc	hl
5022:	2378  56      		ld	d,(hl)
5023:	2379  7A      		ld	a,d
5024:	237A  B3      		or	e
5025:	237B  CA8C23  		jp	z,l238c
5026:	237E  EB      		ex	de,hl
5027:	237F  E3      		ex	(sp),hl
5028:	2380  EB      		ex	de,hl
5029:	2381  23      		inc	hl
5030:	2382  73      		ld	(hl),e
5031:	2383  23      		inc	hl
5032:	2384  72      		ld	(hl),d
5033:	2385  EB      		ex	de,hl
5034:	2386  09      		add	hl,bc
5035:	2387  EB      		ex	de,hl
5036:	2388  E1      		pop	hl
5037:	2389  C37523  		jp	l2375
5038:	238C          	l238c:
5039:	238C  01860D  		ld	bc,l0d86
5040:	238F  C5      		push	bc
5041:	2390          		_CP
5042:			;
5043:			;
5044:			;
5045:	2391          	l2391:
5046:	2391          		_OR
5047:			;
5048:			;
5049:			;
5050:	2392          	l2392:
5051:	2392  AF      		xor	a
5052:	2393  32A90A  		ld	(l0aa9),a
5053:	2396  2A9A07  		ld	hl,(prg.base)	; Get base of program
5054:	2399  2B      		dec	hl
5055:	239A          	l239a:
5056:	239A  23      		inc	hl
5057:	239B  7E      		ld	a,(hl)		; Get memory pointer
5058:	239C  23      		inc	hl
5059:	239D  B6      		or	(hl)		; Test end of program
5060:	239E  C8      		ret	z		; .. yeap
5061:	239F  23      		inc	hl
5062:	23A0  5E      		ld	e,(hl)		; Fetch line number
5063:	23A1  23      		inc	hl
5064:	23A2  56      		ld	d,(hl)
5065:	23A3          	l23a3:
5066:	23A3  CD0513  		call	get.tok		; Get token
5067:	23A6          	l23a6:
5068:	23A6  B7      		or	a		; Test end of line
5069:	23A7  CA9A23  		jp	z,l239a		; .. yeap, get next one
5070:	23AA  4F      		ld	c,a
5071:	23AB  3AA90A  		ld	a,(l0aa9)
5072:	23AE  B7      		or	a
5073:	23AF  79      		ld	a,c
5074:	23B0  CA1224  		jp	z,l2412
5075:	23B3  FEA8    		cp	0a8h		; Test ERROR
5076:	23B5  C2D423  		jp	nz,l23d4
5077:	23B8  CD0513  		call	get.tok
5078:	23BB  FE89    		cp	089h		; .. GOTO
5079:	23BD  C2A623  		jp	nz,l23a6
5080:	23C0  CD0513  		call	get.tok
5081:	23C3  FE0E    		cp	00eh
5082:	23C5  C2A623  		jp	nz,l23a6
5083:	23C8  D5      		push	de
5084:	23C9  CD3314  		call	l1433
5085:	23CC  7A      		ld	a,d
5086:	23CD  B3      		or	e
5087:	23CE  C2DD23  		jp	nz,l23dd
5088:	23D1  C3FD23  		jp	l23fd
5089:	23D4          	l23d4:
5090:	23D4  FE0E    		cp	00eh
5091:	23D6  C2A323  		jp	nz,l23a3
5092:	23D9  D5      		push	de
5093:	23DA  CD3314  		call	l1433
5094:	23DD          	l23dd:
5095:	23DD  E5      		push	hl
5096:	23DE  CDF80E  		call	l0ef8
5097:	23E1  0B      		dec	bc
5098:	23E2  3E0D    		ld	a,00dh
5099:	23E4  DA2524  		jp	c,l2425
5100:	23E7  CD1442  		call	cls.CON		; Clear console
5101:	23EA  210224  		ld	hl,l2402
5102:	23ED  D5      		push	de
5103:	23EE  CD2347  		call	l4723
5104:	23F1  E1      		pop	hl
5105:	23F2  CD1A31  		call	l311a
5106:	23F5  C1      		pop	bc
5107:	23F6  E1      		pop	hl
5108:	23F7  E5      		push	hl
5109:	23F8          	l23f8:
5110:	23F8  C5      		push	bc
5111:	23F9  CD1231  		call	l3112
5112:	23FC          	l23fc:
5113:	23FC  E1      		pop	hl
5114:	23FD          	l23fd:
5115:	23FD  D1      		pop	de
5116:	23FE  2B      		dec	hl
5117:	23FF          	l23ff:
5118:	23FF  C3A323  		jp	l23a3
5119:			;
5120:	2402          	l2402:
5121:	2402  556E6465		db	'Undefined line ',null
	      66696E65
	      64206C69
	      6E652000
5122:			;
5123:			;
5124:			;
5125:	2412          	l2412:
5126:	2412  FE0D    		cp	00dh
5127:	2414  C2FF23  		jp	nz,l23ff
5128:	2417  D5      		push	de
5129:	2418  CD3314  		call	l1433
5130:	241B  E5      		push	hl
5131:	241C  EB      		ex	de,hl
5132:	241D  23      		inc	hl
5133:	241E  23      		inc	hl
5134:	241F  23      		inc	hl
5135:	2420  4E      		ld	c,(hl)
5136:	2421  23      		inc	hl
5137:	2422  46      		ld	b,(hl)
5138:	2423  3E0E    		ld	a,00eh
5139:	2425          	l2425:
5140:	2425  21FC23  		ld	hl,l23fc
5141:	2428  E5      		push	hl
5142:	2429  2A6A0A  		ld	hl,(l0a6a)
5143:	242C          	l242c:
5144:	242C  E5      		push	hl
5145:	242D  2B      		dec	hl
5146:	242E  70      		ld	(hl),b
5147:	242F  2B      		dec	hl
5148:	2430  71      		ld	(hl),c
5149:	2431  2B      		dec	hl
5150:	2432  77      		ld	(hl),a
5151:	2433  E1      		pop	hl
5152:	2434  C9      		ret
5153:			;
5154:			;
5155:			;
5156:	2435          	l2435:
5157:	2435  3AA90A  		ld	a,(l0aa9)
5158:	2438  B7      		or	a
5159:	2439  C8      		ret	z
5160:	243A  C39223  		jp	l2392
5161:			;
5162:			; Statement : OPTION BASE n
5163:			;
5164:	243D          	l243d:
5165:	243D  CDD343  		call	ilcmp
5166:	2440  42      		db	'B'
5167:	2441  CDD343  		call	ilcmp
5168:	2444  41      		db	'A'
5169:	2445  CDD343  		call	ilcmp
5170:	2448  53      		db	'S'
5171:	2449  CDD343  		call	ilcmp
5172:	244C  45      		db	'E'
5173:	244D  3AC70B  		ld	a,(l0bc7)
5174:	2450  B7      		or	a
5175:	2451  C2D20C  		jp	nz,l0cd2
5176:	2454  E5      		push	hl
5177:	2455  2AC40A  		ld	hl,(l0ac4)
5178:	2458  EB      		ex	de,hl
5179:	2459  2AC60A  		ld	hl,(l0ac6)
5180:	245C  CDCD43  		call	cp.r
5181:	245F  C2D20C  		jp	nz,l0cd2	; HL <> DE
5182:	2462  E1      		pop	hl
5183:	2463  7E      		ld	a,(hl)
5184:	2464  D630    		sub	'0'
5185:	2466  DAC90C  		jp	c,l0cc9
5186:	2469  FE02    		cp	2
5187:	246B  D2C90C  		jp	nc,l0cc9
5188:	246E  32C60B  		ld	(l0bc6),a
5189:	2471  3C      		inc	a
5190:	2472  32C70B  		ld	(l0bc7),a
5191:	2475  CD0513  		call	get.tok
5192:	2478  C9      		ret
5193:			;
5194:			; Print string ^HL on console
5195:			;
5196:	2479          	l2479:
5197:	2479  7E      		ld	a,(hl)		; Get character
5198:	247A  B7      		or	a
5199:	247B  C8      		ret	z		; .. end
5200:	247C  CD8324  		call	l2483
5201:	247F  23      		inc	hl
5202:	2480  C37924  		jp	l2479
5203:			;
5204:			; Print character in Accu on console
5205:			;
5206:	2483          	l2483:
5207:	2483  F5      		push	af
5208:	2484  C35C41  		jp	conout		; .. put to console
5209:			;
5210:			; Statement : RANDOMIZE [<expr>]
5211:			;
5212:	2487          	l2487:
5213:	2487  CA9424  		jp	z,l2494		; .. no argue
5214:	248A  CD021A  		call	EXPR		; Get expresison
5215:	248D  E5      		push	hl
5216:	248E  CD7A29  		call	_CINT		; Get integer
5217:	2491  C3B024  		jp	l24b0
5218:	2494          	l2494:
5219:	2494  E5      		push	hl
5220:	2495          	l2495:
5221:	2495  21B824  		ld	hl,l24b8
5222:	2498  CD2347  		call	l4723
5223:	249B  CD0D4B  		call	l4b0d
5224:	249E  D1      		pop	de
5225:	249F  DA1644  		jp	c,l4416
5226:	24A2  D5      		push	de
5227:	24A3  23      		inc	hl
5228:	24A4  7E      		ld	a,(hl)		;			**** WHY ??
5229:	24A5  CDD12E  		call	cnvnum		; Get number
5230:	24A8  7E      		ld	a,(hl)
5231:	24A9  B7      		or	a
5232:	24AA  C29524  		jp	nz,l2495
5233:	24AD  CD7A29  		call	_CINT		; Get integer
5234:	24B0          	l24b0:
5235:	24B0  226A38  		ld	(l386a),hl
5236:	24B3  CDCF37  		call	l37cf
5237:	24B6  E1      		pop	hl
5238:	24B7  C9      		ret
5239:			;
5240:	24B8          	l24b8:
5241:	24B8  52616E64		db	'Random number seed (-32768 to 32767)',null
	      6F6D206E
	      756D6265
	      72207365
	      65642028
	      2D333237
	      36382074
	      6F203332
	      37363729
	      00
5242:			;
5243:	24DD          	l24dd:
5244:	24DD  0E1D    		ld	c,29		; WHILE without WEND
5245:	24DF  C3E424  		jp	l24e4
5246:	24E2          	l24e2:
5247:	24E2  0E1A    		ld	c,26		; FOR without NEXT
5248:	24E4          	l24e4:
5249:	24E4  0600    		ld	b,0
5250:	24E6  EB      		ex	de,hl
5251:	24E7  2A9807  		ld	hl,(dir.mode)	; Get direct mode
5252:	24EA  22C40B  		ld	(direct_3),hl	; .. save
5253:	24ED  EB      		ex	de,hl
5254:	24EE          	l24ee:
5255:	24EE  04      		inc	b
5256:	24EF          	l24ef:
5257:	24EF  2B      		dec	hl
5258:	24F0          	l24f0:
5259:	24F0  CD0513  		call	get.tok
5260:	24F3  CA0025  		jp	z,l2500
5261:	24F6  FEA2    		cp	0a2h
5262:	24F8  CA1525  		jp	z,l2515
5263:	24FB  FECF    		cp	0cfh
5264:	24FD  C2F024  		jp	nz,l24f0
5265:			;
5266:			;
5267:			;
5268:	2500          	l2500:
5269:	2500  B7      		or	a
5270:	2501  C21525  		jp	nz,l2515
5271:	2504  23      		inc	hl
5272:	2505  7E      		ld	a,(hl)
5273:	2506  23      		inc	hl
5274:	2507  B6      		or	(hl)
5275:	2508  59      		ld	e,c
5276:	2509  CAE30C  		jp	z,_error
5277:	250C  23      		inc	hl
5278:	250D  5E      		ld	e,(hl)
5279:	250E  23      		inc	hl
5280:	250F  56      		ld	d,(hl)
5281:	2510  EB      		ex	de,hl
5282:	2511  22C40B  		ld	(direct_3),hl	; Set direct mode
5283:	2514  EB      		ex	de,hl
5284:	2515          	l2515:
5285:	2515  CD0513  		call	get.tok
5286:	2518  79      		ld	a,c
5287:	2519  FE1A    		cp	1ah
5288:	251B  7E      		ld	a,(hl)
5289:	251C  CA2E25  		jp	z,l252e
5290:	251F  FEB4    		cp	0b4h
5291:	2521  CAEE24  		jp	z,l24ee
5292:	2524  FEB5    		cp	0b5h
5293:	2526  C2EF24  		jp	nz,l24ef
5294:	2529  05      		dec	b
5295:	252A  C2EF24  		jp	nz,l24ef
5296:	252D  C9      		ret
5297:	252E          	l252e:
5298:	252E  FE82    		cp	82h
5299:	2530  CAEE24  		jp	z,l24ee
5300:	2533  FE83    		cp	83h
5301:	2535  C2EF24  		jp	nz,l24ef
5302:			;
5303:			;
5304:			;
5305:	2538          	l2538:
5306:	2538  05      		dec	b
5307:	2539  C8      		ret	z
5308:	253A  CD0513  		call	get.tok
5309:	253D  CA0025  		jp	z,l2500
5310:	2540  EB      		ex	de,hl
5311:	2541  2A9807  		ld	hl,(dir.mode)	; Get direct mode
5312:	2544  E5      		push	hl		; .. save
5313:	2545  2AC40B  		ld	hl,(direct_3)	; .. get new mode
5314:	2548  229807  		ld	(dir.mode),hl	; .. set it
5315:	254B  EB      		ex	de,hl
5316:	254C  C5      		push	bc
5317:	254D  CD8B39  		call	var.adr		; Get address of variable
5318:	2550  C1      		pop	bc
5319:	2551  2B      		dec	hl
5320:	2552  CD0513  		call	get.tok
5321:	2555  110025  		ld	de,l2500
5322:	2558  CA6325  		jp	z,l2563
5323:	255B  CDD343  		call	ilcmp
5324:	255E  2C      		db	','
5325:	255F  2B      		dec	hl
5326:	2560  113825  		ld	de,l2538
5327:	2563          	l2563:
5328:	2563  E3      		ex	(sp),hl
5329:	2564  229807  		ld	(dir.mode),hl	; .. set direct mode
5330:	2567  E1      		pop	hl
5331:	2568  D5      		push	de		; .. set return address
5332:	2569  C9      		ret
5333:			;
5334:			;
5335:			;
5336:	256A          	l256a:
5337:	256A  F5      		push	af
5338:	256B  3A090C  		ld	a,(l0c09)
5339:	256E  320A0C  		ld	(l0c0a),a
5340:	2571  F1      		pop	af
5341:			;
5342:			;
5343:			;
5344:	2572          	l2572:
5345:	2572  F5      		push	af
5346:	2573  AF      		xor	a
5347:	2574  32090C  		ld	(l0c09),a
5348:	2577  F1      		pop	af
5349:	2578  C9      		ret
5350:			;
5351:			;
5352:			;
5353:	2579          	l2579:
5354:	2579  210D36  		ld	hl,l360d
5355:	257C          	l257c:
5356:	257C  CDB728  		call	l28b7
5357:	257F  C38825  		jp	l2588
5358:	2582          	l2582:
5359:	2582  CDB728  		call	l28b7
5360:	2585          	l2585:
5361:	2585  CD7428  		call	l2874
5362:	2588          	l2588:
5363:	2588  78      		ld	a,b
5364:	2589  B7      		or	a
5365:	258A  C8      		ret	z
5366:	258B  3A070C  		ld	a,($$ARG+7)
5367:	258E  B7      		or	a
5368:	258F  CAA928  		jp	z,l28a9
5369:	2592  90      		sub	b
5370:	2593  D2A225  		jp	nc,l25a2
5371:	2596  2F      		cpl
5372:	2597  3C      		inc	a
5373:	2598  EB      		ex	de,hl
5374:	2599  CD9928  		call	l2899
5375:	259C  EB      		ex	de,hl
5376:	259D  CDA928  		call	l28a9
5377:	25A0  C1      		pop	bc
5378:	25A1  D1      		pop	de
5379:	25A2          	l25a2:
5380:	25A2  FE19    		cp	19h
5381:	25A4  D0      		ret	nc
5382:	25A5  F5      		push	af
5383:	25A6  CDD628  		call	l28d6
5384:	25A9  67      		ld	h,a
5385:	25AA  F1      		pop	af
5386:	25AB  CD6226  		call	l2662
5387:	25AE  7C      		ld	a,h
5388:	25AF  B7      		or	a
5389:	25B0  21040C  		ld	hl,$$ARG+4
5390:	25B3  F2C925  		jp	p,l25c9
5391:	25B6  CD4226  		call	l2642
5392:	25B9  D22326  		jp	nc,l2623
5393:	25BC  23      		inc	hl
5394:	25BD  34      		inc	(hl)
5395:	25BE  CA8830  		jp	z,l3088
5396:	25C1  2E01    		ld	l,1
5397:	25C3  CD8926  		call	l2689
5398:	25C6  C32326  		jp	l2623
5399:	25C9          	l25c9:
5400:	25C9  AF      		xor	a
5401:	25CA  90      		sub	b
5402:	25CB  47      		ld	b,a
5403:	25CC  7E      		ld	a,(hl)
5404:	25CD  9B      		sbc	a,e
5405:	25CE  5F      		ld	e,a
5406:	25CF  23      		inc	hl
5407:	25D0  7E      		ld	a,(hl)
5408:	25D1  9A      		sbc	a,d
5409:	25D2  57      		ld	d,a
5410:	25D3  23      		inc	hl
5411:	25D4  7E      		ld	a,(hl)
5412:	25D5  99      		sbc	a,c
5413:	25D6  4F      		ld	c,a
5414:	25D7          	l25d7:
5415:	25D7  DC4E26  		call	c,l264e
5416:	25DA          	l25da:
5417:	25DA  68      		ld	l,b
5418:	25DB  63      		ld	h,e
5419:	25DC  AF      		xor	a
5420:	25DD          	l25dd:
5421:	25DD  47      		ld	b,a
5422:	25DE  79      		ld	a,c
5423:	25DF  B7      		or	a
5424:	25E0  C20E26  		jp	nz,l260e
5425:	25E3  4A      		ld	c,d
5426:	25E4  54      		ld	d,h
5427:	25E5  65      		ld	h,l
5428:	25E6  6F      		ld	l,a
5429:	25E7  78      		ld	a,b
5430:	25E8  D608    		sub	8
5431:	25EA  FEE0    		cp	0e0h
5432:	25EC  C2DD25  		jp	nz,l25dd
5433:			;
5434:			; Zero exponent of real
5435:			;
5436:	25EF          	st.ZERO:
5437:	25EF  AF      		xor	a
5438:			;
5439:			; Set exponent of number
5440:			;
5441:	25F0          	st.EXP:
5442:	25F0  32070C  		ld	($$ARG+7),a	; .. store it
5443:	25F3  C9      		ret
5444:			;
5445:			;
5446:			;
5447:	25F4          	l25f4:
5448:	25F4  7C      		ld	a,h
5449:	25F5  B5      		or	l
5450:	25F6  B2      		or	d
5451:	25F7  C20626  		jp	nz,l2606
5452:	25FA  79      		ld	a,c
5453:	25FB          	l25fb:
5454:	25FB  05      		dec	b
5455:	25FC  17      		rla
5456:	25FD  D2FB25  		jp	nc,l25fb
5457:	2600  04      		inc	b
5458:	2601  1F      		rra
5459:	2602  4F      		ld	c,a
5460:	2603  C31126  		jp	l2611
5461:	2606          	l2606:
5462:	2606  05      		dec	b
5463:	2607  29      		add	hl,hl
5464:	2608  7A      		ld	a,d
5465:	2609  17      		rla
5466:	260A  57      		ld	d,a
5467:	260B  79      		ld	a,c
5468:	260C  8F      		adc	a,a
5469:	260D  4F      		ld	c,a
5470:	260E          	l260e:
5471:	260E  F2F425  		jp	p,l25f4
5472:	2611          	l2611:
5473:	2611  78      		ld	a,b
5474:	2612  5C      		ld	e,h
5475:	2613  45      		ld	b,l
5476:	2614  B7      		or	a
5477:	2615  CA2326  		jp	z,l2623
5478:	2618  21070C  		ld	hl,$$ARG+7
5479:	261B  86      		add	a,(hl)
5480:	261C  77      		ld	(hl),a
5481:	261D  D2EF25  		jp	nc,st.ZERO	; .. zero number
5482:	2620  CAEF25  		jp	z,st.ZERO
5483:	2623          	l2623:
5484:	2623  78      		ld	a,b
5485:	2624          	l2624:
5486:	2624  21070C  		ld	hl,$$ARG+7
5487:	2627  B7      		or	a
5488:	2628  FC3526  		call	m,l2635
5489:	262B  46      		ld	b,(hl)
5490:	262C  23      		inc	hl
5491:	262D  7E      		ld	a,(hl)
5492:	262E  E680    		and	80h
5493:	2630  A9      		xor	c
5494:	2631  4F      		ld	c,a
5495:	2632  C3A928  		jp	l28a9
5496:	2635          	l2635:
5497:	2635  1C      		inc	e
5498:	2636  C0      		ret	nz
5499:	2637  14      		inc	d
5500:	2638  C0      		ret	nz
5501:	2639  0C      		inc	c
5502:	263A  C0      		ret	nz
5503:	263B  0E80    		ld	c,80h
5504:	263D  34      		inc	(hl)
5505:	263E  C0      		ret	nz
5506:	263F  C38730  		jp	l3087
5507:	2642          	l2642:
5508:	2642  7E      		ld	a,(hl)
5509:	2643  83      		add	a,e
5510:	2644  5F      		ld	e,a
5511:	2645  23      		inc	hl
5512:	2646  7E      		ld	a,(hl)
5513:	2647  8A      		adc	a,d
5514:	2648  57      		ld	d,a
5515:	2649  23      		inc	hl
5516:	264A  7E      		ld	a,(hl)
5517:	264B  89      		adc	a,c
5518:	264C  4F      		ld	c,a
5519:	264D  C9      		ret
5520:	264E          	l264e:
5521:	264E  21080C  		ld	hl,l0c08
5522:	2651  7E      		ld	a,(hl)
5523:	2652  2F      		cpl
5524:	2653  77      		ld	(hl),a
5525:	2654  AF      		xor	a
5526:	2655  6F      		ld	l,a
5527:	2656  90      		sub	b
5528:	2657  47      		ld	b,a
5529:	2658  7D      		ld	a,l
5530:	2659  9B      		sbc	a,e
5531:	265A  5F      		ld	e,a
5532:	265B  7D      		ld	a,l
5533:	265C  9A      		sbc	a,d
5534:	265D  57      		ld	d,a
5535:	265E  7D      		ld	a,l
5536:	265F  99      		sbc	a,c
5537:	2660  4F      		ld	c,a
5538:	2661  C9      		ret
5539:	2662          	l2662:
5540:	2662  0600    		ld	b,0
5541:	2664          	l2664:
5542:	2664  D608    		sub	8
5543:	2666  DA7126  		jp	c,l2671
5544:	2669  43      		ld	b,e
5545:	266A  5A      		ld	e,d
5546:	266B  51      		ld	d,c
5547:	266C  0E00    		ld	c,0
5548:	266E  C36426  		jp	l2664
5549:	2671          	l2671:
5550:	2671  C609    		add	a,9
5551:	2673  6F      		ld	l,a
5552:	2674  7A      		ld	a,d
5553:	2675  B3      		or	e
5554:	2676  B0      		or	b
5555:	2677  C28526  		jp	nz,l2685
5556:	267A  79      		ld	a,c
5557:	267B          	l267b:
5558:	267B  2D      		dec	l
5559:	267C  C8      		ret	z
5560:	267D  1F      		rra
5561:	267E  4F      		ld	c,a
5562:	267F  D27B26  		jp	nc,l267b
5563:	2682  C38B26  		jp	l268b
5564:	2685          	l2685:
5565:	2685  AF      		xor	a
5566:	2686  2D      		dec	l
5567:	2687  C8      		ret	z
5568:	2688  79      		ld	a,c
5569:	2689          	l2689:
5570:	2689  1F      		rra
5571:	268A  4F      		ld	c,a
5572:	268B          	l268b:
5573:	268B  7A      		ld	a,d
5574:	268C  1F      		rra
5575:	268D  57      		ld	d,a
5576:	268E  7B      		ld	a,e
5577:	268F  1F      		rra
5578:	2690  5F      		ld	e,a
5579:	2691  78      		ld	a,b
5580:	2692  1F      		rra
5581:	2693  47      		ld	b,a
5582:	2694  C38526  		jp	l2685
5583:	2697          	l2697:
5584:	2697  00000081		db	000h,000h,000h,081h
5585:	269B          	l269b:
5586:	269B  04      		db	4
5587:	269C  9AF71983		db	09ah,0f7h,019h,083h
5588:	26A0  24634383		db	024h,063h,043h,083h
5589:	26A4  75CD8D84		db	075h,0cdh,08dh,084h
5590:	26A8  A97F8382		db	0a9h,07fh,083h,082h
5591:	26AC          	l26ac:
5592:	26AC  04      		db	4
5593:	26AD  00000081		db	000h,000h,000h,081h
5594:	26B1  E2B04D83		db	0e2h,0b0h,04dh,083h
5595:	26B5  0A721183		db	00ah,072h,011h,083h
5596:	26B9  F404357F		db	0f4h,004h,035h,07fh
5597:			;
5598:			; Function : LOG(X)
5599:			;
5600:	26BD          	l26bd:
5601:	26BD  CD4528  		call	l2845
5602:	26C0  B7      		or	a
5603:	26C1  EA1814  		jp	pe,_ill.func	; .. invalid call
5604:	26C4  CDD026  		call	l26d0
5605:	26C7  013180  		ld	bc,l8031
5606:	26CA  111872  		ld	de,l7218
5607:	26CD  C30327  		jp	l2703
5608:	26D0          	l26d0:
5609:	26D0  CDB428  		call	l28b4
5610:	26D3  3E80    		ld	a,80h
5611:	26D5  32070C  		ld	($$ARG+7),a
5612:	26D8  A8      		xor	b
5613:	26D9  F5      		push	af
5614:	26DA  CD9928  		call	l2899
5615:	26DD  219B26  		ld	hl,l269b
5616:	26E0  CDA737  		call	l37a7
5617:	26E3  C1      		pop	bc
5618:	26E4  E1      		pop	hl
5619:	26E5  CD9928  		call	l2899
5620:	26E8  EB      		ex	de,hl
5621:	26E9  CDA928  		call	l28a9
5622:	26EC  21AC26  		ld	hl,l26ac
5623:	26EF  CDA737  		call	l37a7
5624:	26F2  C1      		pop	bc
5625:	26F3  D1      		pop	de
5626:	26F4  CD6927  		call	l2769
5627:	26F7  F1      		pop	af
5628:	26F8  CD9928  		call	l2899
5629:	26FB  CD5428  		call	l2854
5630:	26FE  C1      		pop	bc
5631:	26FF  D1      		pop	de
5632:	2700  C38825  		jp	l2588
5633:			;
5634:			;
5635:			;
5636:	2703          	l2703:
5637:	2703  CD4528  		call	l2845
5638:	2706  C8      		ret	z
5639:	2707  2E00    		ld	l,0
5640:	2709  CD0328  		call	l2803
5641:	270C  79      		ld	a,c
5642:	270D  323C27  		ld	(l273c),a
5643:	2710  EB      		ex	de,hl
5644:	2711  223727  		ld	(l2737),hl
5645:	2714  010000  		ld	bc,l0000
5646:	2717  50      		ld	d,b
5647:	2718  58      		ld	e,b
5648:	2719  21DA25  		ld	hl,l25da
5649:	271C  E5      		push	hl
5650:	271D  212527  		ld	hl,l2725
5651:	2720  E5      		push	hl
5652:	2721  E5      		push	hl
5653:	2722  21040C  		ld	hl,$$ARG+4
5654:	2725          	l2725:
5655:	2725  7E      		ld	a,(hl)
5656:	2726  23      		inc	hl
5657:	2727  B7      		or	a
5658:	2728  CA5927  		jp	z,l2759
5659:	272B  E5      		push	hl
5660:	272C  EB      		ex	de,hl
5661:	272D  1E08    		ld	e,8
5662:	272F          	l272f:
5663:	272F  1F      		rra
5664:	2730  57      		ld	d,a
5665:	2731  79      		ld	a,c
5666:	2732  D23D27  		jp	nc,l273d
5667:	2735  D5      		push	de
5668:	2736  110000  		ld	de,l0000
5669:	2737          	l2737	equ	$-2
5670:	2739  19      		add	hl,de
5671:	273A  D1      		pop	de
5672:	273B  CE00    		adc	a,0
5673:	273C          	l273c	equ	$-1
5674:	273D          	l273d:
5675:	273D  1F      		rra
5676:	273E  4F      		ld	c,a
5677:	273F  7C      		ld	a,h
5678:	2740  1F      		rra
5679:	2741  67      		ld	h,a
5680:	2742  7D      		ld	a,l
5681:	2743  1F      		rra
5682:	2744  6F      		ld	l,a
5683:	2745  78      		ld	a,b
5684:	2746  1F      		rra
5685:	2747  47      		ld	b,a
5686:	2748  E610    		and	10h
5687:	274A  CA5127  		jp	z,l2751
5688:	274D  78      		ld	a,b
5689:	274E  F620    		or	' '
5690:	2750  47      		ld	b,a
5691:	2751          	l2751:
5692:	2751  1D      		dec	e
5693:	2752  7A      		ld	a,d
5694:	2753  C22F27  		jp	nz,l272f
5695:	2756  EB      		ex	de,hl
5696:	2757          	l2757:
5697:	2757  E1      		pop	hl
5698:	2758  C9      		ret
5699:	2759          	l2759:
5700:	2759  43      		ld	b,e
5701:	275A  5A      		ld	e,d
5702:	275B  51      		ld	d,c
5703:	275C  4F      		ld	c,a
5704:	275D  C9      		ret
5705:	275E          	l275e:
5706:	275E  CD9928  		call	l2899
5707:	2761  21AE2D  		ld	hl,l2dae
5708:	2764  CDA628  		call	l28a6
5709:	2767          	l2767:
5710:	2767  C1      		pop	bc
5711:	2768  D1      		pop	de
5712:	2769          	l2769:
5713:	2769  CD4528  		call	l2845
5714:	276C  CA9030  		jp	z,l3090
5715:	276F  2EFF    		ld	l,0ffh
5716:	2771  CD0328  		call	l2803
5717:	2774  34      		inc	(hl)
5718:	2775  CA6730  		jp	z,l3067
5719:	2778  34      		inc	(hl)
5720:	2779  CA6730  		jp	z,l3067
5721:	277C  2B      		dec	hl
5722:	277D  7E      		ld	a,(hl)
5723:	277E  32A027  		ld	(l27a0),a
5724:	2781  2B      		dec	hl
5725:	2782  7E      		ld	a,(hl)
5726:	2783  329C27  		ld	(l279c),a
5727:	2786  2B      		dec	hl
5728:	2787  7E      		ld	a,(hl)
5729:	2788  329827  		ld	(l2798),a
5730:	278B  41      		ld	b,c
5731:	278C  EB      		ex	de,hl
5732:	278D  AF      		xor	a
5733:	278E  4F      		ld	c,a
5734:	278F  57      		ld	d,a
5735:	2790  5F      		ld	e,a
5736:	2791  32A327  		ld	(l27a3),a
5737:	2794          	l2794:
5738:	2794  E5      		push	hl
5739:	2795  C5      		push	bc
5740:	2796  7D      		ld	a,l
5741:	2797  D600    		sub	0
5742:	2798          	l2798	equ	$-1
5743:	2799  6F      		ld	l,a
5744:	279A  7C      		ld	a,h
5745:	279B  DE00    		sbc	a,0
5746:	279C          	l279c	equ	$-1
5747:	279D  67      		ld	h,a
5748:	279E  78      		ld	a,b
5749:	279F  DE00    		sbc	a,0
5750:	27A0          	l27a0	equ	$-1
5751:	27A1  47      		ld	b,a
5752:	27A2  3E00    		ld	a,0
5753:	27A3          	l27a3	equ	$-1
5754:	27A4  DE00    		sbc	a,0
5755:	27A6  3F      		ccf
5756:	27A7  D2B127  		jp	nc,l27b1
5757:	27AA  32A327  		ld	(l27a3),a
5758:	27AD  F1      		pop	af
5759:	27AE  F1      		pop	af
5760:	27AF  37      		scf
5761:	27B0          		_JP.NC
5762:	27B1          	l27b1:
5763:	27B1  C1      		pop	bc
5764:	27B2  E1      		pop	hl
5765:	27B3  79      		ld	a,c
5766:	27B4  3C      		inc	a
5767:	27B5  3D      		dec	a
5768:	27B6  1F      		rra
5769:	27B7  F2CF27  		jp	p,l27cf
5770:	27BA  17      		rla
5771:	27BB  3AA327  		ld	a,(l27a3)
5772:	27BE  1F      		rra
5773:	27BF  E6C0    		and	0c0h
5774:	27C1  F5      		push	af
5775:	27C2  78      		ld	a,b
5776:	27C3  B4      		or	h
5777:	27C4  B5      		or	l
5778:	27C5  CACA27  		jp	z,l27ca
5779:	27C8  3E20    		ld	a,' '
5780:	27CA          	l27ca:
5781:	27CA  E1      		pop	hl
5782:	27CB  B4      		or	h
5783:	27CC  C32426  		jp	l2624
5784:	27CF          	l27cf:
5785:	27CF  17      		rla
5786:	27D0  7B      		ld	a,e
5787:	27D1  17      		rla
5788:	27D2  5F      		ld	e,a
5789:	27D3  7A      		ld	a,d
5790:	27D4  17      		rla
5791:	27D5  57      		ld	d,a
5792:	27D6  79      		ld	a,c
5793:	27D7  17      		rla
5794:	27D8  4F      		ld	c,a
5795:	27D9  29      		add	hl,hl
5796:	27DA  78      		ld	a,b
5797:	27DB  17      		rla
5798:	27DC  47      		ld	b,a
5799:	27DD  3AA327  		ld	a,(l27a3)
5800:	27E0  17      		rla
5801:	27E1  32A327  		ld	(l27a3),a
5802:	27E4  79      		ld	a,c
5803:	27E5  B2      		or	d
5804:	27E6  B3      		or	e
5805:	27E7  C29427  		jp	nz,l2794
5806:	27EA  E5      		push	hl
5807:	27EB  21070C  		ld	hl,$$ARG+7
5808:	27EE  35      		dec	(hl)
5809:	27EF  E1      		pop	hl
5810:	27F0  C29427  		jp	nz,l2794
5811:	27F3  C3EF25  		jp	st.ZERO		; Set zero number
5812:	27F6          	l27f6:
5813:	27F6  3EFF    		ld	a,0ffh
5814:	27F8          		_LD.L
5815:	27F9          	l27f9:
5816:	27F9  AF      		xor	a
5817:	27FA  21130C  		ld	hl,l0c13
5818:	27FD  4E      		ld	c,(hl)
5819:	27FE  23      		inc	hl
5820:	27FF  AE      		xor	(hl)
5821:	2800  47      		ld	b,a
5822:	2801  2E00    		ld	l,0
5823:	2803          	l2803:
5824:	2803  78      		ld	a,b
5825:	2804  B7      		or	a
5826:	2805  CA2728  		jp	z,l2827
5827:	2808  7D      		ld	a,l
5828:	2809  21070C  		ld	hl,$$ARG+7
5829:	280C  AE      		xor	(hl)
5830:	280D  80      		add	a,b
5831:	280E  47      		ld	b,a
5832:	280F  1F      		rra
5833:	2810  A8      		xor	b
5834:	2811  78      		ld	a,b
5835:	2812  F22628  		jp	p,l2826
5836:	2815  C680    		add	a,80h
5837:	2817  77      		ld	(hl),a
5838:	2818  CA5727  		jp	z,l2757
5839:	281B  CDD628  		call	l28d6
5840:	281E  77      		ld	(hl),a
5841:	281F          	l281f:
5842:	281F  2B      		dec	hl
5843:	2820  C9      		ret
5844:	2821  CD4528  		call	l2845
5845:	2824  2F      		cpl
5846:	2825  E1      		pop	hl
5847:	2826          	l2826:
5848:	2826  B7      		or	a
5849:	2827          	l2827:
5850:	2827  E1      		pop	hl
5851:	2828  F2EF25  		jp	p,st.ZERO	; Set zero number
5852:	282B  C36730  		jp	l3067
5853:	282E          	l282e:
5854:	282E  CDB428  		call	l28b4
5855:	2831  78      		ld	a,b
5856:	2832  B7      		or	a
5857:	2833  C8      		ret	z
5858:	2834  C602    		add	a,2
5859:	2836  DA8030  		jp	c,l3080
5860:	2839  47      		ld	b,a
5861:	283A  CD8825  		call	l2588
5862:	283D  21070C  		ld	hl,$$ARG+7
5863:	2840  34      		inc	(hl)
5864:	2841  C0      		ret	nz
5865:	2842  C38030  		jp	l3080
5866:			;
5867:			;
5868:			;
5869:	2845          	l2845:
5870:	2845  3A070C  		ld	a,($$ARG+7)
5871:	2848  B7      		or	a
5872:	2849  C8      		ret	z
5873:	284A  3A060C  		ld	a,($$ARG+6)
5874:	284D          		_CP
5875:	284E          	l284e:
5876:	284E  2F      		cpl
5877:	284F          	l284f:
5878:	284F  17      		rla
5879:	2850          	l2850:
5880:	2850  9F      		sbc	a,a
5881:	2851  C0      		ret	nz
5882:	2852  3C      		inc	a
5883:	2853  C9      		ret
5884:	2854          	l2854:
5885:	2854  0688    		ld	b,88h
5886:	2856  110000  		ld	de,l0000
5887:	2859          	l2859:
5888:	2859  21070C  		ld	hl,$$ARG+7
5889:	285C  4F      		ld	c,a
5890:	285D  70      		ld	(hl),b
5891:	285E  0600    		ld	b,0
5892:	2860  23      		inc	hl
5893:	2861  3680    		ld	(hl),80h
5894:	2863  17      		rla
5895:	2864  C3D725  		jp	l25d7
5896:			;
5897:			; Function : ABS(X)
5898:			;
5899:	2867          	l2867:
5900:	2867  CD8628  		call	l2886
5901:	286A  F0      		ret	p
5902:	286B          	l286b:
5903:	286B  CD641D  		call	get.type	; Get type
5904:	286E  FAF82B  		jp	m,l2bf8		; .. integer
5905:	2871  CAE10C  		jp	z,l0ce1		; .. pointer
5906:	2874          	l2874:
5907:	2874  21060C  		ld	hl,$$ARG+6	; Point to MSD of mantissa
5908:	2877  7E      		ld	a,(hl)
5909:	2878  EE80    		xor	MSB		; .. toggle sign
5910:	287A  77      		ld	(hl),a
5911:	287B  C9      		ret
5912:			;
5913:			; Function : SGN(X)
5914:			;
5915:	287C          	l287c:
5916:	287C  CD8628  		call	l2886
5917:	287F          	l287f:
5918:	287F  6F      		ld	l,a		; Get byte result
5919:	2880  17      		rla			; .. get MSB
5920:	2881  9F      		sbc	a,a		; .. as 0x00 or 0xFF
5921:	2882  67      		ld	h,a
5922:	2883  C3DC29  		jp	st.INT		; .. save result
5923:			;
5924:			;
5925:			;
5926:	2886          	l2886:
5927:	2886  CD641D  		call	get.type	; Get type
5928:	2889  CAE10C  		jp	z,l0ce1		; .. pointer
5929:	288C  F24528  		jp	p,l2845		; .. single/double precision
5930:	288F  2A040C  		ld	hl,($$ARG+4)	; Get integer
5931:	2892          	l2892:
5932:	2892  7C      		ld	a,h		; Test zero result
5933:	2893  B5      		or	l
5934:	2894  C8      		ret	z		; .. yeap
5935:	2895  7C      		ld	a,h
5936:	2896  C34F28  		jp	l284f
5937:			;
5938:			;
5939:			;
5940:	2899          	l2899:
5941:	2899  EB      		ex	de,hl
5942:	289A  2A040C  		ld	hl,($$ARG+4)
5943:	289D  E3      		ex	(sp),hl
5944:	289E  E5      		push	hl
5945:	289F  2A060C  		ld	hl,($$ARG+6)
5946:	28A2  E3      		ex	(sp),hl
5947:	28A3  E5      		push	hl
5948:	28A4  EB      		ex	de,hl
5949:	28A5  C9      		ret
5950:	28A6          	l28a6:
5951:	28A6  CDB728  		call	l28b7
5952:	28A9          	l28a9:
5953:	28A9  EB      		ex	de,hl
5954:	28AA  22040C  		ld	($$ARG+4),hl
5955:	28AD  60      		ld	h,b
5956:	28AE  69      		ld	l,c
5957:	28AF  22060C  		ld	($$ARG+6),hl
5958:	28B2  EB      		ex	de,hl
5959:	28B3  C9      		ret
5960:			;
5961:			;
5962:			;
5963:	28B4          	l28b4:
5964:	28B4  21040C  		ld	hl,$$ARG+4
5965:	28B7          	l28b7:
5966:	28B7  5E      		ld	e,(hl)
5967:	28B8  23      		inc	hl
5968:	28B9          	l28b9:
5969:	28B9  56      		ld	d,(hl)
5970:	28BA  23      		inc	hl
5971:	28BB  4E      		ld	c,(hl)
5972:	28BC  23      		inc	hl
5973:	28BD  46      		ld	b,(hl)
5974:			;
5975:			; HL=HL+1 
5976:			;
5977:	28BE          	inc.hl:
5978:	28BE  23      		inc	hl
5979:	28BF  C9      		ret
5980:			;
5981:			;
5982:			;
5983:	28C0          	l28c0:
5984:	28C0  11040C  		ld	de,$$ARG+4
5985:	28C3          	l28c3:
5986:	28C3  0604    		ld	b,4
5987:	28C5  C3CD28  		jp	l28cd
5988:	28C8          	l28c8:
5989:	28C8  EB      		ex	de,hl
5990:	28C9          	l28c9:
5991:	28C9  3A670A  		ld	a,($ARGLEN)	; Get length of arg
5992:	28CC  47      		ld	b,a
5993:	28CD          	l28cd:
5994:	28CD  1A      		ld	a,(de)		; .. unpack value
5995:	28CE  77      		ld	(hl),a
5996:	28CF  13      		inc	de
5997:	28D0  23      		inc	hl
5998:	28D1  05      		dec	b
5999:	28D2  C2CD28  		jp	nz,l28cd
6000:	28D5  C9      		ret
6001:			;
6002:			;
6003:			;
6004:	28D6          	l28d6:
6005:	28D6  21060C  		ld	hl,$$ARG+6
6006:	28D9  7E      		ld	a,(hl)
6007:	28DA  07      		rlca
6008:	28DB  37      		scf
6009:	28DC  1F      		rra
6010:	28DD  77      		ld	(hl),a
6011:	28DE  3F      		ccf
6012:	28DF  1F      		rra
6013:	28E0  23      		inc	hl
6014:	28E1  23      		inc	hl
6015:	28E2  77      		ld	(hl),a
6016:	28E3  79      		ld	a,c
6017:	28E4  07      		rlca
6018:	28E5  37      		scf
6019:	28E6  1F      		rra
6020:	28E7  4F      		ld	c,a
6021:	28E8  1F      		rra
6022:	28E9  AE      		xor	(hl)
6023:	28EA  C9      		ret
6024:	28EB          	l28eb:
6025:	28EB  210D0C  		ld	hl,l0c0d
6026:	28EE          	l28ee:
6027:	28EE  11C828  		ld	de,l28c8
6028:	28F1  C3FA28  		jp	l28fa
6029:	28F4          	l28f4:
6030:	28F4  210D0C  		ld	hl,l0c0d
6031:	28F7          	l28f7:
6032:	28F7  11C928  		ld	de,l28c9
6033:	28FA          	l28fa:
6034:	28FA  D5      		push	de
6035:	28FB  11040C  		ld	de,$$ARG+4
6036:	28FE  CD641D  		call	get.type	; Get type
6037:	2901  D8      		ret	c		; .. single precision
6038:	2902  11000C  		ld	de,$$ARG	; .. return double precision
6039:	2905  C9      		ret
6040:			;
6041:			; ENTRY	Reg BCDE hold ???
6042:			;
6043:	2906          	l2906:
6044:	2906  78      		ld	a,b
6045:	2907  B7      		or	a
6046:	2908  CA4528  		jp	z,l2845
6047:	290B  214E28  		ld	hl,l284e
6048:	290E  E5      		push	hl
6049:	290F  CD4528  		call	l2845
6050:	2912  79      		ld	a,c
6051:	2913  C8      		ret	z
6052:	2914  21060C  		ld	hl,$$ARG+6
6053:	2917  AE      		xor	(hl)
6054:	2918  79      		ld	a,c
6055:	2919  F8      		ret	m
6056:	291A  CD2029  		call	l2920		; Compare
6057:	291D          	l291d:
6058:	291D  1F      		rra
6059:	291E  A9      		xor	c
6060:	291F  C9      		ret
6061:			;
6062:			; Compare BCDE : ^HL - Return 2 levels if match
6063:			;
6064:	2920          	l2920:
6065:	2920  23      		inc	hl
6066:	2921  78      		ld	a,b
6067:	2922  BE      		cp	(hl)		; Compare
6068:	2923  C0      		ret	nz
6069:	2924  2B      		dec	hl
6070:	2925  79      		ld	a,c
6071:	2926  BE      		cp	(hl)
6072:	2927  C0      		ret	nz
6073:	2928  2B      		dec	hl
6074:	2929  7A      		ld	a,d
6075:	292A  BE      		cp	(hl)
6076:	292B  C0      		ret	nz
6077:	292C  2B      		dec	hl
6078:	292D  7B      		ld	a,e
6079:	292E  96      		sub	(hl)
6080:	292F  C0      		ret	nz
6081:	2930  E1      		pop	hl		; .. fix stack
6082:	2931  E1      		pop	hl
6083:	2932  C9      		ret
6084:			;
6085:			;
6086:			;
6087:	2933          	l2933:
6088:	2933  7A      		ld	a,d
6089:	2934  AC      		xor	h
6090:	2935  7C      		ld	a,h
6091:	2936  FA4F28  		jp	m,l284f
6092:	2939  BA      		cp	d
6093:	293A  C24029  		jp	nz,l2940
6094:	293D  7D      		ld	a,l
6095:	293E  93      		sub	e
6096:	293F  C8      		ret	z
6097:	2940          	l2940:
6098:	2940  C35028  		jp	l2850
6099:	2943          	l2943:
6100:	2943  210D0C  		ld	hl,l0c0d
6101:	2946  CDC928  		call	l28c9
6102:	2949          	l2949:
6103:	2949  11140C  		ld	de,l0c14
6104:	294C  1A      		ld	a,(de)
6105:	294D  B7      		or	a
6106:	294E  CA4528  		jp	z,l2845
6107:	2951  214E28  		ld	hl,l284e
6108:	2954  E5      		push	hl
6109:	2955  CD4528  		call	l2845
6110:	2958  1B      		dec	de
6111:	2959  1A      		ld	a,(de)
6112:	295A  4F      		ld	c,a
6113:	295B  C8      		ret	z
6114:	295C  21060C  		ld	hl,$$ARG+6
6115:	295F  AE      		xor	(hl)
6116:	2960  79      		ld	a,c
6117:	2961  F8      		ret	m
6118:	2962  13      		inc	de
6119:	2963  23      		inc	hl
6120:	2964  0608    		ld	b,8
6121:	2966          	l2966:
6122:	2966  1A      		ld	a,(de)
6123:	2967  96      		sub	(hl)
6124:	2968  C21D29  		jp	nz,l291d
6125:	296B  1B      		dec	de
6126:	296C  2B      		dec	hl
6127:	296D  05      		dec	b
6128:	296E  C26629  		jp	nz,l2966
6129:	2971  C1      		pop	bc
6130:	2972  C9      		ret
6131:	2973          	l2973:
6132:	2973  CD4929  		call	l2949
6133:	2976  C24E28  		jp	nz,l284e
6134:	2979  C9      		ret
6135:			;
6136:			; Function : CINT(X)
6137:			;
6138:	297A          	_CINT:
6139:	297A  CD641D  		call	get.type	; Get type
6140:	297D  2A040C  		ld	hl,($$ARG+4)	; .. fetch integer
6141:	2980  F8      		ret	m		; .. got it
6142:	2981  CAE10C  		jp	z,l0ce1		; Pointer is not valid here
6143:	2984  E29929  		jp	po,l2999	; .. single precision
6144:	2987  CDF428  		call	l28f4
6145:	298A  210936  		ld	hl,l3609
6146:	298D  CDEE28  		call	l28ee
6147:	2990  CD262C  		call	l2c26
6148:	2993  CDFE29  		call	l29fe
6149:	2996  C39C29  		jp	l299c
6150:	2999          	l2999:
6151:	2999  CD7925  		call	l2579
6152:	299C          	l299c:
6153:	299C  3A060C  		ld	a,($$ARG+6)
6154:	299F  B7      		or	a
6155:	29A0  F5      		push	af
6156:	29A1  E67F    		and	7fh
6157:	29A3  32060C  		ld	($$ARG+6),a
6158:	29A6  3A070C  		ld	a,($$ARG+7)
6159:	29A9  FE90    		cp	90h
6160:	29AB  D2DB0C  		jp	nc,l0cdb
6161:	29AE  CD422A  		call	l2a42
6162:	29B1  3A070C  		ld	a,($$ARG+7)
6163:	29B4  B7      		or	a
6164:	29B5  C2BD29  		jp	nz,l29bd
6165:	29B8  F1      		pop	af
6166:	29B9  EB      		ex	de,hl
6167:	29BA  C3C229  		jp	l29c2
6168:	29BD          	l29bd:
6169:	29BD  F1      		pop	af
6170:	29BE  EB      		ex	de,hl
6171:	29BF  F2C829  		jp	p,l29c8
6172:	29C2          	l29c2:
6173:	29C2  7C      		ld	a,h		; Build complement
6174:	29C3  2F      		cpl
6175:	29C4  67      		ld	h,a
6176:	29C5  7D      		ld	a,l
6177:	29C6  2F      		cpl
6178:	29C7  6F      		ld	l,a
6179:	29C8          	l29c8:
6180:	29C8  C3DC29  		jp	st.INT		; Save result
6181:			;
6182:			;
6183:			;
6184:	29CB          	l2xxx::
6185:	29CB  21DB0C  		ld	hl,l0cdb
6186:	29CE  E5      		push	hl
6187:	29CF          	l29cf:
6188:	29CF  3A070C  		ld	a,($$ARG+7)
6189:	29D2  FE90    		cp	90h
6190:	29D4  D2E529  		jp	nc,l29e5
6191:	29D7  CD422A  		call	l2a42
6192:	29DA  EB      		ex	de,hl
6193:	29DB          	l29db:
6194:	29DB  D1      		pop	de
6195:			;
6196:			; Save integer in reg HL and set length of it
6197:			;
6198:	29DC          	st.INT:
6199:	29DC  22040C  		ld	($$ARG+4),hl	; Save it
6200:			;
6201:			; Set integer type
6202:			;
6203:	29DF          	tp.INT:
6204:	29DF  3E02    		ld	a,2
6205:	29E1          	tp.???:
6206:	29E1  32670A  		ld	($ARGLEN),a	; Set length
6207:	29E4  C9      		ret
6208:			;
6209:			;
6210:			;
6211:	29E5          	l29e5:
6212:	29E5  018090  		ld	bc,l9080
6213:	29E8  110000  		ld	de,l0000
6214:	29EB  CD0629  		call	l2906
6215:	29EE  C0      		ret	nz
6216:	29EF  61      		ld	h,c
6217:	29F0  6A      		ld	l,d
6218:	29F1  C3DB29  		jp	l29db
6219:			;
6220:			; Function : CSNG(X)
6221:			;
6222:	29F4          	l29f4:
6223:	29F4  CD641D  		call	get.type	; Get type
6224:	29F7  E0      		ret	po		; .. got single precision
6225:	29F8  FA112A  		jp	m,l2a11		; .. got integer
6226:	29FB  CAE10C  		jp	z,l0ce1		; .. invalid pointer here
6227:	29FE          	l29fe:
6228:	29FE  CDB428  		call	l28b4
6229:	2A01  CD362A  		call	tp.SNGL		; Set single precision
6230:	2A04  78      		ld	a,b
6231:	2A05  B7      		or	a
6232:	2A06  C8      		ret	z
6233:	2A07  CDD628  		call	l28d6
6234:	2A0A  21030C  		ld	hl,$$ARG+3
6235:	2A0D  46      		ld	b,(hl)
6236:	2A0E  C32326  		jp	l2623
6237:	2A11          	l2a11:
6238:	2A11  2A040C  		ld	hl,($$ARG+4)
6239:	2A14          	l2a14:
6240:	2A14  CD362A  		call	tp.SNGL		; Set single precision
6241:	2A17  7C      		ld	a,h
6242:	2A18  55      		ld	d,l
6243:	2A19  1E00    		ld	e,0
6244:	2A1B  0690    		ld	b,90h
6245:	2A1D  C35928  		jp	l2859
6246:			;
6247:			; Function : CDBL(X)
6248:			;
6249:	2A20          	l2a20:
6250:	2A20  CD641D  		call	get.type	; Get type
6251:	2A23  D0      		ret	nc		; .. got double precision
6252:	2A24  CAE10C  		jp	z,l0ce1		; .. pointer is not valid here
6253:	2A27  FC112A  		call	m,l2a11		; .. got integer
6254:	2A2A          	l2a2a:
6255:	2A2A  210000  		ld	hl,0		; Clear hi end
6256:	2A2D  22000C  		ld	($$ARG),hl
6257:	2A30  22020C  		ld	($$ARG+2),hl
6258:			;
6259:			; Set double precision type
6260:			;
6261:	2A33          	tp.DOUB:
6262:	2A33  3E08    		ld	a,8
6263:	2A35          		_LD.BC
6264:			;
6265:			; Set single precision type
6266:			;
6267:	2A36          	tp.SNGL:
6268:	2A36  3E04    		ld	a,4
6269:	2A38  C3E129  		jp	tp.???
6270:			;
6271:			; Verify string pointer token follows
6272:			;
6273:	2A3B          	vrf.str:
6274:	2A3B  CD641D  		call	get.type	; Get type
6275:	2A3E  C8      		ret	z		; .. got pointer
6276:	2A3F  C3E10C  		jp	l0ce1		; .. error
6277:			;
6278:			;
6279:			;
6280:	2A42          	l2a42:
6281:	2A42  47      		ld	b,a
6282:	2A43  4F      		ld	c,a
6283:	2A44  57      		ld	d,a
6284:	2A45  5F      		ld	e,a
6285:	2A46  B7      		or	a
6286:	2A47  C8      		ret	z
6287:	2A48  E5      		push	hl
6288:	2A49  CDB428  		call	l28b4
6289:	2A4C  CDD628  		call	l28d6
6290:	2A4F  AE      		xor	(hl)
6291:	2A50  67      		ld	h,a
6292:	2A51  FC662A  		call	m,l2a66
6293:	2A54  3E98    		ld	a,98h
6294:	2A56  90      		sub	b
6295:	2A57  CD6226  		call	l2662
6296:	2A5A  7C      		ld	a,h
6297:	2A5B  17      		rla
6298:	2A5C  DC3526  		call	c,l2635
6299:	2A5F  0600    		ld	b,0
6300:	2A61  DC4E26  		call	c,l264e
6301:	2A64  E1      		pop	hl
6302:	2A65  C9      		ret
6303:	2A66          	l2a66:
6304:	2A66  1B      		dec	de
6305:	2A67  7A      		ld	a,d
6306:	2A68  A3      		and	e
6307:	2A69  3C      		inc	a
6308:	2A6A  C0      		ret	nz
6309:	2A6B          	l2a6b:
6310:	2A6B  0B      		dec	bc
6311:	2A6C  C9      		ret
6312:			;
6313:			; Function : FIX(X)
6314:			;
6315:	2A6D          	l2a6d:
6316:	2A6D  CD641D  		call	get.type	; Get type
6317:	2A70  F8      		ret	m		; .. got integer
6318:	2A71  CD4528  		call	l2845
6319:	2A74  F2802A  		jp	p,l2a80
6320:	2A77  CD7428  		call	l2874
6321:	2A7A  CD802A  		call	l2a80
6322:	2A7D  C36B28  		jp	l286b
6323:			;
6324:			; Function : INT(X)
6325:			;
6326:	2A80          	l2a80:
6327:	2A80  CD641D  		call	get.type	; Get type
6328:	2A83  F8      		ret	m		; .. got integer
6329:	2A84  D2A62A  		jp	nc,l2aa6	; .. got double precision
6330:	2A87  CAE10C  		jp	z,l0ce1		; Pointer is invalis here
6331:	2A8A  CDCF29  		call	l29cf
6332:	2A8D          	l2a8d:
6333:	2A8D  21070C  		ld	hl,$$ARG+7
6334:	2A90  7E      		ld	a,(hl)
6335:	2A91  FE98    		cp	98h
6336:	2A93  3A040C  		ld	a,($$ARG+4)
6337:	2A96  D0      		ret	nc
6338:	2A97  7E      		ld	a,(hl)
6339:	2A98  CD422A  		call	l2a42
6340:	2A9B  3698    		ld	(hl),98h
6341:	2A9D  7B      		ld	a,e
6342:	2A9E  F5      		push	af
6343:	2A9F  79      		ld	a,c
6344:	2AA0  17      		rla
6345:	2AA1  CDD725  		call	l25d7
6346:	2AA4  F1      		pop	af
6347:	2AA5  C9      		ret
6348:	2AA6          	l2aa6:
6349:	2AA6  21070C  		ld	hl,$$ARG+7
6350:	2AA9  7E      		ld	a,(hl)
6351:	2AAA  FE90    		cp	90h
6352:	2AAC  C2CA2A  		jp	nz,l2aca
6353:	2AAF  4F      		ld	c,a
6354:	2AB0  2B      		dec	hl
6355:	2AB1  7E      		ld	a,(hl)
6356:	2AB2  EE80    		xor	80h
6357:	2AB4  0606    		ld	b,6
6358:	2AB6          	l2ab6:
6359:	2AB6  2B      		dec	hl
6360:	2AB7  B6      		or	(hl)
6361:	2AB8  05      		dec	b
6362:	2AB9  C2B62A  		jp	nz,l2ab6
6363:	2ABC  B7      		or	a
6364:	2ABD  210080  		ld	hl,l8000
6365:	2AC0  C2C92A  		jp	nz,l2ac9
6366:	2AC3  CDDC29  		call	st.INT		; .. save result
6367:	2AC6  C3202A  		jp	l2a20
6368:	2AC9          	l2ac9:
6369:	2AC9  79      		ld	a,c
6370:	2ACA          	l2aca:
6371:	2ACA  B7      		or	a
6372:	2ACB  C8      		ret	z
6373:	2ACC  FEB8    		cp	0b8h
6374:	2ACE  D0      		ret	nc
6375:	2ACF          	l2acf:
6376:	2ACF  F5      		push	af
6377:	2AD0  CDB428  		call	l28b4
6378:	2AD3  CDD628  		call	l28d6
6379:	2AD6  AE      		xor	(hl)
6380:	2AD7  2B      		dec	hl
6381:	2AD8  36B8    		ld	(hl),0b8h
6382:	2ADA  F5      		push	af
6383:	2ADB  2B      		dec	hl
6384:	2ADC  71      		ld	(hl),c
6385:	2ADD  FCFA2A  		call	m,l2afa
6386:	2AE0  3A060C  		ld	a,($$ARG+6)
6387:	2AE3  4F      		ld	c,a
6388:	2AE4  21060C  		ld	hl,$$ARG+6
6389:	2AE7  3EB8    		ld	a,0b8h
6390:	2AE9  90      		sub	b
6391:	2AEA  CD252D  		call	l2d25
6392:	2AED  F1      		pop	af
6393:	2AEE  FCDD2C  		call	m,l2cdd
6394:	2AF1  AF      		xor	a
6395:	2AF2  32FF0B  		ld	(l0bff),a
6396:	2AF5  F1      		pop	af
6397:	2AF6  D0      		ret	nc
6398:	2AF7  C3912C  		jp	l2c91
6399:	2AFA          	l2afa:
6400:	2AFA  21000C  		ld	hl,$$ARG
6401:	2AFD          	l2afd:
6402:	2AFD  7E      		ld	a,(hl)
6403:	2AFE  35      		dec	(hl)
6404:	2AFF  B7      		or	a
6405:	2B00  23      		inc	hl
6406:	2B01  CAFD2A  		jp	z,l2afd
6407:	2B04  C9      		ret
6408:	2B05          	l2b05:
6409:	2B05  E5      		push	hl
6410:	2B06  210000  		ld	hl,l0000
6411:	2B09  78      		ld	a,b
6412:	2B0A  B1      		or	c
6413:	2B0B  CA222B  		jp	z,l2b22
6414:	2B0E  3E10    		ld	a,10h
6415:	2B10          	l2b10:
6416:	2B10  29      		add	hl,hl
6417:	2B11  DAD63B  		jp	c,l3bd6
6418:	2B14  EB      		ex	de,hl
6419:	2B15  29      		add	hl,hl
6420:	2B16  EB      		ex	de,hl
6421:	2B17  D21E2B  		jp	nc,l2b1e
6422:	2B1A  09      		add	hl,bc
6423:	2B1B  DAD63B  		jp	c,l3bd6
6424:	2B1E          	l2b1e:
6425:	2B1E  3D      		dec	a
6426:	2B1F  C2102B  		jp	nz,l2b10
6427:	2B22          	l2b22:
6428:	2B22  EB      		ex	de,hl
6429:	2B23  E1      		pop	hl
6430:	2B24  C9      		ret
6431:	2B25          	l2b25:
6432:	2B25  7C      		ld	a,h
6433:	2B26  17      		rla
6434:	2B27  9F      		sbc	a,a
6435:	2B28  47      		ld	b,a
6436:	2B29  CDEE2B  		call	l2bee
6437:	2B2C  79      		ld	a,c
6438:	2B2D  98      		sbc	a,b
6439:	2B2E  C3342B  		jp	l2b34
6440:	2B31          	l2b31:
6441:	2B31  7C      		ld	a,h
6442:	2B32  17      		rla
6443:	2B33  9F      		sbc	a,a
6444:	2B34          	l2b34:
6445:	2B34  47      		ld	b,a
6446:	2B35  E5      		push	hl
6447:	2B36  7A      		ld	a,d
6448:	2B37  17      		rla
6449:	2B38  9F      		sbc	a,a
6450:	2B39  19      		add	hl,de
6451:	2B3A  88      		adc	a,b
6452:	2B3B  0F      		rrca
6453:	2B3C  AC      		xor	h
6454:	2B3D  F2DB29  		jp	p,l29db
6455:	2B40  C5      		push	bc
6456:	2B41  EB      		ex	de,hl
6457:	2B42  CD142A  		call	l2a14
6458:	2B45  F1      		pop	af
6459:	2B46  E1      		pop	hl
6460:	2B47  CD9928  		call	l2899
6461:	2B4A  EB      		ex	de,hl
6462:	2B4B  CD082C  		call	l2c08
6463:	2B4E  C34E30  		jp	l304e
6464:	2B51          	l2b51:
6465:	2B51  7C      		ld	a,h
6466:	2B52  B5      		or	l
6467:	2B53  CADC29  		jp	z,st.INT	; .. save zero
6468:	2B56  E5      		push	hl
6469:	2B57  D5      		push	de
6470:	2B58  CDE22B  		call	l2be2
6471:	2B5B  C5      		push	bc
6472:	2B5C  44      		ld	b,h
6473:	2B5D  4D      		ld	c,l
6474:	2B5E  210000  		ld	hl,l0000
6475:	2B61  3E10    		ld	a,10h
6476:	2B63          	l2b63:
6477:	2B63  29      		add	hl,hl
6478:	2B64  DA892B  		jp	c,l2b89
6479:	2B67  EB      		ex	de,hl
6480:	2B68  29      		add	hl,hl
6481:	2B69  EB      		ex	de,hl
6482:	2B6A  D2712B  		jp	nc,l2b71
6483:	2B6D  09      		add	hl,bc
6484:	2B6E  DA892B  		jp	c,l2b89
6485:	2B71          	l2b71:
6486:	2B71  3D      		dec	a
6487:	2B72  C2632B  		jp	nz,l2b63
6488:	2B75  C1      		pop	bc
6489:	2B76  D1      		pop	de
6490:	2B77          	l2b77:
6491:	2B77  7C      		ld	a,h
6492:	2B78  B7      		or	a
6493:	2B79  FA812B  		jp	m,l2b81
6494:	2B7C  D1      		pop	de
6495:	2B7D  78      		ld	a,b
6496:	2B7E  C3EA2B  		jp	l2bea
6497:	2B81          	l2b81:
6498:	2B81  EE80    		xor	80h
6499:	2B83  B5      		or	l
6500:	2B84  CA9A2B  		jp	z,l2b9a
6501:	2B87  EB      		ex	de,hl
6502:	2B88          		_LD.BC
6503:	2B89          	l2b89:
6504:	2B89  C1      		pop	bc
6505:	2B8A  E1      		pop	hl
6506:	2B8B  CD142A  		call	l2a14
6507:	2B8E  E1      		pop	hl
6508:	2B8F  CD9928  		call	l2899
6509:	2B92  CD142A  		call	l2a14
6510:	2B95          	l2b95:
6511:	2B95  C1      		pop	bc
6512:	2B96  D1      		pop	de
6513:	2B97  C30327  		jp	l2703
6514:	2B9A          	l2b9a:
6515:	2B9A  78      		ld	a,b
6516:	2B9B  B7      		or	a
6517:	2B9C  C1      		pop	bc
6518:	2B9D  FADC29  		jp	m,st.INT	; .. save result
6519:	2BA0  D5      		push	de
6520:	2BA1  CD142A  		call	l2a14
6521:	2BA4  D1      		pop	de
6522:	2BA5  C37428  		jp	l2874
6523:	2BA8          	l2ba8:
6524:	2BA8  7C      		ld	a,h
6525:	2BA9  B5      		or	l
6526:	2BAA  CACC0C  		jp	z,l0ccc
6527:	2BAD  CDE22B  		call	l2be2
6528:	2BB0  C5      		push	bc
6529:	2BB1  EB      		ex	de,hl
6530:	2BB2  CDEE2B  		call	l2bee
6531:	2BB5  44      		ld	b,h
6532:	2BB6  4D      		ld	c,l
6533:	2BB7  210000  		ld	hl,l0000
6534:	2BBA  3E11    		ld	a,11h
6535:	2BBC  F5      		push	af
6536:	2BBD  B7      		or	a
6537:	2BBE  C3CB2B  		jp	l2bcb
6538:	2BC1          	l2bc1:
6539:	2BC1  F5      		push	af
6540:	2BC2  E5      		push	hl
6541:	2BC3  09      		add	hl,bc
6542:	2BC4  D2CA2B  		jp	nc,l2bca
6543:	2BC7  F1      		pop	af
6544:	2BC8  37      		scf
6545:	2BC9          		_LD.A
6546:	2BCA          	l2bca:
6547:	2BCA  E1      		pop	hl
6548:	2BCB          	l2bcb:
6549:	2BCB  7B      		ld	a,e
6550:	2BCC  17      		rla
6551:	2BCD  5F      		ld	e,a
6552:	2BCE  7A      		ld	a,d
6553:	2BCF  17      		rla
6554:	2BD0  57      		ld	d,a
6555:	2BD1  7D      		ld	a,l
6556:	2BD2  17      		rla
6557:	2BD3  6F      		ld	l,a
6558:	2BD4  7C      		ld	a,h
6559:	2BD5  17      		rla
6560:	2BD6  67      		ld	h,a
6561:	2BD7  F1      		pop	af
6562:	2BD8  3D      		dec	a
6563:	2BD9  C2C12B  		jp	nz,l2bc1
6564:	2BDC  EB      		ex	de,hl
6565:	2BDD  C1      		pop	bc
6566:	2BDE  D5      		push	de
6567:	2BDF  C3772B  		jp	l2b77
6568:	2BE2          	l2be2:
6569:	2BE2  7C      		ld	a,h
6570:	2BE3  AA      		xor	d
6571:	2BE4  47      		ld	b,a
6572:	2BE5  CDE92B  		call	l2be9
6573:	2BE8  EB      		ex	de,hl
6574:	2BE9          	l2be9:
6575:	2BE9  7C      		ld	a,h
6576:	2BEA          	l2bea:
6577:	2BEA  B7      		or	a
6578:	2BEB  F2DC29  		jp	p,st.INT	; Save result
6579:	2BEE          	l2bee:
6580:	2BEE  AF      		xor	a
6581:	2BEF  4F      		ld	c,a
6582:	2BF0  95      		sub	l		; Negate value
6583:	2BF1  6F      		ld	l,a
6584:	2BF2  79      		ld	a,c
6585:	2BF3  9C      		sbc	a,h
6586:	2BF4  67      		ld	h,a
6587:	2BF5  C3DC29  		jp	st.INT		; Save result
6588:			;
6589:	2BF8          	l2bf8:
6590:	2BF8  2A040C  		ld	hl,($$ARG+4)
6591:	2BFB  CDEE2B  		call	l2bee
6592:	2BFE  7C      		ld	a,h
6593:	2BFF  EE80    		xor	80h
6594:	2C01  B5      		or	l
6595:	2C02  C0      		ret	nz
6596:	2C03          	l2c03:
6597:	2C03  EB      		ex	de,hl
6598:	2C04  CD362A  		call	tp.SNGL		; Set single type precision
6599:	2C07  AF      		xor	a
6600:	2C08          	l2c08:
6601:	2C08  0698    		ld	b,98h
6602:	2C0A  C35928  		jp	l2859
6603:	2C0D          	l2c0d:
6604:	2C0D  D5      		push	de
6605:	2C0E  CDA82B  		call	l2ba8
6606:	2C11  AF      		xor	a
6607:	2C12  82      		add	a,d
6608:	2C13  1F      		rra
6609:	2C14  67      		ld	h,a
6610:	2C15  7B      		ld	a,e
6611:	2C16  1F      		rra
6612:	2C17  6F      		ld	l,a
6613:	2C18  CDDF29  		call	tp.INT		; Set integer type
6614:	2C1B  F1      		pop	af
6615:	2C1C  C3EA2B  		jp	l2bea
6616:	2C1F          	l2c1f:
6617:	2C1F          		_LD.HL
6618:	2C20          	l2c20:
6619:	2C20  13      		inc	de
6620:	2C21  0C      		inc	c
6621:	2C22  7E      		ld	a,(hl)
6622:	2C23  EE80    		xor	80h
6623:	2C25  77      		ld	(hl),a
6624:	2C26          	l2c26:
6625:	2C26  21140C  		ld	hl,l0c14
6626:	2C29  7E      		ld	a,(hl)
6627:	2C2A  B7      		or	a
6628:	2C2B  C8      		ret	z
6629:	2C2C  47      		ld	b,a
6630:	2C2D  2B      		dec	hl
6631:	2C2E  4E      		ld	c,(hl)
6632:	2C2F  11070C  		ld	de,$$ARG+7
6633:	2C32  1A      		ld	a,(de)
6634:	2C33  B7      		or	a
6635:	2C34  CAEB28  		jp	z,l28eb
6636:	2C37  90      		sub	b
6637:	2C38  D2522C  		jp	nc,l2c52
6638:	2C3B  2F      		cpl
6639:	2C3C  3C      		inc	a
6640:	2C3D  F5      		push	af
6641:	2C3E  0E08    		ld	c,8
6642:	2C40  23      		inc	hl
6643:	2C41  E5      		push	hl
6644:	2C42          	l2c42:
6645:	2C42  1A      		ld	a,(de)
6646:	2C43  46      		ld	b,(hl)
6647:	2C44  77      		ld	(hl),a
6648:	2C45  78      		ld	a,b
6649:	2C46  12      		ld	(de),a
6650:	2C47  1B      		dec	de
6651:	2C48  2B      		dec	hl
6652:	2C49  0D      		dec	c
6653:	2C4A  C2422C  		jp	nz,l2c42
6654:	2C4D  E1      		pop	hl
6655:	2C4E  46      		ld	b,(hl)
6656:	2C4F  2B      		dec	hl
6657:	2C50  4E      		ld	c,(hl)
6658:	2C51  F1      		pop	af
6659:	2C52          	l2c52:
6660:	2C52  FE39    		cp	'9'
6661:	2C54  D0      		ret	nc
6662:	2C55  F5      		push	af
6663:	2C56  CDD628  		call	l28d6
6664:	2C59  210C0C  		ld	hl,l0c0c
6665:	2C5C  47      		ld	b,a
6666:	2C5D  3E00    		ld	a,0
6667:	2C5F  77      		ld	(hl),a
6668:	2C60  32FF0B  		ld	(l0bff),a
6669:	2C63  F1      		pop	af
6670:	2C64  21130C  		ld	hl,l0c13
6671:	2C67  CD252D  		call	l2d25
6672:	2C6A  78      		ld	a,b
6673:	2C6B  B7      		or	a
6674:	2C6C  F2862C  		jp	p,l2c86
6675:	2C6F  3A0C0C  		ld	a,(l0c0c)
6676:	2C72  32FF0B  		ld	(l0bff),a
6677:	2C75  CDFA2C  		call	l2cfa
6678:	2C78  D2CB2C  		jp	nc,l2ccb
6679:	2C7B  EB      		ex	de,hl
6680:	2C7C  34      		inc	(hl)
6681:	2C7D  CA8830  		jp	z,l3088
6682:	2C80  CD512D  		call	l2d51
6683:	2C83  C3CB2C  		jp	l2ccb
6684:	2C86          	l2c86:
6685:	2C86  3E9E    		ld	a,9eh
6686:	2C88  CDFC2C  		call	l2cfc
6687:	2C8B  21080C  		ld	hl,l0c08
6688:	2C8E  DC122D  		call	c,l2d12
6689:	2C91          	l2c91:
6690:	2C91  AF      		xor	a
6691:	2C92          	l2c92:
6692:	2C92  47      		ld	b,a
6693:	2C93  3A060C  		ld	a,($$ARG+6)
6694:	2C96  B7      		or	a
6695:	2C97  C2BA2C  		jp	nz,l2cba
6696:	2C9A  21FF0B  		ld	hl,l0bff
6697:	2C9D  0E08    		ld	c,8
6698:	2C9F          	l2c9f:
6699:	2C9F  56      		ld	d,(hl)
6700:	2CA0  77      		ld	(hl),a
6701:	2CA1  7A      		ld	a,d
6702:	2CA2  23      		inc	hl
6703:	2CA3  0D      		dec	c
6704:	2CA4  C29F2C  		jp	nz,l2c9f
6705:	2CA7  78      		ld	a,b
6706:	2CA8  D608    		sub	8
6707:	2CAA  FEC0    		cp	0c0h
6708:	2CAC  C2922C  		jp	nz,l2c92
6709:	2CAF  C3EF25  		jp	st.ZERO		; Set zero number
6710:	2CB2          	l2cb2:
6711:	2CB2  05      		dec	b
6712:	2CB3  21FF0B  		ld	hl,l0bff
6713:	2CB6  CD592D  		call	l2d59
6714:	2CB9  B7      		or	a
6715:	2CBA          	l2cba:
6716:	2CBA  F2B22C  		jp	p,l2cb2
6717:	2CBD  78      		ld	a,b
6718:	2CBE  B7      		or	a
6719:	2CBF  CACB2C  		jp	z,l2ccb
6720:	2CC2  21070C  		ld	hl,$$ARG+7
6721:	2CC5  86      		add	a,(hl)
6722:	2CC6  77      		ld	(hl),a
6723:	2CC7  D2EF25  		jp	nc,st.ZERO	; Set zero number
6724:	2CCA  C8      		ret	z
6725:	2CCB          	l2ccb:
6726:	2CCB  3AFF0B  		ld	a,(l0bff)
6727:	2CCE          	l2cce:
6728:	2CCE  B7      		or	a
6729:	2CCF  FCDD2C  		call	m,l2cdd
6730:	2CD2  21080C  		ld	hl,l0c08
6731:	2CD5  7E      		ld	a,(hl)
6732:	2CD6  E680    		and	80h
6733:	2CD8  2B      		dec	hl
6734:	2CD9  2B      		dec	hl
6735:	2CDA  AE      		xor	(hl)
6736:	2CDB  77      		ld	(hl),a
6737:	2CDC  C9      		ret
6738:	2CDD          	l2cdd:
6739:	2CDD  21000C  		ld	hl,$$ARG
6740:	2CE0  0607    		ld	b,7
6741:	2CE2          	l2ce2:
6742:	2CE2  34      		inc	(hl)
6743:	2CE3  C0      		ret	nz
6744:	2CE4  23      		inc	hl
6745:	2CE5  05      		dec	b
6746:	2CE6  C2E22C  		jp	nz,l2ce2
6747:	2CE9  34      		inc	(hl)
6748:	2CEA  CA8830  		jp	z,l3088
6749:	2CED  2B      		dec	hl
6750:	2CEE  3680    		ld	(hl),80h
6751:	2CF0  C9      		ret
6752:	2CF1          	l2cf1:
6753:	2CF1  11300C  		ld	de,l0c30
6754:	2CF4  210D0C  		ld	hl,l0c0d
6755:	2CF7  C3022D  		jp	l2d02
6756:	2CFA          	l2cfa:
6757:	2CFA  3E8E    		ld	a,8eh
6758:	2CFC          	l2cfc:
6759:	2CFC  210D0C  		ld	hl,l0c0d
6760:	2CFF          	l2cff:
6761:	2CFF  11000C  		ld	de,$$ARG
6762:	2D02          	l2d02:
6763:	2D02  0E07    		ld	c,7
6764:	2D04  32092D  		ld	(l2d09),a
6765:	2D07  AF      		xor	a
6766:	2D08          	l2d08:
6767:	2D08  1A      		ld	a,(de)
6768:	2D09          	l2d09:
6769:	2D09  8E      		adc	a,(hl)
6770:	2D0A  12      		ld	(de),a
6771:	2D0B  13      		inc	de
6772:	2D0C  23      		inc	hl
6773:	2D0D  0D      		dec	c
6774:	2D0E  C2082D  		jp	nz,l2d08
6775:	2D11  C9      		ret
6776:	2D12          	l2d12:
6777:	2D12  7E      		ld	a,(hl)
6778:	2D13  2F      		cpl
6779:	2D14  77      		ld	(hl),a
6780:	2D15  21FF0B  		ld	hl,l0bff
6781:	2D18  0608    		ld	b,8
6782:	2D1A  AF      		xor	a
6783:	2D1B  4F      		ld	c,a
6784:	2D1C          	l2d1c:
6785:	2D1C  79      		ld	a,c
6786:	2D1D  9E      		sbc	a,(hl)
6787:	2D1E  77      		ld	(hl),a
6788:	2D1F  23      		inc	hl
6789:	2D20  05      		dec	b
6790:	2D21  C21C2D  		jp	nz,l2d1c
6791:	2D24  C9      		ret
6792:	2D25          	l2d25:
6793:	2D25  71      		ld	(hl),c
6794:	2D26  E5      		push	hl
6795:	2D27          	l2d27:
6796:	2D27  D608    		sub	8
6797:	2D29  DA3C2D  		jp	c,l2d3c
6798:	2D2C  E1      		pop	hl
6799:	2D2D          	l2d2d:
6800:	2D2D  E5      		push	hl
6801:	2D2E  110008  		ld	de,8*256+0	;;l0800
6802:	2D31          	l2d31:
6803:	2D31  4E      		ld	c,(hl)		; .. get old
6804:	2D32  73      		ld	(hl),e		; .. set new
6805:	2D33  59      		ld	e,c
6806:	2D34  2B      		dec	hl
6807:	2D35  15      		dec	d
6808:	2D36  C2312D  		jp	nz,l2d31
6809:	2D39  C3272D  		jp	l2d27
6810:	2D3C          	l2d3c:
6811:	2D3C  C609    		add	a,9
6812:	2D3E  57      		ld	d,a
6813:	2D3F          	l2d3f:
6814:	2D3F  AF      		xor	a
6815:	2D40  E1      		pop	hl
6816:	2D41  15      		dec	d
6817:	2D42  C8      		ret	z
6818:	2D43          	l2d43:
6819:	2D43  E5      		push	hl
6820:	2D44  1E08    		ld	e,8
6821:	2D46          	l2d46:
6822:	2D46  7E      		ld	a,(hl)
6823:	2D47  1F      		rra
6824:	2D48  77      		ld	(hl),a
6825:	2D49  2B      		dec	hl
6826:	2D4A  1D      		dec	e
6827:	2D4B  C2462D  		jp	nz,l2d46
6828:	2D4E  C33F2D  		jp	l2d3f
6829:	2D51          	l2d51:
6830:	2D51  21060C  		ld	hl,$$ARG+6
6831:	2D54  1601    		ld	d,1
6832:	2D56  C3432D  		jp	l2d43
6833:	2D59          	l2d59:
6834:	2D59  0E08    		ld	c,8
6835:	2D5B          	l2d5b:
6836:	2D5B  7E      		ld	a,(hl)
6837:	2D5C  17      		rla
6838:	2D5D  77      		ld	(hl),a
6839:	2D5E  23      		inc	hl
6840:	2D5F  0D      		dec	c
6841:	2D60  C25B2D  		jp	nz,l2d5b
6842:	2D63  C9      		ret
6843:	2D64          	l2d64:
6844:	2D64  CD4528  		call	l2845
6845:	2D67  C8      		ret	z
6846:	2D68  3A140C  		ld	a,(l0c14)
6847:	2D6B  B7      		or	a
6848:	2D6C  CAEF25  		jp	z,st.ZERO	; Set zero number
6849:	2D6F  CDF927  		call	l27f9
6850:	2D72  CD9D2E  		call	l2e9d
6851:	2D75  71      		ld	(hl),c
6852:	2D76  13      		inc	de
6853:	2D77  0607    		ld	b,7
6854:	2D79          	l2d79:
6855:	2D79  1A      		ld	a,(de)
6856:	2D7A  13      		inc	de
6857:	2D7B  B7      		or	a
6858:	2D7C  D5      		push	de
6859:	2D7D  CA992D  		jp	z,l2d99
6860:	2D80  0E08    		ld	c,8
6861:	2D82          	l2d82:
6862:	2D82  C5      		push	bc
6863:	2D83  1F      		rra
6864:	2D84  47      		ld	b,a
6865:	2D85  DCFA2C  		call	c,l2cfa
6866:	2D88  CD512D  		call	l2d51
6867:	2D8B  78      		ld	a,b
6868:	2D8C  C1      		pop	bc
6869:	2D8D  0D      		dec	c
6870:	2D8E  C2822D  		jp	nz,l2d82
6871:	2D91          	l2d91:
6872:	2D91  D1      		pop	de
6873:	2D92  05      		dec	b
6874:	2D93  C2792D  		jp	nz,l2d79
6875:	2D96  C3912C  		jp	l2c91
6876:	2D99          	l2d99:
6877:	2D99  21060C  		ld	hl,$$ARG+6
6878:	2D9C  CD2D2D  		call	l2d2d
6879:	2D9F  C3912D  		jp	l2d91
6880:	2DA2          	l2da2:
6881:	2DA2  CDCCCCCC		db	0cdh,0cch,0cch,0cch,0cch,0cch,04ch,07dh
	      CCCC4C7D
6882:	2DAA  00000000		db	000h,000h,000h,000h
6883:	2DAE          	l2dae:
6884:	2DAE  00002084		db	000h,000h,020h,084h
6885:	2DB2          	l2db2:
6886:	2DB2  3A070C  		ld	a,($$ARG+7)
6887:	2DB5  FE41    		cp	'A'
6888:	2DB7  D2C62D  		jp	nc,l2dc6
6889:	2DBA  11A22D  		ld	de,l2da2
6890:	2DBD  210D0C  		ld	hl,l0c0d
6891:	2DC0  CDC928  		call	l28c9
6892:	2DC3  C3642D  		jp	l2d64
6893:	2DC6          	l2dc6:
6894:	2DC6  3A060C  		ld	a,($$ARG+6)
6895:	2DC9  B7      		or	a
6896:	2DCA  F2D62D  		jp	p,l2dd6
6897:	2DCD  E67F    		and	7fh
6898:	2DCF  32060C  		ld	($$ARG+6),a
6899:	2DD2  217428  		ld	hl,l2874
6900:	2DD5  E5      		push	hl
6901:	2DD6          	l2dd6:
6902:	2DD6  CD0E2E  		call	l2e0e
6903:	2DD9  11000C  		ld	de,$$ARG
6904:	2DDC  210D0C  		ld	hl,l0c0d
6905:	2DDF  CDC928  		call	l28c9
6906:	2DE2  CD0E2E  		call	l2e0e
6907:	2DE5  CD262C  		call	l2c26
6908:	2DE8  11000C  		ld	de,$$ARG
6909:	2DEB  210D0C  		ld	hl,l0c0d
6910:	2DEE  CDC928  		call	l28c9
6911:	2DF1  3E0F    		ld	a,0fh
6912:	2DF3          	l2df3:
6913:	2DF3  F5      		push	af
6914:	2DF4  CD162E  		call	l2e16
6915:	2DF7  CD222E  		call	l2e22
6916:	2DFA  CD262C  		call	l2c26
6917:	2DFD  21130C  		ld	hl,l0c13
6918:	2E00  CD332E  		call	l2e33
6919:	2E03  F1      		pop	af
6920:	2E04  3D      		dec	a
6921:	2E05  C2F32D  		jp	nz,l2df3
6922:	2E08  CD0E2E  		call	l2e0e
6923:	2E0B  CD0E2E  		call	l2e0e
6924:	2E0E          	l2e0e:
6925:	2E0E  21070C  		ld	hl,$$ARG+7
6926:	2E11  35      		dec	(hl)
6927:	2E12  C0      		ret	nz
6928:	2E13  C3EF25  		jp	st.ZERO		; Set zero number
6929:	2E16          	l2e16:
6930:	2E16  21140C  		ld	hl,l0c14
6931:	2E19  3E04    		ld	a,4
6932:	2E1B          	l2e1b:
6933:	2E1B  35      		dec	(hl)
6934:	2E1C  C8      		ret	z
6935:	2E1D  3D      		dec	a
6936:	2E1E  C21B2E  		jp	nz,l2e1b
6937:	2E21  C9      		ret
6938:	2E22          	l2e22:
6939:	2E22  D1      		pop	de
6940:	2E23  3E04    		ld	a,4
6941:	2E25  210D0C  		ld	hl,l0c0d
6942:	2E28          	l2e28:
6943:	2E28  4E      		ld	c,(hl)
6944:	2E29  23      		inc	hl
6945:	2E2A  46      		ld	b,(hl)
6946:	2E2B  23      		inc	hl
6947:	2E2C  C5      		push	bc
6948:	2E2D  3D      		dec	a
6949:	2E2E  C2282E  		jp	nz,l2e28
6950:	2E31  D5      		push	de
6951:	2E32  C9      		ret
6952:	2E33          	l2e33:
6953:	2E33  D1      		pop	de
6954:	2E34  3E04    		ld	a,4
6955:	2E36  21140C  		ld	hl,l0c14
6956:	2E39          	l2e39:
6957:	2E39  C1      		pop	bc
6958:	2E3A  70      		ld	(hl),b
6959:	2E3B  2B      		dec	hl
6960:	2E3C  71      		ld	(hl),c
6961:	2E3D  2B      		dec	hl
6962:	2E3E  3D      		dec	a
6963:	2E3F  C2392E  		jp	nz,l2e39
6964:	2E42  D5      		push	de
6965:	2E43  C9      		ret
6966:	2E44          	l2e44:
6967:	2E44  3A140C  		ld	a,(l0c14)
6968:	2E47  B7      		or	a
6969:	2E48  CA9430  		jp	z,l3094
6970:	2E4B  3A070C  		ld	a,($$ARG+7)
6971:	2E4E  B7      		or	a
6972:	2E4F  CAEF25  		jp	z,st.ZERO	; Set zero number
6973:	2E52  CDF627  		call	l27f6
6974:	2E55  34      		inc	(hl)
6975:	2E56  34      		inc	(hl)
6976:	2E57  CA8830  		jp	z,l3088
6977:	2E5A  CD9D2E  		call	l2e9d
6978:	2E5D  21370C  		ld	hl,l0c37
6979:	2E60  71      		ld	(hl),c
6980:	2E61  41      		ld	b,c
6981:	2E62          	l2e62:
6982:	2E62  3E9E    		ld	a,9eh
6983:	2E64  CDF12C  		call	l2cf1
6984:	2E67  1A      		ld	a,(de)
6985:	2E68  99      		sbc	a,c
6986:	2E69  3F      		ccf
6987:	2E6A  DA742E  		jp	c,l2e74
6988:	2E6D  3E8E    		ld	a,8eh
6989:	2E6F  CDF12C  		call	l2cf1
6990:	2E72  AF      		xor	a
6991:	2E73          		_JP.C
6992:	2E74          	l2e74:
6993:	2E74  12      		ld	(de),a
6994:	2E75  04      		inc	b
6995:	2E76  3A060C  		ld	a,($$ARG+6)
6996:	2E79  3C      		inc	a
6997:	2E7A  3D      		dec	a
6998:	2E7B  1F      		rra
6999:	2E7C  FACE2C  		jp	m,l2cce
7000:	2E7F  17      		rla
7001:	2E80  21000C  		ld	hl,$$ARG
7002:	2E83  0E07    		ld	c,7
7003:	2E85  CD5B2D  		call	l2d5b
7004:	2E88  21300C  		ld	hl,l0c30
7005:	2E8B  CD592D  		call	l2d59
7006:	2E8E  78      		ld	a,b
7007:	2E8F  B7      		or	a
7008:	2E90  C2622E  		jp	nz,l2e62
7009:	2E93  21070C  		ld	hl,$$ARG+7
7010:	2E96  35      		dec	(hl)
7011:	2E97  C2622E  		jp	nz,l2e62
7012:	2E9A  C3EF25  		jp	st.ZERO		; Set zero number
7013:	2E9D          	l2e9d:
7014:	2E9D  79      		ld	a,c
7015:	2E9E  32130C  		ld	(l0c13),a
7016:	2EA1  2B      		dec	hl
7017:	2EA2  11360C  		ld	de,l0c36
7018:	2EA5  010007  		ld	bc,7*256+0	;;l0700
7019:	2EA8          	l2ea8:
7020:	2EA8  7E      		ld	a,(hl)
7021:	2EA9  12      		ld	(de),a		; Unpack
7022:	2EAA  71      		ld	(hl),c		; .. and clear
7023:	2EAB  1B      		dec	de
7024:	2EAC  2B      		dec	hl
7025:	2EAD  05      		dec	b
7026:	2EAE  C2A82E  		jp	nz,l2ea8
7027:	2EB1  C9      		ret
7028:	2EB2          	l2eb2:
7029:	2EB2  CDF428  		call	l28f4
7030:	2EB5  EB      		ex	de,hl
7031:	2EB6  2B      		dec	hl
7032:	2EB7  7E      		ld	a,(hl)
7033:	2EB8  B7      		or	a
7034:	2EB9  C8      		ret	z
7035:	2EBA  C602    		add	a,2
7036:	2EBC  DA8830  		jp	c,l3088
7037:	2EBF  77      		ld	(hl),a
7038:	2EC0  E5      		push	hl
7039:	2EC1  CD262C  		call	l2c26
7040:	2EC4  E1      		pop	hl
7041:	2EC5  34      		inc	(hl)
7042:	2EC6  C0      		ret	nz
7043:	2EC7  C38830  		jp	l3088
7044:			;
7045:			; Convert ^HL to double number
7046:			;
7047:	2ECA          	cnvdoub:
7048:	2ECA  CDEF25  		call	st.ZERO		; .. set zero number
7049:	2ECD  CD332A  		call	tp.DOUB		; Set type
7050:	2ED0          		_OR
7051:			;
7052:			; Convert ^HL to number
7053:			;
7054:	2ED1          	cnvnum:
7055:	2ED1  AF      		xor	a
7056:	2ED2  016A25  		ld	bc,l256a
7057:	2ED5  C5      		push	bc		; Set return address
7058:	2ED6  F5      		push	af		; Save entry code
7059:	2ED7  3E01    		ld	a,1
7060:	2ED9  32090C  		ld	(l0c09),a	; Init counter
7061:	2EDC  F1      		pop	af
7062:	2EDD  EB      		ex	de,hl
7063:	2EDE  01FF00  		ld	bc,l00ff
7064:	2EE1  60      		ld	h,b
7065:	2EE2  68      		ld	l,b
7066:	2EE3  CCDC29  		call	z,st.INT	; Set integer if not double
7067:	2EE6  EB      		ex	de,hl
7068:	2EE7  7E      		ld	a,(hl)		; Get character
7069:	2EE8  FE26    		cp	'&'		; Test hex
7070:	2EEA  CA691C  		jp	z,ato??_	; .. yeap, get hex number
7071:	2EED  FE2D    		cp	'-'		; Check sign
7072:	2EEF  F5      		push	af
7073:	2EF0  CAF92E  		jp	z,l2ef9		; .. yeap
7074:	2EF3  FE2B    		cp	'+'		; Test default
7075:	2EF5  CAF92E  		jp	z,l2ef9
7076:	2EF8  2B      		dec	hl		; .. fix for 1st digit
7077:	2EF9          	l2ef9:
7078:	2EF9  CD0513  		call	get.tok
7079:	2EFC  DAE02F  		jp	c,l2fe0
7080:	2EFF  FE2E    		cp	'.'		; Test decimal point
7081:	2F01  CA862F  		jp	z,l2f86
7082:	2F04  FE65    		cp	'e'		; .. or exponent
7083:	2F06  CA0B2F  		jp	z,l2f0b
7084:	2F09  FE45    		cp	'E'
7085:	2F0B          	l2f0b:
7086:	2F0B  C2352F  		jp	nz,l2f35
7087:	2F0E  E5      		push	hl
7088:	2F0F  CD0513  		call	get.tok
7089:	2F12  FE6C    		cp	'l'
7090:	2F14  CA232F  		jp	z,l2f23
7091:	2F17  FE4C    		cp	'L'
7092:	2F19  CA232F  		jp	z,l2f23
7093:	2F1C  FE71    		cp	'q'
7094:	2F1E  CA232F  		jp	z,l2f23
7095:	2F21  FE51    		cp	'Q'
7096:	2F23          	l2f23:
7097:	2F23  E1      		pop	hl
7098:	2F24  CA342F  		jp	z,l2f34
7099:	2F27  3A670A  		ld	a,($ARGLEN)	; Get length
7100:	2F2A  FE08    		cp	8		; Test double precision
7101:	2F2C  CA4E2F  		jp	z,l2f4e		; .. yeap
7102:	2F2F  3E00    		ld	a,0
7103:	2F31  C34E2F  		jp	l2f4e
7104:	2F34          	l2f34:
7105:	2F34  7E      		ld	a,(hl)		; Get next
7106:	2F35          	l2f35:
7107:	2F35  FE25    		cp	'%'		; Test integer value
7108:	2F37  CA932F  		jp	z,l2f93
7109:	2F3A  FE23    		cp	'#'		; .. double precision
7110:	2F3C  CAA42F  		jp	z,l2fa4
7111:	2F3F  FE21    		cp	'!'		; .. single precision
7112:	2F41  CAA52F  		jp	z,l2fa5
7113:	2F44  FE64    		cp	'd'		; .. double exponential
7114:	2F46  CA4E2F  		jp	z,l2f4e
7115:	2F49  FE44    		cp	'D'
7116:	2F4B  C2652F  		jp	nz,l2f65
7117:	2F4E          	l2f4e:
7118:	2F4E  B7      		or	a
7119:	2F4F  CDAE2F  		call	l2fae
7120:	2F52  CD0513  		call	get.tok
7121:	2F55  CD321D  		call	l1d32
7122:	2F58          	l2f58:
7123:	2F58  CD0513  		call	get.tok
7124:	2F5B  DA5330  		jp	c,l3053
7125:	2F5E  14      		inc	d
7126:	2F5F  C2652F  		jp	nz,l2f65
7127:	2F62  AF      		xor	a
7128:	2F63  93      		sub	e
7129:	2F64  5F      		ld	e,a
7130:	2F65          	l2f65:
7131:	2F65  E5      		push	hl
7132:	2F66  7B      		ld	a,e
7133:	2F67  90      		sub	b
7134:	2F68  5F      		ld	e,a
7135:	2F69          	l2f69:
7136:	2F69  F4BD2F  		call	p,l2fbd
7137:	2F6C  FCCD2F  		call	m,l2fcd
7138:	2F6F  C2692F  		jp	nz,l2f69
7139:	2F72  E1      		pop	hl
7140:	2F73  F1      		pop	af
7141:	2F74  E5      		push	hl
7142:	2F75  CC6B28  		call	z,l286b
7143:	2F78  E1      		pop	hl
7144:	2F79  CD641D  		call	get.type	; Get type
7145:	2F7C  E8      		ret	pe		; .. not single precision
7146:	2F7D  E5      		push	hl
7147:	2F7E  215727  		ld	hl,l2757
7148:	2F81  E5      		push	hl
7149:	2F82  CDE529  		call	l29e5
7150:	2F85  C9      		ret
7151:	2F86          	l2f86:
7152:	2F86  CD641D  		call	get.type	; Get type
7153:	2F89  0C      		inc	c
7154:	2F8A  C2652F  		jp	nz,l2f65
7155:	2F8D  DCAE2F  		call	c,l2fae		; .. not double
7156:	2F90  C3F92E  		jp	l2ef9
7157:			;
7158:			; -> Integer value (%)
7159:			;
7160:	2F93          	l2f93::
7161:	2F93  CD0513  		call	get.tok
7162:	2F96  F1      		pop	af
7163:	2F97  E5      		push	hl
7164:	2F98  215727  		ld	hl,l2757
7165:	2F9B  E5      		push	hl
7166:	2F9C  217A29  		ld	hl,_CINT	; Set return address
7167:	2F9F  E5      		push	hl
7168:	2FA0  F5      		push	af
7169:	2FA1  C3652F  		jp	l2f65
7170:			;
7171:			; -> Double precision value (#)
7172:			;
7173:	2FA4          	l2fa4:
7174:	2FA4  B7      		or	a
7175:			;
7176:			; -> Single precision value (!)
7177:			;
7178:	2FA5          	l2fa5:
7179:	2FA5  CDAE2F  		call	l2fae
7180:	2FA8  CD0513  		call	get.tok
7181:	2FAB  C3652F  		jp	l2f65
7182:	2FAE          	l2fae:
7183:	2FAE  E5      		push	hl
7184:	2FAF  D5      		push	de
7185:	2FB0  C5      		push	bc
7186:	2FB1  F5      		push	af
7187:	2FB2  CCF429  		call	z,l29f4
7188:	2FB5  F1      		pop	af
7189:	2FB6  C4202A  		call	nz,l2a20
7190:	2FB9  C1      		pop	bc
7191:	2FBA  D1      		pop	de
7192:	2FBB  E1      		pop	hl
7193:	2FBC  C9      		ret
7194:	2FBD          	l2fbd:
7195:	2FBD  C8      		ret	z
7196:	2FBE          	l2fbe:
7197:	2FBE  F5      		push	af
7198:	2FBF  CD641D  		call	get.type	; Get type
7199:	2FC2  F5      		push	af
7200:	2FC3  E42E28  		call	po,l282e	; .. got single
7201:	2FC6  F1      		pop	af
7202:	2FC7  ECB22E  		call	pe,l2eb2	; .. got double
7203:	2FCA  F1      		pop	af
7204:	2FCB          	l2fcb:
7205:	2FCB  3D      		dec	a
7206:	2FCC  C9      		ret
7207:	2FCD          	l2fcd:
7208:	2FCD  D5      		push	de
7209:	2FCE  E5      		push	hl
7210:	2FCF  F5      		push	af
7211:	2FD0  CD641D  		call	get.type	; Get type
7212:	2FD3  F5      		push	af
7213:	2FD4  E45E27  		call	po,l275e	; .. got single
7214:	2FD7  F1      		pop	af
7215:	2FD8  ECB22D  		call	pe,l2db2	; .. got double
7216:	2FDB  F1      		pop	af
7217:	2FDC  E1      		pop	hl
7218:	2FDD  D1      		pop	de
7219:	2FDE  3C      		inc	a
7220:	2FDF  C9      		ret
7221:	2FE0          	l2fe0:
7222:	2FE0  D5      		push	de
7223:	2FE1  78      		ld	a,b
7224:	2FE2  89      		adc	a,c
7225:	2FE3  47      		ld	b,a
7226:	2FE4  C5      		push	bc
7227:	2FE5  E5      		push	hl
7228:	2FE6  7E      		ld	a,(hl)
7229:	2FE7  D630    		sub	'0'
7230:	2FE9  F5      		push	af
7231:	2FEA  CD641D  		call	get.type	; Get type
7232:	2FED  F21930  		jp	p,l3019		; .. not integer
7233:	2FF0  2A040C  		ld	hl,($$ARG+4)
7234:	2FF3  11CD0C  		ld	de,0ccdh	;;l0ccd
7235:	2FF6  CDCD43  		call	cp.r
7236:	2FF9  D21530  		jp	nc,l3015	; HL >= DE
7237:	2FFC  54      		ld	d,h
7238:	2FFD  5D      		ld	e,l
7239:	2FFE  29      		add	hl,hl
7240:	2FFF  29      		add	hl,hl
7241:	3000  19      		add	hl,de
7242:	3001  29      		add	hl,hl
7243:	3002  F1      		pop	af
7244:	3003  4F      		ld	c,a
7245:	3004  09      		add	hl,bc
7246:	3005  7C      		ld	a,h
7247:	3006  B7      		or	a
7248:	3007  FA1330  		jp	m,l3013
7249:	300A  22040C  		ld	($$ARG+4),hl
7250:	300D          	l300d:
7251:	300D  E1      		pop	hl
7252:	300E  C1      		pop	bc
7253:	300F  D1      		pop	de
7254:	3010  C3F92E  		jp	l2ef9
7255:	3013          	l3013:
7256:	3013  79      		ld	a,c
7257:	3014  F5      		push	af
7258:	3015          	l3015:
7259:	3015  CD112A  		call	l2a11
7260:	3018  37      		scf
7261:	3019          	l3019:
7262:	3019  D23530  		jp	nc,l3035	; .. got double
7263:	301C  017494  		ld	bc,l9474
7264:	301F  110024  		ld	de,02400h	;;l2400
7265:	3022  CD0629  		call	l2906
7266:	3025  F23230  		jp	p,l3032
7267:	3028  CD2E28  		call	l282e
7268:	302B  F1      		pop	af
7269:	302C  CD4830  		call	l3048
7270:	302F  C30D30  		jp	l300d
7271:	3032          	l3032:
7272:	3032  CD2A2A  		call	l2a2a
7273:	3035          	l3035:
7274:	3035  CDB22E  		call	l2eb2
7275:	3038  CDF428  		call	l28f4
7276:	303B  F1      		pop	af
7277:	303C  CD5428  		call	l2854
7278:	303F  CD2A2A  		call	l2a2a
7279:	3042  CD262C  		call	l2c26
7280:	3045  C30D30  		jp	l300d
7281:	3048          	l3048:
7282:	3048  CD9928  		call	l2899
7283:	304B  CD5428  		call	l2854
7284:	304E          	l304e:
7285:	304E  C1      		pop	bc
7286:	304F  D1      		pop	de
7287:	3050  C38825  		jp	l2588
7288:	3053          	l3053:
7289:	3053  7B      		ld	a,e
7290:	3054  FE0A    		cp	9+1
7291:	3056  D26230  		jp	nc,l3062
7292:	3059  07      		rlca
7293:	305A  07      		rlca
7294:	305B  83      		add	a,e
7295:	305C  07      		rlca
7296:	305D  86      		add	a,(hl)
7297:	305E  D630    		sub	'0'
7298:	3060  5F      		ld	e,a
7299:	3061          		_JP.M
7300:	3062          	l3062:
7301:	3062  1E7F    		ld	e,07fh
7302:	3064  C3582F  		jp	l2f58
7303:	3067          	l3067:
7304:	3067  E5      		push	hl
7305:	3068  21060C  		ld	hl,$$ARG+6
7306:	306B  CD641D  		call	get.type	; Get type
7307:	306E  E27730  		jp	po,l3077	; .. got single
7308:	3071  3A130C  		ld	a,(l0c13)
7309:	3074  C37830  		jp	l3078
7310:	3077          	l3077:
7311:	3077  79      		ld	a,c
7312:	3078          	l3078:
7313:	3078  AE      		xor	(hl)
7314:	3079  17      		rla
7315:	307A  E1      		pop	hl
7316:	307B  C39E30  		jp	l309e
7317:	307E          	l307e:
7318:	307E  F1      		pop	af
7319:	307F  F1      		pop	af
7320:	3080          	l3080:
7321:	3080  3A060C  		ld	a,($$ARG+6)
7322:	3083  17      		rla
7323:	3084  C39E30  		jp	l309e
7324:	3087          	l3087:
7325:	3087  F1      		pop	af
7326:	3088          	l3088:
7327:	3088  3A080C  		ld	a,(l0c08)
7328:	308B  2F      		cpl
7329:	308C  17      		rla
7330:	308D  C39E30  		jp	l309e
7331:	3090          	l3090:
7332:	3090  79      		ld	a,c
7333:	3091  C39730  		jp	l3097
7334:	3094          	l3094:
7335:	3094  3A130C  		ld	a,(l0c13)
7336:	3097          	l3097:
7337:	3097  17      		rla
7338:	3098  216205  		ld	hl,l0562
7339:	309B  229C07  		ld	(l079c),hl
7340:	309E          	l309e:
7341:	309E  E5      		push	hl
7342:	309F  C5      		push	bc
7343:	30A0  D5      		push	de
7344:	30A1  F5      		push	af
7345:	30A2  F5      		push	af
7346:	30A3  2AB90A  		ld	hl,(l0ab9)
7347:	30A6  7C      		ld	a,h
7348:	30A7  B5      		or	l
7349:	30A8  C2CB30  		jp	nz,l30cb
7350:	30AB  21090C  		ld	hl,l0c09
7351:	30AE  7E      		ld	a,(hl)
7352:	30AF  B7      		or	a
7353:	30B0  CAB830  		jp	z,l30b8
7354:	30B3  3D      		dec	a
7355:	30B4  C2CB30  		jp	nz,l30cb
7356:	30B7  34      		inc	(hl)
7357:	30B8          	l30b8:
7358:	30B8  2A9C07  		ld	hl,(l079c)
7359:	30BB  CD7924  		call	l2479
7360:	30BE  32650A  		ld	(colCON),a	; .. set column
7361:	30C1  3E0D    		ld	a,cr
7362:	30C3  CD8324  		call	l2483
7363:	30C6  3E0A    		ld	a,lf
7364:	30C8  CD8324  		call	l2483
7365:	30CB          	l30cb:
7366:	30CB  F1      		pop	af
7367:	30CC  21040C  		ld	hl,$$ARG+4
7368:	30CF  110A31  		ld	de,l310a
7369:	30D2  D2D830  		jp	nc,l30d8
7370:	30D5  110E31  		ld	de,l310e
7371:	30D8          	l30d8:
7372:	30D8  CDC328  		call	l28c3
7373:	30DB  CD641D  		call	get.type	; Get type
7374:	30DE  DAEA30  		jp	c,l30ea		; .. not double
7375:	30E1  21000C  		ld	hl,$$ARG
7376:	30E4  110E31  		ld	de,l310e
7377:	30E7  CDC328  		call	l28c3
7378:	30EA          	l30ea:
7379:	30EA  2AB90A  		ld	hl,(l0ab9)
7380:	30ED  7C      		ld	a,h
7381:	30EE  B5      		or	l
7382:	30EF  2A9C07  		ld	hl,(l079c)
7383:	30F2  110905  		ld	de,l0509
7384:	30F5  EB      		ex	de,hl
7385:	30F6  229C07  		ld	(l079c),hl
7386:	30F9  CA0531  		jp	z,l3105
7387:	30FC  CDCD43  		call	cp.r
7388:	30FF  CADB0C  		jp	z,l0cdb		; HL = DE
7389:	3102  C3CC0C  		jp	l0ccc
7390:	3105          	l3105:
7391:	3105  F1      		pop	af
7392:	3106  D1      		pop	de
7393:	3107  C1      		pop	bc
7394:	3108  E1      		pop	hl
7395:	3109  C9      		ret
7396:			;
7397:	310A          	l310a:
7398:	310A  FFFF7FFF		db	0ffh,0ffh,07fh,0ffh
7399:	310E          	l310e:
7400:	310E  FFFFFFFF		db	0ffh,0ffh,0ffh,0ffh
7401:			;
7402:			;
7403:			;
7404:	3112          	l3112:
7405:	3112  E5      		push	hl
7406:	3113  21400C  		ld	hl,l0c40
7407:	3116  CD2347  		call	l4723
7408:	3119  E1      		pop	hl
7409:			;
7410:			;
7411:			;
7412:	311A          	l311a:
7413:	311A  012247  		ld	bc,l4722
7414:	311D  C5      		push	bc
7415:	311E  CDDC29  		call	st.INT		; Save result
7416:	3121  AF      		xor	a
7417:	3122  CDB231  		call	l31b2		; Init string
7418:	3125  B6      		or	(hl)
7419:	3126  C34631  		jp	l3146
7420:	3129          	l3129:
7421:	3129  AF      		xor	a
7422:	312A          	l312a:
7423:	312A  CDB231  		call	l31b2		; Init string
7424:	312D  E608    		and	00001000b	; Test bit
7425:	312F  CA3431  		jp	z,l3134
7426:	3132  362B    		ld	(hl),'+'
7427:	3134          	l3134:
7428:	3134  EB      		ex	de,hl
7429:	3135  CD8628  		call	l2886
7430:	3138  EB      		ex	de,hl
7431:	3139  F24631  		jp	p,l3146
7432:	313C  362D    		ld	(hl),'-'
7433:	313E  C5      		push	bc
7434:	313F  E5      		push	hl
7435:	3140  CD6B28  		call	l286b
7436:	3143  E1      		pop	hl
7437:	3144  C1      		pop	bc
7438:	3145  B4      		or	h
7439:	3146          	l3146:
7440:	3146  23      		inc	hl
7441:	3147  3630    		ld	(hl),'0'
7442:	3149  3A9D0A  		ld	a,(l0a9d)
7443:	314C  57      		ld	d,a
7444:	314D  17      		rla
7445:	314E  3A670A  		ld	a,($ARGLEN)	; Get length
7446:	3151  DAD732  		jp	c,l32d7
7447:	3154  CACF32  		jp	z,l32cf
7448:	3157  FE04    		cp	4		; Test integer or pointer
7449:	3159  D2BB31  		jp	nc,l31bb	; .. nope
7450:	315C  010000  		ld	bc,l0000
7451:	315F  CDBA35  		call	l35ba
7452:	3162          	l3162:
7453:	3162  21160C  		ld	hl,l0c16
7454:	3165  46      		ld	b,(hl)
7455:	3166  0E20    		ld	c,' '
7456:	3168  3A9D0A  		ld	a,(l0a9d)
7457:	316B  5F      		ld	e,a
7458:	316C  E620    		and	' '
7459:	316E  CA7F31  		jp	z,l317f
7460:	3171  78      		ld	a,b
7461:	3172  B9      		cp	c
7462:	3173  0E2A    		ld	c,'*'
7463:	3175  C27F31  		jp	nz,l317f
7464:	3178  7B      		ld	a,e
7465:	3179  E604    		and	4
7466:	317B  C27F31  		jp	nz,l317f
7467:	317E  41      		ld	b,c
7468:	317F          	l317f:
7469:	317F  71      		ld	(hl),c
7470:	3180  CD0513  		call	get.tok
7471:	3183  CA9F31  		jp	z,l319f
7472:	3186  FE45    		cp	'E'
7473:	3188  CA9F31  		jp	z,l319f
7474:	318B  FE44    		cp	'D'
7475:	318D  CA9F31  		jp	z,l319f
7476:	3190  FE30    		cp	'0'
7477:	3192  CA7F31  		jp	z,l317f
7478:	3195  FE2C    		cp	','
7479:	3197  CA7F31  		jp	z,l317f
7480:	319A  FE2E    		cp	'.'
7481:	319C  C2A231  		jp	nz,l31a2
7482:	319F          	l319f:
7483:	319F  2B      		dec	hl
7484:	31A0  3630    		ld	(hl),'0'
7485:	31A2          	l31a2:
7486:	31A2  7B      		ld	a,e
7487:	31A3  E610    		and	10h
7488:	31A5  CAAB31  		jp	z,l31ab
7489:	31A8  2B      		dec	hl
7490:	31A9  3624    		ld	(hl),'$'
7491:	31AB          	l31ab:
7492:	31AB  7B      		ld	a,e
7493:	31AC  E604    		and	4
7494:	31AE  C0      		ret	nz
7495:	31AF  2B      		dec	hl
7496:	31B0  70      		ld	(hl),b
7497:	31B1  C9      		ret
7498:			;
7499:			; Init string
7500:			;
7501:	31B2          	l31b2:
7502:	31B2  329D0A  		ld	(l0a9d),a
7503:	31B5  21160C  		ld	hl,l0c16
7504:	31B8  3620    		ld	(hl),' '	; Init blank
7505:	31BA  C9      		ret
7506:			;
7507:			;
7508:			;
7509:	31BB          	l31bb:
7510:	31BB  CD9928  		call	l2899
7511:	31BE  EB      		ex	de,hl
7512:	31BF  2A000C  		ld	hl,($$ARG)
7513:	31C2  E5      		push	hl
7514:	31C3  2A020C  		ld	hl,($$ARG+2)
7515:	31C6  E5      		push	hl
7516:	31C7  EB      		ex	de,hl
7517:	31C8  F5      		push	af
7518:	31C9  AF      		xor	a
7519:	31CA  320B0C  		ld	(l0c0b),a
7520:	31CD  F1      		pop	af
7521:	31CE  F5      		push	af
7522:	31CF  CD6632  		call	l3266
7523:	31D2  0645    		ld	b,'E'
7524:	31D4  0E00    		ld	c,0
7525:	31D6          	l31d6:
7526:	31D6  E5      		push	hl
7527:	31D7  7E      		ld	a,(hl)
7528:	31D8          	l31d8:
7529:	31D8  B8      		cp	b
7530:	31D9  CA0732  		jp	z,l3207
7531:	31DC  FE3A    		cp	'9'+1
7532:	31DE  D2E731  		jp	nc,l31e7
7533:	31E1  FE30    		cp	'0'
7534:	31E3  DAE731  		jp	c,l31e7
7535:	31E6  0C      		inc	c
7536:	31E7          	l31e7:
7537:	31E7  23      		inc	hl
7538:	31E8  7E      		ld	a,(hl)
7539:	31E9  B7      		or	a
7540:	31EA  C2D831  		jp	nz,l31d8
7541:	31ED  3E44    		ld	a,'D'
7542:	31EF  B8      		cp	b
7543:	31F0  47      		ld	b,a
7544:	31F1  E1      		pop	hl
7545:	31F2  0E00    		ld	c,0
7546:	31F4  C2D631  		jp	nz,l31d6
7547:	31F7          	l31f7:
7548:	31F7  F1      		pop	af
7549:	31F8  C1      		pop	bc
7550:	31F9  D1      		pop	de
7551:	31FA  EB      		ex	de,hl
7552:	31FB  22000C  		ld	($$ARG),hl
7553:	31FE  60      		ld	h,b
7554:	31FF  69      		ld	l,c
7555:	3200  22020C  		ld	($$ARG+2),hl
7556:	3203  EB      		ex	de,hl
7557:	3204  C1      		pop	bc
7558:	3205  D1      		pop	de
7559:	3206  C9      		ret
7560:	3207          	l3207:
7561:	3207  C5      		push	bc
7562:	3208  0600    		ld	b,0
7563:	320A  23      		inc	hl
7564:	320B  7E      		ld	a,(hl)
7565:	320C          	l320c:
7566:	320C  FE2B    		cp	'+'
7567:	320E  CA4E32  		jp	z,l324e
7568:	3211  FE2D    		cp	'-'
7569:	3213  CA2532  		jp	z,l3225
7570:	3216  D630    		sub	'0'
7571:	3218  4F      		ld	c,a
7572:	3219  78      		ld	a,b
7573:	321A  87      		add	a,a
7574:	321B  87      		add	a,a
7575:	321C  80      		add	a,b
7576:	321D  87      		add	a,a
7577:	321E          	l321e:
7578:	321E  81      		add	a,c
7579:	321F  47      		ld	b,a
7580:	3220  FE10    		cp	10h
7581:	3222  D24E32  		jp	nc,l324e
7582:	3225          	l3225:
7583:	3225  23      		inc	hl
7584:	3226  7E      		ld	a,(hl)
7585:	3227  B7      		or	a
7586:	3228  C20C32  		jp	nz,l320c
7587:	322B  60      		ld	h,b
7588:	322C  C1      		pop	bc
7589:	322D  78      		ld	a,b
7590:	322E  FE45    		cp	'E'
7591:	3230  C24332  		jp	nz,l3243
7592:	3233  79      		ld	a,c
7593:	3234  84      		add	a,h
7594:	3235  FE09    		cp	9
7595:	3237  E1      		pop	hl
7596:	3238  D2F731  		jp	nc,l31f7
7597:	323B          	l323b:
7598:	323B  3E80    		ld	a,80h
7599:	323D  320B0C  		ld	(l0c0b),a
7600:	3240  C35332  		jp	l3253
7601:	3243          	l3243:
7602:	3243  7C      		ld	a,h
7603:	3244  81      		add	a,c
7604:	3245  FE12    		cp	12h
7605:	3247  E1      		pop	hl
7606:	3248  D2F731  		jp	nc,l31f7
7607:	324B  C33B32  		jp	l323b
7608:	324E          	l324e:
7609:	324E  C1      		pop	bc
7610:	324F  E1      		pop	hl
7611:	3250  C3F731  		jp	l31f7
7612:	3253          	l3253:
7613:	3253  F1      		pop	af
7614:	3254  C1      		pop	bc
7615:	3255  D1      		pop	de
7616:	3256  EB      		ex	de,hl
7617:	3257  22000C  		ld	($$ARG),hl
7618:	325A  60      		ld	h,b
7619:	325B  69      		ld	l,c
7620:	325C  22020C  		ld	($$ARG+2),hl
7621:	325F  EB      		ex	de,hl
7622:	3260  C1      		pop	bc
7623:	3261  D1      		pop	de
7624:	3262  CDA928  		call	l28a9
7625:	3265  23      		inc	hl
7626:	3266          	l3266:
7627:	3266  FE05    		cp	5
7628:	3268  E5      		push	hl
7629:	3269  DE00    		sbc	a,0
7630:	326B  17      		rla
7631:	326C  57      		ld	d,a
7632:	326D  14      		inc	d
7633:	326E  CD5C34  		call	l345c
7634:	3271  010003  		ld	bc,3*256+0	;;l0300
7635:	3274  F5      		push	af
7636:	3275  3A0B0C  		ld	a,(l0c0b)
7637:	3278  B7      		or	a
7638:	3279  F28132  		jp	p,l3281
7639:	327C  F1      		pop	af
7640:	327D  82      		add	a,d
7641:	327E  C38B32  		jp	l328b
7642:	3281          	l3281:
7643:	3281  F1      		pop	af
7644:	3282  82      		add	a,d
7645:	3283  FA8F32  		jp	m,l328f
7646:	3286  14      		inc	d
7647:	3287  BA      		cp	d
7648:	3288  D28F32  		jp	nc,l328f
7649:	328B          	l328b:
7650:	328B  3C      		inc	a
7651:	328C  47      		ld	b,a
7652:	328D  3E02    		ld	a,2
7653:	328F          	l328f:
7654:	328F  D602    		sub	2
7655:	3291  E1      		pop	hl
7656:	3292  F5      		push	af
7657:	3293  CDFB34  		call	l34fb
7658:	3296  3630    		ld	(hl),'0'
7659:	3298  CCBE28  		call	z,inc.hl	; .. advance pointer
7660:	329B  CD2235  		call	l3522
7661:	329E          	l329e:
7662:	329E  2B      		dec	hl
7663:	329F  7E      		ld	a,(hl)
7664:	32A0  FE30    		cp	'0'
7665:	32A2  CA9E32  		jp	z,l329e
7666:	32A5  FE2E    		cp	'.'		; Test dot
7667:	32A7  C4BE28  		call	nz,inc.hl	; .. skip if not
7668:	32AA  F1      		pop	af
7669:	32AB  CAD032  		jp	z,l32d0		; .. zero result
7670:	32AE          	l32ae:
7671:	32AE  F5      		push	af
7672:	32AF  CD641D  		call	get.type	; Get type
7673:	32B2  3E22    		ld	a,'"'
7674:	32B4  8F      		adc	a,a
7675:	32B5  77      		ld	(hl),a		; Save " or #
7676:	32B6  23      		inc	hl
7677:	32B7  F1      		pop	af
7678:	32B8  362B    		ld	(hl),'+'	; Set default sign
7679:	32BA  F2C132  		jp	p,l32c1
7680:	32BD  362D    		ld	(hl),'-'	; .. change it
7681:	32BF  2F      		cpl
7682:	32C0  3C      		inc	a
7683:	32C1          	l32c1:
7684:	32C1  062F    		ld	b,'0'-1		; Init count
7685:	32C3          	l32c3:
7686:	32C3  04      		inc	b		; Count tens
7687:	32C4  D60A    		sub	10		; .. make < 0
7688:	32C6  D2C332  		jp	nc,l32c3
7689:	32C9  C63A    		add	a,'9'+1		; .. get units
7690:	32CB  23      		inc	hl
7691:	32CC  70      		ld	(hl),b		; .. save as byte
7692:	32CD  23      		inc	hl
7693:	32CE  77      		ld	(hl),a
7694:	32CF          	l32cf:
7695:	32CF  23      		inc	hl
7696:	32D0          	l32d0:
7697:	32D0  3600    		ld	(hl),null	; Close string
7698:	32D2  EB      		ex	de,hl
7699:	32D3  21160C  		ld	hl,l0c16	; Return pointer
7700:	32D6  C9      		ret
7701:			;
7702:			;
7703:			;
7704:	32D7          	l32d7:
7705:	32D7  23      		inc	hl
7706:	32D8  C5      		push	bc
7707:	32D9  FE04    		cp	4
7708:	32DB  7A      		ld	a,d
7709:	32DC  D25133  		jp	nc,l3351
7710:	32DF  1F      		rra
7711:	32E0  DAEE33  		jp	c,l33ee
7712:	32E3  010306  		ld	bc,0603h	;;l0603
7713:	32E6  CDF334  		call	l34f3
7714:	32E9  D1      		pop	de
7715:	32EA  7A      		ld	a,d
7716:	32EB  D605    		sub	5
7717:	32ED  F4CF34  		call	p,l34cf
7718:	32F0  CDBA35  		call	l35ba
7719:	32F3          	l32f3:
7720:	32F3  7B      		ld	a,e
7721:	32F4  B7      		or	a
7722:	32F5  CC1F28  		call	z,l281f
7723:	32F8  3D      		dec	a
7724:	32F9  F4CF34  		call	p,l34cf
7725:	32FC          	l32fc:
7726:	32FC  E5      		push	hl
7727:	32FD  CD6231  		call	l3162
7728:	3300  E1      		pop	hl
7729:	3301  CA0633  		jp	z,l3306
7730:	3304  70      		ld	(hl),b
7731:	3305  23      		inc	hl
7732:	3306          	l3306:
7733:	3306  3600    		ld	(hl),0
7734:	3308  21150C  		ld	hl,l0c15
7735:	330B          	l330b:
7736:	330B  23      		inc	hl
7737:	330C          	l330c:
7738:	330C  3ABC0A  		ld	a,(l0abc)
7739:	330F  95      		sub	l
7740:	3310  92      		sub	d
7741:	3311  C8      		ret	z
7742:	3312  7E      		ld	a,(hl)
7743:	3313  FE20    		cp	' '
7744:	3315  CA0B33  		jp	z,l330b
7745:	3318  FE2A    		cp	'*'
7746:	331A  CA0B33  		jp	z,l330b
7747:	331D  2B      		dec	hl
7748:	331E          	l331e:
7749:	331E  E5      		push	hl
7750:	331F          	l331f:
7751:	331F  F5      		push	af
7752:	3320  011F33  		ld	bc,l331f
7753:	3323  C5      		push	bc
7754:	3324  CD0513  		call	get.tok
7755:	3327  FE2D    		cp	'-'
7756:	3329  C8      		ret	z
7757:	332A  FE2B    		cp	'+'
7758:	332C  C8      		ret	z
7759:	332D  FE24    		cp	'$'
7760:	332F  C8      		ret	z
7761:	3330  C1      		pop	bc
7762:	3331  FE30    		cp	'0'
7763:	3333  C24933  		jp	nz,l3349
7764:	3336  23      		inc	hl
7765:	3337  CD0513  		call	get.tok
7766:	333A  D24933  		jp	nc,l3349
7767:	333D  2B      		dec	hl
7768:	333E          		_LD.BC
7769:	333F          	l333f:
7770:	333F  2B      		dec	hl
7771:	3340  77      		ld	(hl),a
7772:	3341  F1      		pop	af
7773:	3342  CA3F33  		jp	z,l333f
7774:	3345  C1      		pop	bc
7775:	3346  C30C33  		jp	l330c
7776:	3349          	l3349:
7777:	3349  F1      		pop	af
7778:	334A  CA4933  		jp	z,l3349
7779:	334D  E1      		pop	hl
7780:	334E  3625    		ld	(hl),'%'
7781:	3350  C9      		ret
7782:	3351          	l3351:
7783:	3351  E5      		push	hl
7784:	3352  1F      		rra
7785:	3353  DAF533  		jp	c,l33f5
7786:	3356  CA6D33  		jp	z,l336d
7787:	3359  111136  		ld	de,l3611
7788:	335C  CD4329  		call	l2943
7789:	335F  1610    		ld	d,10h
7790:	3361  FA7B33  		jp	m,l337b
7791:	3364          	l3364:
7792:	3364  E1      		pop	hl
7793:	3365  C1      		pop	bc
7794:	3366  CD2931  		call	l3129		; .. get number
7795:	3369  2B      		dec	hl
7796:	336A  3625    		ld	(hl),'%'	; .. save type
7797:	336C  C9      		ret
7798:	336D          	l336d:
7799:	336D  010EB6  		ld	bc,lb60e
7800:	3370  11CA1B  		ld	de,l1bca
7801:	3373  CD0629  		call	l2906
7802:	3376  F26433  		jp	p,l3364
7803:	3379  1606    		ld	d,6
7804:	337B          	l337b:
7805:	337B  CD4528  		call	l2845
7806:	337E  C45C34  		call	nz,l345c
7807:	3381  E1      		pop	hl
7808:	3382  C1      		pop	bc
7809:	3383  FAA033  		jp	m,l33a0
7810:	3386  C5      		push	bc
7811:	3387  5F      		ld	e,a
7812:	3388  78      		ld	a,b
7813:	3389  92      		sub	d
7814:	338A  93      		sub	e
7815:	338B  F4CF34  		call	p,l34cf
7816:	338E  CDE634  		call	l34e6
7817:	3391  CD2235  		call	l3522
7818:	3394  B3      		or	e
7819:	3395  C4DF34  		call	nz,l34df
7820:	3398  B3      		or	e
7821:	3399  C40E35  		call	nz,l350e
7822:	339C  D1      		pop	de
7823:	339D  C3F332  		jp	l32f3
7824:	33A0          	l33a0:
7825:	33A0  5F      		ld	e,a
7826:	33A1  79      		ld	a,c
7827:	33A2  B7      		or	a
7828:	33A3  C4CB2F  		call	nz,l2fcb
7829:	33A6  83      		add	a,e
7830:	33A7  FAAB33  		jp	m,l33ab
7831:	33AA  AF      		xor	a
7832:	33AB          	l33ab:
7833:	33AB  C5      		push	bc
7834:	33AC  F5      		push	af
7835:	33AD          	l33ad:
7836:	33AD  FCCD2F  		call	m,l2fcd
7837:	33B0  FAAD33  		jp	m,l33ad
7838:	33B3  C1      		pop	bc
7839:	33B4  7B      		ld	a,e
7840:	33B5  90      		sub	b
7841:	33B6  C1      		pop	bc
7842:	33B7  5F      		ld	e,a
7843:	33B8  82      		add	a,d
7844:	33B9  78      		ld	a,b
7845:	33BA  FAC933  		jp	m,l33c9
7846:	33BD  92      		sub	d
7847:	33BE  93      		sub	e
7848:	33BF  F4CF34  		call	p,l34cf
7849:	33C2  C5      		push	bc
7850:	33C3  CDE634  		call	l34e6
7851:	33C6  C3DA33  		jp	l33da
7852:	33C9          	l33c9:
7853:	33C9  CDCF34  		call	l34cf
7854:	33CC  79      		ld	a,c
7855:	33CD  CD1235  		call	l3512
7856:	33D0  4F      		ld	c,a
7857:	33D1  AF      		xor	a
7858:	33D2  92      		sub	d
7859:	33D3  93      		sub	e
7860:	33D4  CDCF34  		call	l34cf
7861:	33D7  C5      		push	bc
7862:	33D8  47      		ld	b,a
7863:	33D9  4F      		ld	c,a
7864:	33DA          	l33da:
7865:	33DA  CD2235  		call	l3522
7866:	33DD  C1      		pop	bc
7867:	33DE  B1      		or	c
7868:	33DF  C2E533  		jp	nz,l33e5
7869:	33E2  2ABC0A  		ld	hl,(l0abc)
7870:	33E5          	l33e5:
7871:	33E5  83      		add	a,e
7872:	33E6  3D      		dec	a
7873:	33E7  F4CF34  		call	p,l34cf
7874:	33EA  50      		ld	d,b
7875:	33EB  C3FC32  		jp	l32fc
7876:	33EE          	l33ee:
7877:	33EE  E5      		push	hl
7878:	33EF  D5      		push	de
7879:	33F0  CD112A  		call	l2a11
7880:	33F3  D1      		pop	de
7881:	33F4  AF      		xor	a
7882:	33F5          	l33f5:
7883:	33F5  CAFB33  		jp	z,l33fb
7884:	33F8  1E10    		ld	e,10h
7885:	33FA          		_LD.BC
7886:	33FB          	l33fb:
7887:	33FB  1E06    		ld	e,6
7888:	33FD  CD4528  		call	l2845
7889:	3400  37      		scf
7890:	3401  C45C34  		call	nz,l345c
7891:	3404  E1      		pop	hl
7892:	3405  C1      		pop	bc
7893:	3406  F5      		push	af
7894:	3407  79      		ld	a,c
7895:	3408  B7      		or	a
7896:	3409  F5      		push	af
7897:	340A  C4CB2F  		call	nz,l2fcb
7898:	340D  80      		add	a,b
7899:	340E  4F      		ld	c,a
7900:	340F  7A      		ld	a,d
7901:	3410  E604    		and	4
7902:	3412  FE01    		cp	1
7903:	3414  9F      		sbc	a,a
7904:	3415  57      		ld	d,a
7905:	3416  81      		add	a,c
7906:	3417  4F      		ld	c,a
7907:	3418  93      		sub	e
7908:	3419  F5      		push	af
7909:	341A  C5      		push	bc
7910:	341B          	l341b:
7911:	341B  FCCD2F  		call	m,l2fcd
7912:	341E          	l341e:
7913:	341E  FA1B34  		jp	m,l341b
7914:	3421  C1      		pop	bc
7915:	3422  F1      		pop	af
7916:	3423  C5      		push	bc
7917:	3424  F5      		push	af
7918:	3425  FA2934  		jp	m,l3429
7919:	3428  AF      		xor	a
7920:	3429          	l3429:
7921:	3429  2F      		cpl
7922:	342A  3C      		inc	a
7923:	342B  80      		add	a,b
7924:	342C  3C      		inc	a
7925:	342D  82      		add	a,d
7926:	342E  47      		ld	b,a
7927:	342F  0E00    		ld	c,0
7928:	3431  CD2235  		call	l3522
7929:	3434  F1      		pop	af
7930:	3435  F4D834  		call	p,l34d8
7931:	3438  CD0E35  		call	l350e
7932:	343B  C1      		pop	bc
7933:	343C  F1      		pop	af
7934:	343D  C24C34  		jp	nz,l344c
7935:	3440  CD1F28  		call	l281f
7936:	3443  7E      		ld	a,(hl)
7937:	3444  FE2E    		cp	'.'		; Test dot
7938:	3446  C4BE28  		call	nz,inc.hl	; .. skip if not
7939:	3449  22BC0A  		ld	(l0abc),hl
7940:	344C          	l344c:
7941:	344C  F1      		pop	af
7942:	344D  DA5334  		jp	c,l3453
7943:	3450  83      		add	a,e
7944:	3451  90      		sub	b
7945:	3452  92      		sub	d
7946:	3453          	l3453:
7947:	3453  C5      		push	bc
7948:	3454  CDAE32  		call	l32ae
7949:	3457  EB      		ex	de,hl
7950:	3458  D1      		pop	de
7951:	3459  C3FC32  		jp	l32fc
7952:			;
7953:			;
7954:			;
7955:	345C          	l345c:
7956:	345C  D5      		push	de
7957:	345D  AF      		xor	a
7958:	345E  F5      		push	af
7959:	345F  CD641D  		call	get.type	; Get type
7960:	3462  E28034  		jp	po,l3480	; .. got single
7961:	3465          	l3465:
7962:	3465  3A070C  		ld	a,($$ARG+7)
7963:	3468  FE91    		cp	91h
7964:	346A  D28034  		jp	nc,l3480
7965:	346D  11F135  		ld	de,l35f1
7966:	3470  210D0C  		ld	hl,l0c0d
7967:	3473  CDC928  		call	l28c9
7968:	3476  CD642D  		call	l2d64
7969:	3479  F1      		pop	af
7970:	347A  D60A    		sub	0ah
7971:	347C  F5      		push	af
7972:	347D  C36534  		jp	l3465
7973:	3480          	l3480:
7974:	3480  CDB234  		call	l34b2
7975:	3483          	l3483:
7976:	3483  CD641D  		call	get.type	; Get type
7977:	3486  EA9534  		jp	pe,l3495	; .. not single
7978:	3489  014391  		ld	bc,l9143
7979:	348C  11F94F  		ld	de,04ff9h
7980:	348F  CD0629  		call	l2906
7981:	3492  C39B34  		jp	l349b
7982:	3495          	l3495:
7983:	3495  11F935  		ld	de,l35f9
7984:	3498  CD4329  		call	l2943
7985:	349B          	l349b:
7986:	349B  F2AE34  		jp	p,l34ae
7987:	349E  F1      		pop	af
7988:	349F  CDBE2F  		call	l2fbe
7989:	34A2  F5      		push	af
7990:	34A3  C38334  		jp	l3483
7991:	34A6          	l34a6:
7992:	34A6  F1      		pop	af
7993:	34A7  CDCD2F  		call	l2fcd
7994:	34AA  F5      		push	af
7995:	34AB  CDB234  		call	l34b2
7996:	34AE          	l34ae:
7997:	34AE  F1      		pop	af
7998:	34AF  B7      		or	a
7999:	34B0  D1      		pop	de
8000:	34B1  C9      		ret
8001:	34B2          	l34b2:
8002:	34B2  CD641D  		call	get.type	; Get type
8003:	34B5  EAC434  		jp	pe,l34c4	; .. not single
8004:	34B8  017494  		ld	bc,l9474
8005:	34BB  11F823  		ld	de,l23f8
8006:	34BE  CD0629  		call	l2906
8007:	34C1  C3CA34  		jp	l34ca
8008:	34C4          	l34c4:
8009:	34C4  110136  		ld	de,l3601
8010:	34C7  CD4329  		call	l2943
8011:	34CA          	l34ca:
8012:	34CA  E1      		pop	hl
8013:	34CB  F2A634  		jp	p,l34a6
8014:	34CE  E9      		jp	(hl)
8015:	34CF          	l34cf:
8016:	34CF  B7      		or	a
8017:	34D0          	l34d0:
8018:	34D0  C8      		ret	z
8019:	34D1  3D      		dec	a
8020:	34D2  3630    		ld	(hl),'0'
8021:	34D4  23      		inc	hl
8022:	34D5  C3D034  		jp	l34d0
8023:	34D8          	l34d8:
8024:	34D8  C2DF34  		jp	nz,l34df
8025:	34DB          	l34db:
8026:	34DB  C8      		ret	z
8027:	34DC  CD0E35  		call	l350e
8028:	34DF          	l34df:
8029:	34DF  3630    		ld	(hl),'0'
8030:	34E1  23      		inc	hl
8031:	34E2  3D      		dec	a
8032:	34E3  C3DB34  		jp	l34db
8033:	34E6          	l34e6:
8034:	34E6  7B      		ld	a,e
8035:	34E7  82      		add	a,d
8036:	34E8  3C      		inc	a
8037:	34E9  47      		ld	b,a
8038:	34EA  3C      		inc	a
8039:	34EB          	l34eb:
8040:	34EB  D603    		sub	3
8041:	34ED  D2EB34  		jp	nc,l34eb
8042:	34F0  C605    		add	a,5
8043:	34F2  4F      		ld	c,a
8044:	34F3          	l34f3:
8045:	34F3  3A9D0A  		ld	a,(l0a9d)
8046:	34F6  E640    		and	'@'
8047:	34F8  C0      		ret	nz
8048:	34F9  4F      		ld	c,a
8049:	34FA  C9      		ret
8050:	34FB          	l34fb:
8051:	34FB  05      		dec	b
8052:	34FC  F20F35  		jp	p,l350f
8053:	34FF  22BC0A  		ld	(l0abc),hl
8054:	3502  362E    		ld	(hl),'.'
8055:	3504          	l3504:
8056:	3504  23      		inc	hl
8057:	3505  3630    		ld	(hl),'0'
8058:	3507  04      		inc	b
8059:	3508  C20435  		jp	nz,l3504
8060:	350B  23      		inc	hl
8061:	350C  48      		ld	c,b
8062:	350D  C9      		ret
8063:	350E          	l350e:
8064:	350E  05      		dec	b
8065:	350F          	l350f:
8066:	350F  C21A35  		jp	nz,l351a
8067:	3512          	l3512:
8068:	3512  362E    		ld	(hl),'.'
8069:	3514  22BC0A  		ld	(l0abc),hl
8070:	3517  23      		inc	hl
8071:	3518  48      		ld	c,b
8072:	3519  C9      		ret
8073:	351A          	l351a:
8074:	351A  0D      		dec	c
8075:	351B  C0      		ret	nz
8076:	351C  362C    		ld	(hl),','
8077:	351E          	l351e:
8078:	351E  23      		inc	hl
8079:	351F  0E03    		ld	c,3
8080:	3521  C9      		ret
8081:	3522          	l3522:
8082:	3522  D5      		push	de
8083:	3523  CD641D  		call	get.type	; Get type
8084:	3526  E27135  		jp	po,l3571	; .. got single
8085:	3529  C5      		push	bc
8086:	352A  E5      		push	hl
8087:	352B  CDF428  		call	l28f4
8088:	352E  210936  		ld	hl,l3609
8089:	3531  CDEE28  		call	l28ee
8090:	3534  CD262C  		call	l2c26
8091:	3537  AF      		xor	a
8092:	3538  CDCF2A  		call	l2acf
8093:	353B  E1      		pop	hl
8094:	353C  C1      		pop	bc
8095:	353D  111936  		ld	de,l3619
8096:	3540  3E0A    		ld	a,0ah
8097:	3542          	l3542:
8098:	3542  CD0E35  		call	l350e
8099:	3545  C5      		push	bc
8100:	3546  F5      		push	af
8101:	3547  E5      		push	hl
8102:	3548  D5      		push	de
8103:	3549  062F    		ld	b,'0'-1
8104:	354B          	l354b:
8105:	354B  04      		inc	b
8106:	354C  E1      		pop	hl
8107:	354D  E5      		push	hl
8108:	354E  3E9E    		ld	a,9eh
8109:	3550  CDFF2C  		call	l2cff
8110:	3553  D24B35  		jp	nc,l354b
8111:	3556  E1      		pop	hl
8112:	3557  3E8E    		ld	a,8eh
8113:	3559  CDFF2C  		call	l2cff
8114:	355C  EB      		ex	de,hl
8115:	355D  E1      		pop	hl
8116:	355E  70      		ld	(hl),b
8117:	355F  23      		inc	hl
8118:	3560  F1      		pop	af
8119:	3561  C1      		pop	bc
8120:	3562  3D      		dec	a
8121:	3563  C24235  		jp	nz,l3542
8122:	3566  C5      		push	bc
8123:	3567  E5      		push	hl
8124:	3568  21000C  		ld	hl,$$ARG
8125:	356B  CDA628  		call	l28a6
8126:	356E  C37E35  		jp	l357e
8127:	3571          	l3571:
8128:	3571  C5      		push	bc
8129:	3572  E5      		push	hl
8130:	3573  CD7925  		call	l2579
8131:	3576  3E01    		ld	a,1
8132:	3578  CD422A  		call	l2a42
8133:	357B  CDA928  		call	l28a9
8134:	357E          	l357e:
8135:	357E  E1      		pop	hl
8136:	357F  C1      		pop	bc
8137:	3580  AF      		xor	a
8138:	3581  115F36  		ld	de,l365f
8139:	3584          	l3584:
8140:	3584  3F      		ccf
8141:	3585  CD0E35  		call	l350e
8142:	3588  C5      		push	bc
8143:	3589  F5      		push	af
8144:	358A  E5      		push	hl
8145:	358B  D5      		push	de
8146:	358C  CDB428  		call	l28b4
8147:	358F  E1      		pop	hl
8148:	3590  062F    		ld	b,'0'-1
8149:	3592          	l3592:
8150:	3592  04      		inc	b
8151:	3593  7B      		ld	a,e
8152:	3594  96      		sub	(hl)
8153:	3595  5F      		ld	e,a
8154:	3596  23      		inc	hl
8155:	3597  7A      		ld	a,d
8156:	3598  9E      		sbc	a,(hl)
8157:	3599  57      		ld	d,a
8158:	359A  23      		inc	hl
8159:	359B  79      		ld	a,c
8160:	359C  9E      		sbc	a,(hl)
8161:	359D  4F      		ld	c,a
8162:	359E  2B      		dec	hl
8163:	359F  2B      		dec	hl
8164:	35A0  D29235  		jp	nc,l3592
8165:	35A3  CD4226  		call	l2642
8166:	35A6  23      		inc	hl
8167:	35A7  CDA928  		call	l28a9
8168:	35AA  EB      		ex	de,hl
8169:	35AB  E1      		pop	hl
8170:	35AC  70      		ld	(hl),b
8171:	35AD  23      		inc	hl
8172:	35AE  F1      		pop	af
8173:	35AF  C1      		pop	bc
8174:	35B0  DA8435  		jp	c,l3584
8175:	35B3  13      		inc	de
8176:	35B4  13      		inc	de
8177:	35B5  3E04    		ld	a,4
8178:	35B7  C3C035  		jp	l35c0
8179:	35BA          	l35ba:
8180:	35BA  D5      		push	de
8181:	35BB  116536  		ld	de,l3665
8182:	35BE  3E05    		ld	a,5
8183:	35C0          	l35c0:
8184:	35C0  CD0E35  		call	l350e
8185:	35C3  C5      		push	bc
8186:	35C4  F5      		push	af
8187:	35C5  E5      		push	hl
8188:	35C6  EB      		ex	de,hl
8189:	35C7  4E      		ld	c,(hl)
8190:	35C8  23      		inc	hl
8191:	35C9  46      		ld	b,(hl)
8192:	35CA  C5      		push	bc
8193:	35CB  23      		inc	hl
8194:	35CC  E3      		ex	(sp),hl
8195:	35CD  EB      		ex	de,hl
8196:	35CE  2A040C  		ld	hl,($$ARG+4)
8197:	35D1  062F    		ld	b,'0'-1
8198:	35D3          	l35d3:
8199:	35D3  04      		inc	b
8200:	35D4  7D      		ld	a,l
8201:	35D5  93      		sub	e
8202:	35D6  6F      		ld	l,a
8203:	35D7  7C      		ld	a,h
8204:	35D8  9A      		sbc	a,d
8205:	35D9  67      		ld	h,a
8206:	35DA  D2D335  		jp	nc,l35d3
8207:	35DD  19      		add	hl,de
8208:	35DE  22040C  		ld	($$ARG+4),hl
8209:	35E1  D1      		pop	de
8210:	35E2  E1      		pop	hl
8211:	35E3  70      		ld	(hl),b
8212:	35E4  23      		inc	hl
8213:	35E5  F1      		pop	af
8214:	35E6  C1      		pop	bc
8215:	35E7  3D      		dec	a
8216:	35E8  C2C035  		jp	nz,l35c0
8217:	35EB  CD0E35  		call	l350e
8218:	35EE  77      		ld	(hl),a
8219:	35EF  D1      		pop	de
8220:	35F0  C9      		ret
8221:			;
8222:	35F1          	l35f1::
8223:	35F1  00000000		db	000h,000h,000h,000h,0f9h,002h,015h,0a2h
	      F90215A2
8224:	35F9          	l35f9:
8225:	35F9  E1FF9F31		db	0e1h,0ffh,09fh,031h,0a9h,05fh,063h,0b2h
	      A95F63B2
8226:	3601          	l3601:
8227:	3601  FEFF03BF		db	0feh,0ffh,003h,0bfh,0c9h,01bh,00eh,0b6h
	      C91B0EB6
8228:	3609          	l3609:
8229:	3609  00000000		db	000h,000h,000h,000h
8230:	360D          	l360d:
8231:	360D  00000080		db	000h,000h,000h,080h
8232:	3611          	l3611:
8233:	3611  000004BF		db	000h,000h,004h,0bfh,0c9h,01bh,00eh,0b6h
	      C91B0EB6
8234:	3619          	l3619:
8235:	3619  0080C6A4		db	000h,080h,0c6h,0a4h,07eh,08dh,003h,000h
	      7E8D0300
8236:	3621  407A10F3		db	040h,07ah,010h,0f3h,05ah,000h,000h,0a0h
	      5A0000A0
8237:	3629  724E1809		db	072h,04eh,018h,009h,000h,000h,010h,0a5h
	      000010A5
8238:	3631  D4E80000		db	0d4h,0e8h,000h,000h,000h,0e8h,076h,048h
	      00E87648
8239:	3639  17000000		db	017h,000h,000h,000h,0e4h,00bh,054h,002h
	      E40B5402
8240:	3641  000000CA		db	000h,000h,000h,0cah,09ah,03bh,000h,000h
	      9A3B0000
8241:	3649  0000E1F5		db	000h,000h,0e1h,0f5h,005h,000h,000h,000h
	      05000000
8242:	3651  80969800		db	080h,096h,098h,000h,000h,000h,000h,040h
	      00000040
8243:	3659  420F0000		db	042h,00fh,000h,000h,000h,000h
	      0000
8244:	365F          	l365f:
8245:	365F  A0860110		db	0a0h,86h,01h,10h,27h,00h
	      2700
8246:	3665          	l3665:
8247:	3665  1027    		dw	10000
8248:	3667  E803    		dw	 1000
8249:	3669  6400    		dw	  100
8250:	366B  0A00    		dw	   10
8251:	366D  0100    		dw	    1
8252:			;
8253:			;
8254:			;
8255:	366F          	l366f:
8256:	366F  AF      		xor	a
8257:	3670  47      		ld	b,a
8258:	3671          		_JP.NZ
8259:	3672          	l3672:
8260:	3672  0601    		ld	b,1
8261:	3674  C5      		push	bc
8262:	3675  CDDB22  		call	l22db
8263:	3678  C1      		pop	bc
8264:	3679  11150C  		ld	de,l0c15
8265:	367C  D5      		push	de
8266:	367D  AF      		xor	a
8267:	367E  12      		ld	(de),a
8268:	367F  05      		dec	b
8269:	3680  04      		inc	b
8270:	3681  0E06    		ld	c,6
8271:	3683  CA8E36  		jp	z,l368e
8272:	3686  0E04    		ld	c,4
8273:	3688          	l3688:
8274:	3688  29      		add	hl,hl
8275:	3689  8F      		adc	a,a
8276:	368A          	l368a:
8277:	368A  29      		add	hl,hl
8278:	368B  8F      		adc	a,a
8279:	368C  29      		add	hl,hl
8280:	368D  8F      		adc	a,a
8281:	368E          	l368e:
8282:	368E  29      		add	hl,hl
8283:	368F  8F      		adc	a,a
8284:	3690  B7      		or	a
8285:	3691  C29F36  		jp	nz,l369f
8286:	3694  79      		ld	a,c
8287:	3695  3D      		dec	a
8288:	3696  CA9F36  		jp	z,l369f
8289:	3699  1A      		ld	a,(de)
8290:	369A  B7      		or	a
8291:	369B  CAAB36  		jp	z,l36ab
8292:	369E  AF      		xor	a
8293:	369F          	l369f:
8294:	369F  C630    		add	a,'0'
8295:	36A1  FE3A    		cp	'9'+1
8296:	36A3  DAA836  		jp	c,l36a8
8297:	36A6  C607    		add	a,'A'-'9'-1
8298:	36A8          	l36a8:
8299:	36A8  12      		ld	(de),a
8300:	36A9  13      		inc	de
8301:	36AA  12      		ld	(de),a
8302:	36AB          	l36ab:
8303:	36AB  AF      		xor	a
8304:	36AC  0D      		dec	c
8305:	36AD  CAB836  		jp	z,l36b8
8306:	36B0  05      		dec	b
8307:	36B1  04      		inc	b
8308:	36B2  CA8A36  		jp	z,l368a
8309:	36B5  C38836  		jp	l3688
8310:	36B8          	l36b8:
8311:	36B8  12      		ld	(de),a
8312:	36B9  E1      		pop	hl
8313:	36BA  C9      		ret
8314:	36BB          	l36bb:
8315:	36BB  217428  		ld	hl,l2874
8316:	36BE  E3      		ex	(sp),hl
8317:	36BF  E9      		jp	(hl)
8318:			;
8319:			; Function : SQR(X)
8320:			;
8321:	36C0          	l36c0:
8322:	36C0  CD9928  		call	l2899
8323:	36C3  210D36  		ld	hl,l360d
8324:	36C6  CDA628  		call	l28a6
8325:	36C9  C3CF36  		jp	l36cf
8326:	36CC          	l36cc:
8327:	36CC  CDF429  		call	l29f4
8328:	36CF          	l36cf:
8329:	36CF  C1      		pop	bc
8330:	36D0  D1      		pop	de
8331:	36D1  217225  		ld	hl,l2572
8332:	36D4  E5      		push	hl
8333:	36D5  3E01    		ld	a,1
8334:	36D7  32090C  		ld	(l0c09),a
8335:	36DA  CD4528  		call	l2845
8336:	36DD  78      		ld	a,b
8337:	36DE  CA2B37  		jp	z,l372b
8338:	36E1  F2E836  		jp	p,l36e8
8339:	36E4  B7      		or	a
8340:	36E5  CA9730  		jp	z,l3097
8341:	36E8          	l36e8:
8342:	36E8  B7      		or	a
8343:	36E9  CAF025  		jp	z,st.EXP	; .. zero exponent
8344:	36EC  D5      		push	de
8345:	36ED  C5      		push	bc
8346:	36EE  79      		ld	a,c
8347:	36EF  F67F    		or	7fh
8348:	36F1  CDB428  		call	l28b4
8349:	36F4  F21337  		jp	p,l3713
8350:	36F7  F5      		push	af
8351:	36F8  3A070C  		ld	a,($$ARG+7)
8352:	36FB  FE99    		cp	99h
8353:	36FD  DA0437  		jp	c,l3704
8354:	3700  F1      		pop	af
8355:	3701  C31337  		jp	l3713
8356:	3704          	l3704:
8357:	3704  F1      		pop	af
8358:	3705  D5      		push	de
8359:	3706  C5      		push	bc
8360:	3707  CD8D2A  		call	l2a8d
8361:	370A  C1      		pop	bc
8362:	370B  D1      		pop	de
8363:	370C  F5      		push	af
8364:	370D  CD0629  		call	l2906
8365:	3710  E1      		pop	hl
8366:	3711  7C      		ld	a,h
8367:	3712  1F      		rra
8368:	3713          	l3713:
8369:	3713  E1      		pop	hl
8370:	3714  22060C  		ld	($$ARG+6),hl
8371:	3717  E1      		pop	hl
8372:	3718  22040C  		ld	($$ARG+4),hl
8373:	371B  DCBB36  		call	c,l36bb
8374:	371E          	l371e:
8375:	371E  CC7428  		call	z,l2874
8376:	3721  D5      		push	de
8377:	3722  C5      		push	bc
8378:	3723  CDBD26  		call	l26bd
8379:	3726  C1      		pop	bc
8380:	3727  D1      		pop	de
8381:	3728  CD0327  		call	l2703
8382:			;
8383:			; Function : EXP(X)
8384:			;
8385:	372B          	l372b:
8386:	372B  013881  		ld	bc,l8138
8387:	372E  113BAA  		ld	de,laa3b
8388:	3731  CD0327  		call	l2703
8389:	3734  3A070C  		ld	a,($$ARG+7)
8390:	3737  FE88    		cp	88h
8391:	3739  D26037  		jp	nc,l3760
8392:	373C  FE68    		cp	68h
8393:	373E  DA7237  		jp	c,l3772
8394:	3741  CD9928  		call	l2899
8395:	3744  CD8D2A  		call	l2a8d
8396:	3747  C681    		add	a,81h
8397:	3749  C1      		pop	bc
8398:	374A  D1      		pop	de
8399:	374B  CA6337  		jp	z,l3763
8400:	374E  F5      		push	af
8401:	374F  CD8525  		call	l2585
8402:	3752  217B37  		ld	hl,l377b
8403:	3755  CDA737  		call	l37a7
8404:	3758  C1      		pop	bc
8405:	3759  110000  		ld	de,l0000
8406:	375C  4A      		ld	c,d
8407:	375D  C30327  		jp	l2703
8408:	3760          	l3760:
8409:	3760  CD9928  		call	l2899
8410:	3763          	l3763:
8411:	3763  3A060C  		ld	a,($$ARG+6)
8412:	3766  B7      		or	a
8413:	3767  F26F37  		jp	p,l376f
8414:	376A  F1      		pop	af
8415:	376B  F1      		pop	af
8416:	376C  C3EF25  		jp	st.ZERO		; Zero real number
8417:	376F          	l376f:
8418:	376F  C37E30  		jp	l307e
8419:	3772          	l3772:
8420:	3772  010081  		ld	bc,81h*256+0
8421:	3775  110000  		ld	de,l0000
8422:	3778  C3A928  		jp	l28a9
8423:			;
8424:	377B          	l377b:
8425:	377B  07      		db	7
8426:	377C  7C885974		db	07ch,088h,059h,074h
8427:	3780  E0972677		db	0e0h,097h,026h,077h
8428:	3784  C41D1E7A		db	0c4h,01dh,01eh,07ah
8429:	3788  5E50637C		db	05eh,050h,063h,07ch
8430:	378C  1AFE757E		db	01ah,0feh,075h,07eh
8431:	3790  18723180		db	018h,072h,031h,080h
8432:	3794  00000081		db	000h,000h,000h,081h
8433:			;
8434:			;
8435:			;
8436:	3798          	l3798:
8437:	3798  CD9928  		call	l2899
8438:	379B  11952B  		ld	de,l2b95
8439:	379E  D5      		push	de
8440:	379F  E5      		push	hl
8441:	37A0  CDB428  		call	l28b4
8442:	37A3  CD0327  		call	l2703
8443:	37A6  E1      		pop	hl
8444:	37A7          	l37a7:
8445:	37A7  CD9928  		call	l2899
8446:	37AA  7E      		ld	a,(hl)
8447:	37AB  23      		inc	hl
8448:	37AC  CDA628  		call	l28a6
8449:	37AF          		_LD.B
8450:	37B0          	l37b0:
8451:	37B0  F1      		pop	af
8452:	37B1  C1      		pop	bc
8453:	37B2  D1      		pop	de
8454:	37B3  3D      		dec	a
8455:	37B4  C8      		ret	z
8456:	37B5  D5      		push	de
8457:	37B6  C5      		push	bc
8458:	37B7  F5      		push	af
8459:	37B8  E5      		push	hl
8460:	37B9  CD0327  		call	l2703
8461:	37BC  E1      		pop	hl
8462:	37BD  CDB728  		call	l28b7
8463:	37C0  E5      		push	hl
8464:	37C1  CD8825  		call	l2588
8465:	37C4  E1      		pop	hl
8466:	37C5  C3B037  		jp	l37b0
8467:	37C8          	l37c8:
8468:	37C8  52      		ld	d,d
8469:	37C9  C7      		rst	0
8470:	37CA  4F      		ld	c,a
8471:	37CB  80      		add	a,b
8472:	37CC          	l37cc:
8473:	37CC  CD0513  		call	get.tok
8474:	37CF          	l37cf:
8475:	37CF  E5      		push	hl
8476:	37D0  219726  		ld	hl,l2697
8477:	37D3  CDA628  		call	l28a6
8478:	37D6  CDDD37  		call	l37dd
8479:	37D9  E1      		pop	hl
8480:	37DA  C3362A  		jp	tp.SNGL		; Set single precision type
8481:			;
8482:			; Function : RND[(X)]
8483:			;
8484:	37DD          	l37dd:
8485:	37DD  CD4528  		call	l2845
8486:	37E0  214838  		ld	hl,l3848
8487:	37E3  FA3E38  		jp	m,l383e
8488:	37E6  216938  		ld	hl,l3869
8489:	37E9  CDA628  		call	l28a6
8490:	37EC  214838  		ld	hl,l3848
8491:	37EF  C8      		ret	z
8492:	37F0  86      		add	a,(hl)
8493:	37F1  E607    		and	7
8494:	37F3  0600    		ld	b,0
8495:	37F5  77      		ld	(hl),a
8496:	37F6  23      		inc	hl
8497:	37F7  87      		add	a,a
8498:	37F8  87      		add	a,a
8499:	37F9  4F      		ld	c,a
8500:	37FA  09      		add	hl,bc
8501:	37FB  CDB728  		call	l28b7
8502:	37FE  CD0327  		call	l2703
8503:	3801  3A4738  		ld	a,(l3847)
8504:	3804  3C      		inc	a
8505:	3805  E603    		and	3
8506:	3807  0600    		ld	b,0
8507:	3809  FE01    		cp	1
8508:	380B  88      		adc	a,b
8509:	380C  324738  		ld	(l3847),a
8510:	380F  216938  		ld	hl,l3869
8511:	3812  87      		add	a,a
8512:	3813  87      		add	a,a
8513:	3814  4F      		ld	c,a
8514:	3815  09      		add	hl,bc
8515:	3816  CD7C25  		call	l257c
8516:	3819          	l3819:
8517:	3819  CDB428  		call	l28b4
8518:	381C  7B      		ld	a,e
8519:	381D  59      		ld	e,c
8520:	381E  EE4F    		xor	'O'
8521:	3820  4F      		ld	c,a
8522:	3821  3680    		ld	(hl),80h
8523:	3823  2B      		dec	hl
8524:	3824  46      		ld	b,(hl)
8525:	3825  3680    		ld	(hl),80h
8526:	3827  214638  		ld	hl,l3846
8527:	382A  34      		inc	(hl)
8528:	382B  7E      		ld	a,(hl)
8529:	382C  D6AB    		sub	0abh
8530:	382E  C23538  		jp	nz,l3835
8531:	3831  77      		ld	(hl),a
8532:	3832  0C      		inc	c
8533:	3833  15      		dec	d
8534:	3834  1C      		inc	e
8535:	3835          	l3835:
8536:	3835  CDDA25  		call	l25da
8537:	3838  216938  		ld	hl,l3869
8538:	383B  C3C028  		jp	l28c0
8539:	383E          	l383e:
8540:	383E  77      		ld	(hl),a
8541:	383F  2B      		dec	hl
8542:	3840  77      		ld	(hl),a
8543:	3841  2B      		dec	hl
8544:	3842  77      		ld	(hl),a
8545:	3843  C31938  		jp	l3819
8546:	3846          	l3846:
8547:	3846  00      		db	0
8548:	3847          	l3847:
8549:	3847  00      		db	0
8550:	3848          	l3848:
8551:	3848  00354ACA		db	000h,035h,04ah,0cah,099h,039h,01ch,076h
	      99391C76
8552:	3850  982295B3		db	098h,022h,095h,0b3h,098h,00ah,0ddh,047h
	      980ADD47
8553:	3858  9853D199		db	098h,053h,0d1h,099h,099h,00ah,01ah,09fh
	      990A1A9F
8554:	3860  9865BCCD		db	098h,065h,0bch,0cdh,098h,0d6h,077h,03eh
	      98D6773E
8555:	3868  98      		db	098h
8556:	3869          	l3869:
8557:	3869  52      		db	052h
8558:	386A          	l386a:
8559:	386A  C74F8068		db	0c7h,04fh,080h,068h,0b1h,046h,068h
	      B14668
8560:	3871  99E99269		db	099h,0e9h,092h,069h,010h,0d1h,075h,068h
	      10D17568
8561:			;
8562:			; Function : COS(X)
8563:			;
8564:	3879          	l3879:
8565:	3879  21FF38  		ld	hl,l38ff
8566:	387C  CD7C25  		call	l257c
8567:			;
8568:			; Function : SIN(X)
8569:			;
8570:	387F          	l387f:
8571:	387F  3A070C  		ld	a,($$ARG+7)
8572:	3882  FE77    		cp	77h
8573:	3884  D8      		ret	c
8574:	3885  3A060C  		ld	a,($$ARG+6)
8575:	3888  B7      		or	a
8576:	3889  F29538  		jp	p,l3895
8577:	388C  E67F    		and	7fh
8578:	388E  32060C  		ld	($$ARG+6),a
8579:	3891  117428  		ld	de,l2874
8580:	3894  D5      		push	de
8581:	3895          	l3895:
8582:	3895  01227E  		ld	bc,l7e22
8583:	3898  1183F9  		ld	de,lf983
8584:	389B  CD0327  		call	l2703
8585:	389E  CD9928  		call	l2899
8586:	38A1  CD8D2A  		call	l2a8d
8587:	38A4  C1      		pop	bc
8588:	38A5  D1      		pop	de
8589:	38A6  CD8525  		call	l2585
8590:	38A9  01007F  		ld	bc,l7f00
8591:	38AC  110000  		ld	de,l0000
8592:	38AF  CD0629  		call	l2906
8593:	38B2  FAD938  		jp	m,l38d9
8594:	38B5  01807F  		ld	bc,l7f80
8595:	38B8  110000  		ld	de,l0000
8596:	38BB  CD8825  		call	l2588
8597:	38BE  018080  		ld	bc,l8080
8598:	38C1  110000  		ld	de,l0000
8599:	38C4  CD8825  		call	l2588
8600:	38C7  CD4528  		call	l2845
8601:	38CA  F47428  		call	p,l2874
8602:	38CD  01007F  		ld	bc,l7f00
8603:	38D0  110000  		ld	de,l0000
8604:	38D3  CD8825  		call	l2588
8605:	38D6  CD7428  		call	l2874
8606:	38D9          	l38d9:
8607:	38D9  3A060C  		ld	a,($$ARG+6)
8608:	38DC  B7      		or	a
8609:	38DD  F5      		push	af
8610:	38DE  F2E638  		jp	p,l38e6
8611:	38E1  EE80    		xor	80h
8612:	38E3  32060C  		ld	($$ARG+6),a
8613:	38E6          	l38e6:
8614:	38E6  210739  		ld	hl,l3907
8615:	38E9  CD9837  		call	l3798
8616:	38EC  F1      		pop	af
8617:	38ED  F0      		ret	p
8618:	38EE  3A060C  		ld	a,($$ARG+6)
8619:	38F1  EE80    		xor	80h
8620:	38F3  32060C  		ld	($$ARG+6),a
8621:	38F6  C9      		ret
8622:			;
8623:	38F7  00000000		db	000h,000h,000h,000h,083h,0f9h,022h,07eh
	      83F9227E
8624:	38FF          	l38ff:
8625:	38FF  DB0F4981		db	0dbh,00fh,049h,081h,000h,000h,000h,07fh
	      0000007F
8626:	3907          	l3907:
8627:	3907  05      		db	5
8628:	3908  FBD71E86		db	0fbh,0d7h,01eh,086h
8629:	390C  65269987		db	065h,026h,099h,087h
8630:	3910  58342387		db	058h,034h,023h,087h
8631:	3914  E15DA586		db	0e1h,05dh,0a5h,086h
8632:	3918  DB0F4983		db	0dbh,00fh,049h,083h
8633:			;
8634:			; Function : TAN(X)
8635:			;
8636:	391C          	l391c:
8637:	391C  CD9928  		call	l2899
8638:	391F  CD7F38  		call	l387f
8639:	3922  C1      		pop	bc
8640:	3923  E1      		pop	hl
8641:	3924  CD9928  		call	l2899
8642:	3927  EB      		ex	de,hl
8643:	3928  CDA928  		call	l28a9
8644:	392B  CD7938  		call	l3879
8645:	392E  C36727  		jp	l2767
8646:			;
8647:			; Function : ATN(X)
8648:			;
8649:	3931          	l3931:
8650:	3931  CD4528  		call	l2845
8651:	3934  FCBB36  		call	m,l36bb
8652:	3937  FC7428  		call	m,l2874
8653:	393A  3A070C  		ld	a,($$ARG+7)
8654:	393D  FE81    		cp	81h
8655:	393F  DA4E39  		jp	c,l394e
8656:	3942  010081  		ld	bc,81h*256+0
8657:	3945  51      		ld	d,c
8658:	3946  59      		ld	e,c
8659:	3947  CD6927  		call	l2769
8660:	394A  218225  		ld	hl,l2582
8661:	394D  E5      		push	hl
8662:	394E          	l394e:
8663:	394E  215839  		ld	hl,l3958
8664:	3951  CD9837  		call	l3798
8665:	3954  21FF38  		ld	hl,l38ff
8666:	3957  C9      		ret
8667:	3958          	l3958:
8668:	3958  09      		db	9
8669:	3959  4AD73B78		db	04ah,0d7h,03bh,078h
8670:	395D  026E847B		db	002h,06eh,084h,07bh
8671:	3961  FEC12F7C		db	0feh,0c1h,02fh,07ch
8672:	3965  74319A7D		db	074h,031h,09ah,07dh
8673:	3969  843D5A7D		db	084h,03dh,05ah,07dh
8674:	396D  C87F917E		db	0c8h,07fh,091h,07eh
8675:	3971  E4BB4C7E		db	0e4h,0bbh,04ch,07eh
8676:	3975  6CAAAA7F		db	06ch,0aah,0aah,07fh
8677:	3979  00000081		db	000h,000h,000h,081h
8678:			;
8679:			; Return of DIM
8680:			;
8681:	397D          	l397d:
8682:	397D  2B      		dec	hl
8683:	397E  CD0513  		call	get.tok		; Get token
8684:	3981  C8      		ret	z		; .. aha, end of line
8685:	3982  CDD343  		call	ilcmp		; Verify delimiter
8686:	3985  2C      		db	','
8687:			;
8688:			; Statement : DIM <list of subscripted variables>
8689:			;
8690:	3986          	_DIM:
8691:	3986  017D39  		ld	bc,l397d
8692:	3989  C5      		push	bc		; Set return address
8693:	398A          		_OR			; .. and fall into DIM
8694:			;
8695:			; Fetch address of variable
8696:			;
8697:	398B          	var.adr::
8698:	398B  AF      		xor	a
8699:	398C  32660A  		ld	(l0a66),a
8700:	398F  4E      		ld	c,(hl)
8701:	3990          	l3990:
8702:	3990  CD0345  		call	isalph		; Test A..Z
8703:	3993  DAC90C  		jp	c,l0cc9		; .. nope
8704:	3996  AF      		xor	a
8705:	3997  47      		ld	b,a
8706:	3998  32C507  		ld	(l07c5),a
8707:	399B  23      		inc	hl
8708:	399C  7E      		ld	a,(hl)
8709:	399D  FE2E    		cp	'.'
8710:	399F  DAE339  		jp	c,l39e3
8711:	39A2  CAB539  		jp	z,l39b5
8712:	39A5  FE3A    		cp	'9'+1
8713:	39A7  D2AF39  		jp	nc,l39af
8714:	39AA  FE30    		cp	'0'
8715:	39AC  D2B539  		jp	nc,l39b5
8716:	39AF          	l39af:
8717:	39AF  CD0445  		call	isalph_		; Test A..Z
8718:	39B2  DAE339  		jp	c,l39e3		; .. nope
8719:	39B5          	l39b5:
8720:	39B5  47      		ld	b,a
8721:	39B6  C5      		push	bc
8722:	39B7  06FF    		ld	b,0ffh
8723:	39B9  11C507  		ld	de,l07c5
8724:	39BC          	l39bc:
8725:	39BC  F680    		or	80h
8726:	39BE  04      		inc	b
8727:	39BF  12      		ld	(de),a
8728:	39C0  13      		inc	de
8729:	39C1  23      		inc	hl
8730:	39C2  7E      		ld	a,(hl)
8731:	39C3  FE3A    		cp	'9'+1
8732:	39C5  D2CD39  		jp	nc,l39cd
8733:	39C8  FE30    		cp	'0'
8734:	39CA  D2BC39  		jp	nc,l39bc
8735:	39CD          	l39cd:
8736:	39CD  CD0445  		call	isalph_		; Test A..Z
8737:	39D0  D2BC39  		jp	nc,l39bc	; .. yeap
8738:	39D3  FE2E    		cp	'.'
8739:	39D5  CABC39  		jp	z,l39bc
8740:	39D8  78      		ld	a,b
8741:	39D9  FE27    		cp	''''
8742:	39DB  D2C90C  		jp	nc,l0cc9
8743:	39DE  C1      		pop	bc
8744:	39DF  32C507  		ld	(l07c5),a
8745:	39E2  7E      		ld	a,(hl)
8746:	39E3          	l39e3:
8747:	39E3  FE26    		cp	'&'
8748:	39E5  D2FF39  		jp	nc,l39ff
8749:	39E8  110D3A  		ld	de,l3a0d
8750:	39EB  D5      		push	de
8751:	39EC  1602    		ld	d,2
8752:	39EE  FE25    		cp	'%'
8753:	39F0  C8      		ret	z
8754:	39F1  14      		inc	d
8755:	39F2  FE24    		cp	'$'
8756:	39F4  C8      		ret	z
8757:	39F5  14      		inc	d
8758:	39F6  FE21    		cp	'!'
8759:	39F8  C8      		ret	z
8760:	39F9  1608    		ld	d,8
8761:	39FB  FE23    		cp	'#'
8762:	39FD  C8      		ret	z
8763:	39FE  F1      		pop	af
8764:	39FF          	l39ff:
8765:	39FF  79      		ld	a,c
8766:	3A00  E67F    		and	7fh
8767:	3A02  5F      		ld	e,a
8768:	3A03  1600    		ld	d,0
8769:	3A05  E5      		push	hl
8770:	3A06  21890A  		ld	hl,STR.arr+5*3	; Point to record
8771:	3A09  19      		add	hl,de
8772:	3A0A  56      		ld	d,(hl)
8773:	3A0B  E1      		pop	hl
8774:	3A0C  2B      		dec	hl
8775:	3A0D          	l3a0d:
8776:	3A0D  7A      		ld	a,d
8777:	3A0E  32670A  		ld	($ARGLEN),a	; Set length
8778:	3A11  CD0513  		call	get.tok
8779:	3A14  3AA50A  		ld	a,(l0aa5)
8780:	3A17  3D      		dec	a
8781:	3A18  CA923B  		jp	z,l3b92
8782:	3A1B  F2293A  		jp	p,l3a29
8783:	3A1E          	l3a1e:
8784:	3A1E  7E      		ld	a,(hl)
8785:	3A1F  D628    		sub	'('
8786:	3A21  CA163B  		jp	z,l3b16
8787:	3A24  D633    		sub	'3'
8788:	3A26  CA163B  		jp	z,l3b16
8789:	3A29          	l3a29:
8790:	3A29  AF      		xor	a
8791:	3A2A  32A50A  		ld	(l0aa5),a
8792:	3A2D  E5      		push	hl
8793:	3A2E  3AB70B  		ld	a,(l0bb7)
8794:	3A31  B7      		or	a
8795:	3A32  32B40B  		ld	(l0bb4),a
8796:	3A35  CA7D3A  		jp	z,l3a7d
8797:	3A38  2AE60A  		ld	hl,(l0ae6)
8798:	3A3B  11E80A  		ld	de,l0ae8
8799:	3A3E  19      		add	hl,de
8800:	3A3F  22B50B  		ld	(l0bb5),hl
8801:	3A42  EB      		ex	de,hl
8802:	3A43  C3633A  		jp	l3a63
8803:	3A46          	l3a46:
8804:	3A46  1A      		ld	a,(de)
8805:	3A47  6F      		ld	l,a
8806:	3A48  13      		inc	de
8807:	3A49  1A      		ld	a,(de)
8808:	3A4A  13      		inc	de
8809:	3A4B  B9      		cp	c
8810:	3A4C  C25B3A  		jp	nz,l3a5b
8811:	3A4F  3A670A  		ld	a,($ARGLEN)	; Get length
8812:	3A52  BD      		cp	l		; Test same
8813:	3A53  C25B3A  		jp	nz,l3a5b
8814:	3A56  1A      		ld	a,(de)
8815:	3A57  B8      		cp	b
8816:	3A58  CAE53A  		jp	z,l3ae5
8817:	3A5B          	l3a5b:
8818:	3A5B  13      		inc	de
8819:	3A5C          	l3a5c:
8820:	3A5C  1A      		ld	a,(de)
8821:	3A5D          	l3a5d:
8822:	3A5D  2600    		ld	h,0
8823:	3A5F  85      		add	a,l
8824:	3A60  3C      		inc	a
8825:	3A61  6F      		ld	l,a
8826:	3A62  19      		add	hl,de
8827:	3A63          	l3a63:
8828:	3A63  EB      		ex	de,hl
8829:	3A64  3AB50B  		ld	a,(l0bb5)
8830:	3A67  BB      		cp	e
8831:	3A68  C2463A  		jp	nz,l3a46
8832:	3A6B  3AB60B  		ld	a,(l0bb6)
8833:	3A6E  BA      		cp	d
8834:	3A6F  C2463A  		jp	nz,l3a46
8835:	3A72  3AB40B  		ld	a,(l0bb4)
8836:	3A75  B7      		or	a
8837:	3A76  CA923A  		jp	z,l3a92
8838:	3A79  AF      		xor	a
8839:	3A7A  32B40B  		ld	(l0bb4),a
8840:	3A7D          	l3a7d:
8841:	3A7D  2AC40A  		ld	hl,(l0ac4)
8842:	3A80  22B50B  		ld	(l0bb5),hl
8843:	3A83  2AC20A  		ld	hl,(prg.top)	; Get top of program
8844:	3A86  C3633A  		jp	l3a63
8845:	3A89          	l3a89:
8846:	3A89  CD8B39  		call	var.adr		; Get address of variable
8847:	3A8C          	l3a8c:
8848:	3A8C  C9      		ret
8849:	3A8D          	l3a8d:
8850:	3A8D  57      		ld	d,a
8851:	3A8E  5F      		ld	e,a
8852:	3A8F  C1      		pop	bc
8853:	3A90  E3      		ex	(sp),hl
8854:	3A91  C9      		ret
8855:	3A92          	l3a92:
8856:	3A92  E1      		pop	hl
8857:	3A93  E3      		ex	(sp),hl
8858:	3A94  D5      		push	de
8859:	3A95  118C3A  		ld	de,l3a8c
8860:	3A98  CDCD43  		call	cp.r
8861:	3A9B  CA8D3A  		jp	z,l3a8d		; HL = DE
8862:	3A9E  114D1C  		ld	de,l1c4d
8863:	3AA1  CDCD43  		call	cp.r
8864:	3AA4  D1      		pop	de
8865:	3AA5  CA003B  		jp	z,l3b00		; HL = DE
8866:	3AA8  E3      		ex	(sp),hl
8867:	3AA9  E5      		push	hl
8868:	3AAA  C5      		push	bc
8869:	3AAB  3A670A  		ld	a,($ARGLEN)	; Get length
8870:	3AAE  47      		ld	b,a
8871:	3AAF  3AC507  		ld	a,(l07c5)
8872:	3AB2  80      		add	a,b
8873:	3AB3  3C      		inc	a
8874:	3AB4  4F      		ld	c,a
8875:	3AB5  C5      		push	bc
8876:	3AB6  0600    		ld	b,0
8877:	3AB8  03      		inc	bc
8878:	3AB9  03      		inc	bc
8879:	3ABA  03      		inc	bc
8880:	3ABB  2AC60A  		ld	hl,(l0ac6)
8881:	3ABE  E5      		push	hl
8882:	3ABF  09      		add	hl,bc
8883:	3AC0  C1      		pop	bc
8884:	3AC1  E5      		push	hl
8885:	3AC2  CDB642  		call	l42b6
8886:	3AC5  E1      		pop	hl
8887:	3AC6  22C60A  		ld	(l0ac6),hl
8888:	3AC9  60      		ld	h,b
8889:	3ACA  69      		ld	l,c
8890:	3ACB  22C40A  		ld	(l0ac4),hl
8891:	3ACE          	l3ace:
8892:	3ACE  2B      		dec	hl
8893:	3ACF  3600    		ld	(hl),0
8894:	3AD1  CDCD43  		call	cp.r
8895:	3AD4  C2CE3A  		jp	nz,l3ace	; HL <> DE
8896:	3AD7  D1      		pop	de
8897:	3AD8  72      		ld	(hl),d
8898:	3AD9  23      		inc	hl
8899:	3ADA  D1      		pop	de
8900:	3ADB  73      		ld	(hl),e
8901:	3ADC  23      		inc	hl
8902:	3ADD  72      		ld	(hl),d
8903:	3ADE  CDA33C  		call	l3ca3
8904:	3AE1  EB      		ex	de,hl
8905:	3AE2  13      		inc	de
8906:	3AE3  E1      		pop	hl
8907:	3AE4  C9      		ret
8908:	3AE5          	l3ae5:
8909:	3AE5  13      		inc	de
8910:	3AE6  3AC507  		ld	a,(l07c5)
8911:	3AE9  67      		ld	h,a
8912:	3AEA  1A      		ld	a,(de)
8913:	3AEB  BC      		cp	h
8914:	3AEC  C25C3A  		jp	nz,l3a5c
8915:	3AEF  B7      		or	a
8916:	3AF0  C2F63A  		jp	nz,l3af6
8917:	3AF3  13      		inc	de
8918:	3AF4  E1      		pop	hl
8919:	3AF5  C9      		ret
8920:	3AF6          	l3af6:
8921:	3AF6  EB      		ex	de,hl
8922:	3AF7  CDB83C  		call	l3cb8
8923:	3AFA  EB      		ex	de,hl
8924:	3AFB  C25D3A  		jp	nz,l3a5d
8925:	3AFE  E1      		pop	hl
8926:	3AFF  C9      		ret
8927:	3B00          	l3b00:
8928:	3B00  32070C  		ld	($$ARG+7),a
8929:	3B03  67      		ld	h,a
8930:	3B04  6F      		ld	l,a
8931:	3B05  22040C  		ld	($$ARG+4),hl
8932:	3B08  CD641D  		call	get.type	; Get type
8933:	3B0B  C2143B  		jp	nz,l3b14	; .. not a pointer
8934:	3B0E  21440C  		ld	hl,l0c44
8935:	3B11  22040C  		ld	($$ARG+4),hl
8936:	3B14          	l3b14:
8937:	3B14  E1      		pop	hl
8938:	3B15  C9      		ret
8939:	3B16          	l3b16:
8940:	3B16  E5      		push	hl
8941:	3B17  2A660A  		ld	hl,(l0a66)
8942:	3B1A  E3      		ex	(sp),hl
8943:	3B1B  57      		ld	d,a
8944:	3B1C          	l3b1c:
8945:	3B1C  D5      		push	de
8946:	3B1D  C5      		push	bc
8947:	3B1E  11C507  		ld	de,l07c5
8948:	3B21  1A      		ld	a,(de)
8949:	3B22  B7      		or	a
8950:	3B23  CA583B  		jp	z,l3b58
8951:	3B26  EB      		ex	de,hl
8952:	3B27  C602    		add	a,2
8953:	3B29  1F      		rra
8954:	3B2A  4F      		ld	c,a
8955:	3B2B  CDC742  		call	tstmem		; Verify enough memory
8956:	3B2E  79      		ld	a,c
8957:	3B2F          	l3b2f:
8958:	3B2F  4E      		ld	c,(hl)
8959:	3B30  23      		inc	hl
8960:	3B31  46      		ld	b,(hl)
8961:	3B32  23      		inc	hl
8962:	3B33  C5      		push	bc
8963:	3B34  3D      		dec	a
8964:	3B35  C22F3B  		jp	nz,l3b2f
8965:	3B38  E5      		push	hl
8966:	3B39  3AC507  		ld	a,(l07c5)
8967:	3B3C  F5      		push	af
8968:	3B3D  EB      		ex	de,hl
8969:	3B3E  CD1114  		call	l1411
8970:	3B41  F1      		pop	af
8971:	3B42  22EC07  		ld	(l07ec),hl
8972:	3B45  E1      		pop	hl
8973:	3B46  C602    		add	a,2
8974:	3B48  1F      		rra
8975:	3B49          	l3b49:
8976:	3B49  C1      		pop	bc
8977:	3B4A  2B      		dec	hl
8978:	3B4B  70      		ld	(hl),b
8979:	3B4C  2B      		dec	hl
8980:	3B4D  71      		ld	(hl),c
8981:	3B4E  3D      		dec	a
8982:	3B4F  C2493B  		jp	nz,l3b49
8983:	3B52  2AEC07  		ld	hl,(l07ec)
8984:	3B55  C35F3B  		jp	l3b5f
8985:	3B58          	l3b58:
8986:	3B58  CD1114  		call	l1411
8987:	3B5B  AF      		xor	a
8988:	3B5C  32C507  		ld	(l07c5),a
8989:	3B5F          	l3b5f:
8990:	3B5F  3AC60B  		ld	a,(l0bc6)
8991:	3B62  B7      		or	a
8992:	3B63  CA6C3B  		jp	z,l3b6c
8993:	3B66  7A      		ld	a,d
8994:	3B67  B3      		or	e
8995:	3B68  CAD63B  		jp	z,l3bd6
8996:	3B6B  1B      		dec	de
8997:	3B6C          	l3b6c:
8998:	3B6C  C1      		pop	bc
8999:	3B6D  F1      		pop	af
9000:	3B6E  EB      		ex	de,hl
9001:	3B6F  E3      		ex	(sp),hl
9002:	3B70  E5      		push	hl
9003:	3B71  EB      		ex	de,hl
9004:	3B72  3C      		inc	a
9005:	3B73  57      		ld	d,a
9006:	3B74  7E      		ld	a,(hl)
9007:	3B75  FE2C    		cp	','
9008:	3B77  CA1C3B  		jp	z,l3b1c
9009:	3B7A  FE29    		cp	')'
9010:	3B7C  CA843B  		jp	z,l3b84
9011:	3B7F  FE5D    		cp	']'
9012:	3B81  C2C90C  		jp	nz,l0cc9
9013:	3B84          	l3b84:
9014:	3B84  CD0513  		call	get.tok
9015:	3B87  22BC0A  		ld	(l0abc),hl
9016:	3B8A  E1      		pop	hl
9017:	3B8B  22660A  		ld	(l0a66),hl
9018:	3B8E  1E00    		ld	e,0
9019:	3B90  D5      		push	de
9020:	3B91          		_LD.DE
9021:	3B92          	l3b92:
9022:	3B92  E5      		push	hl
9023:	3B93  F5      		push	af
9024:	3B94  2AC40A  		ld	hl,(l0ac4)
9025:	3B97          		_LD.A
9026:	3B98          	l3b98:
9027:	3B98  19      		add	hl,de
9028:	3B99  EB      		ex	de,hl
9029:	3B9A  2AC60A  		ld	hl,(l0ac6)
9030:	3B9D  EB      		ex	de,hl
9031:	3B9E  CDCD43  		call	cp.r
9032:	3BA1  CAF03B  		jp	z,l3bf0		; HL = DE
9033:	3BA4  5E      		ld	e,(hl)
9034:	3BA5  23      		inc	hl
9035:	3BA6  7E      		ld	a,(hl)
9036:	3BA7  23      		inc	hl
9037:	3BA8  B9      		cp	c
9038:	3BA9  C2B83B  		jp	nz,l3bb8
9039:	3BAC  3A670A  		ld	a,($ARGLEN)	; Get length
9040:	3BAF  BB      		cp	e
9041:	3BB0  C2B83B  		jp	nz,l3bb8
9042:	3BB3  7E      		ld	a,(hl)
9043:	3BB4  B8      		cp	b
9044:	3BB5  CADC3B  		jp	z,l3bdc
9045:	3BB8          	l3bb8:
9046:	3BB8  23      		inc	hl
9047:	3BB9          	l3bb9:
9048:	3BB9  5E      		ld	e,(hl)
9049:	3BBA  1C      		inc	e
9050:	3BBB  1600    		ld	d,0
9051:	3BBD  19      		add	hl,de
9052:	3BBE          	l3bbe:
9053:	3BBE  5E      		ld	e,(hl)
9054:	3BBF  23      		inc	hl
9055:	3BC0  56      		ld	d,(hl)
9056:	3BC1  23      		inc	hl
9057:	3BC2  C2983B  		jp	nz,l3b98
9058:	3BC5  3A660A  		ld	a,(l0a66)
9059:	3BC8  B7      		or	a
9060:	3BC9  C2D20C  		jp	nz,l0cd2
9061:	3BCC  F1      		pop	af
9062:	3BCD  44      		ld	b,h
9063:	3BCE  4D      		ld	c,l
9064:	3BCF  CA5727  		jp	z,l2757
9065:	3BD2  96      		sub	(hl)
9066:	3BD3  CA5D3C  		jp	z,l3c5d
9067:	3BD6          	l3bd6:
9068:	3BD6  110900  		ld	de,9		; Subscript out of range
9069:	3BD9  C3E30C  		jp	_error
9070:	3BDC          	l3bdc:
9071:	3BDC  23      		inc	hl
9072:	3BDD  3AC507  		ld	a,(l07c5)
9073:	3BE0  BE      		cp	(hl)
9074:	3BE1  C2B93B  		jp	nz,l3bb9
9075:	3BE4  23      		inc	hl
9076:	3BE5  B7      		or	a
9077:	3BE6  CABE3B  		jp	z,l3bbe
9078:	3BE9  2B      		dec	hl
9079:	3BEA  CDB83C  		call	l3cb8
9080:	3BED  C3BE3B  		jp	l3bbe
9081:	3BF0          	l3bf0:
9082:	3BF0  3A670A  		ld	a,($ARGLEN)	; Get length
9083:	3BF3  77      		ld	(hl),a
9084:	3BF4  23      		inc	hl
9085:	3BF5  5F      		ld	e,a
9086:	3BF6  1600    		ld	d,0
9087:	3BF8  F1      		pop	af
9088:	3BF9  CA963C  		jp	z,l3c96
9089:	3BFC  71      		ld	(hl),c
9090:	3BFD  23      		inc	hl
9091:	3BFE  70      		ld	(hl),b
9092:	3BFF  CDA33C  		call	l3ca3
9093:	3C02  23      		inc	hl
9094:	3C03  4F      		ld	c,a
9095:	3C04  CDC742  		call	tstmem		; Verify memory
9096:	3C07  23      		inc	hl
9097:	3C08  23      		inc	hl
9098:	3C09  229D0A  		ld	(l0a9d),hl
9099:	3C0C  71      		ld	(hl),c
9100:	3C0D  23      		inc	hl
9101:	3C0E  3A660A  		ld	a,(l0a66)
9102:	3C11  17      		rla
9103:	3C12  79      		ld	a,c
9104:	3C13          	l3c13:
9105:	3C13  DA233C  		jp	c,l3c23
9106:	3C16  F5      		push	af
9107:	3C17  3AC60B  		ld	a,(l0bc6)
9108:	3C1A  EE0B    		xor	0bh
9109:	3C1C  4F      		ld	c,a
9110:	3C1D  0600    		ld	b,0
9111:	3C1F  F1      		pop	af
9112:	3C20  D2253C  		jp	nc,l3c25
9113:	3C23          	l3c23:
9114:	3C23  C1      		pop	bc
9115:	3C24  03      		inc	bc
9116:	3C25          	l3c25:
9117:	3C25  71      		ld	(hl),c
9118:	3C26  F5      		push	af
9119:	3C27  23      		inc	hl
9120:	3C28  70      		ld	(hl),b
9121:	3C29  23      		inc	hl
9122:	3C2A  CD052B  		call	l2b05
9123:	3C2D  F1      		pop	af
9124:	3C2E  3D      		dec	a
9125:	3C2F  C2133C  		jp	nz,l3c13
9126:	3C32  F5      		push	af
9127:	3C33  42      		ld	b,d
9128:	3C34  4B      		ld	c,e
9129:	3C35  EB      		ex	de,hl
9130:	3C36  19      		add	hl,de
9131:	3C37  DADD42  		jp	c,l42dd
9132:	3C3A  CDEB42  		call	l42eb
9133:	3C3D  22C60A  		ld	(l0ac6),hl
9134:	3C40          	l3c40:
9135:	3C40  2B      		dec	hl
9136:	3C41  3600    		ld	(hl),0
9137:	3C43  CDCD43  		call	cp.r
9138:	3C46  C2403C  		jp	nz,l3c40	; HL <> DE
9139:	3C49  03      		inc	bc
9140:	3C4A  57      		ld	d,a
9141:	3C4B  2A9D0A  		ld	hl,(l0a9d)
9142:	3C4E  5E      		ld	e,(hl)
9143:	3C4F  EB      		ex	de,hl
9144:	3C50  29      		add	hl,hl
9145:	3C51  09      		add	hl,bc
9146:	3C52  EB      		ex	de,hl
9147:	3C53  2B      		dec	hl
9148:	3C54  2B      		dec	hl
9149:	3C55  73      		ld	(hl),e
9150:	3C56  23      		inc	hl
9151:	3C57  72      		ld	(hl),d
9152:	3C58  23      		inc	hl
9153:	3C59  F1      		pop	af
9154:	3C5A  DA923C  		jp	c,l3c92
9155:	3C5D          	l3c5d:
9156:	3C5D  47      		ld	b,a
9157:	3C5E  4F      		ld	c,a
9158:	3C5F  7E      		ld	a,(hl)
9159:	3C60  23      		inc	hl
9160:	3C61          		_LD.D
9161:	3C62          	l3c62:
9162:	3C62  E1      		pop	hl
9163:	3C63  5E      		ld	e,(hl)
9164:	3C64  23      		inc	hl
9165:	3C65  56      		ld	d,(hl)
9166:	3C66  23      		inc	hl
9167:	3C67  E3      		ex	(sp),hl
9168:	3C68  F5      		push	af
9169:	3C69  CDCD43  		call	cp.r
9170:	3C6C  D2D63B  		jp	nc,l3bd6	; HL >= DE
9171:	3C6F  CD052B  		call	l2b05
9172:	3C72  19      		add	hl,de
9173:	3C73  F1      		pop	af
9174:	3C74  3D      		dec	a
9175:	3C75  44      		ld	b,h
9176:	3C76  4D      		ld	c,l
9177:	3C77  C2623C  		jp	nz,l3c62
9178:	3C7A  3A670A  		ld	a,($ARGLEN)	; Get length
9179:	3C7D  44      		ld	b,h
9180:	3C7E  4D      		ld	c,l
9181:	3C7F  29      		add	hl,hl
9182:	3C80  D604    		sub	4
9183:	3C82  DA8A3C  		jp	c,l3c8a
9184:	3C85  29      		add	hl,hl
9185:	3C86  CA8F3C  		jp	z,l3c8f
9186:	3C89  29      		add	hl,hl
9187:	3C8A          	l3c8a:
9188:	3C8A  B7      		or	a
9189:	3C8B  E28F3C  		jp	po,l3c8f
9190:	3C8E  09      		add	hl,bc
9191:	3C8F          	l3c8f:
9192:	3C8F  C1      		pop	bc
9193:	3C90  09      		add	hl,bc
9194:	3C91  EB      		ex	de,hl
9195:	3C92          	l3c92:
9196:	3C92  2ABC0A  		ld	hl,(l0abc)
9197:	3C95  C9      		ret
9198:	3C96          	l3c96:
9199:	3C96  37      		scf
9200:	3C97  9F      		sbc	a,a
9201:	3C98  E1      		pop	hl
9202:	3C99  C9      		ret
9203:			;
9204:			;
9205:			;
9206:	3C9A          	l3c9a:
9207:	3C9A  7E      		ld	a,(hl)
9208:	3C9B  23      		inc	hl
9209:			;
9210:			;
9211:			;
9212:	3C9C          	l3c9c:
9213:	3C9C  C5      		push	bc
9214:	3C9D  0600    		ld	b,0
9215:	3C9F  4F      		ld	c,a
9216:	3CA0  09      		add	hl,bc
9217:	3CA1  C1      		pop	bc
9218:	3CA2  C9      		ret
9219:			;
9220:			;
9221:			;
9222:	3CA3          	l3ca3:
9223:	3CA3  C5      		push	bc
9224:	3CA4  D5      		push	de
9225:	3CA5  F5      		push	af
9226:	3CA6  11C507  		ld	de,l07c5
9227:	3CA9  1A      		ld	a,(de)		; Get length
9228:	3CAA  47      		ld	b,a
9229:	3CAB  04      		inc	b
9230:	3CAC          	l3cac:
9231:	3CAC  1A      		ld	a,(de)		; .. Unpack
9232:	3CAD  13      		inc	de
9233:	3CAE  23      		inc	hl
9234:	3CAF  77      		ld	(hl),a
9235:	3CB0  05      		dec	b
9236:	3CB1  C2AC3C  		jp	nz,l3cac
9237:	3CB4  F1      		pop	af
9238:	3CB5  D1      		pop	de
9239:	3CB6  C1      		pop	bc
9240:	3CB7  C9      		ret
9241:			;
9242:			;
9243:			;
9244:	3CB8          	l3cb8:
9245:	3CB8  D5      		push	de
9246:	3CB9  C5      		push	bc
9247:	3CBA  11C607  		ld	de,l07c6
9248:	3CBD  47      		ld	b,a		; Set length
9249:	3CBE  23      		inc	hl
9250:	3CBF  04      		inc	b
9251:	3CC0          	l3cc0:
9252:	3CC0  05      		dec	b
9253:	3CC1  CAD23C  		jp	z,l3cd2
9254:	3CC4  1A      		ld	a,(de)
9255:	3CC5  13      		inc	de
9256:	3CC6  BE      		cp	(hl)		; .. compare
9257:	3CC7  23      		inc	hl
9258:	3CC8  CAC03C  		jp	z,l3cc0
9259:	3CCB  78      		ld	a,b
9260:	3CCC  3D      		dec	a
9261:	3CCD  C49C3C  		call	nz,l3c9c
9262:	3CD0  AF      		xor	a
9263:	3CD1  3D      		dec	a
9264:	3CD2          	l3cd2:
9265:	3CD2  C1      		pop	bc
9266:	3CD3  D1      		pop	de
9267:	3CD4  C9      		ret
9268:			;
9269:			;
9270:			;
9271:	3CD5          	l3cd5:
9272:	3CD5  328A07  		ld	(err.num),a	; Set error number
9273:	3CD8  2AB30A  		ld	hl,(direct_2)	; Get direct mode
9274:	3CDB  B4      		or	h
9275:	3CDC  A5      		and	l
9276:	3CDD  3C      		inc	a
9277:	3CDE  EB      		ex	de,hl
9278:	3CDF  C8      		ret	z		; .. -1 is direct, end
9279:	3CE0  C3E73C  		jp	l3ce7
9280:			;
9281:			; Statement : EDIT <line number>
9282:			;
9283:	3CE3          	l3ce3:
9284:	3CE3  CD1D14  		call	l141d
9285:	3CE6  C0      		ret	nz
9286:	3CE7          	l3ce7:
9287:	3CE7  E1      		pop	hl
9288:	3CE8          	l3ce8:
9289:	3CE8  EB      		ex	de,hl
9290:	3CE9  22B50A  		ld	(l0ab5),hl
9291:	3CEC  EB      		ex	de,hl
9292:	3CED  CDF80E  		call	l0ef8
9293:	3CF0  D2CC14  		jp	nc,l14cc
9294:	3CF3  60      		ld	h,b
9295:	3CF4  69      		ld	l,c
9296:	3CF5  23      		inc	hl
9297:	3CF6  23      		inc	hl
9298:	3CF7  4E      		ld	c,(hl)
9299:	3CF8  23      		inc	hl
9300:	3CF9  46      		ld	b,(hl)
9301:	3CFA  23      		inc	hl
9302:	3CFB  C5      		push	bc
9303:	3CFC  CDE620  		call	l20e6
9304:	3CFF          	l3cff:
9305:	3CFF  E1      		pop	hl
9306:			;
9307:			; -> Edit entry from outer space
9308:			;
9309:	3D00          	__EDIT::
9310:	3D00  E5      		push	hl
9311:	3D01  7C      		ld	a,h
9312:	3D02  A5      		and	l
9313:	3D03  3C      		inc	a
9314:	3D04  3E21    		ld	a,'!'
9315:	3D06  CCD640  		call	z,putchar
9316:	3D09  C41A31  		call	nz,l311a
9317:	3D0C  3E20    		ld	a,' '
9318:	3D0E  CDD640  		call	putchar
9319:	3D11  216209  		ld	hl,$LINE	; Init pointer
9320:	3D14  E5      		push	hl
9321:	3D15  0EFF    		ld	c,-1
9322:	3D17          	l3d17:
9323:	3D17  0C      		inc	c
9324:	3D18  7E      		ld	a,(hl)
9325:	3D19  23      		inc	hl
9326:	3D1A  B7      		or	a
9327:	3D1B  C2173D  		jp	nz,l3d17
9328:	3D1E  E1      		pop	hl
9329:	3D1F  47      		ld	b,a
9330:	3D20          	l3d20:
9331:	3D20  1600    		ld	d,0
9332:	3D22          	l3d22:
9333:	3D22  CDF541  		call	conin		; Get character
9334:	3D25  B7      		or	a
9335:	3D26  CA223D  		jp	z,l3d22		; .. wait for any
9336:	3D29  CD5B1C  		call	toupper		; .. as upper case
9337:	3D2C  D630    		sub	'0'		; Test number
9338:	3D2E  DA413D  		jp	c,l3d41		; .. nope
9339:	3D31  FE0A    		cp	9+1
9340:	3D33  D2413D  		jp	nc,l3d41
9341:	3D36  5F      		ld	e,a
9342:	3D37  7A      		ld	a,d
9343:	3D38  07      		rlca
9344:	3D39  07      		rlca
9345:	3D3A  82      		add	a,d
9346:	3D3B  07      		rlca
9347:	3D3C  83      		add	a,e
9348:	3D3D  57      		ld	d,a
9349:	3D3E  C3223D  		jp	l3d22
9350:	3D41          	l3d41:
9351:	3D41  E5      		push	hl
9352:	3D42  21203D  		ld	hl,l3d20
9353:	3D45  E3      		ex	(sp),hl
9354:	3D46  15      		dec	d
9355:	3D47  14      		inc	d
9356:	3D48  C24C3D  		jp	nz,l3d4c
9357:	3D4B  14      		inc	d
9358:	3D4C          	l3d4c:
9359:	3D4C  FED8    		cp	bs-'0'
9360:	3D4E  CABA3E  		jp	z,l3eba
9361:	3D51  FE4F    		cp	rubout-'0'
9362:	3D53  CAC93E  		jp	z,l3ec9
9363:	3D56  FEDD    		cp	cr-'0'
9364:	3D58  CAD73E  		jp	z,l3ed7
9365:	3D5B  FEF0    		cp	' '-'0'
9366:	3D5D  CAA83D  		jp	z,l3da8
9367:	3D60  FE31    		cp	'a'-'0'
9368:	3D62  DA673D  		jp	c,l3d67
9369:	3D65  D620    		sub	'a'-'A'
9370:	3D67          	l3d67:
9371:	3D67  FE21    		cp	'Q'-'0'
9372:	3D69  CAEC3E  		jp	z,l3eec
9373:	3D6C  FE1C    		cp	'L'-'0'
9374:	3D6E  CAE23D  		jp	z,l3de2
9375:	3D71  FE23    		cp	'S'-'0'
9376:	3D73  CABB3D  		jp	z,l3dbb
9377:	3D76  FE19    		cp	'I'-'0'
9378:	3D78  CA3E3E  		jp	z,l3e3e
9379:	3D7B  FE14    		cp	'D'-'0'
9380:	3D7D  CAEC3D  		jp	z,l3dec
9381:	3D80  FE13    		cp	'C'-'0'
9382:	3D82  CA093E  		jp	z,l3e09
9383:	3D85  FE15    		cp	'E'-'0'
9384:	3D87  CADA3E  		jp	z,l3eda
9385:	3D8A  FE28    		cp	'X'-'0'
9386:	3D8C  CA393E  		jp	z,l3e39
9387:	3D8F  FE1B    		cp	'K'-'0'
9388:	3D91  CAB53D  		jp	z,l3db5
9389:	3D94  FE18    		cp	'H'-'0'
9390:	3D96  CA363E  		jp	z,l3e36
9391:	3D99  FE11    		cp	'A'-'0'
9392:	3D9B  3E07    		ld	a,bell
9393:	3D9D  C2D640  		jp	nz,putchar
9394:			;
9395:			; -> A : Restart editing
9396:			;
9397:	3DA0  C1      		pop	bc
9398:	3DA1  D1      		pop	de
9399:	3DA2  CD2142  		call	fnl		; Give new line
9400:	3DA5  C3E83C  		jp	l3ce8
9401:			;
9402:			; -> Space
9403:			;
9404:	3DA8          	l3da8:
9405:	3DA8  7E      		ld	a,(hl)
9406:	3DA9  B7      		or	a
9407:	3DAA  C8      		ret	z
9408:	3DAB  04      		inc	b
9409:	3DAC  CDA542  		call	l42a5		; Print character, test new line
9410:	3DAF  23      		inc	hl
9411:	3DB0  15      		dec	d
9412:	3DB1  C2A83D  		jp	nz,l3da8
9413:	3DB4  C9      		ret
9414:			;
9415:			; -> K : Search and delete string
9416:			;
9417:	3DB5          	l3db5:
9418:	3DB5  E5      		push	hl
9419:	3DB6  21033E  		ld	hl,l3e03
9420:	3DB9  E3      		ex	(sp),hl
9421:	3DBA  37      		scf
9422:			;
9423:			; -> S : Search for string
9424:			;
9425:	3DBB          	l3dbb:
9426:	3DBB  F5      		push	af
9427:	3DBC  CDF541  		call	conin		; Get character
9428:	3DBF  5F      		ld	e,a
9429:	3DC0  F1      		pop	af
9430:	3DC1  F5      		push	af
9431:	3DC2  DC033E  		call	c,l3e03
9432:	3DC5          	l3dc5:
9433:	3DC5  7E      		ld	a,(hl)
9434:	3DC6  B7      		or	a
9435:	3DC7  CAE03D  		jp	z,l3de0
9436:	3DCA  CDA542  		call	l42a5		; Print character, test new line
9437:	3DCD  F1      		pop	af
9438:	3DCE  F5      		push	af
9439:	3DCF  DC813E  		call	c,l3e81
9440:	3DD2  DAD73D  		jp	c,l3dd7
9441:	3DD5  23      		inc	hl
9442:	3DD6  04      		inc	b
9443:	3DD7          	l3dd7:
9444:	3DD7  7E      		ld	a,(hl)
9445:	3DD8  BB      		cp	e
9446:	3DD9  C2C53D  		jp	nz,l3dc5
9447:	3DDC  15      		dec	d
9448:	3DDD  C2C53D  		jp	nz,l3dc5
9449:	3DE0          	l3de0:
9450:	3DE0  F1      		pop	af
9451:	3DE1  C9      		ret
9452:			;
9453:			; -> L : List remainder of line
9454:			;
9455:	3DE2          	l3de2:
9456:	3DE2  CDDC20  		call	l20dc		; Print it
9457:	3DE5  CD2142  		call	fnl		; Give new line
9458:	3DE8  C1      		pop	bc
9459:	3DE9  C3FF3C  		jp	l3cff
9460:			;
9461:			; -> D : Delete character(s) to the right
9462:			;
9463:	3DEC          	l3dec:
9464:	3DEC  7E      		ld	a,(hl)
9465:	3DED  B7      		or	a
9466:	3DEE  C8      		ret	z
9467:	3DEF  3E5C    		ld	a,'\'
9468:	3DF1  CDA542  		call	l42a5		; Print character, test new line
9469:	3DF4          	l3df4:
9470:	3DF4  7E      		ld	a,(hl)
9471:	3DF5  B7      		or	a
9472:	3DF6  CA033E  		jp	z,l3e03
9473:	3DF9  CDA542  		call	l42a5		; Print character, test new line
9474:	3DFC  CD813E  		call	l3e81
9475:	3DFF  15      		dec	d
9476:	3E00  C2F43D  		jp	nz,l3df4
9477:	3E03          	l3e03:
9478:	3E03  3E5C    		ld	a,'\'
9479:	3E05  CDD640  		call	putchar
9480:	3E08  C9      		ret
9481:			;
9482:			; -> C : Change text
9483:			;
9484:	3E09          	l3e09:
9485:	3E09  7E      		ld	a,(hl)
9486:	3E0A  B7      		or	a
9487:	3E0B  C8      		ret	z
9488:	3E0C          	l3e0c:
9489:	3E0C  CDF541  		call	conin		; Get character
9490:	3E0F  FE20    		cp	' '		; Test valid input
9491:	3E11  D22B3E  		jp	nc,l3e2b
9492:	3E14  FE0A    		cp	lf
9493:	3E16  CA2B3E  		jp	z,l3e2b
9494:	3E19  FE07    		cp	bell
9495:	3E1B  CA2B3E  		jp	z,l3e2b
9496:	3E1E          	l3e1e:
9497:	3E1E  FE09    		cp	tab
9498:	3E20  CA2B3E  		jp	z,l3e2b
9499:	3E23  3E07    		ld	a,bell
9500:	3E25  CDD640  		call	putchar
9501:	3E28  C30C3E  		jp	l3e0c
9502:	3E2B          	l3e2b:
9503:	3E2B  77      		ld	(hl),a
9504:	3E2C  CDA542  		call	l42a5		; Print character, test new line
9505:	3E2F  23      		inc	hl
9506:	3E30  04      		inc	b
9507:	3E31  15      		dec	d
9508:	3E32  C2093E  		jp	nz,l3e09
9509:	3E35  C9      		ret
9510:			;
9511:			; -> H : Delete all characters to the right
9512:			;
9513:	3E36          	l3e36:
9514:	3E36  3600    		ld	(hl),0
9515:	3E38  48      		ld	c,b
9516:			;
9517:			; -> X : Extend line
9518:			;
9519:	3E39          	l3e39:
9520:	3E39  16FF    		ld	d,0ffh
9521:	3E3B  CDA83D  		call	l3da8
9522:			;
9523:			; -> I : Insert text
9524:			;
9525:	3E3E          	l3e3e:
9526:	3E3E  CDF541  		call	conin		; Get character
9527:	3E41  FE7F    		cp	rubout
9528:	3E43  CA713E  		jp	z,l3e71
9529:	3E46  FE08    		cp	bs
9530:	3E48  CA733E  		jp	z,l3e73
9531:	3E4B  FE0D    		cp	cr
9532:	3E4D  CAD73E  		jp	z,l3ed7
9533:	3E50  FE1B    		cp	esc
9534:	3E52  C8      		ret	z
9535:	3E53  FE08    		cp	bs		; *** WHY AGAIN ??
9536:	3E55  CA733E  		jp	z,l3e73
9537:	3E58  FE0A    		cp	lf
9538:	3E5A  CA913E  		jp	z,l3e91
9539:	3E5D  FE07    		cp	bell
9540:	3E5F  CA913E  		jp	z,l3e91
9541:	3E62  FE09    		cp	tab
9542:	3E64  CA913E  		jp	z,l3e91
9543:	3E67  FE20    		cp	' '
9544:	3E69  DA3E3E  		jp	c,l3e3e
9545:	3E6C  FE5F    		cp	'_'
9546:	3E6E  C2913E  		jp	nz,l3e91
9547:			;
9548:			; -> Rubout in I-mode
9549:			;
9550:	3E71          	l3e71:
9551:	3E71  3E5F    		ld	a,'_'
9552:			;
9553:			; -> Backspace in I-mode
9554:			;
9555:	3E73          	l3e73:
9556:	3E73  05      		dec	b
9557:	3E74  04      		inc	b
9558:	3E75  CA993E  		jp	z,l3e99
9559:	3E78  CDA542  		call	l42a5		; Print character, test new line
9560:	3E7B  2B      		dec	hl
9561:	3E7C  05      		dec	b
9562:	3E7D  113E3E  		ld	de,l3e3e
9563:	3E80  D5      		push	de
9564:	3E81          	l3e81:
9565:	3E81  E5      		push	hl
9566:	3E82  0D      		dec	c
9567:	3E83          	l3e83:
9568:	3E83  7E      		ld	a,(hl)
9569:	3E84  B7      		or	a
9570:	3E85  37      		scf
9571:	3E86  CA5727  		jp	z,l2757
9572:	3E89  23      		inc	hl
9573:	3E8A  7E      		ld	a,(hl)
9574:	3E8B  2B      		dec	hl
9575:	3E8C  77      		ld	(hl),a
9576:	3E8D  23      		inc	hl
9577:	3E8E  C3833E  		jp	l3e83
9578:			;
9579:			; -> Several control-cgars in I-mode
9580:			;
9581:	3E91          	l3e91:
9582:	3E91  F5      		push	af
9583:	3E92  79      		ld	a,c
9584:	3E93  FEFF    		cp	0ffh
9585:	3E95  DAA13E  		jp	c,l3ea1
9586:	3E98  F1      		pop	af
9587:	3E99          	l3e99:
9588:	3E99  3E07    		ld	a,bell
9589:	3E9B  CDD640  		call	putchar
9590:	3E9E          	l3e9e:
9591:	3E9E  C33E3E  		jp	l3e3e
9592:	3EA1          	l3ea1:
9593:	3EA1  90      		sub	b
9594:	3EA2  0C      		inc	c
9595:	3EA3  04      		inc	b
9596:	3EA4  C5      		push	bc
9597:	3EA5  EB      		ex	de,hl
9598:	3EA6  6F      		ld	l,a
9599:	3EA7  2600    		ld	h,0
9600:	3EA9  19      		add	hl,de
9601:	3EAA  44      		ld	b,h
9602:	3EAB  4D      		ld	c,l
9603:	3EAC  23      		inc	hl
9604:	3EAD  CDB942  		call	l42b9
9605:	3EB0  C1      		pop	bc
9606:	3EB1  F1      		pop	af
9607:	3EB2  77      		ld	(hl),a
9608:	3EB3  CDA542  		call	l42a5		; Print character, test new line
9609:	3EB6  23      		inc	hl
9610:	3EB7  C39E3E  		jp	l3e9e
9611:			;
9612:			; -> Backspace
9613:			;
9614:	3EBA          	l3eba:
9615:	3EBA  78      		ld	a,b
9616:	3EBB  B7      		or	a
9617:	3EBC  C8      		ret	z
9618:	3EBD  2B      		dec	hl
9619:	3EBE  3E08    		ld	a,bs
9620:	3EC0  CDA542  		call	l42a5		; Print character, test new line
9621:	3EC3  05      		dec	b
9622:	3EC4  15      		dec	d
9623:	3EC5  C2C93E  		jp	nz,l3ec9
9624:	3EC8  C9      		ret
9625:			;
9626:			; -> Rubout
9627:			;
9628:	3EC9          	l3ec9:
9629:	3EC9  78      		ld	a,b
9630:	3ECA  B7      		or	a
9631:	3ECB  C8      		ret	z
9632:	3ECC  05      		dec	b
9633:	3ECD  2B      		dec	hl
9634:	3ECE  7E      		ld	a,(hl)
9635:	3ECF  CDA542  		call	l42a5		; Print character, test new line
9636:	3ED2  15      		dec	d
9637:	3ED3  C2C93E  		jp	nz,l3ec9
9638:	3ED6  C9      		ret
9639:			;
9640:			; -> Return
9641:			;
9642:	3ED7          	l3ed7:
9643:	3ED7  CDDC20  		call	l20dc		; Print line
9644:			;
9645:			; -> E : Return, but do not print remainder
9646:			;
9647:	3EDA          	l3eda:
9648:	3EDA  CD2142  		call	fnl		; Give new line
9649:	3EDD  C1      		pop	bc
9650:	3EDE  D1      		pop	de
9651:	3EDF  7A      		ld	a,d
9652:	3EE0  A3      		and	e
9653:	3EE1  3C      		inc	a
9654:	3EE2          	l3ee2:
9655:	3EE2  216109  		ld	hl,l0961
9656:	3EE5  C8      		ret	z
9657:	3EE6  37      		scf
9658:	3EE7  F5      		push	af
9659:	3EE8  23      		inc	hl
9660:	3EE9  C3140E  		jp	l0e14
9661:			;
9662:			; -> Q : Return to MS BASIC level
9663:			;
9664:	3EEC          	l3eec:
9665:	3EEC  C1      		pop	bc
9666:	3EED  D1      		pop	de
9667:	3EEE  7A      		ld	a,d
9668:	3EEF  A3      		and	e
9669:	3EF0  3C      		inc	a
9670:	3EF1  CA1C42  		jp	z,l421c
9671:	3EF4  C3870D  		jp	l0d87
9672:	3EF7          	l3ef7:
9673:	3EF7  CD031A  		call	l1a03
9674:	3EFA  CD3B2A  		call	vrf.str		; Verify string follows
9675:	3EFD  CDD343  		call	ilcmp
9676:	3F00  3B      		db	';'
9677:	3F01  EB      		ex	de,hl
9678:	3F02  2A040C  		ld	hl,($$ARG+4)
9679:	3F05  C3113F  		jp	l3f11
9680:	3F08          	l3f08:
9681:	3F08  3AA60A  		ld	a,(l0aa6)
9682:	3F0B  B7      		or	a
9683:	3F0C  CA1B3F  		jp	z,l3f1b
9684:	3F0F  D1      		pop	de
9685:	3F10  EB      		ex	de,hl
9686:	3F11          	l3f11:
9687:	3F11  E5      		push	hl
9688:	3F12  AF      		xor	a
9689:	3F13  32A60A  		ld	(l0aa6),a
9690:	3F16  3C      		inc	a
9691:	3F17  F5      		push	af
9692:	3F18  D5      		push	de
9693:	3F19  46      		ld	b,(hl)
9694:	3F1A  B0      		or	b
9695:	3F1B          	l3f1b:
9696:	3F1B  CA1814  		jp	z,_ill.func	; Invalid call
9697:	3F1E          	l3f1e:
9698:	3F1E  23      		inc	hl
9699:	3F1F  7E      		ld	a,(hl)
9700:	3F20  23      		inc	hl
9701:	3F21  66      		ld	h,(hl)
9702:	3F22  6F      		ld	l,a
9703:	3F23  C3453F  		jp	l3f45
9704:	3F26          	l3f26:
9705:	3F26  58      		ld	e,b
9706:	3F27  E5      		push	hl
9707:	3F28  0E02    		ld	c,2
9708:	3F2A          	l3f2a:
9709:	3F2A  7E      		ld	a,(hl)
9710:	3F2B  23      		inc	hl
9711:	3F2C  FE5C    		cp	'\'
9712:	3F2E  CA9140  		jp	z,l4091
9713:	3F31  FE20    		cp	' '
9714:	3F33  C23B3F  		jp	nz,l3f3b
9715:	3F36  0C      		inc	c
9716:	3F37  05      		dec	b
9717:	3F38  C22A3F  		jp	nz,l3f2a
9718:	3F3B          	l3f3b:
9719:	3F3B  E1      		pop	hl
9720:	3F3C  43      		ld	b,e
9721:	3F3D  3E5C    		ld	a,'\'
9722:	3F3F          	l3f3f:
9723:	3F3F  CDCC40  		call	l40cc
9724:	3F42  CDD640  		call	putchar
9725:	3F45          	l3f45:
9726:	3F45  AF      		xor	a
9727:	3F46  5F      		ld	e,a
9728:	3F47  57      		ld	d,a
9729:	3F48          	l3f48:
9730:	3F48  CDCC40  		call	l40cc
9731:	3F4B  57      		ld	d,a
9732:	3F4C  7E      		ld	a,(hl)
9733:	3F4D  23      		inc	hl
9734:	3F4E  FE21    		cp	'!'
9735:	3F50  CA8E40  		jp	z,l408e
9736:	3F53  FE23    		cp	'#'
9737:	3F55  CAA13F  		jp	z,l3fa1
9738:	3F58  FE26    		cp	'&'
9739:	3F5A  CA8940  		jp	z,l4089
9740:	3F5D  05      		dec	b
9741:	3F5E  CA6740  		jp	z,l4067
9742:	3F61  FE2B    		cp	'+'
9743:	3F63  3E08    		ld	a,8
9744:	3F65  CA483F  		jp	z,l3f48
9745:	3F68  2B      		dec	hl
9746:	3F69  7E      		ld	a,(hl)
9747:	3F6A  23      		inc	hl
9748:	3F6B  FE2E    		cp	'.'
9749:	3F6D  CAC03F  		jp	z,l3fc0
9750:	3F70  FE5F    		cp	'_'
9751:	3F72  CA7D40  		jp	z,l407d
9752:	3F75  FE5C    		cp	'\'
9753:	3F77  CA263F  		jp	z,l3f26
9754:	3F7A  BE      		cp	(hl)
9755:	3F7B  C23F3F  		jp	nz,l3f3f
9756:	3F7E  FE24    		cp	'$'
9757:	3F80  CA9A3F  		jp	z,l3f9a
9758:	3F83  FE2A    		cp	'*'
9759:	3F85  C23F3F  		jp	nz,l3f3f
9760:	3F88  78      		ld	a,b
9761:	3F89  23      		inc	hl
9762:	3F8A  FE02    		cp	2
9763:	3F8C  DA923F  		jp	c,l3f92
9764:	3F8F  7E      		ld	a,(hl)
9765:	3F90  FE24    		cp	'$'
9766:	3F92          	l3f92:
9767:	3F92  3E20    		ld	a,' '
9768:	3F94  C29E3F  		jp	nz,l3f9e
9769:	3F97  05      		dec	b
9770:	3F98  1C      		inc	e
9771:	3F99          		_CP
9772:	3F9A          	l3f9a:
9773:	3F9A  AF      		xor	a
9774:	3F9B  C610    		add	a,10h
9775:	3F9D  23      		inc	hl
9776:	3F9E          	l3f9e:
9777:	3F9E  1C      		inc	e
9778:	3F9F  82      		add	a,d
9779:	3FA0  57      		ld	d,a
9780:	3FA1          	l3fa1:
9781:	3FA1  1C      		inc	e
9782:	3FA2  0E00    		ld	c,0
9783:	3FA4  05      		dec	b
9784:	3FA5  CAF63F  		jp	z,l3ff6
9785:	3FA8  7E      		ld	a,(hl)
9786:	3FA9  23      		inc	hl
9787:	3FAA  FE2E    		cp	'.'
9788:	3FAC  CACB3F  		jp	z,l3fcb
9789:	3FAF  FE23    		cp	'#'
9790:	3FB1  CAA13F  		jp	z,l3fa1
9791:	3FB4  FE2C    		cp	','
9792:	3FB6  C2D73F  		jp	nz,l3fd7
9793:	3FB9  7A      		ld	a,d
9794:	3FBA  F640    		or	01000000b
9795:	3FBC  57      		ld	d,a
9796:	3FBD  C3A13F  		jp	l3fa1
9797:	3FC0          	l3fc0:
9798:	3FC0  7E      		ld	a,(hl)
9799:	3FC1  FE23    		cp	'#'
9800:	3FC3  3E2E    		ld	a,'.'
9801:	3FC5  C23F3F  		jp	nz,l3f3f
9802:	3FC8  0E01    		ld	c,1
9803:	3FCA  23      		inc	hl
9804:	3FCB          	l3fcb:
9805:	3FCB  0C      		inc	c
9806:	3FCC  05      		dec	b
9807:	3FCD  CAF63F  		jp	z,l3ff6
9808:	3FD0  7E      		ld	a,(hl)
9809:	3FD1  23      		inc	hl
9810:	3FD2  FE23    		cp	'#'
9811:	3FD4  CACB3F  		jp	z,l3fcb
9812:	3FD7          	l3fd7:
9813:	3FD7  D5      		push	de
9814:	3FD8  11F43F  		ld	de,l3ff4
9815:	3FDB  D5      		push	de
9816:	3FDC  54      		ld	d,h
9817:	3FDD  5D      		ld	e,l
9818:	3FDE  FE5E    		cp	'^'
9819:	3FE0  C0      		ret	nz
9820:	3FE1  BE      		cp	(hl)
9821:	3FE2  C0      		ret	nz
9822:	3FE3  23      		inc	hl
9823:	3FE4  BE      		cp	(hl)
9824:	3FE5  C0      		ret	nz
9825:	3FE6  23      		inc	hl
9826:	3FE7  BE      		cp	(hl)
9827:	3FE8  C0      		ret	nz
9828:	3FE9  23      		inc	hl
9829:	3FEA  78      		ld	a,b
9830:	3FEB  D604    		sub	4
9831:	3FED  D8      		ret	c
9832:	3FEE  D1      		pop	de
9833:	3FEF  D1      		pop	de
9834:	3FF0  47      		ld	b,a
9835:	3FF1  14      		inc	d
9836:	3FF2  23      		inc	hl
9837:	3FF3          		_JP.Z
9838:	3FF4          	l3ff4:
9839:	3FF4  EB      		ex	de,hl
9840:	3FF5  D1      		pop	de
9841:	3FF6          	l3ff6:
9842:	3FF6  7A      		ld	a,d
9843:	3FF7  2B      		dec	hl
9844:	3FF8  1C      		inc	e
9845:	3FF9  E608    		and	8
9846:	3FFB  C21640  		jp	nz,l4016
9847:	3FFE  1D      		dec	e
9848:	3FFF  78      		ld	a,b
9849:	4000  B7      		or	a
9850:	4001  CA1640  		jp	z,l4016
9851:	4004  7E      		ld	a,(hl)
9852:	4005  D62D    		sub	'-'
9853:	4007  CA1140  		jp	z,l4011
9854:	400A  FEFE    		cp	0feh
9855:	400C  C21640  		jp	nz,l4016
9856:	400F  3E08    		ld	a,8
9857:	4011          	l4011:
9858:	4011  C604    		add	a,4
9859:	4013  82      		add	a,d
9860:	4014  57      		ld	d,a
9861:	4015  05      		dec	b
9862:	4016          	l4016:
9863:	4016  E1      		pop	hl
9864:	4017  F1      		pop	af
9865:	4018  CA7240  		jp	z,l4072
9866:	401B  C5      		push	bc
9867:	401C  D5      		push	de
9868:	401D  CD021A  		call	EXPR		; Get expression
9869:	4020  D1      		pop	de
9870:	4021  C1      		pop	bc
9871:	4022  C5      		push	bc
9872:	4023  E5      		push	hl
9873:	4024  43      		ld	b,e
9874:	4025  78      		ld	a,b
9875:	4026  81      		add	a,c
9876:	4027  FE19    		cp	19h
9877:	4029  D21814  		jp	nc,_ill.func	; Invalid call
9878:	402C  7A      		ld	a,d
9879:	402D  F680    		or	80h
9880:	402F  CD2A31  		call	l312a
9881:	4032  CD2347  		call	l4723
9882:	4035          	l4035:
9883:	4035  E1      		pop	hl
9884:	4036  2B      		dec	hl
9885:	4037  CD0513  		call	get.tok
9886:	403A  37      		scf
9887:	403B  CA4E40  		jp	z,l404e
9888:	403E  32A60A  		ld	(l0aa6),a
9889:	4041  FE3B    		cp	';'
9890:	4043  CA4B40  		jp	z,l404b
9891:	4046  FE2C    		cp	','
9892:	4048  C2C90C  		jp	nz,l0cc9
9893:	404B          	l404b:
9894:	404B  CD0513  		call	get.tok
9895:	404E          	l404e:
9896:	404E  C1      		pop	bc
9897:	404F  EB      		ex	de,hl
9898:	4050  E1      		pop	hl
9899:	4051  E5      		push	hl
9900:	4052  F5      		push	af
9901:	4053  D5      		push	de
9902:	4054  7E      		ld	a,(hl)
9903:	4055  90      		sub	b
9904:	4056  23      		inc	hl
9905:	4057  1600    		ld	d,0
9906:	4059  5F      		ld	e,a
9907:	405A  7E      		ld	a,(hl)
9908:	405B  23      		inc	hl
9909:	405C  66      		ld	h,(hl)
9910:	405D  6F      		ld	l,a
9911:	405E  19      		add	hl,de
9912:	405F          	l405f:
9913:	405F  78      		ld	a,b
9914:	4060  B7      		or	a
9915:	4061  C2453F  		jp	nz,l3f45
9916:	4064  C36D40  		jp	l406d
9917:	4067          	l4067:
9918:	4067  CDCC40  		call	l40cc
9919:	406A  CDD640  		call	putchar
9920:	406D          	l406d:
9921:	406D  E1      		pop	hl
9922:	406E  F1      		pop	af
9923:	406F  C2083F  		jp	nz,l3f08
9924:	4072          	l4072:
9925:	4072  DC2142  		call	c,fnl		; Give new line
9926:	4075  E3      		ex	(sp),hl
9927:	4076  CDAB48  		call	l48ab
9928:	4079  E1      		pop	hl
9929:	407A  C3E917  		jp	clr.FP		; Reset file I/O
9930:	407D          	l407d:
9931:	407D  CDCC40  		call	l40cc
9932:	4080  05      		dec	b
9933:	4081  7E      		ld	a,(hl)
9934:	4082  23      		inc	hl
9935:	4083  CDD640  		call	putchar
9936:	4086  C35F40  		jp	l405f
9937:	4089          	l4089:
9938:	4089  0E00    		ld	c,0
9939:	408B  C39240  		jp	l4092
9940:	408E          	l408e:
9941:	408E  0E01    		ld	c,1
9942:	4090          		_LD.A
9943:	4091          	l4091:
9944:	4091  F1      		pop	af
9945:	4092          	l4092:
9946:	4092  05      		dec	b
9947:	4093  CDCC40  		call	l40cc
9948:	4096  E1      		pop	hl
9949:	4097  F1      		pop	af
9950:	4098  CA7240  		jp	z,l4072
9951:	409B  C5      		push	bc
9952:	409C  CD021A  		call	EXPR		; Get expression
9953:	409F  CD3B2A  		call	vrf.str		; Verify string follows
9954:	40A2  C1      		pop	bc
9955:	40A3  C5      		push	bc
9956:	40A4  E5      		push	hl
9957:	40A5  2A040C  		ld	hl,($$ARG+4)
9958:	40A8  41      		ld	b,c
9959:	40A9  0E00    		ld	c,0
9960:	40AB  78      		ld	a,b
9961:	40AC  F5      		push	af
9962:	40AD  78      		ld	a,b
9963:	40AE  B7      		or	a
9964:	40AF  C44F49  		call	nz,l494f
9965:	40B2  CD2647  		call	l4726
9966:	40B5  2A040C  		ld	hl,($$ARG+4)
9967:	40B8  F1      		pop	af
9968:	40B9  B7      		or	a
9969:	40BA  CA3540  		jp	z,l4035
9970:	40BD  96      		sub	(hl)
9971:	40BE  47      		ld	b,a
9972:	40BF  3E20    		ld	a,' '
9973:	40C1  04      		inc	b
9974:	40C2          	l40c2:
9975:	40C2  05      		dec	b
9976:	40C3  CA3540  		jp	z,l4035
9977:	40C6  CDD640  		call	putchar
9978:	40C9  C3C240  		jp	l40c2
9979:	40CC          	l40cc:
9980:	40CC  F5      		push	af
9981:	40CD  7A      		ld	a,d
9982:	40CE  B7      		or	a
9983:	40CF  3E2B    		ld	a,'+'
9984:	40D1  C4D640  		call	nz,putchar
9985:	40D4  F1      		pop	af
9986:	40D5  C9      		ret
9987:			;
9988:			; Put character to active device
9989:			;
9990:	40D6          	putchar::
9991:	40D6  F5      		push	af
9992:	40D7  E5      		push	hl
9993:	40D8  CD5446  		call	fpact		; Test file active
9994:	40DB  C26656  		jp	nz,fputc	; .. yeap, get from there
9995:	40DE  E1      		pop	hl
9996:	40DF  3A8D07  		ld	a,(iodev)	; Test console
9997:	40E2  B7      		or	a
9998:	40E3  CA5C41  		jp	z,conout	; .. yeap
9999:	40E6  F1      		pop	af
10000:	40E7  F5      		push	af
10001:	40E8  FE08    		cp	bs		; Test backspace
10002:	40EA  C2FC40  		jp	nz,l40fc
10003:	40ED  3A8C07  		ld	a,(colLST)	; Get column
10004:	40F0  D601    		sub	1
10005:	40F2  DAF840  		jp	c,l40f8		; .. already at left side
10006:	40F5  328C07  		ld	(colLST),a
10007:	40F8          	l40f8:
10008:	40F8  F1      		pop	af
10009:	40F9  C33741  		jp	lstout		; Put to printer
10010:	40FC          	l40fc:
10011:	40FC  FE09    		cp	tab
10012:	40FE  C21041  		jp	nz,l4110
10013:	4101          	l4101:
10014:	4101  3E20    		ld	a,' '
10015:	4103  CDD640  		call	putchar
10016:	4106  3A8C07  		ld	a,(colLST)	; Get column
10017:	4109  E607    		and	00000111b	; .. modulo 8
10018:	410B  C20141  		jp	nz,l4101
10019:	410E  F1      		pop	af
10020:	410F  C9      		ret
10021:	4110          	l4110:
10022:	4110  F1      		pop	af
10023:	4111  F5      		push	af
10024:	4112  D60D    		sub	cr
10025:	4114  CA3341  		jp	z,l4133
10026:	4117  DA3641  		jp	c,l4136
10027:	411A  3A8F07  		ld	a,(l078f)
10028:	411D  3C      		inc	a
10029:	411E  3A8C07  		ld	a,(colLST)	; Get column
10030:	4121  CA2D41  		jp	z,l412d
10031:	4124  E5      		push	hl
10032:	4125  218F07  		ld	hl,l078f
10033:	4128  BE      		cp	(hl)
10034:	4129  E1      		pop	hl
10035:	412A  CC4D41  		call	z,cls.LST	; .. close printer
10036:	412D          	l412d:
10037:	412D  FEFF    		cp	255
10038:	412F  CA3641  		jp	z,l4136
10039:	4132  3C      		inc	a
10040:	4133          	l4133:
10041:	4133  328C07  		ld	(colLST),a
10042:	4136          	l4136:
10043:	4136  F1      		pop	af
10044:			;
10045:			; Put character in Accu to printer
10046:			;
10047:	4137          	lstout:
10048:	4137  F5      		push	af
10049:	4138  C5      		push	bc
10050:	4139  D5      		push	de
10051:	413A  E5      		push	hl
10052:	413B  4F      		ld	c,a
10053:	413C  CD0000  		call	$-$		; Put character to printer
10054:	413D          	$POT	equ	$-2
10055:	413F  E1      		pop	hl
10056:	4140  D1      		pop	de
10057:	4141  C1      		pop	bc
10058:	4142  F1      		pop	af
10059:	4143  C9      		ret
10060:			;
10061:			; Clear device I/O
10062:			;
10063:	4144          	cls.dev_io:
10064:	4144  AF      		xor	a
10065:	4145  328D07  		ld	(iodev),a	; Set console
10066:	4148  3A8C07  		ld	a,(colLST)	; .. test any in printer column
10067:	414B  B7      		or	a
10068:	414C  C8      		ret	z		; .. nope
10069:			;
10070:			; Close printer line
10071:			;
10072:	414D          	cls.LST:
10073:	414D  3E0D    		ld	a,cr
10074:	414F  CD3741  		call	lstout		; .. give CR.LF
10075:	4152  3E0A    		ld	a,lf
10076:	4154  CD3741  		call	lstout
10077:	4157  AF      		xor	a
10078:	4158  328C07  		ld	(colLST),a	; Clear column
10079:	415B  C9      		ret
10080:			;
10081:			; Put character to console - Remember character on stack
10082:			;
10083:	415C          	conout::
10084:	415C  3A9307  		ld	a,(_brk)	; Test echo
10085:	415F  B7      		or	a
10086:	4160  C25847  		jp	nz,pop.a	; .. nope
10087:	4163  F1      		pop	af
10088:	4164  C5      		push	bc
10089:	4165  F5      		push	af
10090:	4166  FE08    		cp	bs		; Test backspace
10091:	4168  C27B41  		jp	nz,l417b
10092:	416B  3A650A  		ld	a,(colCON)	; Get column
10093:	416E  B7      		or	a
10094:	416F  CA8D41  		jp	z,l418d		; .. already at left side
10095:	4172  3D      		dec	a
10096:	4173  32650A  		ld	(colCON),a
10097:	4176  3E08    		ld	a,bs
10098:	4178  C3AE41  		jp	l41ae
10099:	417B          	l417b:
10100:	417B  FE09    		cp	tab
10101:	417D  C29041  		jp	nz,l4190
10102:	4180          	l4180:
10103:	4180  3E20    		ld	a,' '
10104:	4182  CDD640  		call	putchar
10105:	4185  3A650A  		ld	a,(colCON)	; Get column
10106:	4188  E607    		and	00000111b	; .. modulo 8
10107:	418A  C28041  		jp	nz,l4180
10108:	418D          	l418d:
10109:	418D  F1      		pop	af
10110:	418E  C1      		pop	bc
10111:	418F  C9      		ret
10112:	4190          	l4190:
10113:	4190  FE20    		cp	' '
10114:	4192  DAAE41  		jp	c,l41ae
10115:	4195  3A9007  		ld	a,(l0790)
10116:	4198  47      		ld	b,a
10117:	4199  3A650A  		ld	a,(colCON)	; Get column
10118:	419C  04      		inc	b
10119:	419D  CAA541  		jp	z,l41a5
10120:	41A0  05      		dec	b
10121:	41A1  B8      		cp	b
10122:	41A2  CC2142  		call	z,fnl		; Give new line
10123:	41A5          	l41a5:
10124:	41A5  FEFF    		cp	255
10125:	41A7  CAAE41  		jp	z,l41ae
10126:	41AA  3C      		inc	a
10127:	41AB  32650A  		ld	(colCON),a
10128:	41AE          	l41ae:
10129:	41AE  F1      		pop	af
10130:	41AF  C1      		pop	bc
10131:	41B0  F5      		push	af
10132:	41B1  F1      		pop	af
10133:	41B2  F5      		push	af
10134:	41B3  C5      		push	bc
10135:	41B4  D5      		push	de
10136:	41B5  E5      		push	hl
10137:	41B6  4F      		ld	c,a
10138:	41B7  CD0000  		call	$-$		; Put character to console
10139:	41B8          	$COT	equ	$-2
10140:	41BA  E1      		pop	hl
10141:	41BB  D1      		pop	de
10142:	41BC  C1      		pop	bc
10143:	41BD  F1      		pop	af
10144:	41BE  C9      		ret
10145:			;
10146:			; Get character from active device
10147:			;
10148:	41BF          	getchar:
10149:	41BF  CD5446  		call	fpact		; Test file active
10150:	41C2  CAF541  		jp	z,conin		; .. nope, get from keyboard
10151:	41C5  CDC257  		call	fgetc		; Get from file
10152:	41C8  D0      		ret	nc		; .. well done
10153:	41C9  C5      		push	bc
10154:	41CA  D5      		push	de
10155:	41CB  E5      		push	hl
10156:	41CC  CD4D53  		call	l534d
10157:	41CF  E1      		pop	hl
10158:	41D0  D1      		pop	de
10159:	41D1  C1      		pop	bc
10160:	41D2  3AF30B  		ld	a,(l0bf3)
10161:	41D5  B7      		or	a
10162:	41D6  C23050  		jp	nz,l5030
10163:	41D9  3A9E07  		ld	a,(l079e)
10164:	41DC  B7      		or	a
10165:	41DD  CAE741  		jp	z,l41e7
10166:	41E0  21A012  		ld	hl,l12a0
10167:	41E3  E5      		push	hl
10168:	41E4  C33743  		jp	l4337
10169:	41E7          	l41e7:
10170:	41E7  E5      		push	hl
10171:	41E8  C5      		push	bc
10172:	41E9  D5      		push	de
10173:	41EA  21450C  		ld	hl,l0c45
10174:	41ED  CD2347  		call	l4723
10175:	41F0  D1      		pop	de
10176:	41F1  C1      		pop	bc
10177:	41F2  AF      		xor	a
10178:	41F3  E1      		pop	hl
10179:	41F4  C9      		ret
10180:			;
10181:			; Get character from console into Accu
10182:			;
10183:	41F5          	conin:
10184:	41F5  C5      		push	bc
10185:	41F6  D5      		push	de
10186:	41F7  E5      		push	hl
10187:	41F8  CD0000  		call	$-$		; Get input character
10188:	41F9          	$CIN	equ	$-2
10189:	41FB  E1      		pop	hl
10190:	41FC  D1      		pop	de
10191:	41FD  C1      		pop	bc
10192:	41FE  E67F    		and	NoMSB		; Strip off hi bit
10193:	4200  FE0F    		cp	'O'-'@'		; Test special
10194:	4202  C0      		ret	nz
10195:	4203  3A9307  		ld	a,(_brk)	; Test echo
10196:	4206  B7      		or	a
10197:	4207  CC4144  		call	z,l4441		; .. yeap
10198:	420A  2F      		cpl			; Toggle state
10199:	420B  329307  		ld	(_brk),a
10200:	420E  B7      		or	a
10201:	420F  CA4144  		jp	z,l4441
10202:	4212  AF      		xor	a
10203:	4213  C9      		ret
10204:			;
10205:			; Clear console
10206:			;
10207:	4214          	cls.CON:
10208:	4214  3A650A  		ld	a,(colCON)	; Test any in console column
10209:	4217  B7      		or	a
10210:	4218  C8      		ret	z		; .. nope
10211:	4219  C32142  		jp	fnl		; Give new line
10212:			;
10213:			;
10214:			;
10215:	421C          	l421c:
10216:	421C  3600    		ld	(hl),0
10217:	421E  216109  		ld	hl,l0961
10218:			;
10219:			;
10220:			;
10221:	4221          	fnl:
10222:	4221  3E0D    		ld	a,cr
10223:	4223  CDD640  		call	putchar		; Give new line
10224:	4226  3E0A    		ld	a,lf
10225:	4228  CDD640  		call	putchar
10226:	422B          	l422b:
10227:	422B  CD5446  		call	fpact		; Test file active
10228:	422E  CA3342  		jp	z,l4233		; .. nope
10229:	4231  AF      		xor	a
10230:	4232  C9      		ret
10231:	4233          	l4233:
10232:	4233  3A8D07  		ld	a,(iodev)	; Test console
10233:	4236  B7      		or	a
10234:	4237  CA3F42  		jp	z,l423f		; .. yeap
10235:	423A  AF      		xor	a
10236:	423B  328C07  		ld	(colLST),a	; .. clear printer column
10237:	423E  C9      		ret
10238:	423F          	l423f:
10239:	423F  AF      		xor	a
10240:	4240  32650A  		ld	(colCON),a	; Clear console column
10241:	4243  3A8807  		ld	a,(l0788)
10242:	4246          	l4246:
10243:	4246  3D      		dec	a
10244:	4247  C8      		ret	z
10245:	4248  F5      		push	af
10246:	4249  AF      		xor	a
10247:	424A  CDD640  		call	putchar		; Give zeroes
10248:	424D  F1      		pop	af
10249:	424E  C34642  		jp	l4246
10250:			;
10251:			; Process input chacater - Zero set indicates none
10252:			;
10253:	4251          	condir:
10254:	4251  C5      		push	bc
10255:	4252  D5      		push	de
10256:	4253  E5      		push	hl
10257:	4254  CD0000  		call	$-$		; Get state of console
10258:	4255          	$CST2	equ	$-2
10259:	4257  E1      		pop	hl
10260:	4258  D1      		pop	de
10261:	4259  C1      		pop	bc
10262:	425A  B7      		or	a
10263:	425B  C8      		ret	z		; .. no character here
10264:	425C          	l425c:
10265:	425C  CDF541  		call	conin		; Get character
10266:	425F  FE13    		cp	'S'-'@'
10267:	4261  CCF541  		call	z,conin		; .. skip it
10268:	4264  328907  		ld	(l0789),a
10269:	4267  FE03    		cp	CtrlC		; Test break
10270:	4269  CC4344  		call	z,prCtrl	; .. echo it
10271:	426C  C30144  		jp	l4401
10272:	426F          	l426f:
10273:	426F  CD0513  		call	get.tok
10274:	4272  E5      		push	hl
10275:	4273  CD9942  		call	l4299
10276:	4276  C28342  		jp	nz,l4283
10277:	4279  CD0000  		call	$-$		; Get state of console
10278:	427A          	$CST3	equ	$-2
10279:	427C  B7      		or	a
10280:	427D  CA8C42  		jp	z,l428c		; .. nothing pressed
10281:	4280  CDF541  		call	conin		; .. get character
10282:	4283          	l4283:
10283:	4283  F5      		push	af
10284:	4284  CDB746  		call	l46b7
10285:	4287  F1      		pop	af
10286:	4288  5F      		ld	e,a
10287:	4289  CDF848  		call	l48f8
10288:	428C          	l428c:
10289:	428C  21440C  		ld	hl,l0c44
10290:	428F  22040C  		ld	($$ARG+4),hl
10291:	4292  3E03    		ld	a,3
10292:	4294  32670A  		ld	($ARGLEN),a	; Set pointer length
10293:	4297  E1      		pop	hl
10294:	4298  C9      		ret
10295:	4299          	l4299:
10296:	4299  3A8907  		ld	a,(l0789)
10297:	429C  B7      		or	a
10298:	429D  C8      		ret	z
10299:	429E  F5      		push	af
10300:	429F  AF      		xor	a
10301:	42A0  328907  		ld	(l0789),a
10302:	42A3  F1      		pop	af
10303:	42A4  C9      		ret
10304:			;
10305:			; Print character, test new line
10306:			;
10307:	42A5          	l42a5:
10308:	42A5  CDD640  		call	putchar		; Print character
10309:	42A8  FE0A    		cp	lf		; Test new line
10310:	42AA  C0      		ret	nz		; .. nope
10311:	42AB  3E0D    		ld	a,cr
10312:	42AD  CDD640  		call	putchar		; Give return
10313:	42B0  CD2B42  		call	l422b		; Process new line
10314:	42B3  3E0A    		ld	a,lf
10315:	42B5  C9      		ret
10316:			;
10317:			;
10318:			;
10319:	42B6          	l42b6:
10320:	42B6  CDEB42  		call	l42eb
10321:	42B9          	l42b9:
10322:	42B9  C5      		push	bc
10323:	42BA  E3      		ex	(sp),hl
10324:	42BB  C1      		pop	bc
10325:	42BC          	l42bc:
10326:	42BC  CDCD43  		call	cp.r		; Compare HL:DE
10327:	42BF  7E      		ld	a,(hl)		; Unpack
10328:	42C0  02      		ld	(bc),a
10329:	42C1  C8      		ret	z		; .. till end
10330:	42C2  0B      		dec	bc
10331:	42C3  2B      		dec	hl
10332:	42C4  C3BC42  		jp	l42bc
10333:			;
10334:			; Verify enough memory available
10335:			; ENTRY	Reg C holds amount to be checked for
10336:			;
10337:	42C7          	tstmem:
10338:	42C7  E5      		push	hl
10339:	42C8  2A760A  		ld	hl,(himem)	; Get top of memory
10340:	42CB  0600    		ld	b,0		; .. make 16 bit
10341:	42CD  09      		add	hl,bc		; .. get new top
10342:	42CE  09      		add	hl,bc
10343:	42CF  3EC6    		ld	a,LOW 0ffc6h
10344:	42D1  95      		sub	l		; Test enough
10345:	42D2  6F      		ld	l,a
10346:	42D3  3EFF    		ld	a,HIGH 0ffc6h
10347:	42D5  9C      		sbc	a,h
10348:	42D6  67      		ld	h,a
10349:	42D7  DADD42  		jp	c,l42dd		; .. nope
10350:	42DA  39      		add	hl,sp		; Check for stack
10351:	42DB  E1      		pop	hl
10352:	42DC  D8      		ret	c		; .. ok
10353:			;
10354:			; Process memory overflow
10355:			;
10356:	42DD          	l42dd:
10357:	42DD  2A9607  		ld	hl,(heap)	; Get heap
10358:	42E0  2B      		dec	hl		; .. fix
10359:	42E1  2B      		dec	hl
10360:	42E2  22B10A  		ld	(curstk),hl	; .. for stack
10361:	42E5          	l42e5:
10362:	42E5  110700  		ld	de,7		; Out of memory
10363:	42E8  C3E30C  		jp	_error
10364:			;
10365:			;
10366:			;
10367:	42EB          	l42eb:
10368:	42EB  CDFF42  		call	cmp.top		; Compare against top
10369:	42EE  D0      		ret	nc		; .. ok
10370:	42EF  C5      		push	bc
10371:	42F0  D5      		push	de
10372:	42F1  E5      		push	hl
10373:	42F2  CD6747  		call	l4767
10374:	42F5  E1      		pop	hl
10375:	42F6  D1      		pop	de
10376:	42F7  C1      		pop	bc
10377:	42F8  CDFF42  		call	cmp.top		; Test room available
10378:	42FB  D0      		ret	nc		; .. yeap
10379:	42FC  C3E542  		jp	l42e5		; .. out of memory
10380:			;
10381:			; Compare pointer to top of memory
10382:			; EXIT	Zero set if same
10383:			;	Carry set if HL > ^'mem.top'
10384:			;
10385:	42FF          	cmp.top:
10386:	42FF  D5      		push	de
10387:	4300  EB      		ex	de,hl
10388:	4301  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
10389:	4304  CDCD43  		call	cp.r		; Compare HL:DE
10390:	4307  EB      		ex	de,hl
10391:	4308  D1      		pop	de
10392:	4309  C9      		ret
10393:			;
10394:			;
10395:			;
10396:	430A          	l430a:
10397:	430A  3AC407  		ld	a,(opnfiles)	; Get max files
10398:	430D  47      		ld	b,a
10399:	430E  21A407  		ld	hl,F.arr	; .. init file array
10400:	4311  AF      		xor	a
10401:	4312  04      		inc	b
10402:	4313          	l4313:
10403:	4313  5E      		ld	e,(hl)		; Fetch pointer
10404:	4314  23      		inc	hl
10405:	4315  56      		ld	d,(hl)
10406:	4316  23      		inc	hl
10407:	4317  12      		ld	(de),a		; .. set passive
10408:	4318  05      		dec	b
10409:	4319  C21343  		jp	nz,l4313
10410:	431C  CD0D54  		call	l540d
10411:	431F  AF      		xor	a
10412:			;
10413:			; Statement : NEW
10414:			;
10415:	4320          	l4320:
10416:	4320  C0      		ret	nz		; .. end if more in line
10417:	4321          	l4321:
10418:	4321  2A9A07  		ld	hl,(prg.base)	; Get base of program
10419:	4324  CD7D44  		call	l447d
10420:	4327  32EC0B  		ld	(_prot),a	; Clear protection of file
10421:	432A  32AA0A  		ld	(auto.mode),a	; .. AUTO
10422:	432D  32A90A  		ld	(l0aa9),a
10423:	4330  77      		ld	(hl),a		; Clear last line
10424:	4331  23      		inc	hl
10425:	4332  77      		ld	(hl),a
10426:	4333  23      		inc	hl
10427:	4334  22C20A  		ld	(prg.top),hl	; .. save top
10428:	4337          	l4337:
10429:	4337  2A9A07  		ld	hl,(prg.base)	; Get base of program
10430:	433A  2B      		dec	hl
10431:	433B          	l433b:
10432:	433B  22A70A  		ld	(@@ptr),hl	; .. set as pointer
10433:	433E  3AED0B  		ld	a,(l0bed)
10434:	4341  B7      		or	a
10435:	4342  C25843  		jp	nz,l4358
10436:	4345  AF      		xor	a
10437:	4346  32C70B  		ld	(l0bc7),a
10438:	4349  32C60B  		ld	(l0bc6),a
10439:	434C  061A    		ld	b,1ah
10440:	434E  21CA0A  		ld	hl,l0aca
10441:	4351          	l4351:
10442:	4351  3604    		ld	(hl),4
10443:	4353  23      		inc	hl
10444:	4354  05      		dec	b
10445:	4355  C25143  		jp	nz,l4351
10446:	4358          	l4358:
10447:	4358  11C837  		ld	de,l37c8
10448:	435B  216938  		ld	hl,l3869
10449:	435E  CDC328  		call	l28c3
10450:	4361  214638  		ld	hl,l3846
10451:	4364  AF      		xor	a
10452:	4365  77      		ld	(hl),a
10453:	4366  23      		inc	hl
10454:	4367  77      		ld	(hl),a
10455:	4368  23      		inc	hl
10456:	4369  77      		ld	(hl),a
10457:	436A  AF      		xor	a
10458:	436B  32BB0A  		ld	(l0abb),a
10459:	436E  6F      		ld	l,a
10460:	436F  67      		ld	h,a
10461:	4370  22B90A  		ld	(l0ab9),hl
10462:	4373  22C00A  		ld	(cont.mode),hl	; .. and CONT mode
10463:	4376  2A760A  		ld	hl,(himem)	; Get top of memory
10464:	4379  3AF30B  		ld	a,(l0bf3)
10465:	437C  B7      		or	a
10466:	437D  C28343  		jp	nz,l4383
10467:	4380  229B0A  		ld	(mem.top),hl	; .. set top of memory
10468:	4383          	l4383:
10469:	4383  AF      		xor	a
10470:	4384  CDE643  		call	l43e6
10471:	4387  2AC20A  		ld	hl,(prg.top)	; Get top of program
10472:	438A  22C40A  		ld	(l0ac4),hl
10473:	438D  22C60A  		ld	(l0ac6),hl
10474:	4390  3AED0B  		ld	a,(l0bed)
10475:	4393  B7      		or	a
10476:	4394  CC0D54  		call	z,l540d
10477:			;
10478:			; Reset error environment
10479:			;
10480:	4397          	l4397:
10481:	4397  C1      		pop	bc		; Get caller
10482:	4398  2A9607  		ld	hl,(heap)	; .. and heap
10483:	439B  2B      		dec	hl		; .. fix
10484:	439C  2B      		dec	hl
10485:	439D  22B10A  		ld	(curstk),hl	; .. for stack
10486:	43A0  23      		inc	hl
10487:	43A1  23      		inc	hl
10488:			;
10489:			; Reset error environment
10490:			;
10491:	43A2          	l43a2:
10492:	43A2  F9      		ld	sp,hl		; Get stack
10493:	43A3  217A0A  		ld	hl,STR.arr
10494:	43A6  22780A  		ld	(STR.ptr),hl	; .. reset string pointer
10495:	43A9  CD7225  		call	l2572
10496:	43AC  CD4441  		call	cls.dev_io	; Clear device I/O
10497:	43AF  CDE917  		call	clr.FP		; .. reset file I/O
10498:	43B2  AF      		xor	a
10499:	43B3  67      		ld	h,a
10500:	43B4  6F      		ld	l,a
10501:	43B5  22E60A  		ld	(l0ae6),hl
10502:	43B8  32B70B  		ld	(l0bb7),a
10503:	43BB  224E0B  		ld	(l0b4e),hl
10504:	43BE  22BA0B  		ld	(l0bba),hl
10505:	43C1  22E40A  		ld	(l0ae4),hl
10506:	43C4  32A50A  		ld	(l0aa5),a
10507:	43C7  E5      		push	hl
10508:	43C8  C5      		push	bc		; Save caller
10509:	43C9          	l43c9:
10510:	43C9  2AA70A  		ld	hl,(@@ptr)	; Get back pointer
10511:	43CC  C9      		ret
10512:			;
10513:			; Compare HL:DE - Zero says same
10514:			;		  Carry says HL < DE
10515:			;
10516:	43CD          	cp.r:
10517:	43CD  7C      		ld	a,h		; Compare hi
10518:	43CE  92      		sub	d
10519:	43CF  C0      		ret	nz		; .. not same
10520:	43D0  7D      		ld	a,l		; .. lo if hi matches
10521:	43D1  93      		sub	e
10522:	43D2  C9      		ret
10523:			;
10524:			; Immediate ^HL buffer compare - Match is a *MUST*
10525:			;
10526:	43D3          	ilcmp:
10527:	43D3  7E      		ld	a,(hl)		; Get from buffer
10528:	43D4  E3      		ex	(sp),hl
10529:	43D5  BE      		cp	(hl)		; .. compare
10530:	43D6  C2E343  		jp	nz,l43e3	; .. no match, error
10531:	43D9  23      		inc	hl
10532:	43DA  E3      		ex	(sp),hl
10533:	43DB  23      		inc	hl
10534:	43DC  7E      		ld	a,(hl)		; Get next
10535:	43DD  FE3A    		cp	':'
10536:	43DF  D0      		ret	nc
10537:	43E0  C30A13  		jp	l130a
10538:	43E3          	l43e3:
10539:	43E3  C3C90C  		jp	l0cc9
10540:			;
10541:			; Statement : RESTORE [<line number>]
10542:			;
10543:	43E6          	l43e6:
10544:	43E6  EB      		ex	de,hl
10545:	43E7  2A9A07  		ld	hl,(prg.base)	; Get base of program
10546:	43EA  CAFB43  		jp	z,l43fb		; .. totally restored
10547:	43ED  EB      		ex	de,hl
10548:	43EE  CD2814  		call	l1428
10549:	43F1  E5      		push	hl
10550:	43F2  CDF80E  		call	l0ef8
10551:	43F5  60      		ld	h,b
10552:	43F6  69      		ld	l,c
10553:	43F7  D1      		pop	de
10554:	43F8  D2CC14  		jp	nc,l14cc
10555:	43FB          	l43fb:
10556:	43FB  2B      		dec	hl
10557:	43FC          	l43fc:
10558:	43FC  22C80A  		ld	(DATA.ptr),hl	; Save pointer
10559:	43FF  EB      		ex	de,hl
10560:	4400  C9      		ret
10561:			;
10562:			; Statement : STOP
10563:			;
10564:	4401          	l4401:
10565:	4401  C0      		ret	nz
10566:	4402  3C      		inc	a
10567:	4403  C30C44  		jp	l440c
10568:			;
10569:			; Statement : END
10570:			;
10571:	4406          	_END:
10572:	4406  C0      		ret	nz		; Skip if more in line
10573:	4407  F5      		push	af
10574:	4408  CC0D54  		call	z,l540d
10575:	440B  F1      		pop	af
10576:	440C          	l440c:
10577:	440C  22AF0A  		ld	(l0aaf),hl
10578:	440F  217A0A  		ld	hl,STR.arr
10579:	4412  22780A  		ld	(STR.ptr),hl	; .. reset string pointer
10580:	4415          		_LD.HL
10581:	4416          	l4416:
10582:	4416  F6FF    		or	0ffh
10583:	4418  C1      		pop	bc
10584:	4419          	l4419:
10585:	4419  2A9807  		ld	hl,(dir.mode)	; Get direct mode
10586:	441C  E5      		push	hl
10587:	441D  F5      		push	af
10588:	441E  7D      		ld	a,l
10589:	441F  A4      		and	h
10590:	4420  3C      		inc	a
10591:	4421  CA2D44  		jp	z,l442d		; .. -1 is direct
10592:	4424  22BE0A  		ld	(direct_4),hl	; .. save
10593:	4427  2AAF0A  		ld	hl,(l0aaf)
10594:	442A  22C00A  		ld	(cont.mode),hl	; .. set CONT mode
10595:	442D          	l442d:
10596:	442D  AF      		xor	a
10597:	442E  329307  		ld	(_brk),a	; Set echo
10598:	4431  CD4441  		call	cls.dev_io	; Clear device I/O
10599:	4434  CD1442  		call	cls.CON		; .. and console
10600:	4437  F1      		pop	af
10601:	4438  214A0C  		ld	hl,l0c4a
10602:	443B  C2620D  		jp	nz,l0d62
10603:	443E  C3860D  		jp	l0d86
10604:	4441          	l4441:
10605:	4441  3E0F    		ld	a,'O'-'@'
10606:			;
10607:			; Echo control character in Accu
10608:			;
10609:	4443          	prCtrl:
10610:	4443  F5      		push	af
10611:	4444  D603    		sub	CtrlC		; Test abort
10612:	4446  C24F44  		jp	nz,l444f	; .. nope
10613:	4449  328D07  		ld	(iodev),a	; .. set console if so
10614:	444C  329307  		ld	(_brk),a	; .. and echo
10615:	444F          	l444f:
10616:	444F  3E5E    		ld	a,'^'
10617:	4451  CDD640  		call	putchar		; Indicate control
10618:	4454  F1      		pop	af
10619:	4455  C640    		add	a,'@'
10620:	4457  CDD640  		call	putchar		; .. print mapped control
10621:	445A  C32142  		jp	fnl		; Give new line
10622:			;
10623:			; Statement : CONT
10624:			;
10625:	445D          	l445d:
10626:	445D  2AC00A  		ld	hl,(cont.mode)	; Get mode
10627:	4460  7C      		ld	a,h
10628:	4461  B5      		or	l
10629:	4462  111100  		ld	de,17		; Can't continue
10630:	4465  CAE30C  		jp	z,_error
10631:	4468  EB      		ex	de,hl
10632:	4469  2ABE0A  		ld	hl,(direct_4)	; Get direct mode
10633:	446C  EB      		ex	de,hl		;			** ???????
10634:	446D  EB      		ex	de,hl		;			** ???????
10635:	446E  229807  		ld	(dir.mode),hl	; .. set it
10636:	4471  EB      		ex	de,hl
10637:	4472  C9      		ret
10638:			;
10639:			; Statement : NULL <expr>
10640:			;
10641:	4473          	l4473:
10642:	4473  CD7520  		call	l2075
10643:	4476  C0      		ret	nz
10644:	4477  3C      		inc	a
10645:	4478  328807  		ld	(l0788),a
10646:	447B  C9      		ret
10647:			;
10648:			; Statement : TRON
10649:			;
10650:	447C          	l447c:
10651:	447C          		_LD.A
10652:			;
10653:			; Statement : TROFF
10654:			;
10655:	447D          	l447d:
10656:	447D  AF      		xor	a
10657:	447E  32FE0B  		ld	(trcflg),a	; (Re)Set trace flag
10658:	4481  C9      		ret
10659:			;
10660:			; Statement : SWAP <variable>,<variable>
10661:			;
10662:	4482          	l4482:
10663:	4482  CD8B39  		call	var.adr		; Get address of 1st variable
10664:	4485  D5      		push	de
10665:	4486  E5      		push	hl
10666:	4487  21F60B  		ld	hl,l0bf6
10667:	448A  CDC928  		call	l28c9
10668:	448D  2AC40A  		ld	hl,(l0ac4)
10669:	4490  E3      		ex	(sp),hl
10670:	4491  CD641D  		call	get.type	; Get type
10671:	4494  F5      		push	af		; .. save
10672:	4495  CDD343  		call	ilcmp
10673:	4498  2C      		db	','
10674:	4499  CD8B39  		call	var.adr		; Get address of 2nd variable
10675:	449C  F1      		pop	af
10676:	449D  47      		ld	b,a
10677:	449E  CD641D  		call	get.type	; .. get type of 2nd
10678:	44A1  B8      		cp	b		; Verify same type
10679:	44A2  C2E10C  		jp	nz,l0ce1	; .. nope
10680:	44A5  E3      		ex	(sp),hl
10681:	44A6  EB      		ex	de,hl
10682:	44A7  E5      		push	hl
10683:	44A8  2AC40A  		ld	hl,(l0ac4)
10684:	44AB  CDCD43  		call	cp.r
10685:	44AE  C2C144  		jp	nz,l44c1	; HL <> DE
10686:	44B1  D1      		pop	de
10687:	44B2  E1      		pop	hl
10688:	44B3  E3      		ex	(sp),hl
10689:	44B4  D5      		push	de
10690:	44B5  CDC928  		call	l28c9
10691:	44B8  E1      		pop	hl
10692:	44B9  11F60B  		ld	de,l0bf6
10693:	44BC  CDC928  		call	l28c9
10694:	44BF  E1      		pop	hl
10695:	44C0  C9      		ret
10696:	44C1          	l44c1:
10697:	44C1  C31814  		jp	_ill.func	; Invalid call
10698:			;
10699:			; Statement : ERASE <list of array variables>
10700:			;
10701:	44C4          	l44c4:
10702:	44C4  3E01    		ld	a,1
10703:	44C6  32A50A  		ld	(l0aa5),a
10704:	44C9  CD8B39  		call	var.adr		; Get address of variable
10705:	44CC  C2C144  		jp	nz,l44c1
10706:	44CF  E5      		push	hl
10707:	44D0  32A50A  		ld	(l0aa5),a
10708:	44D3  60      		ld	h,b
10709:	44D4  69      		ld	l,c
10710:	44D5  0B      		dec	bc
10711:	44D6  0B      		dec	bc
10712:	44D7  0B      		dec	bc
10713:	44D8          	l44d8:
10714:	44D8  0A      		ld	a,(bc)
10715:	44D9  0B      		dec	bc
10716:	44DA  B7      		or	a
10717:	44DB  FAD844  		jp	m,l44d8
10718:	44DE  0B      		dec	bc
10719:	44DF  0B      		dec	bc
10720:	44E0  19      		add	hl,de
10721:	44E1  EB      		ex	de,hl
10722:	44E2  2AC60A  		ld	hl,(l0ac6)	; Get top
10723:	44E5          	l44e5:
10724:	44E5  CDCD43  		call	cp.r		; Compare HL:DE
10725:	44E8  1A      		ld	a,(de)		; .. unpack
10726:	44E9  02      		ld	(bc),a
10727:	44EA  13      		inc	de
10728:	44EB  03      		inc	bc
10729:	44EC  C2E544  		jp	nz,l44e5	; .. till top reached
10730:	44EF  0B      		dec	bc
10731:	44F0  60      		ld	h,b
10732:	44F1  69      		ld	l,c
10733:	44F2  22C60A  		ld	(l0ac6),hl
10734:	44F5  E1      		pop	hl
10735:	44F6  7E      		ld	a,(hl)
10736:	44F7  FE2C    		cp	','
10737:	44F9  C0      		ret	nz
10738:	44FA  CD0513  		call	get.tok
10739:	44FD  C3C444  		jp	l44c4
10740:	4500          	l4500:
10741:	4500  F1      		pop	af
10742:	4501  E1      		pop	hl
10743:	4502  C9      		ret
10744:			;
10745:			; Test ^HL alphabetical character - Carry set says no
10746:			;
10747:	4503          	isalph:
10748:	4503  7E      		ld	a,(hl)		; Get character
10749:			;
10750:			; Test Accu alphabetical character - Carry set says no
10751:			;
10752:	4504          	isalph_:
10753:	4504  FE41    		cp	'A'		; .. test range
10754:	4506  D8      		ret	c
10755:	4507  FE5B    		cp	'Z'+1
10756:	4509  3F      		ccf
10757:	450A  C9      		ret
10758:			;
10759:			;
10760:			;
10761:	450B          	l450b:
10762:	450B  C33B43  		jp	l433b
10763:			;
10764:			; Statement : CLEAR [,[<expr1>][,<expr2>]]
10765:			;
10766:	450E          	l450e:
10767:	450E  CA0B45  		jp	z,l450b
10768:	4511  FE2C    		cp	','
10769:	4513  CA2045  		jp	z,l4520
10770:	4516  CD1414  		call	l1414
10771:	4519  2B      		dec	hl
10772:	451A  CD0513  		call	get.tok
10773:	451D  CA0B45  		jp	z,l450b
10774:	4520          	l4520:
10775:	4520  CDD343  		call	ilcmp
10776:	4523  2C      		db	','
10777:	4524  CA0B45  		jp	z,l450b
10778:	4527  EB      		ex	de,hl
10779:	4528  2A9607  		ld	hl,(heap)	; Get heap
10780:	452B  EB      		ex	de,hl
10781:	452C  FE2C    		cp	','
10782:	452E  CA3445  		jp	z,l4534
10783:	4531  CD7945  		call	l4579
10784:	4534          	l4534:
10785:	4534  2B      		dec	hl
10786:	4535  CD0513  		call	get.tok
10787:	4538  D5      		push	de
10788:	4539  CA8545  		jp	z,l4585
10789:	453C  CDD343  		call	ilcmp
10790:	453F  2C      		db	','
10791:	4540  CA8545  		jp	z,l4585
10792:	4543  CD7945  		call	l4579
10793:	4546  2B      		dec	hl
10794:	4547  CD0513  		call	get.tok
10795:	454A  C2C90C  		jp	nz,l0cc9
10796:	454D          	l454d:
10797:	454D  E3      		ex	(sp),hl
10798:	454E  E5      		push	hl
10799:	454F  214E00  		ld	hl,l004e
10800:	4552  CDCD43  		call	cp.r
10801:	4555  D28245  		jp	nc,l4582	; HL >= DE -- overflow
10802:	4558  E1      		pop	hl
10803:	4559  CD9745  		call	l4597
10804:	455C  DA8245  		jp	c,l4582		; .. overflow
10805:	455F  E5      		push	hl
10806:	4560  2AC20A  		ld	hl,(prg.top)	; Get top of program
10807:	4563  011400  		ld	bc,l0014
10808:	4566  09      		add	hl,bc
10809:	4567  CDCD43  		call	cp.r
10810:	456A  D28245  		jp	nc,l4582	; HL >= DE -- overflow
10811:	456D  EB      		ex	de,hl
10812:	456E  22760A  		ld	(himem),hl	; Set new top of memory
10813:	4571  E1      		pop	hl
10814:	4572  229607  		ld	(heap),hl	; .. and heap
10815:	4575  E1      		pop	hl
10816:	4576  C30B45  		jp	l450b
10817:	4579          	l4579:
10818:	4579  CDD122  		call	l22d1
10819:	457C  7A      		ld	a,d
10820:	457D  B3      		or	e
10821:	457E  CA1814  		jp	z,_ill.func	; Invalid if zero
10822:	4581  C9      		ret
10823:	4582          	l4582:
10824:	4582  C3DD42  		jp	l42dd		; .. fix pointers, overflow
10825:	4585          	l4585:
10826:	4585  E5      		push	hl
10827:	4586  2A9607  		ld	hl,(heap)	; Get heap
10828:	4589  EB      		ex	de,hl
10829:	458A  2A760A  		ld	hl,(himem)	; .. and top of memory
10830:	458D  7B      		ld	a,e
10831:	458E  95      		sub	l
10832:	458F  5F      		ld	e,a
10833:	4590  7A      		ld	a,d
10834:	4591  9C      		sbc	a,h
10835:	4592  57      		ld	d,a
10836:	4593  E1      		pop	hl
10837:	4594  C34D45  		jp	l454d
10838:	4597          	l4597:
10839:	4597  7D      		ld	a,l
10840:	4598  93      		sub	e
10841:	4599  5F      		ld	e,a
10842:	459A  7C      		ld	a,h
10843:	459B  9A      		sbc	a,d
10844:	459C  57      		ld	d,a
10845:	459D  C9      		ret
10846:			;
10847:			; Statement : NEXT [<variable>][,<variable>...]
10848:			;
10849:	459E          	l459e:
10850:	459E  F5      		push	af
10851:	459F          		_OR
10852:	45A0          	l45a0:
10853:	45A0  AF      		xor	a
10854:	45A1  32BF0B  		ld	(l0bbf),a
10855:	45A4  F1      		pop	af
10856:	45A5  110000  		ld	de,0		; .. set direction
10857:	45A8          	l45a8:
10858:	45A8  22BD0B  		ld	(l0bbd),hl
10859:	45AB  C48B39  		call	nz,var.adr	; Get address of variable
10860:	45AE  22A70A  		ld	(@@ptr),hl	; .. save
10861:	45B1  CD500C  		call	l0c50		; Fix for FOR, WHILE
10862:	45B4  C2CF0C  		jp	nz,l0ccf	; .. NEXT without FOR
10863:	45B7  F9      		ld	sp,hl
10864:	45B8  D5      		push	de
10865:	45B9  5E      		ld	e,(hl)
10866:	45BA  23      		inc	hl
10867:	45BB  56      		ld	d,(hl)
10868:	45BC  23      		inc	hl
10869:	45BD  E5      		push	hl
10870:	45BE  2ABD0B  		ld	hl,(l0bbd)
10871:	45C1  CDCD43  		call	cp.r
10872:	45C4  C2CF0C  		jp	nz,l0ccf	; HL <> DE
10873:	45C7  E1      		pop	hl
10874:	45C8  D1      		pop	de
10875:	45C9  D5      		push	de
10876:	45CA  7E      		ld	a,(hl)
10877:	45CB  F5      		push	af
10878:	45CC  23      		inc	hl
10879:	45CD  D5      		push	de
10880:	45CE  7E      		ld	a,(hl)
10881:	45CF  23      		inc	hl
10882:	45D0  B7      		or	a
10883:	45D1  FAF945  		jp	m,l45f9
10884:	45D4  CDA628  		call	l28a6
10885:	45D7  E3      		ex	(sp),hl
10886:	45D8  E5      		push	hl
10887:	45D9  3ABF0B  		ld	a,(l0bbf)
10888:	45DC  B7      		or	a
10889:	45DD  C2E745  		jp	nz,l45e7
10890:	45E0  21C00B  		ld	hl,l0bc0
10891:	45E3  CDA628  		call	l28a6
10892:	45E6  AF      		xor	a
10893:	45E7          	l45e7:
10894:	45E7  C47C25  		call	nz,l257c
10895:	45EA  E1      		pop	hl
10896:	45EB  CDC028  		call	l28c0
10897:	45EE  E1      		pop	hl
10898:	45EF  CDB728  		call	l28b7
10899:	45F2  E5      		push	hl
10900:	45F3  CD0629  		call	l2906
10901:	45F6  C32F46  		jp	l462f
10902:	45F9          	l45f9:
10903:	45F9  23      		inc	hl
10904:	45FA  23      		inc	hl
10905:	45FB  23      		inc	hl
10906:	45FC  23      		inc	hl
10907:	45FD  4E      		ld	c,(hl)
10908:	45FE  23      		inc	hl
10909:	45FF  46      		ld	b,(hl)
10910:	4600  23      		inc	hl
10911:	4601  E3      		ex	(sp),hl
10912:	4602  5E      		ld	e,(hl)
10913:	4603  23      		inc	hl
10914:	4604  56      		ld	d,(hl)
10915:	4605  E5      		push	hl
10916:	4606  69      		ld	l,c
10917:	4607  60      		ld	h,b
10918:	4608  3ABF0B  		ld	a,(l0bbf)
10919:	460B  B7      		or	a
10920:	460C  C21546  		jp	nz,l4615
10921:	460F  2AC00B  		ld	hl,(l0bc0)
10922:	4612  C32046  		jp	l4620
10923:	4615          	l4615:
10924:	4615  CD312B  		call	l2b31
10925:	4618  3A670A  		ld	a,($ARGLEN)	; Get length
10926:	461B  FE04    		cp	4		; Test single precision
10927:	461D  CADB0C  		jp	z,l0cdb		; .. yeap
10928:	4620          	l4620:
10929:	4620  EB      		ex	de,hl
10930:	4621  E1      		pop	hl
10931:	4622  72      		ld	(hl),d
10932:	4623  2B      		dec	hl
10933:	4624  73      		ld	(hl),e
10934:	4625  E1      		pop	hl
10935:	4626  D5      		push	de
10936:	4627  5E      		ld	e,(hl)
10937:	4628  23      		inc	hl
10938:	4629  56      		ld	d,(hl)
10939:	462A  23      		inc	hl
10940:	462B  E3      		ex	(sp),hl
10941:	462C  CD3329  		call	l2933
10942:	462F          	l462f:
10943:	462F  E1      		pop	hl
10944:	4630  C1      		pop	bc
10945:	4631  90      		sub	b
10946:	4632  CDB728  		call	l28b7
10947:	4635  CA4146  		jp	z,l4641
10948:	4638  EB      		ex	de,hl
10949:	4639  229807  		ld	(dir.mode),hl	; Set direct mode
10950:	463C  69      		ld	l,c
10951:	463D  60      		ld	h,b
10952:	463E  C39C12  		jp	l129c
10953:	4641          	l4641:
10954:	4641  F9      		ld	sp,hl		; Set stack
10955:	4642  22B10A  		ld	(curstk),hl	; .. save
10956:	4645  2AA70A  		ld	hl,(@@ptr)	; Get back token pointer
10957:	4648  7E      		ld	a,(hl)
10958:	4649  FE2C    		cp	','
10959:	464B  C2A012  		jp	nz,l12a0
10960:	464E  CD0513  		call	get.tok
10961:	4651  CDA845  		call	l45a8
10962:			;
10963:			; Test file active - Zero set indicates not
10964:			;
10965:	4654          	fpact:
10966:	4654  E5      		push	hl
10967:	4655  2A9407  		ld	hl,(FP)		; Get file pointer
10968:	4658  7C      		ld	a,h		; Get result
10969:	4659  B5      		or	l
10970:	465A  E1      		pop	hl
10971:	465B  C9      		ret
10972:			;
10973:			;
10974:			;
10975:	465C          	l465c:
10976:	465C  CDA548  		call	str.adr		; Get address of string
10977:	465F  7E      		ld	a,(hl)		; Fetch length
10978:	4660  23      		inc	hl
10979:	4661  4E      		ld	c,(hl)		; .. and pointer
10980:	4662  23      		inc	hl
10981:	4663  46      		ld	b,(hl)
10982:	4664  D1      		pop	de
10983:	4665  C5      		push	bc
10984:	4666  F5      		push	af
10985:	4667  CDAC48  		call	l48ac
10986:	466A  F1      		pop	af
10987:	466B  57      		ld	d,a
10988:	466C  5E      		ld	e,(hl)
10989:	466D  23      		inc	hl
10990:	466E  4E      		ld	c,(hl)
10991:	466F  23      		inc	hl
10992:	4670  46      		ld	b,(hl)
10993:	4671  E1      		pop	hl
10994:	4672          	l4672:
10995:	4672  7B      		ld	a,e
10996:	4673  B2      		or	d
10997:	4674  C8      		ret	z
10998:	4675  7A      		ld	a,d
10999:	4676  D601    		sub	1
11000:	4678  D8      		ret	c
11001:	4679  AF      		xor	a
11002:	467A  BB      		cp	e
11003:	467B  3C      		inc	a
11004:	467C  D0      		ret	nc
11005:	467D  15      		dec	d
11006:	467E  1D      		dec	e
11007:	467F  0A      		ld	a,(bc)
11008:	4680  03      		inc	bc
11009:	4681  BE      		cp	(hl)
11010:	4682  23      		inc	hl
11011:	4683  CA7246  		jp	z,l4672
11012:	4686  3F      		ccf
11013:	4687  C35028  		jp	l2850
11014:			;
11015:			; Function : OCT$(X)
11016:			;
11017:	468A          	l468a:
11018:	468A  CD6F36  		call	l366f
11019:	468D  C39946  		jp	l4699
11020:			;
11021:			; Function : HEX$(X)
11022:			;
11023:	4690          	l4690:
11024:	4690  CD7236  		call	l3672
11025:	4693  C39946  		jp	l4699
11026:			;
11027:			; Function : STR$(X)
11028:			;
11029:	4696          	l4696:
11030:	4696  CD2931  		call	l3129
11031:	4699          	l4699:
11032:	4699  CDC746  		call	l46c7
11033:	469C  CDA848  		call	l48a8
11034:	469F  01FC48  		ld	bc,l48fc
11035:	46A2  C5      		push	bc
11036:	46A3          	l46a3:
11037:	46A3  7E      		ld	a,(hl)
11038:	46A4  23      		inc	hl
11039:	46A5  E5      		push	hl
11040:	46A6  CD3C47  		call	l473c
11041:	46A9  E1      		pop	hl
11042:	46AA  4E      		ld	c,(hl)
11043:	46AB  23      		inc	hl
11044:	46AC  46      		ld	b,(hl)
11045:	46AD  CDBC46  		call	l46bc
11046:	46B0  E5      		push	hl
11047:	46B1  6F      		ld	l,a
11048:	46B2  CD9B48  		call	l489b
11049:	46B5  D1      		pop	de
11050:	46B6  C9      		ret
11051:			;
11052:			;
11053:			;
11054:	46B7          	l46b7:
11055:	46B7  3E01    		ld	a,1
11056:	46B9          	l46b9:
11057:	46B9  CD3C47  		call	l473c
11058:	46BC          	l46bc:
11059:	46BC  21980A  		ld	hl,STR.arr+10*3	; Point to last record
11060:	46BF  E5      		push	hl
11061:	46C0  77      		ld	(hl),a		; Save length
11062:	46C1  23      		inc	hl
11063:	46C2  73      		ld	(hl),e		; .. and pointer
11064:	46C3  23      		inc	hl
11065:	46C4  72      		ld	(hl),d
11066:	46C5  E1      		pop	hl
11067:	46C6  C9      		ret
11068:			;
11069:			;
11070:			;
11071:	46C7          	l46c7:
11072:	46C7  2B      		dec	hl
11073:	46C8          	l46c8:
11074:	46C8  0622    		ld	b,'"'		; Set character
11075:	46CA          	l46ca:
11076:	46CA  50      		ld	d,b		; Copy character
11077:	46CB          	l46cb:
11078:	46CB  E5      		push	hl
11079:	46CC  0EFF    		ld	c,-1		; Init count
11080:	46CE          	l46ce:
11081:	46CE  23      		inc	hl
11082:	46CF  7E      		ld	a,(hl)		; Get character
11083:	46D0  0C      		inc	c
11084:	46D1  B7      		or	a		; Test end
11085:	46D2  CADD46  		jp	z,l46dd
11086:	46D5  BA      		cp	d		; Find sync character
11087:	46D6  CADD46  		jp	z,l46dd
11088:	46D9  B8      		cp	b		; .. next
11089:	46DA  C2CE46  		jp	nz,l46ce
11090:	46DD          	l46dd:
11091:	46DD  FE22    		cp	'"'
11092:	46DF  CC0513  		call	z,get.tok
11093:	46E2  E5      		push	hl
11094:	46E3  78      		ld	a,b
11095:	46E4  FE2C    		cp	','
11096:	46E6  C2F546  		jp	nz,l46f5
11097:	46E9  0C      		inc	c
11098:	46EA          	l46ea:
11099:	46EA  0D      		dec	c
11100:	46EB  CAF546  		jp	z,l46f5
11101:	46EE  2B      		dec	hl
11102:	46EF  7E      		ld	a,(hl)
11103:	46F0  FE20    		cp	' '
11104:	46F2  CAEA46  		jp	z,l46ea
11105:	46F5          	l46f5:
11106:	46F5  E1      		pop	hl
11107:	46F6  E3      		ex	(sp),hl
11108:	46F7  23      		inc	hl
11109:	46F8  EB      		ex	de,hl
11110:	46F9  79      		ld	a,c
11111:	46FA  CDBC46  		call	l46bc
11112:	46FD          	l46fd:
11113:	46FD  11980A  		ld	de,STR.arr+10*3	; Point to last record
11114:	4700          		_LD.A
11115:	4701          	l4701:
11116:	4701  D5      		push	de
11117:	4702  2A780A  		ld	hl,(STR.ptr)
11118:	4705  22040C  		ld	($$ARG+4),hl	; Set string pointer
11119:	4708  3E03    		ld	a,3
11120:	470A  32670A  		ld	($ARGLEN),a	; .. and length
11121:	470D  CDC928  		call	l28c9
11122:	4710  119B0A  		ld	de,STR.arr+3*11
11123:	4713  CDCD43  		call	cp.r		; Compare HL:DE
11124:	4716  22780A  		ld	(STR.ptr),hl	; .. save pointer
11125:	4719  E1      		pop	hl
11126:	471A  7E      		ld	a,(hl)
11127:	471B  C0      		ret	nz		; .. disd not reach top
11128:	471C  111000  		ld	de,16		; String formula too complex
11129:	471F  C3E30C  		jp	_error
11130:			;
11131:			;
11132:			;
11133:	4722          	l4722:
11134:	4722  23      		inc	hl
11135:			;
11136:			;
11137:			;
11138:	4723          	l4723:
11139:	4723  CDC746  		call	l46c7
11140:	4726          	l4726:
11141:	4726  CDA848  		call	l48a8
11142:	4729  CDB928  		call	l28b9
11143:	472C  14      		inc	d
11144:	472D          	l472d:
11145:	472D  15      		dec	d
11146:	472E  C8      		ret	z
11147:	472F  0A      		ld	a,(bc)
11148:	4730  CDD640  		call	putchar		; .. print character
11149:	4733  FE0D    		cp	cr
11150:	4735  CC2B42  		call	z,l422b		; Process new line
11151:	4738  03      		inc	bc
11152:	4739  C32D47  		jp	l472d
11153:			;
11154:			;
11155:			;
11156:	473C          	l473c:
11157:	473C  B7      		or	a
11158:	473D          		_LD.C
11159:	473E          	l473e:
11160:	473E  F1      		pop	af
11161:	473F  F5      		push	af
11162:	4740  2AC60A  		ld	hl,(l0ac6)
11163:	4743  EB      		ex	de,hl
11164:	4744  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
11165:	4747  2F      		cpl
11166:	4748  4F      		ld	c,a
11167:	4749  06FF    		ld	b,-1
11168:	474B  09      		add	hl,bc
11169:	474C  23      		inc	hl
11170:	474D  CDCD43  		call	cp.r
11171:	4750  DA5A47  		jp	c,l475a		; HL < DE
11172:	4753  229B0A  		ld	(mem.top),hl	; .. set top of memory
11173:	4756  23      		inc	hl
11174:	4757  EB      		ex	de,hl
11175:	4758          	pop.a:
11176:	4758  F1      		pop	af
11177:	4759  C9      		ret
11178:	475A          	l475a:
11179:	475A  F1      		pop	af
11180:	475B  110E00  		ld	de,14		; Out of string space
11181:	475E  CAE30C  		jp	z,_error
11182:	4761  BF      		cp	a
11183:	4762  F5      		push	af
11184:	4763          		_LD.BC
11185:	4764          	l47xx::
11186:	4764  3E47    		ld	a,'G'
11187:	4766  C5      		push	bc
11188:			;
11189:			;
11190:			;
11191:	4767          	l4767:
11192:	4767  2A760A  		ld	hl,(himem)	; Get top of memory
11193:	476A          	l476a:
11194:	476A  229B0A  		ld	(mem.top),hl	; .. set top
11195:	476D  210000  		ld	hl,l0000
11196:	4770  E5      		push	hl
11197:	4771  2AC60A  		ld	hl,(l0ac6)
11198:	4774  E5      		push	hl
11199:	4775  217A0A  		ld	hl,STR.arr	; Init array
11200:	4778          	l4778:
11201:	4778  EB      		ex	de,hl
11202:	4779  2A780A  		ld	hl,(STR.ptr)	; Get string pointer
11203:	477C  EB      		ex	de,hl
11204:	477D  CDCD43  		call	cp.r		; Compare HL:DE
11205:	4780  017847  		ld	bc,l4778
11206:	4783  C21248  		jp	nz,l4812	; .. no match
11207:	4786  214C0B  		ld	hl,l0b4c
11208:	4789  22B80B  		ld	(l0bb8),hl
11209:	478C  2AC40A  		ld	hl,(l0ac4)
11210:	478F  22B50B  		ld	(l0bb5),hl
11211:	4792  2AC20A  		ld	hl,(prg.top)	; Get top of program
11212:	4795          	l4795:
11213:	4795  EB      		ex	de,hl
11214:	4796  2AB50B  		ld	hl,(l0bb5)
11215:	4799  EB      		ex	de,hl
11216:	479A  CDCD43  		call	cp.r
11217:	479D  CAB947  		jp	z,l47b9		; HL = DE
11218:	47A0  7E      		ld	a,(hl)
11219:	47A1  23      		inc	hl
11220:	47A2  23      		inc	hl
11221:	47A3  23      		inc	hl
11222:	47A4  F5      		push	af
11223:	47A5  CD9A3C  		call	l3c9a
11224:	47A8  F1      		pop	af
11225:	47A9  FE03    		cp	3
11226:	47AB  C2B247  		jp	nz,l47b2
11227:	47AE  CD1348  		call	l4813
11228:	47B1  AF      		xor	a
11229:	47B2          	l47b2:
11230:	47B2  5F      		ld	e,a
11231:	47B3  1600    		ld	d,0
11232:	47B5  19      		add	hl,de
11233:	47B6  C39547  		jp	l4795
11234:	47B9          	l47b9:
11235:	47B9  2AB80B  		ld	hl,(l0bb8)
11236:	47BC  5E      		ld	e,(hl)
11237:	47BD  23      		inc	hl
11238:	47BE  56      		ld	d,(hl)
11239:	47BF  7A      		ld	a,d
11240:	47C0  B3      		or	e
11241:	47C1  2AC40A  		ld	hl,(l0ac4)
11242:	47C4  CADB47  		jp	z,l47db
11243:	47C7  EB      		ex	de,hl
11244:	47C8  22B80B  		ld	(l0bb8),hl
11245:	47CB  23      		inc	hl
11246:	47CC  23      		inc	hl
11247:	47CD  5E      		ld	e,(hl)
11248:	47CE  23      		inc	hl
11249:	47CF  56      		ld	d,(hl)
11250:	47D0  23      		inc	hl
11251:	47D1  EB      		ex	de,hl
11252:	47D2  19      		add	hl,de
11253:	47D3  22B50B  		ld	(l0bb5),hl
11254:	47D6  EB      		ex	de,hl
11255:	47D7  C39547  		jp	l4795
11256:	47DA          	l47da:
11257:	47DA  C1      		pop	bc
11258:	47DB          	l47db:
11259:	47DB  EB      		ex	de,hl
11260:	47DC  2AC60A  		ld	hl,(l0ac6)
11261:	47DF  EB      		ex	de,hl
11262:	47E0  CDCD43  		call	cp.r
11263:	47E3  CA3748  		jp	z,l4837		; HL = DE
11264:	47E6  7E      		ld	a,(hl)
11265:	47E7  23      		inc	hl
11266:	47E8  F5      		push	af
11267:	47E9  23      		inc	hl
11268:	47EA  23      		inc	hl
11269:	47EB  CD9A3C  		call	l3c9a
11270:	47EE  4E      		ld	c,(hl)
11271:	47EF  23      		inc	hl
11272:	47F0  46      		ld	b,(hl)
11273:	47F1  23      		inc	hl
11274:	47F2  F1      		pop	af
11275:	47F3  E5      		push	hl
11276:	47F4  09      		add	hl,bc
11277:	47F5  FE03    		cp	3
11278:	47F7  C2DA47  		jp	nz,l47da
11279:	47FA  229F0A  		ld	(_f.$$),hl	; Save pointer
11280:	47FD  E1      		pop	hl
11281:	47FE  4E      		ld	c,(hl)
11282:	47FF  0600    		ld	b,0
11283:	4801  09      		add	hl,bc
11284:	4802  09      		add	hl,bc
11285:	4803  23      		inc	hl
11286:	4804          	l4804:
11287:	4804  EB      		ex	de,hl
11288:	4805  2A9F0A  		ld	hl,(_f.$$)	; Get file pointer
11289:	4808  EB      		ex	de,hl
11290:	4809  CDCD43  		call	cp.r
11291:	480C  CADB47  		jp	z,l47db		; HL = DE
11292:	480F  010448  		ld	bc,l4804
11293:	4812          	l4812:
11294:	4812  C5      		push	bc		; Set return address
11295:			;
11296:			;
11297:			;
11298:	4813          	l4813:
11299:	4813  AF      		xor	a
11300:	4814  B6      		or	(hl)
11301:	4815  23      		inc	hl
11302:	4816  5E      		ld	e,(hl)
11303:	4817  23      		inc	hl
11304:	4818  56      		ld	d,(hl)
11305:	4819  23      		inc	hl
11306:	481A  C8      		ret	z
11307:	481B  44      		ld	b,h
11308:	481C  4D      		ld	c,l
11309:	481D  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
11310:	4820  CDCD43  		call	cp.r		; Compare HL:DE
11311:	4823  60      		ld	h,b
11312:	4824  69      		ld	l,c
11313:	4825  D8      		ret	c		; HL < DE
11314:	4826  E1      		pop	hl
11315:	4827  E3      		ex	(sp),hl
11316:	4828  CDCD43  		call	cp.r		; Compare HL:DE
11317:	482B  E3      		ex	(sp),hl
11318:	482C  E5      		push	hl
11319:	482D  60      		ld	h,b
11320:	482E  69      		ld	l,c
11321:	482F  D0      		ret	nc		; HL >= DE
11322:	4830  C1      		pop	bc
11323:	4831  F1      		pop	af
11324:	4832  F1      		pop	af
11325:	4833  E5      		push	hl
11326:	4834  D5      		push	de
11327:	4835  C5      		push	bc
11328:	4836  C9      		ret
11329:	4837          	l4837:
11330:	4837  D1      		pop	de
11331:	4838  E1      		pop	hl
11332:	4839  7C      		ld	a,h
11333:	483A  B5      		or	l
11334:	483B  C8      		ret	z
11335:	483C  2B      		dec	hl
11336:	483D  46      		ld	b,(hl)
11337:	483E  2B      		dec	hl
11338:	483F  4E      		ld	c,(hl)
11339:	4840  E5      		push	hl
11340:	4841  2B      		dec	hl
11341:	4842  6E      		ld	l,(hl)
11342:	4843  2600    		ld	h,0
11343:	4845  09      		add	hl,bc
11344:	4846  50      		ld	d,b
11345:	4847  59      		ld	e,c
11346:	4848  2B      		dec	hl
11347:	4849  44      		ld	b,h
11348:	484A  4D      		ld	c,l
11349:	484B  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
11350:	484E  CDB942  		call	l42b9
11351:	4851  E1      		pop	hl
11352:	4852  71      		ld	(hl),c
11353:	4853  23      		inc	hl
11354:	4854  70      		ld	(hl),b
11355:	4855  60      		ld	h,b
11356:	4856  69      		ld	l,c
11357:	4857  2B      		dec	hl
11358:	4858  C36A47  		jp	l476a
11359:			;
11360:			;
11361:			;
11362:	485B          	l485b:
11363:	485B  C5      		push	bc
11364:	485C  E5      		push	hl
11365:	485D  2A040C  		ld	hl,($$ARG+4)
11366:	4860  E3      		ex	(sp),hl
11367:	4861  CD931B  		call	l1b93
11368:	4864  E3      		ex	(sp),hl
11369:	4865  CD3B2A  		call	vrf.str		; Verify string follows
11370:	4868  7E      		ld	a,(hl)
11371:	4869  E5      		push	hl
11372:	486A  2A040C  		ld	hl,($$ARG+4)
11373:	486D  E5      		push	hl
11374:	486E  86      		add	a,(hl)
11375:	486F  110F00  		ld	de,15		; String too long
11376:	4872  DAE30C  		jp	c,_error
11377:	4875  CDB946  		call	l46b9
11378:	4878  D1      		pop	de
11379:	4879  CDAC48  		call	l48ac
11380:	487C  E3      		ex	(sp),hl
11381:	487D  CDAB48  		call	l48ab
11382:	4880  E5      		push	hl
11383:	4881  2A990A  		ld	hl,(STR.arr+10*3+1)
11384:	4884  EB      		ex	de,hl		; Get last address
11385:	4885  CD9348  		call	l4893
11386:	4888  CD9348  		call	l4893
11387:	488B  21121A  		ld	hl,l1a12
11388:	488E  E3      		ex	(sp),hl
11389:	488F  E5      		push	hl
11390:	4890  C3FD46  		jp	l46fd
11391:			;
11392:			;
11393:			;
11394:	4893          	l4893:
11395:	4893  E1      		pop	hl
11396:	4894  E3      		ex	(sp),hl
11397:	4895  7E      		ld	a,(hl)		; Get length
11398:	4896  23      		inc	hl
11399:	4897  4E      		ld	c,(hl)		; .. and pointer
11400:	4898  23      		inc	hl
11401:	4899  46      		ld	b,(hl)
11402:	489A  6F      		ld	l,a
11403:	489B          	l489b:
11404:	489B  2C      		inc	l
11405:	489C          	l489c:
11406:	489C  2D      		dec	l		; Test done
11407:	489D  C8      		ret	z		; .. yeap
11408:	489E  0A      		ld	a,(bc)		; .. unpack
11409:	489F  12      		ld	(de),a
11410:	48A0  03      		inc	bc
11411:	48A1  13      		inc	de
11412:	48A2  C39C48  		jp	l489c
11413:			;
11414:			; Fetch address of string record
11415:			;
11416:	48A5          	str.adr:
11417:	48A5  CD3B2A  		call	vrf.str		; Verify string follows
11418:	48A8          	l48a8:
11419:	48A8  2A040C  		ld	hl,($$ARG+4)	; Fetch address of string
11420:	48AB          	l48ab:
11421:	48AB  EB      		ex	de,hl
11422:	48AC          	l48ac:
11423:	48AC  CDC648  		call	l48c6
11424:	48AF  EB      		ex	de,hl
11425:	48B0  C0      		ret	nz
11426:	48B1  D5      		push	de
11427:	48B2  50      		ld	d,b
11428:	48B3  59      		ld	e,c
11429:	48B4  1B      		dec	de
11430:	48B5  4E      		ld	c,(hl)
11431:	48B6  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
11432:	48B9  CDCD43  		call	cp.r
11433:	48BC  C2C448  		jp	nz,l48c4	; HL <> DE
11434:	48BF  47      		ld	b,a
11435:	48C0  09      		add	hl,bc
11436:	48C1  229B0A  		ld	(mem.top),hl	; .. save top of memory
11437:	48C4          	l48c4:
11438:	48C4  E1      		pop	hl
11439:	48C5  C9      		ret
11440:			;
11441:			;
11442:			;
11443:	48C6          	l48c6:
11444:	48C6  2A780A  		ld	hl,(STR.ptr)	; Get string pointer
11445:	48C9  2B      		dec	hl
11446:	48CA  46      		ld	b,(hl)
11447:	48CB  2B      		dec	hl
11448:	48CC  4E      		ld	c,(hl)
11449:	48CD  2B      		dec	hl
11450:	48CE  CDCD43  		call	cp.r
11451:	48D1  C0      		ret	nz		; HL <> DE
11452:	48D2  22780A  		ld	(STR.ptr),hl	; .. save new
11453:	48D5  C9      		ret
11454:			;
11455:			; Function : LEN(X$)
11456:			;
11457:	48D6          	l48d6:
11458:	48D6  01D51D  		ld	bc,l1dd5
11459:	48D9  C5      		push	bc
11460:	48DA          	l48da:
11461:	48DA  CDA548  		call	str.adr		; Get address of string
11462:	48DD  AF      		xor	a
11463:	48DE  57      		ld	d,a		; Clear hi
11464:	48DF  7E      		ld	a,(hl)		; .. fetch length
11465:	48E0  B7      		or	a
11466:	48E1  C9      		ret
11467:			;
11468:			; Functin : ASC(X$)
11469:			;
11470:	48E2          	l48e2:
11471:	48E2  01D51D  		ld	bc,l1dd5
11472:	48E5  C5      		push	bc
11473:	48E6          	l48e6:
11474:	48E6  CDDA48  		call	l48da		; Get string and its length
11475:	48E9  CA1814  		jp	z,_ill.func	; .. empty string
11476:	48EC  23      		inc	hl
11477:	48ED  5E      		ld	e,(hl)		; Fetch pointer
11478:	48EE  23      		inc	hl
11479:	48EF  56      		ld	d,(hl)
11480:	48F0  1A      		ld	a,(de)		; .. fetch (1st) character
11481:	48F1  C9      		ret
11482:			;
11483:			; Function : CHR$(I)
11484:			;
11485:	48F2          	l48f2:
11486:	48F2  CDB746  		call	l46b7
11487:	48F5  CD7820  		call	get.byte	; Get byte
11488:	48F8          	l48f8:
11489:	48F8  2A990A  		ld	hl,(STR.arr+10*3+1)
11490:	48FB  73      		ld	(hl),e		; .. save as character
11491:	48FC          	l48fc:
11492:	48FC  C1      		pop	bc
11493:	48FD  C3FD46  		jp	l46fd
11494:	4900          	l4900:
11495:	4900  CD0513  		call	get.tok
11496:	4903  CDD343  		call	ilcmp
11497:	4906  28      		db	'('
11498:	4907  CD7520  		call	l2075
11499:	490A  D5      		push	de
11500:	490B  CDD343  		call	ilcmp
11501:	490E  2C      		db	','
11502:	490F  CD021A  		call	EXPR		; Get expression
11503:	4912  CDD343  		call	ilcmp
11504:	4915  29      		db	')'
11505:	4916  E3      		ex	(sp),hl
11506:	4917  E5      		push	hl
11507:	4918  CD641D  		call	get.type	; Get type
11508:	491B  CA2449  		jp	z,l4924		; .. got pointer
11509:	491E  CD7820  		call	get.byte	; Get byte
11510:	4921  C32749  		jp	l4927
11511:	4924          	l4924:
11512:	4924  CDE648  		call	l48e6
11513:	4927          	l4927:
11514:	4927  D1      		pop	de
11515:	4928  CD3049  		call	l4930
11516:			;
11517:			; Function : SPACE$(X)
11518:			;
11519:	492B          	l492b:
11520:	492B  CD7820  		call	get.byte	; Get byte length
11521:	492E  3E20    		ld	a,' '		; .. set filler
11522:	4930          	l4930:
11523:	4930  F5      		push	af
11524:	4931  7B      		ld	a,e
11525:	4932  CDB946  		call	l46b9
11526:	4935  47      		ld	b,a
11527:	4936  F1      		pop	af
11528:	4937  04      		inc	b
11529:	4938  05      		dec	b
11530:	4939  CAFC48  		jp	z,l48fc
11531:	493C  2A990A  		ld	hl,(STR.arr+10*3+1)
11532:	493F          	l493f:
11533:	493F  77      		ld	(hl),a		; .. set constant
11534:	4940  23      		inc	hl
11535:	4941  05      		dec	b
11536:	4942  C23F49  		jp	nz,l493f
11537:	4945  C3FC48  		jp	l48fc
11538:			;
11539:			; Function : LEFT$(X$)
11540:			;
11541:	4948          	l4948:
11542:	4948  CDC149  		call	l49c1
11543:	494B  AF      		xor	a
11544:	494C          	l494c:
11545:	494C  E3      		ex	(sp),hl
11546:	494D  4F      		ld	c,a
11547:	494E          		_LD.A
11548:	494F          	l494f:
11549:	494F  E5      		push	hl
11550:	4950          	l4950:
11551:	4950  E5      		push	hl
11552:	4951  7E      		ld	a,(hl)
11553:	4952  B8      		cp	b
11554:	4953  DA5849  		jp	c,l4958
11555:	4956  78      		ld	a,b
11556:	4957          		_LD.DE
11557:	4958          	l4958:
11558:	4958  0E00    		ld	c,0
11559:	495A  C5      		push	bc
11560:	495B  CD3C47  		call	l473c
11561:	495E  C1      		pop	bc
11562:	495F  E1      		pop	hl
11563:	4960  E5      		push	hl
11564:	4961  23      		inc	hl
11565:	4962  46      		ld	b,(hl)
11566:	4963  23      		inc	hl
11567:	4964  66      		ld	h,(hl)
11568:	4965  68      		ld	l,b
11569:	4966  0600    		ld	b,0
11570:	4968  09      		add	hl,bc
11571:	4969  44      		ld	b,h
11572:	496A  4D      		ld	c,l
11573:	496B  CDBC46  		call	l46bc
11574:	496E  6F      		ld	l,a
11575:	496F  CD9B48  		call	l489b
11576:	4972  D1      		pop	de
11577:	4973  CDAC48  		call	l48ac
11578:	4976  C3FD46  		jp	l46fd
11579:			;
11580:			; Function : RIGHT$(X$,I)
11581:			;
11582:	4979          	l4979:
11583:	4979  CDC149  		call	l49c1
11584:	497C  D1      		pop	de
11585:	497D  D5      		push	de
11586:	497E  1A      		ld	a,(de)
11587:	497F  90      		sub	b
11588:	4980  C34C49  		jp	l494c
11589:			;
11590:			; Function : MID$(X$,I[,J])
11591:			;
11592:	4983          	l4983:
11593:	4983  EB      		ex	de,hl
11594:	4984  7E      		ld	a,(hl)
11595:	4985  CDC649  		call	l49c6
11596:	4988  04      		inc	b
11597:	4989  05      		dec	b
11598:	498A  CA1814  		jp	z,_ill.func	; Invalid if zero
11599:	498D  C5      		push	bc
11600:	498E  CDE34A  		call	l4ae3
11601:	4991  F1      		pop	af
11602:	4992  E3      		ex	(sp),hl
11603:	4993  015049  		ld	bc,l4950
11604:	4996  C5      		push	bc
11605:	4997  3D      		dec	a
11606:	4998  BE      		cp	(hl)
11607:	4999  0600    		ld	b,0
11608:	499B  D0      		ret	nc
11609:	499C  4F      		ld	c,a
11610:	499D  7E      		ld	a,(hl)
11611:	499E  91      		sub	c
11612:	499F  BB      		cp	e
11613:	49A0  47      		ld	b,a
11614:	49A1  D8      		ret	c
11615:	49A2  43      		ld	b,e
11616:	49A3  C9      		ret
11617:			;
11618:			; Funciton : VAL(X$)
11619:			;
11620:	49A4          	l49a4:
11621:	49A4  CDDA48  		call	l48da
11622:	49A7  CAD51D  		jp	z,l1dd5
11623:	49AA  5F      		ld	e,a
11624:	49AB  23      		inc	hl
11625:	49AC  7E      		ld	a,(hl)
11626:	49AD  23      		inc	hl
11627:	49AE  66      		ld	h,(hl)
11628:	49AF  6F      		ld	l,a
11629:	49B0  E5      		push	hl
11630:	49B1  19      		add	hl,de
11631:	49B2  46      		ld	b,(hl)
11632:	49B3  72      		ld	(hl),d
11633:	49B4  E3      		ex	(sp),hl
11634:	49B5  C5      		push	bc
11635:	49B6  2B      		dec	hl
11636:	49B7  CD0513  		call	get.tok
11637:	49BA  CDCA2E  		call	cnvdoub		; Convert double
11638:	49BD  C1      		pop	bc
11639:	49BE  E1      		pop	hl
11640:	49BF  70      		ld	(hl),b
11641:	49C0  C9      		ret
11642:	49C1          	l49c1:
11643:	49C1  EB      		ex	de,hl
11644:	49C2  CDD343  		call	ilcmp
11645:	49C5  29      		db	')'
11646:	49C6          	l49c6:
11647:	49C6  C1      		pop	bc
11648:	49C7  D1      		pop	de
11649:	49C8  C5      		push	bc
11650:	49C9  43      		ld	b,e
11651:	49CA  C9      		ret
11652:	49CB          	l49cb:
11653:	49CB  CD0513  		call	get.tok
11654:	49CE  CDFE19  		call	l19fe
11655:	49D1  CD641D  		call	get.type	; Get type
11656:	49D4  3E01    		ld	a,1
11657:	49D6  F5      		push	af
11658:	49D7  CAED49  		jp	z,l49ed		; .. got pointer
11659:	49DA  F1      		pop	af
11660:	49DB  CD7820  		call	get.byte	; Get byte
11661:	49DE  B7      		or	a		; Verify not zero
11662:	49DF  CA1814  		jp	z,_ill.func	; .. invalid if so
11663:	49E2  F5      		push	af
11664:	49E3  CDD343  		call	ilcmp
11665:	49E6  2C      		db	','
11666:	49E7  CD021A  		call	EXPR		; Get expression
11667:	49EA  CD3B2A  		call	vrf.str		; Verify string follows
11668:	49ED          	l49ed:
11669:	49ED  CDD343  		call	ilcmp
11670:	49F0  2C      		db	','
11671:	49F1  E5      		push	hl
11672:	49F2  2A040C  		ld	hl,($$ARG+4)
11673:	49F5  E3      		ex	(sp),hl
11674:	49F6  CD021A  		call	EXPR		; Get expression
11675:	49F9  CDD343  		call	ilcmp
11676:	49FC  29      		db	')'
11677:	49FD  E5      		push	hl
11678:	49FE  CDA548  		call	str.adr		; Get address of string
11679:	4A01  EB      		ex	de,hl
11680:	4A02  C1      		pop	bc
11681:	4A03  E1      		pop	hl
11682:	4A04  F1      		pop	af
11683:	4A05  C5      		push	bc
11684:	4A06  015727  		ld	bc,l2757
11685:	4A09  C5      		push	bc
11686:	4A0A  01D51D  		ld	bc,l1dd5
11687:	4A0D  C5      		push	bc
11688:	4A0E  F5      		push	af
11689:	4A0F  D5      		push	de
11690:	4A10  CDAB48  		call	l48ab
11691:	4A13  D1      		pop	de
11692:	4A14  F1      		pop	af
11693:	4A15  47      		ld	b,a
11694:	4A16  3D      		dec	a
11695:	4A17  4F      		ld	c,a
11696:	4A18  BE      		cp	(hl)
11697:	4A19  3E00    		ld	a,0
11698:	4A1B  D0      		ret	nc
11699:	4A1C  1A      		ld	a,(de)
11700:	4A1D  B7      		or	a
11701:	4A1E  78      		ld	a,b
11702:	4A1F  C8      		ret	z
11703:	4A20  7E      		ld	a,(hl)
11704:	4A21  23      		inc	hl
11705:	4A22  46      		ld	b,(hl)
11706:	4A23  23      		inc	hl
11707:	4A24  66      		ld	h,(hl)
11708:	4A25  68      		ld	l,b
11709:	4A26  0600    		ld	b,0
11710:	4A28  09      		add	hl,bc
11711:	4A29  91      		sub	c
11712:	4A2A  47      		ld	b,a
11713:	4A2B  C5      		push	bc
11714:	4A2C  D5      		push	de
11715:	4A2D  E3      		ex	(sp),hl
11716:	4A2E  4E      		ld	c,(hl)
11717:	4A2F  23      		inc	hl
11718:	4A30  5E      		ld	e,(hl)
11719:	4A31  23      		inc	hl
11720:	4A32  56      		ld	d,(hl)
11721:	4A33  E1      		pop	hl
11722:	4A34          	l4a34:
11723:	4A34  E5      		push	hl
11724:	4A35  D5      		push	de
11725:	4A36  C5      		push	bc
11726:	4A37          	l4a37:
11727:	4A37  1A      		ld	a,(de)
11728:	4A38  BE      		cp	(hl)
11729:	4A39  C2554A  		jp	nz,l4a55
11730:	4A3C  13      		inc	de
11731:	4A3D  0D      		dec	c
11732:	4A3E  CA4C4A  		jp	z,l4a4c
11733:	4A41  23      		inc	hl
11734:	4A42  05      		dec	b
11735:	4A43  C2374A  		jp	nz,l4a37
11736:	4A46  D1      		pop	de
11737:	4A47  D1      		pop	de
11738:	4A48  C1      		pop	bc
11739:	4A49          	l4a49:
11740:	4A49  D1      		pop	de
11741:	4A4A  AF      		xor	a
11742:	4A4B  C9      		ret
11743:	4A4C          	l4a4c:
11744:	4A4C  E1      		pop	hl
11745:	4A4D  D1      		pop	de
11746:	4A4E  D1      		pop	de
11747:	4A4F  C1      		pop	bc
11748:	4A50  78      		ld	a,b
11749:	4A51  94      		sub	h
11750:	4A52  81      		add	a,c
11751:	4A53  3C      		inc	a
11752:	4A54  C9      		ret
11753:	4A55          	l4a55:
11754:	4A55  C1      		pop	bc
11755:	4A56  D1      		pop	de
11756:	4A57  E1      		pop	hl
11757:	4A58  23      		inc	hl
11758:	4A59  05      		dec	b
11759:	4A5A  C2344A  		jp	nz,l4a34
11760:	4A5D  C3494A  		jp	l4a49
11761:	4A60          	l4a60:
11762:	4A60  CDD343  		call	ilcmp
11763:	4A63  28      		db	'('
11764:	4A64  CD8B39  		call	var.adr		; Get address of variable
11765:	4A67  CD3B2A  		call	vrf.str		; Verify string follows
11766:	4A6A  E5      		push	hl
11767:	4A6B  D5      		push	de
11768:	4A6C  EB      		ex	de,hl
11769:	4A6D  23      		inc	hl
11770:	4A6E  5E      		ld	e,(hl)
11771:	4A6F  23      		inc	hl
11772:	4A70  56      		ld	d,(hl)
11773:	4A71  2AC60A  		ld	hl,(l0ac6)
11774:	4A74  CDCD43  		call	cp.r
11775:	4A77  DA8D4A  		jp	c,l4a8d		; HL < DE
11776:	4A7A  2A9A07  		ld	hl,(prg.base)	; Get base of program
11777:	4A7D  CDCD43  		call	cp.r
11778:	4A80  D28D4A  		jp	nc,l4a8d	; HL >= DE
11779:	4A83  E1      		pop	hl
11780:	4A84  E5      		push	hl
11781:	4A85  CDA346  		call	l46a3
11782:	4A88  E1      		pop	hl
11783:	4A89  E5      		push	hl
11784:	4A8A  CDC928  		call	l28c9
11785:	4A8D          	l4a8d:
11786:	4A8D  E1      		pop	hl
11787:	4A8E  E3      		ex	(sp),hl
11788:	4A8F  CDD343  		call	ilcmp
11789:	4A92  2C      		db	','
11790:	4A93  CD7520  		call	l2075
11791:	4A96  B7      		or	a
11792:	4A97  CA1814  		jp	z,_ill.func	; Invalid if zero
11793:	4A9A  F5      		push	af
11794:	4A9B  7E      		ld	a,(hl)
11795:	4A9C  CDE34A  		call	l4ae3
11796:	4A9F  D5      		push	de
11797:	4AA0  CDF719  		call	l19f7
11798:	4AA3  E5      		push	hl
11799:	4AA4  CDA548  		call	str.adr		; Get address of string
11800:	4AA7  EB      		ex	de,hl
11801:	4AA8  E1      		pop	hl
11802:	4AA9  C1      		pop	bc
11803:	4AAA  F1      		pop	af
11804:	4AAB  47      		ld	b,a
11805:	4AAC  E3      		ex	(sp),hl
11806:	4AAD  E5      		push	hl
11807:	4AAE  215727  		ld	hl,l2757
11808:	4AB1  E3      		ex	(sp),hl
11809:	4AB2  79      		ld	a,c
11810:	4AB3  B7      		or	a
11811:	4AB4  C8      		ret	z
11812:	4AB5  7E      		ld	a,(hl)
11813:	4AB6  90      		sub	b
11814:	4AB7  DA1814  		jp	c,_ill.func	; .. invalid
11815:	4ABA  3C      		inc	a
11816:	4ABB  B9      		cp	c
11817:	4ABC  DAC04A  		jp	c,l4ac0
11818:	4ABF  79      		ld	a,c
11819:	4AC0          	l4ac0:
11820:	4AC0  48      		ld	c,b
11821:	4AC1  0D      		dec	c
11822:	4AC2  0600    		ld	b,0
11823:	4AC4  D5      		push	de
11824:	4AC5  23      		inc	hl
11825:	4AC6  5E      		ld	e,(hl)
11826:	4AC7  23      		inc	hl
11827:	4AC8  66      		ld	h,(hl)
11828:	4AC9  6B      		ld	l,e
11829:	4ACA  09      		add	hl,bc
11830:	4ACB  47      		ld	b,a
11831:	4ACC  D1      		pop	de
11832:	4ACD  EB      		ex	de,hl
11833:	4ACE  4E      		ld	c,(hl)
11834:	4ACF  23      		inc	hl
11835:	4AD0  7E      		ld	a,(hl)
11836:	4AD1  23      		inc	hl
11837:	4AD2  66      		ld	h,(hl)
11838:	4AD3  6F      		ld	l,a
11839:	4AD4  EB      		ex	de,hl
11840:	4AD5  79      		ld	a,c
11841:	4AD6  B7      		or	a
11842:	4AD7  C8      		ret	z
11843:	4AD8          	l4ad8:
11844:	4AD8  1A      		ld	a,(de)
11845:	4AD9  77      		ld	(hl),a
11846:	4ADA  13      		inc	de
11847:	4ADB  23      		inc	hl
11848:	4ADC  0D      		dec	c
11849:	4ADD  C8      		ret	z
11850:	4ADE  05      		dec	b
11851:	4ADF  C2D84A  		jp	nz,l4ad8
11852:	4AE2  C9      		ret
11853:	4AE3          	l4ae3:
11854:	4AE3  1EFF    		ld	e,0ffh
11855:	4AE5  FE29    		cp	')'
11856:	4AE7  CAF14A  		jp	z,l4af1
11857:	4AEA  CDD343  		call	ilcmp
11858:	4AED  2C      		db	','
11859:	4AEE  CD7520  		call	l2075
11860:	4AF1          	l4af1:
11861:	4AF1  CDD343  		call	ilcmp
11862:	4AF4  29      		db	')'
11863:	4AF5  C9      		ret
11864:			;
11865:			; Function : FRE(0)
11866:			;            FRE("")
11867:			;
11868:	4AF6          	l4af6:
11869:	4AF6  CD641D  		call	get.type	; Get type
11870:	4AF9  C2024B  		jp	nz,l4b02	; .. not a pointer
11871:	4AFC  CDA848  		call	l48a8
11872:	4AFF  CD6747  		call	l4767
11873:	4B02          	l4b02:
11874:	4B02  EB      		ex	de,hl
11875:	4B03  2AC60A  		ld	hl,(l0ac6)
11876:	4B06  EB      		ex	de,hl
11877:	4B07  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
11878:	4B0A  C3C21D  		jp	l1dc2
11879:	4B0D          	l4b0d:
11880:	4B0D  3E3F    		ld	a,'?'
11881:	4B0F  CDD640  		call	putchar		; Give mark
11882:	4B12  3E20    		ld	a,' '
11883:	4B14  CDD640  		call	putchar
11884:	4B17  C3284B  		jp	gets		; .. then get line
11885:			;
11886:			;
11887:			;
11888:	4B1A          	l4b1a:
11889:	4B1A  CDBF41  		call	getchar		; Get character
11890:	4B1D  FE01    		cp	'A'-'@'		; Test line to be edited
11891:	4B1F  C27A4B  		jp	nz,l4b7a	; .. nope
11892:	4B22  3600    		ld	(hl),null	; Close line
11893:	4B24  C3384B  		jp	l4b38
11894:	4B27          	l4b27:
11895:	4B27  70      		ld	(hl),b
11896:			;
11897:			; Input line from input
11898:			;
11899:	4B28          	gets:
11900:	4B28  AF      		xor	a
11901:	4B29  328907  		ld	(l0789),a
11902:	4B2C  AF      		xor	a
11903:	4B2D  32E60B  		ld	(l0be6),a
11904:			;
11905:			;
11906:			;
11907:	4B30          	l4b30:
11908:	4B30  CDBF41  		call	getchar		; Get character
11909:	4B33  FE01    		cp	'A'-'@'		; Test line to be edited
11910:	4B35  C26F4B  		jp	nz,l4b6f	; .. nope
11911:	4B38          	l4b38:
11912:	4B38  CD2142  		call	fnl		; Give new line
11913:	4B3B  21FFFF  		ld	hl,lffff
11914:	4B3E  C3003D  		jp	__EDIT		; .. edit line
11915:			;
11916:			;
11917:			;
11918:	4B41          	l4b41:
11919:			;;
11920:			;; THIS WILL CHANGE THE DELETE KEY TO FUNCTION LIKE BACK SPACE.
11921:			;;	ld	a,bs
11922:			;;	jp	l4BBC
11923:			;;
11924:	4B41  3A9207  		ld	a,(rub.flg)
11925:	4B44  B7      		or	a		; Test in rubout state
11926:	4B45  3E5C    		ld	a,'\'
11927:	4B47  329207  		ld	(rub.flg),a	; .. force it
11928:	4B4A  C2554B  		jp	nz,l4b55	; .. yeap, was already in it
11929:	4B4D  05      		dec	b
11930:	4B4E  CA274B  		jp	z,l4b27
11931:	4B51  CDD640  		call	putchar		; .. print
11932:	4B54  04      		inc	b
11933:	4B55          	l4b55:
11934:	4B55  05      		dec	b
11935:	4B56  2B      		dec	hl
11936:	4B57  CA694B  		jp	z,l4b69
11937:	4B5A  7E      		ld	a,(hl)
11938:	4B5B  CDD640  		call	putchar		; .. print
11939:	4B5E  C31A4B  		jp	l4b1a
11940:	4B61          	lxxx:
11941:	4B61  05      		dec	b
11942:	4B62          	l4b62:
11943:	4B62  2B      		dec	hl
11944:	4B63  CDD640  		call	putchar		; .. print
11945:	4B66  C21A4B  		jp	nz,l4b1a
11946:	4B69          	l4b69:
11947:	4B69  CDD640  		call	putchar		; .. print
11948:	4B6C  CD2142  		call	fnl		; Give new line
11949:	4B6F          	l4b6f:
11950:	4B6F  216209  		ld	hl,$LINE	; Init line pointer
11951:	4B72  0601    		ld	b,1		; .. count
11952:	4B74  F5      		push	af
11953:	4B75  AF      		xor	a
11954:	4B76  329207  		ld	(rub.flg),a	; Set no rubout
11955:	4B79  F1      		pop	af
11956:			;
11957:			;
11958:			;
11959:	4B7A          	l4b7a:
11960:	4B7A  4F      		ld	c,a		; Get character
11961:	4B7B  FE7F    		cp	rubout		; Test delete
11962:	4B7D  CA414B  		jp	z,l4b41		; .. yeap
11963:	4B80  3A9207  		ld	a,(rub.flg)
11964:	4B83  B7      		or	a		; Test in rubout state
11965:	4B84  CA904B  		jp	z,l4b90		; .. nope
11966:	4B87  3E5C    		ld	a,'\'
11967:	4B89  CDD640  		call	putchar		; Close state
11968:	4B8C  AF      		xor	a
11969:	4B8D  329207  		ld	(rub.flg),a	; Set no rubout
11970:	4B90          	l4b90:
11971:	4B90  79      		ld	a,c
11972:	4B91  FE07    		cp	bell		; Test bell
11973:	4B93  CAFA4B  		jp	z,l4bfa		; .. yeap
11974:	4B96  FE03    		cp	CtrlC		; .. interrupt
11975:	4B98  CC4344  		call	z,prCtrl	; .. yeap, echo
11976:	4B9B  37      		scf
11977:	4B9C  C8      		ret	z		; .. yeap
11978:	4B9D  FE0D    		cp	cr		; .. test end of line
11979:	4B9F  CA3B4C  		jp	z,l4c3b		; .. yeap
11980:	4BA2  FE09    		cp	tab		; .. or tab
11981:	4BA4  CAFA4B  		jp	z,l4bfa
11982:	4BA7  FE0A    		cp	lf		; .. new line
11983:	4BA9  C2B44B  		jp	nz,l4bb4
11984:	4BAC  05      		dec	b
11985:	4BAD  CA284B  		jp	z,gets
11986:	4BB0  04      		inc	b
11987:	4BB1  C3FA4B  		jp	l4bfa
11988:	4BB4          	l4bb4:
11989:	4BB4  FE15    		cp	'U'-'@'		; Test delete line
11990:	4BB6  CC4344  		call	z,prCtrl	; .. yeap, echo
11991:	4BB9  CA284B  		jp	z,gets
11992:			;;l4BBC:
11993:	4BBC  FE08    		cp	bs		; Test backspace
11994:	4BBE  C2D24B  		jp	nz,l4bd2
11995:	4BC1  05      		dec	b
11996:	4BC2  CA304B  		jp	z,l4b30
11997:	4BC5  CDD640  		call	putchar
11998:	4BC8  3E20    		ld	a,' '
11999:	4BCA  CDD640  		call	putchar
12000:	4BCD  3E08    		ld	a,bs
12001:	4BCF  C3624B  		jp	l4b62
12002:	4BD2          	l4bd2:
12003:	4BD2  FE18    		cp	'X'-'@'		; Test ??
12004:	4BD4  C2DC4B  		jp	nz,l4bdc
12005:	4BD7  3E23    		ld	a,'#'
12006:	4BD9  C3694B  		jp	l4b69
12007:	4BDC          	l4bdc:
12008:	4BDC  FE12    		cp	'R'-'@'		; Test list line
12009:	4BDE  C2F54B  		jp	nz,l4bf5
12010:	4BE1  C5      		push	bc
12011:	4BE2  D5      		push	de
12012:	4BE3  E5      		push	hl
12013:	4BE4  3600    		ld	(hl),null	; .. close line
12014:	4BE6  CD2142  		call	fnl		; Give new line
12015:	4BE9  216209  		ld	hl,$LINE	; Init line pointer
12016:	4BEC  CDDC20  		call	l20dc		; .. type line
12017:	4BEF  E1      		pop	hl
12018:	4BF0  D1      		pop	de
12019:	4BF1  C1      		pop	bc
12020:	4BF2  C31A4B  		jp	l4b1a
12021:	4BF5          	l4bf5:
12022:	4BF5  FE20    		cp	' '		; Test control
12023:	4BF7  DA1A4B  		jp	c,l4b1a		; .. yeap, skip
12024:	4BFA          	l4bfa:
12025:	4BFA  78      		ld	a,b		; Test remainder
12026:	4BFB  B7      		or	a
12027:	4BFC  C2184C  		jp	nz,l4c18	; .. yeap
12028:	4BFF  E5      		push	hl
12029:	4C00  2A9407  		ld	hl,(FP)		; Get file pointer
12030:	4C03  7C      		ld	a,h
12031:	4C04  B5      		or	l
12032:	4C05  E1      		pop	hl
12033:	4C06  3E07    		ld	a,bell
12034:	4C08  CA1C4C  		jp	z,l4c1c		; .. no file active
12035:	4C0B  216209  		ld	hl,$LINE	; Init line pointer
12036:	4C0E  CD2814  		call	l1428
12037:	4C11  EB      		ex	de,hl
12038:	4C12  229807  		ld	(dir.mode),hl	; Set direct mode
12039:	4C15  C35F11  		jp	l115f
12040:	4C18          	l4c18:
12041:	4C18  79      		ld	a,c
12042:	4C19  71      		ld	(hl),c		; Save character
12043:	4C1A  23      		inc	hl		; .. bump line pointer
12044:	4C1B  04      		inc	b		; .. as well as count
12045:	4C1C          	l4c1c:
12046:	4C1C  CDD640  		call	putchar
12047:	4C1F  D60A    		sub	lf		; Test new line
12048:	4C21  C21A4B  		jp	nz,l4b1a
12049:	4C24  32650A  		ld	(colCON),a	; .. clear console column if so
12050:	4C27  3E0D    		ld	a,cr
12051:	4C29  CDD640  		call	putchar
12052:	4C2C          	l4c2c:
12053:	4C2C  CDBF41  		call	getchar		; Get character
12054:	4C2F  B7      		or	a		; Test any
12055:	4C30  CA2C4C  		jp	z,l4c2c		; .. nope, wait
12056:	4C33  FE0D    		cp	cr		; Test new line
12057:	4C35  CA1A4B  		jp	z,l4b1a		; .. yeap
12058:	4C38  C37A4B  		jp	l4b7a
12059:	4C3B          	l4c3b:
12060:	4C3B  3AE60B  		ld	a,(l0be6)
12061:	4C3E  B7      		or	a
12062:	4C3F  CA1C42  		jp	z,l421c
12063:	4C42  AF      		xor	a
12064:	4C43  77      		ld	(hl),a
12065:	4C44  216109  		ld	hl,l0961
12066:	4C47  C9      		ret
12067:	4C48          	l4c48:
12068:	4C48  F5      		push	af
12069:	4C49  3E00    		ld	a,0
12070:	4C4B  32E60B  		ld	(l0be6),a
12071:	4C4E  F1      		pop	af
12072:	4C4F  FE3B    		cp	';'
12073:	4C51  C0      		ret	nz
12074:	4C52  32E60B  		ld	(l0be6),a
12075:	4C55  C30513  		jp	get.tok
12076:			;
12077:			; Statement : WHILE <expr]
12078:			;
12079:	4C58          	l4c58:
12080:	4C58  22A10A  		ld	(l0aa1),hl
12081:	4C5B  CDDD24  		call	l24dd
12082:	4C5E  CD0513  		call	get.tok
12083:	4C61  EB      		ex	de,hl
12084:	4C62  CDC14C  		call	l4cc1
12085:	4C65  33      		inc	sp
12086:	4C66  33      		inc	sp
12087:	4C67  C26F4C  		jp	nz,l4c6f
12088:	4C6A  09      		add	hl,bc
12089:	4C6B  F9      		ld	sp,hl		; Set stack
12090:	4C6C  22B10A  		ld	(curstk),hl	; .. save
12091:	4C6F          	l4c6f:
12092:	4C6F  2A9807  		ld	hl,(dir.mode)	; Get direct mode
12093:	4C72  E5      		push	hl
12094:	4C73  2AA10A  		ld	hl,(l0aa1)
12095:	4C76  E5      		push	hl
12096:	4C77  D5      		push	de
12097:	4C78  C3A14C  		jp	l4ca1
12098:			;
12099:			; Statement : WEND
12100:			;
12101:	4C7B          	l4c7b:
12102:	4C7B  C2C90C  		jp	nz,l0cc9
12103:	4C7E  EB      		ex	de,hl
12104:	4C7F  CDC14C  		call	l4cc1
12105:	4C82  C2EB4C  		jp	nz,l4ceb
12106:	4C85  F9      		ld	sp,hl		; Set stack
12107:	4C86  22B10A  		ld	(curstk),hl	; .. save
12108:	4C89  EB      		ex	de,hl
12109:	4C8A  2A9807  		ld	hl,(dir.mode)	; Get direct mode
12110:	4C8D  EB      		ex	de,hl		;			*** ?????
12111:	4C8E  EB      		ex	de,hl		;			*** ?????
12112:	4C8F  22C40B  		ld	(direct_3),hl	; .. save
12113:	4C92  EB      		ex	de,hl
12114:	4C93  23      		inc	hl
12115:	4C94  23      		inc	hl
12116:	4C95  5E      		ld	e,(hl)
12117:	4C96  23      		inc	hl
12118:	4C97  56      		ld	d,(hl)
12119:	4C98  23      		inc	hl
12120:	4C99  7E      		ld	a,(hl)
12121:	4C9A  23      		inc	hl
12122:	4C9B  66      		ld	h,(hl)
12123:	4C9C  6F      		ld	l,a
12124:	4C9D  229807  		ld	(dir.mode),hl	; Set direct mode
12125:	4CA0  EB      		ex	de,hl
12126:	4CA1          	l4ca1:
12127:	4CA1  CD021A  		call	EXPR		; Get expression
12128:	4CA4  E5      		push	hl
12129:	4CA5  CD8628  		call	l2886
12130:	4CA8  E1      		pop	hl
12131:	4CA9  CAB54C  		jp	z,l4cb5
12132:	4CAC  01B400  		ld	bc,l00b4
12133:	4CAF  41      		ld	b,c
12134:	4CB0  C5      		push	bc
12135:	4CB1  33      		inc	sp
12136:	4CB2  C3A012  		jp	l12a0
12137:	4CB5          	l4cb5:
12138:	4CB5  2AC40B  		ld	hl,(direct_3)	; Get direct mode
12139:	4CB8  229807  		ld	(dir.mode),hl	; .. set it
12140:	4CBB  E1      		pop	hl
12141:	4CBC  C1      		pop	bc
12142:	4CBD  C1      		pop	bc
12143:	4CBE  C3A012  		jp	l12a0
12144:	4CC1          	l4cc1:
12145:	4CC1  210400  		ld	hl,l0004
12146:	4CC4  39      		add	hl,sp
12147:	4CC5          	l4cc5:
12148:	4CC5  7E      		ld	a,(hl)
12149:	4CC6  23      		inc	hl
12150:	4CC7  018200  		ld	bc,l0082
12151:	4CCA  B9      		cp	c
12152:	4CCB  C2D54C  		jp	nz,l4cd5
12153:	4CCE  011000  		ld	bc,l0010
12154:	4CD1  09      		add	hl,bc
12155:	4CD2  C3C54C  		jp	l4cc5
12156:	4CD5          	l4cd5:
12157:	4CD5  01B400  		ld	bc,l00b4
12158:	4CD8  B9      		cp	c
12159:	4CD9  C0      		ret	nz
12160:	4CDA  E5      		push	hl
12161:	4CDB  7E      		ld	a,(hl)
12162:	4CDC  23      		inc	hl
12163:	4CDD  66      		ld	h,(hl)
12164:	4CDE  6F      		ld	l,a
12165:	4CDF  CDCD43  		call	cp.r		; Compare HL:DE
12166:	4CE2  E1      		pop	hl
12167:	4CE3  010600  		ld	bc,l0006
12168:	4CE6  C8      		ret	z		; .. same
12169:	4CE7  09      		add	hl,bc
12170:	4CE8  C3C54C  		jp	l4cc5
12171:	4CEB          	l4ceb:
12172:	4CEB  111E00  		ld	de,30		; WEND without WHILE
12173:	4CEE  C3E30C  		jp	_error
12174:			;
12175:			; Statement : CALL <variable name>[<arg list>]
12176:			;
12177:	4CF1          	l4cf1:
12178:	4CF1  3E80    		ld	a,80h
12179:	4CF3  32A50A  		ld	(l0aa5),a
12180:	4CF6  CD8B39  		call	var.adr		; Get address of variable
12181:	4CF9  E5      		push	hl
12182:	4CFA  EB      		ex	de,hl
12183:	4CFB  CD641D  		call	get.type	; Get type
12184:	4CFE  CDEE28  		call	l28ee
12185:	4D01  CDDB22  		call	l22db
12186:	4D04  22E60B  		ld	(l0be6),hl
12187:	4D07  0E20    		ld	c,32
12188:	4D09  CDC742  		call	tstmem		; Verify enough memory
12189:	4D0C  D1      		pop	de
12190:	4D0D  21C0FF  		ld	hl,-2*32	;;lffc0
12191:	4D10  39      		add	hl,sp
12192:	4D11  F9      		ld	sp,hl
12193:	4D12  EB      		ex	de,hl
12194:	4D13  0E20    		ld	c,' '
12195:	4D15  2B      		dec	hl
12196:	4D16  CD0513  		call	get.tok
12197:	4D19  22A70A  		ld	(@@ptr),hl	; .. save token pointer
12198:	4D1C  CA5F4D  		jp	z,l4d5f
12199:	4D1F  CDD343  		call	ilcmp
12200:	4D22  28      		db	'('
12201:	4D23          	l4d23:
12202:	4D23  C5      		push	bc
12203:	4D24  D5      		push	de
12204:	4D25  CD8B39  		call	var.adr		; Get address of variable
12205:	4D28  E3      		ex	(sp),hl
12206:	4D29  73      		ld	(hl),e
12207:	4D2A  23      		inc	hl
12208:	4D2B  72      		ld	(hl),d
12209:	4D2C  23      		inc	hl
12210:	4D2D  E3      		ex	(sp),hl
12211:	4D2E  D1      		pop	de
12212:	4D2F  C1      		pop	bc
12213:	4D30  7E      		ld	a,(hl)
12214:	4D31  FE2C    		cp	','
12215:	4D33  C23D4D  		jp	nz,l4d3d
12216:	4D36  0D      		dec	c
12217:	4D37  CD0513  		call	get.tok
12218:	4D3A  C3234D  		jp	l4d23
12219:	4D3D          	l4d3d:
12220:	4D3D  CDD343  		call	ilcmp
12221:	4D40  29      		db	')'
12222:	4D41  22A70A  		ld	(@@ptr),hl	; .. save token pointer
12223:	4D44  3E21    		ld	a,'!'
12224:	4D46  91      		sub	c
12225:	4D47  E1      		pop	hl
12226:	4D48  3D      		dec	a
12227:	4D49  CA5F4D  		jp	z,l4d5f
12228:	4D4C  D1      		pop	de
12229:	4D4D  3D      		dec	a
12230:	4D4E  CA5F4D  		jp	z,l4d5f
12231:	4D51  C1      		pop	bc
12232:	4D52  3D      		dec	a
12233:	4D53  CA5F4D  		jp	z,l4d5f
12234:	4D56  C5      		push	bc
12235:	4D57  E5      		push	hl
12236:	4D58  210200  		ld	hl,l0002
12237:	4D5B  39      		add	hl,sp
12238:	4D5C  44      		ld	b,h
12239:	4D5D  4D      		ld	c,l
12240:	4D5E  E1      		pop	hl
12241:	4D5F          	l4d5f:
12242:	4D5F  E5      		push	hl
12243:	4D60  216A4D  		ld	hl,l4d6a
12244:	4D63  E3      		ex	(sp),hl
12245:	4D64  E5      		push	hl
12246:	4D65  2AE60B  		ld	hl,(l0be6)
12247:	4D68  E3      		ex	(sp),hl
12248:	4D69  C9      		ret
12249:	4D6A          	l4d6a:
12250:	4D6A  2AB10A  		ld	hl,(curstk)	; Get stack
12251:	4D6D  F9      		ld	sp,hl		; .. set it
12252:	4D6E  2AA70A  		ld	hl,(@@ptr)	; Get back token pointer
12253:	4D71  C3A012  		jp	l12a0
12254:			;
12255:			; Statement : CHAIN [MERGE] <filename>
12256:			;                   [,[line number expr>][,ALL][,DELETE <range>]]
12257:			;
12258:	4D74          	l4d74:
12259:	4D74  AF      		xor	a
12260:	4D75  32ED0B  		ld	(l0bed),a
12261:	4D78  32EE0B  		ld	(l0bee),a
12262:	4D7B  7E      		ld	a,(hl)
12263:	4D7C  11C500  		ld	de,l00c5
12264:	4D7F  BB      		cp	e
12265:	4D80  C2874D  		jp	nz,l4d87
12266:	4D83  32ED0B  		ld	(l0bed),a
12267:	4D86  23      		inc	hl
12268:	4D87          	l4d87:
12269:	4D87  2B      		dec	hl
12270:	4D88  CD0513  		call	get.tok
12271:	4D8B  CD9452  		call	l5294
12272:	4D8E  E5      		push	hl
12273:	4D8F  210000  		ld	hl,l0000
12274:	4D92  22F40B  		ld	(l0bf4),hl
12275:	4D95  E1      		pop	hl
12276:	4D96  2B      		dec	hl
12277:	4D97  CD0513  		call	get.tok
12278:	4D9A  CA074E  		jp	z,l4e07
12279:	4D9D  CDD343  		call	ilcmp
12280:	4DA0  2C      		db	','
12281:	4DA1  FE2C    		cp	','
12282:	4DA3  CAB84D  		jp	z,l4db8
12283:	4DA6  CD021A  		call	EXPR		; Get expression
12284:	4DA9  E5      		push	hl
12285:	4DAA  CDDB22  		call	l22db
12286:	4DAD  22F40B  		ld	(l0bf4),hl
12287:	4DB0  E1      		pop	hl
12288:	4DB1  2B      		dec	hl
12289:	4DB2  CD0513  		call	get.tok
12290:	4DB5  CA074E  		jp	z,l4e07
12291:	4DB8          	l4db8:
12292:	4DB8  CDD343  		call	ilcmp
12293:	4DBB  2C      		db	','
12294:	4DBC  11AA00  		ld	de,l00aa
12295:	4DBF  BB      		cp	e
12296:	4DC0  CADB4D  		jp	z,l4ddb
12297:	4DC3  CDD343  		call	ilcmp
12298:	4DC6  41      		db	'A'
12299:	4DC7  CDD343  		call	ilcmp
12300:	4DCA  4C      		db	'L'
12301:	4DCB  CDD343  		call	ilcmp
12302:	4DCE  4C      		db	'L'
12303:	4DCF  CA4E4F  		jp	z,l4f4e
12304:	4DD2  CDD343  		call	ilcmp
12305:	4DD5  2C      		db	','
12306:	4DD6  BB      		cp	e
12307:	4DD7  C2C90C  		jp	nz,l0cc9
12308:	4DDA  B7      		or	a
12309:	4DDB          	l4ddb:
12310:	4DDB  F5      		push	af
12311:	4DDC  32EE0B  		ld	(l0bee),a
12312:	4DDF  CD0513  		call	get.tok
12313:	4DE2  CDD80E  		call	l0ed8
12314:	4DE5  C5      		push	bc
12315:	4DE6  CD3524  		call	l2435
12316:	4DE9  C1      		pop	bc
12317:	4DEA  D1      		pop	de
12318:	4DEB  C5      		push	bc
12319:	4DEC  60      		ld	h,b
12320:	4DED  69      		ld	l,c
12321:	4DEE  22F10B  		ld	(l0bf1),hl
12322:	4DF1  CDF80E  		call	l0ef8
12323:	4DF4  D2004E  		jp	nc,l4e00
12324:	4DF7  54      		ld	d,h
12325:	4DF8  5D      		ld	e,l
12326:	4DF9  22EF0B  		ld	(l0bef),hl
12327:	4DFC  E1      		pop	hl
12328:	4DFD  CDCD43  		call	cp.r		; Compare HL:DE
12329:	4E00          	l4e00:
12330:	4E00  D21814  		jp	nc,_ill.func	; .. HL >= DE, invalid call
12331:	4E03  F1      		pop	af
12332:	4E04  C24E4F  		jp	nz,l4f4e
12333:	4E07          	l4e07:
12334:	4E07  2A9807  		ld	hl,(dir.mode)	; Get direct mode
12335:	4E0A  E5      		push	hl
12336:	4E0B  2A9A07  		ld	hl,(prg.base)	; .. and base of program
12337:	4E0E  2B      		dec	hl
12338:	4E0F          	l4e0f:
12339:	4E0F  23      		inc	hl
12340:	4E10  7E      		ld	a,(hl)
12341:	4E11  23      		inc	hl
12342:	4E12  B6      		or	(hl)
12343:	4E13  CACF4E  		jp	z,l4ecf
12344:	4E16  23      		inc	hl
12345:	4E17  5E      		ld	e,(hl)
12346:	4E18  23      		inc	hl
12347:	4E19  56      		ld	d,(hl)
12348:	4E1A  EB      		ex	de,hl
12349:	4E1B  229807  		ld	(dir.mode),hl	; Set direct mode
12350:	4E1E  EB      		ex	de,hl
12351:	4E1F          	l4e1f:
12352:	4E1F  CD0513  		call	get.tok
12353:	4E22          	l4e22:
12354:	4E22  B7      		or	a
12355:	4E23  CA0F4E  		jp	z,l4e0f
12356:	4E26  FE3A    		cp	':'
12357:	4E28  CA1F4E  		jp	z,l4e1f
12358:	4E2B  11B800  		ld	de,l00b8
12359:	4E2E  BB      		cp	e
12360:	4E2F  CA3C4E  		jp	z,l4e3c
12361:	4E32  CD0513  		call	get.tok
12362:	4E35  CDEC14  		call	_DATA		; Process DATA
12363:	4E38  2B      		dec	hl
12364:	4E39  C31F4E  		jp	l4e1f
12365:	4E3C          	l4e3c:
12366:	4E3C  CD0513  		call	get.tok
12367:	4E3F  CA224E  		jp	z,l4e22
12368:	4E42          	l4e42:
12369:	4E42  E5      		push	hl
12370:	4E43  3E01    		ld	a,1
12371:	4E45  32A50A  		ld	(l0aa5),a
12372:	4E48  CD893A  		call	l3a89
12373:	4E4B  CAA24E  		jp	z,l4ea2
12374:	4E4E  78      		ld	a,b
12375:	4E4F  F680    		or	80h
12376:	4E51  47      		ld	b,a
12377:	4E52  AF      		xor	a
12378:	4E53  CD923B  		call	l3b92
12379:	4E56  3E00    		ld	a,0
12380:	4E58  32A50A  		ld	(l0aa5),a
12381:	4E5B  C2684E  		jp	nz,l4e68
12382:	4E5E  7E      		ld	a,(hl)
12383:	4E5F  FE28    		cp	'('
12384:	4E61  C26E4E  		jp	nz,l4e6e
12385:	4E64  F1      		pop	af
12386:	4E65  C3BE4E  		jp	l4ebe
12387:	4E68          	l4e68:
12388:	4E68  7E      		ld	a,(hl)
12389:	4E69  FE28    		cp	'('
12390:	4E6B  CA1814  		jp	z,_ill.func	; Invalid if paren
12391:	4E6E          	l4e6e:
12392:	4E6E  E1      		pop	hl
12393:	4E6F  CD893A  		call	l3a89
12394:	4E72  7A      		ld	a,d
12395:	4E73  B3      		or	e
12396:	4E74  C28F4E  		jp	nz,l4e8f
12397:	4E77  78      		ld	a,b
12398:	4E78  F680    		or	80h
12399:	4E7A  47      		ld	b,a
12400:	4E7B  118A4E  		ld	de,l4e8a
12401:	4E7E  D5      		push	de
12402:	4E7F  118C3A  		ld	de,l3a8c
12403:	4E82  D5      		push	de
12404:	4E83  3A670A  		ld	a,($ARGLEN)	; Get length of arg
12405:	4E86  57      		ld	d,a
12406:	4E87  C3293A  		jp	l3a29
12407:	4E8A          	l4e8a:
12408:	4E8A  7A      		ld	a,d
12409:	4E8B  B3      		or	e
12410:	4E8C  CA1814  		jp	z,_ill.func	; Invalid if zero
12411:	4E8F          	l4e8f:
12412:	4E8F  E5      		push	hl
12413:	4E90  42      		ld	b,d
12414:	4E91  4B      		ld	c,e
12415:	4E92  21B14E  		ld	hl,l4eb1
12416:	4E95  E5      		push	hl
12417:	4E96          	l4e96:
12418:	4E96  0B      		dec	bc
12419:	4E97          	l4e97:
12420:	4E97  0A      		ld	a,(bc)
12421:	4E98  0B      		dec	bc
12422:	4E99  B7      		or	a
12423:	4E9A  FA974E  		jp	m,l4e97
12424:	4E9D  0A      		ld	a,(bc)
12425:	4E9E  F680    		or	MSB		; Set bit
12426:	4EA0  02      		ld	(bc),a
12427:	4EA1  C9      		ret
12428:	4EA2          	l4ea2:
12429:	4EA2  32A50A  		ld	(l0aa5),a
12430:	4EA5  7E      		ld	a,(hl)
12431:	4EA6  FE28    		cp	'('
12432:	4EA8  C26E4E  		jp	nz,l4e6e
12433:	4EAB  E3      		ex	(sp),hl
12434:	4EAC  0B      		dec	bc
12435:	4EAD  0B      		dec	bc
12436:	4EAE  CD964E  		call	l4e96
12437:	4EB1          	l4eb1:
12438:	4EB1  E1      		pop	hl
12439:	4EB2  2B      		dec	hl
12440:	4EB3  CD0513  		call	get.tok
12441:	4EB6  CA224E  		jp	z,l4e22
12442:	4EB9  FE28    		cp	'('
12443:	4EBB  C2C84E  		jp	nz,l4ec8
12444:	4EBE          	l4ebe:
12445:	4EBE  CD0513  		call	get.tok
12446:	4EC1  CDD343  		call	ilcmp
12447:	4EC4  29      		db	')'
12448:	4EC5  CA224E  		jp	z,l4e22
12449:	4EC8          	l4ec8:
12450:	4EC8  CDD343  		call	ilcmp
12451:	4ECB  2C      		db	','
12452:	4ECC  C3424E  		jp	l4e42
12453:	4ECF          	l4ecf:
12454:	4ECF  E1      		pop	hl
12455:	4ED0  229807  		ld	(dir.mode),hl	; Set direct mode
12456:	4ED3  EB      		ex	de,hl
12457:	4ED4  2AC40A  		ld	hl,(l0ac4)
12458:	4ED7  EB      		ex	de,hl
12459:	4ED8  2AC20A  		ld	hl,(prg.top)	; Get top of program
12460:	4EDB          	l4edb:
12461:	4EDB  CDCD43  		call	cp.r
12462:	4EDE  CA234F  		jp	z,l4f23		; HL = DE
12463:	4EE1  E5      		push	hl
12464:	4EE2  4E      		ld	c,(hl)
12465:	4EE3  23      		inc	hl
12466:	4EE4  23      		inc	hl
12467:	4EE5  7E      		ld	a,(hl)
12468:	4EE6  B7      		or	a
12469:	4EE7  F5      		push	af
12470:	4EE8  E67F    		and	7fh
12471:	4EEA  77      		ld	(hl),a
12472:	4EEB  23      		inc	hl
12473:	4EEC  CD9A3C  		call	l3c9a
12474:	4EEF  0600    		ld	b,0
12475:	4EF1  09      		add	hl,bc
12476:	4EF2  F1      		pop	af
12477:	4EF3  C1      		pop	bc
12478:	4EF4  FADB4E  		jp	m,l4edb
12479:	4EF7  C5      		push	bc
12480:	4EF8  CD074F  		call	l4f07
12481:	4EFB  2AC40A  		ld	hl,(l0ac4)
12482:	4EFE  19      		add	hl,de
12483:	4EFF  22C40A  		ld	(l0ac4),hl
12484:	4F02  EB      		ex	de,hl
12485:	4F03  E1      		pop	hl
12486:	4F04  C3DB4E  		jp	l4edb
12487:	4F07          	l4f07:
12488:	4F07  EB      		ex	de,hl
12489:	4F08  2AC60A  		ld	hl,(l0ac6)	; Get top
12490:	4F0B          	l4f0b:
12491:	4F0B  CDCD43  		call	cp.r		; Compare HL:DE
12492:	4F0E  1A      		ld	a,(de)		; .. unpack
12493:	4F0F  02      		ld	(bc),a
12494:	4F10  13      		inc	de
12495:	4F11  03      		inc	bc
12496:	4F12  C20B4F  		jp	nz,l4f0b	; .. until top reached
12497:	4F15  79      		ld	a,c
12498:	4F16  95      		sub	l
12499:	4F17  5F      		ld	e,a
12500:	4F18  78      		ld	a,b
12501:	4F19  9C      		sbc	a,h
12502:	4F1A  57      		ld	d,a
12503:	4F1B  1B      		dec	de
12504:	4F1C  0B      		dec	bc
12505:	4F1D  60      		ld	h,b
12506:	4F1E  69      		ld	l,c
12507:	4F1F  22C60A  		ld	(l0ac6),hl
12508:	4F22  C9      		ret
12509:	4F23          	l4f23:
12510:	4F23  EB      		ex	de,hl
12511:	4F24  2AC60A  		ld	hl,(l0ac6)
12512:	4F27  EB      		ex	de,hl
12513:	4F28          	l4f28:
12514:	4F28  CDCD43  		call	cp.r
12515:	4F2B  CA4E4F  		jp	z,l4f4e		; HL = DE
12516:	4F2E  E5      		push	hl
12517:	4F2F  23      		inc	hl
12518:	4F30  23      		inc	hl
12519:	4F31  7E      		ld	a,(hl)
12520:	4F32  B7      		or	a
12521:	4F33  F5      		push	af
12522:	4F34  E67F    		and	7fh
12523:	4F36  77      		ld	(hl),a
12524:	4F37  23      		inc	hl
12525:	4F38  CD9A3C  		call	l3c9a
12526:	4F3B  4E      		ld	c,(hl)
12527:	4F3C  23      		inc	hl
12528:	4F3D  46      		ld	b,(hl)
12529:	4F3E  23      		inc	hl
12530:	4F3F  09      		add	hl,bc
12531:	4F40  F1      		pop	af
12532:	4F41  C1      		pop	bc
12533:	4F42  FA284F  		jp	m,l4f28
12534:	4F45  C5      		push	bc
12535:	4F46  CD074F  		call	l4f07
12536:	4F49  EB      		ex	de,hl
12537:	4F4A  E1      		pop	hl
12538:	4F4B  C3284F  		jp	l4f28
12539:	4F4E          	l4f4e:
12540:	4F4E  2AC20A  		ld	hl,(prg.top)	; Get top of program
12541:	4F51          	l4f51:
12542:	4F51  EB      		ex	de,hl
12543:	4F52  2AC40A  		ld	hl,(l0ac4)
12544:	4F55  EB      		ex	de,hl
12545:	4F56  CDCD43  		call	cp.r
12546:	4F59  CA764F  		jp	z,l4f76		; HL = DE
12547:	4F5C  7E      		ld	a,(hl)
12548:	4F5D  23      		inc	hl
12549:	4F5E  23      		inc	hl
12550:	4F5F  23      		inc	hl
12551:	4F60  F5      		push	af
12552:	4F61  CD9A3C  		call	l3c9a
12553:	4F64  F1      		pop	af
12554:	4F65  FE03    		cp	3
12555:	4F67  C26E4F  		jp	nz,l4f6e
12556:	4F6A  CDAE4F  		call	l4fae
12557:	4F6D  AF      		xor	a
12558:	4F6E          	l4f6e:
12559:	4F6E  5F      		ld	e,a
12560:	4F6F  1600    		ld	d,0
12561:	4F71  19      		add	hl,de
12562:	4F72  C3514F  		jp	l4f51
12563:	4F75          	l4f75:
12564:	4F75  C1      		pop	bc
12565:	4F76          	l4f76:
12566:	4F76  EB      		ex	de,hl
12567:	4F77  2AC60A  		ld	hl,(l0ac6)
12568:	4F7A  EB      		ex	de,hl
12569:	4F7B  CDCD43  		call	cp.r
12570:	4F7E  CAD84F  		jp	z,l4fd8		; HL = DE
12571:	4F81  7E      		ld	a,(hl)
12572:	4F82  23      		inc	hl
12573:	4F83  23      		inc	hl
12574:	4F84  F5      		push	af
12575:	4F85  23      		inc	hl
12576:	4F86  CD9A3C  		call	l3c9a
12577:	4F89  4E      		ld	c,(hl)
12578:	4F8A  23      		inc	hl
12579:	4F8B  46      		ld	b,(hl)
12580:	4F8C  23      		inc	hl
12581:	4F8D  F1      		pop	af
12582:	4F8E  E5      		push	hl
12583:	4F8F  09      		add	hl,bc
12584:	4F90  FE03    		cp	3
12585:	4F92  C2754F  		jp	nz,l4f75
12586:	4F95  229D0A  		ld	(l0a9d),hl
12587:	4F98  E1      		pop	hl
12588:	4F99  4E      		ld	c,(hl)
12589:	4F9A  0600    		ld	b,0
12590:	4F9C  09      		add	hl,bc
12591:	4F9D  09      		add	hl,bc
12592:	4F9E  23      		inc	hl
12593:	4F9F          	l4f9f:
12594:	4F9F  EB      		ex	de,hl
12595:	4FA0  2A9D0A  		ld	hl,(l0a9d)
12596:	4FA3  EB      		ex	de,hl
12597:	4FA4  CDCD43  		call	cp.r
12598:	4FA7  CA764F  		jp	z,l4f76		; HL = DE
12599:	4FAA  019F4F  		ld	bc,l4f9f
12600:	4FAD  C5      		push	bc
12601:	4FAE          	l4fae:
12602:	4FAE  7E      		ld	a,(hl)
12603:	4FAF  23      		inc	hl
12604:	4FB0  5E      		ld	e,(hl)
12605:	4FB1  23      		inc	hl
12606:	4FB2  56      		ld	d,(hl)
12607:	4FB3  23      		inc	hl
12608:	4FB4  B7      		or	a
12609:	4FB5  C8      		ret	z
12610:	4FB6  E5      		push	hl
12611:	4FB7  2AC20A  		ld	hl,(prg.top)	; Get top of program
12612:	4FBA  CDCD43  		call	cp.r		; Compare HL:DE
12613:	4FBD  E1      		pop	hl
12614:	4FBE  D8      		ret	c		; HL < DE
12615:	4FBF  E5      		push	hl
12616:	4FC0  2A9A07  		ld	hl,(prg.base)	; Get base of program
12617:	4FC3  CDCD43  		call	cp.r		; Compare HL:DE
12618:	4FC6  E1      		pop	hl
12619:	4FC7  D0      		ret	nc		; HL >= DE
12620:	4FC8  E5      		push	hl
12621:	4FC9  2B      		dec	hl
12622:	4FCA  2B      		dec	hl
12623:	4FCB  2B      		dec	hl
12624:	4FCC  E5      		push	hl
12625:	4FCD  CDA346  		call	l46a3
12626:	4FD0  E1      		pop	hl
12627:	4FD1  0603    		ld	b,3
12628:	4FD3  CDCD28  		call	l28cd
12629:	4FD6  E1      		pop	hl
12630:	4FD7  C9      		ret
12631:	4FD8          	l4fd8:
12632:	4FD8  CD6747  		call	l4767
12633:	4FDB  2AC60A  		ld	hl,(l0ac6)
12634:	4FDE  44      		ld	b,h
12635:	4FDF  4D      		ld	c,l
12636:	4FE0  EB      		ex	de,hl
12637:	4FE1  2AC20A  		ld	hl,(prg.top)	; Get top of program
12638:	4FE4  EB      		ex	de,hl
12639:	4FE5  2AC40A  		ld	hl,(l0ac4)
12640:	4FE8  7D      		ld	a,l
12641:	4FE9  93      		sub	e
12642:	4FEA  6F      		ld	l,a
12643:	4FEB  7C      		ld	a,h
12644:	4FEC  9A      		sbc	a,d
12645:	4FED  67      		ld	h,a
12646:	4FEE  22B80B  		ld	(l0bb8),hl
12647:	4FF1  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
12648:	4FF4  22E80B  		ld	(l0be8),hl
12649:	4FF7  CDB942  		call	l42b9
12650:	4FFA  60      		ld	h,b
12651:	4FFB  69      		ld	l,c
12652:	4FFC  2B      		dec	hl
12653:	4FFD  229B0A  		ld	(mem.top),hl	; .. save top
12654:	5000  3AEE0B  		ld	a,(l0bee)
12655:	5003  B7      		or	a
12656:	5004  CA1B50  		jp	z,l501b
12657:	5007  2AF10B  		ld	hl,(l0bf1)
12658:	500A  44      		ld	b,h
12659:	500B  4D      		ld	c,l
12660:	500C  2AEF0B  		ld	hl,(l0bef)
12661:	500F  CDA222  		call	l22a2
12662:	5012  22C40A  		ld	(l0ac4),hl
12663:	5015  22C60A  		ld	(l0ac6),hl
12664:	5018  CDAB0E  		call	l0eab
12665:	501B          	l501b:
12666:	501B  3E01    		ld	a,1
12667:	501D  32F30B  		ld	(l0bf3),a
12668:	5020  3AED0B  		ld	a,(l0bed)
12669:	5023  B7      		or	a
12670:	5024  C26D53  		jp	nz,l536d
12671:	5027  3AC407  		ld	a,(opnfiles)	; Get max files
12672:	502A  329F07  		ld	(opnsave),a	; .. save
12673:	502D  C3B952  		jp	l52b9
12674:	5030          	l5030:
12675:	5030  AF      		xor	a
12676:	5031  32F30B  		ld	(l0bf3),a
12677:	5034  32ED0B  		ld	(l0bed),a
12678:	5037  2AC20A  		ld	hl,(prg.top)	; Get top of program
12679:	503A  44      		ld	b,h
12680:	503B  4D      		ld	c,l
12681:	503C  2AB80B  		ld	hl,(l0bb8)
12682:	503F  09      		add	hl,bc
12683:	5040  22C40A  		ld	(l0ac4),hl
12684:	5043  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
12685:	5046  23      		inc	hl
12686:	5047  EB      		ex	de,hl
12687:	5048  2AE80B  		ld	hl,(l0be8)
12688:	504B  229B0A  		ld	(mem.top),hl	; Set top
12689:	504E          	l504e:
12690:	504E  CDCD43  		call	cp.r		; Compare HL:DE
12691:	5051  1A      		ld	a,(de)		; .. unpack
12692:	5052  02      		ld	(bc),a
12693:	5053  13      		inc	de
12694:	5054  03      		inc	bc
12695:	5055  C24E50  		jp	nz,l504e	; .. until top reached
12696:	5058  0B      		dec	bc
12697:	5059  60      		ld	h,b
12698:	505A  69      		ld	l,c
12699:	505B  22C60A  		ld	(l0ac6),hl
12700:	505E  EB      		ex	de,hl
12701:	505F  2AF40B  		ld	hl,(l0bf4)
12702:	5062  EB      		ex	de,hl
12703:	5063  2A9A07  		ld	hl,(prg.base)	; Get base of program
12704:	5066  2B      		dec	hl
12705:	5067  7A      		ld	a,d
12706:	5068  B3      		or	e
12707:	5069  CAA012  		jp	z,l12a0
12708:	506C  CDF80E  		call	l0ef8
12709:	506F  D2CC14  		jp	nc,l14cc
12710:	5072  0B      		dec	bc
12711:	5073  60      		ld	h,b
12712:	5074  69      		ld	l,c
12713:	5075  C3A012  		jp	l12a0
12714:	5078  C3EC14  		jp	_DATA		; Process DATA
12715:			;
12716:			; Statement : WRITE [<list of exprs>]
12717:			;             WRITE#<file number>,<list of exprs>
12718:			;
12719:	507B          	l507b:
12720:	507B  0E02    		ld	c,2
12721:	507D  CD0D51  		call	l510d
12722:	5080  2B      		dec	hl
12723:	5081  CD0513  		call	get.tok
12724:	5084  CADA50  		jp	z,l50da
12725:	5087          	l5087:
12726:	5087  CD021A  		call	EXPR		; Get expression
12727:	508A  E5      		push	hl
12728:	508B  CD641D  		call	get.type	; Get type
12729:	508E  CACA50  		jp	z,l50ca		; .. got pointer
12730:	5091  CD2931  		call	l3129
12731:	5094  CDC746  		call	l46c7
12732:	5097  2A040C  		ld	hl,($$ARG+4)
12733:	509A  23      		inc	hl
12734:	509B  5E      		ld	e,(hl)
12735:	509C  23      		inc	hl
12736:	509D  56      		ld	d,(hl)
12737:	509E  1A      		ld	a,(de)
12738:	509F  FE20    		cp	' '
12739:	50A1  C2AA50  		jp	nz,l50aa
12740:	50A4  13      		inc	de
12741:	50A5  72      		ld	(hl),d
12742:	50A6  2B      		dec	hl
12743:	50A7  73      		ld	(hl),e
12744:	50A8  2B      		dec	hl
12745:	50A9  35      		dec	(hl)
12746:	50AA          	l50aa:
12747:	50AA  CD2647  		call	l4726
12748:	50AD          	l50ad:
12749:	50AD  E1      		pop	hl
12750:	50AE  2B      		dec	hl
12751:	50AF  CD0513  		call	get.tok
12752:	50B2  CADA50  		jp	z,l50da
12753:	50B5  FE3B    		cp	';'
12754:	50B7  CABF50  		jp	z,l50bf
12755:	50BA  CDD343  		call	ilcmp
12756:	50BD  2C      		db	','
12757:	50BE  2B      		dec	hl
12758:	50BF          	l50bf:
12759:	50BF  CD0513  		call	get.tok
12760:	50C2  3E2C    		ld	a,','
12761:	50C4  CDD640  		call	putchar
12762:	50C7  C38750  		jp	l5087
12763:	50CA          	l50ca:
12764:	50CA  3E22    		ld	a,'"'
12765:	50CC  CDD640  		call	putchar
12766:	50CF  CD2647  		call	l4726
12767:	50D2  3E22    		ld	a,'"'
12768:	50D4  CDD640  		call	putchar
12769:	50D7  C3AD50  		jp	l50ad
12770:	50DA          	l50da:
12771:	50DA  E5      		push	hl
12772:	50DB  2A9407  		ld	hl,(FP)		; Get file pointer
12773:	50DE  7C      		ld	a,h
12774:	50DF  B5      		or	l
12775:	50E0  CA0451  		jp	z,l5104		; .. no file active
12776:	50E3  7E      		ld	a,(hl)		; Get mode
12777:	50E4  FE03    		cp	3		; Test 'R'
12778:	50E6  C20451  		jp	nz,l5104	; .. nope
12779:	50E9  CDC25C  		call	l5cc2
12780:	50EC  7D      		ld	a,l
12781:	50ED  93      		sub	e
12782:	50EE  6F      		ld	l,a
12783:	50EF  7C      		ld	a,h
12784:	50F0  9A      		sbc	a,d
12785:	50F1  67      		ld	h,a
12786:	50F2  11FEFF  		ld	de,lfffe
12787:	50F5  19      		add	hl,de
12788:	50F6  D20451  		jp	nc,l5104
12789:	50F9          	l50f9:
12790:	50F9  3E20    		ld	a,' '
12791:	50FB  CDD640  		call	putchar
12792:	50FE  2B      		dec	hl
12793:	50FF  7C      		ld	a,h
12794:	5100  B5      		or	l
12795:	5101  C2F950  		jp	nz,l50f9
12796:	5104          	l5104:
12797:	5104  E1      		pop	hl
12798:	5105  CD2142  		call	fnl		; Give new line
12799:	5108  C3E917  		jp	clr.FP		; Reset file I/O
12800:			;
12801:			; Open file number for read
12802:			;
12803:	510B          	l510b:
12804:	510B  0E01    		ld	c,1
12805:			;
12806:			; Open file number for I/O
12807:			; ENTRY	Reg C holds file mode
12808:			;
12809:	510D          	l510d:
12810:	510D  FE23    		cp	'#'
12811:	510F  C0      		ret	nz
12812:	5110  C5      		push	bc
12813:	5111  CD2A51  		call	l512a
12814:	5114  D1      		pop	de
12815:	5115  BB      		cp	e
12816:	5116  CA1E51  		jp	z,l511e
12817:	5119  FE03    		cp	3		; Verify random
12818:	511B  C2A00C  		jp	nz,l0ca0	; .. bad file mode if not
12819:	511E          	l511e:
12820:	511E  CDD343  		call	ilcmp
12821:	5121  2C      		db	','
12822:	5122          	l5122:
12823:	5122  50      		ld	d,b
12824:	5123  59      		ld	e,c
12825:	5124  EB      		ex	de,hl
12826:	5125  229407  		ld	(FP),hl		; .. set file pointer
12827:	5128  EB      		ex	de,hl
12828:	5129  C9      		ret
12829:	512A          	l512a:
12830:	512A  2B      		dec	hl
12831:	512B  CD0513  		call	get.tok
12832:	512E  FE23    		cp	'#'
12833:	5130  CC0513  		call	z,get.tok
12834:	5133  CD021A  		call	EXPR		; Get expression
12835:			;
12836:			; Get file number from token and test it
12837:			; EXIT	Accu holds file type
12838:			;	Zero set if file passive
12839:			;	Reg BC holds file pointer
12840:			;
12841:	5136          	filnum:
12842:	5136  CD7820  		call	get.byte	; Get byte as file number
12843:			;
12844:			; Test file number in Accu - Exit as above
12845:			;
12846:	5139          	fn.a:
12847:	5139  5F      		ld	e,a		; Save number
12848:			;
12849:			; Test file number in reg E - Exit as above
12850:			;
12851:	513A          	fn.e:
12852:	513A  3AC407  		ld	a,(opnfiles)	; Get max number of open files
12853:	513D  BB      		cp	e
12854:	513E  DAA60C  		jp	c,l0ca6		; .. too many files open
12855:	5141  1600    		ld	d,0
12856:	5143  E5      		push	hl
12857:	5144  21A407  		ld	hl,F.arr	; Point into file array
12858:	5147  19      		add	hl,de
12859:	5148  19      		add	hl,de
12860:	5149  4E      		ld	c,(hl)		; .. fetch pointer
12861:	514A  23      		inc	hl
12862:	514B  46      		ld	b,(hl)
12863:	514C  0A      		ld	a,(bc)		; Get file number
12864:	514D  B7      		or	a		; .. set flag
12865:	514E  E1      		pop	hl
12866:	514F  C9      		ret
12867:			;
12868:			; ENTRY	Reg E holds file number
12869:			; EXIT	Reg DE points to ???
12870:			;
12871:	5150          	l5150:
12872:	5150  CD3A51  		call	fn.e		; Get file state
12873:	5153  212900  		ld	hl,l0029
12874:	5156  FE03    		cp	3		; Test 'R'
12875:	5158  C25E51  		jp	nz,l515e	; .. nope
12876:	515B  21B200  		ld	hl,l00b2
12877:	515E          	l515e:
12878:	515E  09      		add	hl,bc
12879:	515F  EB      		ex	de,hl
12880:	5160  C9      		ret
12881:			;
12882:			; Function : MKI$(<integer expression>)
12883:			;
12884:	5161          	l5161:
12885:	5161  3E02    		ld	a,2
12886:	5163          		_LD.BC
12887:			;
12888:			; Function : MKS$(<single precision expression>)
12889:			;
12890:	5164          	l5164:
12891:	5164  3E04    		ld	a,4
12892:	5166          		_LD.BC
12893:			;
12894:			; Function : MKD$(<double precision expression>)
12895:			;
12896:	5167          	l5167:
12897:	5167  3E08    		ld	a,8
12898:	5169  F5      		push	af
12899:	516A  CDAC1F  		call	l1fac
12900:	516D  F1      		pop	af
12901:	516E  CDB946  		call	l46b9
12902:	5171  2A990A  		ld	hl,(STR.arr+10*3+1)
12903:	5174  CDF728  		call	l28f7
12904:	5177  C3FC48  		jp	l48fc
12905:			;
12906:			; Function : CVI(<2-byte string>)
12907:			;
12908:	517A          	l517a:
12909:	517A  3E01    		ld	a,2-1
12910:	517C          		_LD.BC
12911:			;
12912:			; Function : CVS(<4-byte string>)
12913:			;
12914:	517D          	l517d:
12915:	517D  3E03    		ld	a,4-1
12916:	517F          		_LD.BC
12917:			;
12918:			; Function : CVD(<8-byte string>)
12919:			;
12920:	5180          	l5180:
12921:	5180  3E07    		ld	a,8-1
12922:	5182  F5      		push	af		; Save length
12923:	5183  CDA548  		call	str.adr		; Get address of string
12924:	5186  F1      		pop	af
12925:	5187  BE      		cp	(hl)		; .. compare length
12926:	5188  D21814  		jp	nc,_ill.func	; .. invalid call
12927:	518B  3C      		inc	a
12928:	518C  32670A  		ld	($ARGLEN),a	; .. set length
12929:	518F  23      		inc	hl
12930:	5190  7E      		ld	a,(hl)
12931:	5191  23      		inc	hl
12932:	5192  66      		ld	h,(hl)
12933:	5193  6F      		ld	l,a
12934:	5194  C3EE28  		jp	l28ee
12935:	5197          	l5197:
12936:	5197  CD641D  		call	get.type	; Get type
12937:	519A  018F19  		ld	bc,l198f
12938:	519D  11202C  		ld	de,l2c20
12939:	51A0  C2BB51  		jp	nz,l51bb	; .. no pointer
12940:	51A3  5A      		ld	e,d
12941:	51A4  C3BB51  		jp	l51bb
12942:	51A7          	l51a7:
12943:	51A7  CD0B51  		call	l510b		; Open file for read
12944:	51AA  CD8B39  		call	var.adr		; Get address of variable
12945:	51AD  CD3B2A  		call	vrf.str		; Verify string follows
12946:	51B0  01E917  		ld	bc,clr.FP	; Reset I/O routine
12947:	51B3  C5      		push	bc		; .. for return address
12948:	51B4  D5      		push	de
12949:	51B5  011215  		ld	bc,l1512
12950:	51B8  AF      		xor	a
12951:	51B9  57      		ld	d,a
12952:	51BA  5F      		ld	e,a
12953:	51BB          	l51bb:
12954:	51BB  F5      		push	af
12955:	51BC  C5      		push	bc
12956:	51BD  E5      		push	hl
12957:	51BE          	l51be:
12958:	51BE  CDC257  		call	fgetc		; Get character from file
12959:	51C1  DAAC0C  		jp	c,l0cac		; .. end of file
12960:	51C4  FE20    		cp	' '
12961:	51C6  C2CE51  		jp	nz,l51ce
12962:	51C9  14      		inc	d
12963:	51CA  15      		dec	d
12964:	51CB  C2BE51  		jp	nz,l51be
12965:	51CE          	l51ce:
12966:	51CE  FE22    		cp	'"'
12967:	51D0  C2E351  		jp	nz,l51e3
12968:	51D3  47      		ld	b,a
12969:	51D4  7B      		ld	a,e
12970:	51D5  FE2C    		cp	','
12971:	51D7  78      		ld	a,b
12972:	51D8  C2E351  		jp	nz,l51e3
12973:	51DB  50      		ld	d,b
12974:	51DC  58      		ld	e,b
12975:	51DD  CDC257  		call	fgetc		; Get from file
12976:	51E0  DA3152  		jp	c,l5231		; .. end of file
12977:	51E3          	l51e3:
12978:	51E3  216209  		ld	hl,$LINE	; Init line
12979:	51E6  06FF    		ld	b,255		; .. and length
12980:	51E8          	l51e8:
12981:	51E8  4F      		ld	c,a
12982:	51E9  7A      		ld	a,d
12983:	51EA  FE22    		cp	'"'
12984:	51EC  79      		ld	a,c
12985:	51ED  CA1C52  		jp	z,l521c
12986:	51F0  FE0D    		cp	0dh
12987:	51F2  E5      		push	hl
12988:	51F3  CA5152  		jp	z,l5251
12989:	51F6  E1      		pop	hl
12990:	51F7  FE0A    		cp	lf
12991:	51F9  C21C52  		jp	nz,l521c
12992:	51FC  4F      		ld	c,a
12993:	51FD  7B      		ld	a,e
12994:	51FE  FE2C    		cp	','
12995:	5200  79      		ld	a,c
12996:	5201  C48A52  		call	nz,l528a
12997:	5204  CDC257  		call	fgetc		; Get from file
12998:	5207  DA3152  		jp	c,l5231		; .. end of file
12999:	520A  FE0D    		cp	cr
13000:	520C  C21C52  		jp	nz,l521c
13001:	520F  7B      		ld	a,e
13002:	5210  FE20    		cp	' '
13003:	5212  CA2B52  		jp	z,l522b
13004:	5215  FE2C    		cp	','
13005:	5217  3E0D    		ld	a,cr
13006:	5219  CA2B52  		jp	z,l522b
13007:	521C          	l521c:
13008:	521C  B7      		or	a
13009:	521D  CA2B52  		jp	z,l522b
13010:	5220  BA      		cp	d
13011:	5221  CA3152  		jp	z,l5231
13012:	5224  BB      		cp	e
13013:	5225  CA3152  		jp	z,l5231
13014:	5228  CD8A52  		call	l528a
13015:	522B          	l522b:
13016:	522B  CDC257  		call	fgetc		; Get from file
13017:	522E  D2E851  		jp	nc,l51e8	; .. get next
13018:	5231          	l5231:
13019:	5231  E5      		push	hl
13020:	5232  FE22    		cp	'"'
13021:	5234  CA3C52  		jp	z,l523c
13022:	5237  FE20    		cp	' '
13023:	5239  C26452  		jp	nz,l5264
13024:	523C          	l523c:
13025:	523C  CDC257  		call	fgetc		; Get from file
13026:	523F  DA6452  		jp	c,l5264		; .. end of file
13027:	5242  FE20    		cp	' '
13028:	5244  CA3C52  		jp	z,l523c
13029:	5247  FE2C    		cp	','
13030:	5249  CA6452  		jp	z,l5264
13031:	524C  FE0D    		cp	cr
13032:	524E  C25C52  		jp	nz,l525c
13033:	5251          	l5251:
13034:	5251  CDC257  		call	fgetc		; Get from file
13035:	5254  DA6452  		jp	c,l5264		; .. end of file
13036:	5257  FE0A    		cp	lf
13037:	5259  CA6452  		jp	z,l5264
13038:	525C          	l525c:
13039:	525C  2A9407  		ld	hl,(FP)		; Get file pointer
13040:	525F  012800  		ld	bc,l0028
13041:	5262  09      		add	hl,bc
13042:	5263  34      		inc	(hl)
13043:	5264          	l5264:
13044:	5264  E1      		pop	hl
13045:	5265          	l5265:
13046:	5265  3600    		ld	(hl),null
13047:	5267  216109  		ld	hl,l0961
13048:	526A  7B      		ld	a,e
13049:	526B  D620    		sub	' '
13050:	526D  CA7852  		jp	z,l5278
13051:	5270  42      		ld	b,d
13052:	5271  1600    		ld	d,0
13053:	5273  CDCB46  		call	l46cb
13054:	5276  E1      		pop	hl
13055:	5277  C9      		ret
13056:	5278          	l5278:
13057:	5278  CD641D  		call	get.type	; Get type
13058:	527B  F5      		push	af
13059:	527C  CD0513  		call	get.tok
13060:	527F  F1      		pop	af
13061:	5280  F5      		push	af
13062:	5281  DCD12E  		call	c,cnvnum	; Get number if not double
13063:	5284  F1      		pop	af
13064:	5285  D4CA2E  		call	nc,cnvdoub	; .. got double
13065:	5288  E1      		pop	hl
13066:	5289  C9      		ret
13067:			;
13068:			;
13069:			;
13070:	528A          	l528a:
13071:	528A  B7      		or	a
13072:	528B  C8      		ret	z
13073:	528C  77      		ld	(hl),a
13074:	528D  23      		inc	hl
13075:	528E  05      		dec	b
13076:	528F  C0      		ret	nz
13077:	5290  C1      		pop	bc
13078:	5291  C36552  		jp	l5265
13079:			;
13080:			;
13081:			;
13082:	5294          	l5294:
13083:	5294  1601    		ld	d,1		; Set file mode "I"
13084:	5296          	l5296:
13085:	5296  AF      		xor	a
13086:	5297  C3FE58  		jp	l58fe
13087:			;
13088:			; Load file given in command line
13089:			;
13090:	529A          	_FRUN:
13091:	529A          		_OR
13092:			;
13093:			; Statement : LOAD <filename>[,R]
13094:			;
13095:	529B          	l529b::
13096:	529B  AF      		xor	a
13097:	529C  F5      		push	af
13098:	529D  CD9452  		call	l5294
13099:	52A0  3AC407  		ld	a,(opnfiles)	; Get max number of files open
13100:	52A3  329F07  		ld	(opnsave),a	; .. save
13101:	52A6  2B      		dec	hl
13102:	52A7  CD0513  		call	get.tok		; Get next
13103:	52AA  CABE52  		jp	z,l52be		; .. end, so load it
13104:	52AD  CDD343  		call	ilcmp		; Find ','
13105:	52B0  2C      		db	','
13106:	52B1  CDD343  		call	ilcmp		; .. and 'R'
13107:	52B4  52      		db	'R'
13108:	52B5  C2C90C  		jp	nz,l0cc9
13109:	52B8  F1      		pop	af
13110:	52B9          	l52b9:
13111:	52B9  AF      		xor	a
13112:	52BA  32C407  		ld	(opnfiles),a	; .. clear max open files
13113:	52BD          		_OR
13114:	52BE          	l52be:
13115:	52BE  F1      		pop	af
13116:	52BF  329E07  		ld	(l079e),a
13117:	52C2  218000  		ld	hl,DMA		; Set buffer
13118:	52C5  3600    		ld	(hl),0		; .. clear first byte
13119:	52C7  22A407  		ld	(F.arr),hl	; .. save buffer
13120:	52CA  CD2143  		call	l4321
13121:	52CD  3A9F07  		ld	a,(opnsave)
13122:	52D0  32C407  		ld	(opnfiles),a	; Reset max open files
13123:	52D3  2AA207  		ld	hl,(F.ptr)	; Get base file pointer
13124:	52D6  22A407  		ld	(F.arr),hl	; .. into array
13125:	52D9  229407  		ld	(FP),hl		; .. and file pointer
13126:	52DC  2A9807  		ld	hl,(dir.mode)	; Get direct mode
13127:	52DF  23      		inc	hl
13128:	52E0  7C      		ld	a,h
13129:	52E1  A5      		and	l
13130:	52E2  3C      		inc	a
13131:	52E3  C2E952  		jp	nz,l52e9	; .. not direct
13132:	52E6  229807  		ld	(dir.mode),hl	; .. save direct mode
13133:	52E9          	l52e9:
13134:	52E9  CDC257  		call	fgetc		; Get from file
13135:	52EC  DAA20D  		jp	c,l0da2		; .. error
13136:	52EF  FEFE    		cp	0feh		; Test protected
13137:	52F1  C2FA52  		jp	nz,l52fa
13138:	52F4  32EC0B  		ld	(_prot),a	; .. set as flag
13139:	52F7  C3FE52  		jp	l52fe
13140:	52FA          	l52fa:
13141:	52FA  3C      		inc	a		; Test tokenized
13142:	52FB  C27F53  		jp	nz,l537f	; .. nope, pure ASCII
13143:	52FE          	l52fe:
13144:	52FE  2A9A07  		ld	hl,(prg.base)	; Get base of program
13145:	5301          	l5301:
13146:	5301  EB      		ex	de,hl
13147:	5302  2A9B0A  		ld	hl,(mem.top)	; .. get top of memory
13148:	5305  01AAFF  		ld	bc,-86		;;lffaa
13149:	5308  09      		add	hl,bc
13150:	5309  CDCD43  		call	cp.r		; Compare HL:DE
13151:	530C  EB      		ex	de,hl
13152:	530D  DA5653  		jp	c,l5356		; HL < DE, overflow
13153:	5310  CD4857  		call	fget		; Get from file
13154:	5313  77      		ld	(hl),a
13155:	5314  23      		inc	hl
13156:	5315  D20153  		jp	nc,l5301	; .. loop till end
13157:			;::
13158:	5318  22C20A  		ld	(prg.top),hl	; Save top
13159:	531B  3AEC0B  		ld	a,(_prot)	; Test file protected
13160:	531E  B7      		or	a
13161:	531F  C4225D  		call	nz,funprot	; .. yeap, unprotect it
13162:	5322  CDAB0E  		call	l0eab
13163:	5325  23      		inc	hl
13164:	5326  23      		inc	hl
13165:	5327  22C20A  		ld	(prg.top),hl	; .. save top of program
13166:	532A  21C407  		ld	hl,opnfiles
13167:	532D  7E      		ld	a,(hl)		; Get max open files
13168:	532E  329F07  		ld	(opnsave),a	; .. save
13169:	5331  3600    		ld	(hl),0		; .. set passive
13170:	5333  CD3743  		call	l4337
13171:	5336  3A9F07  		ld	a,(opnsave)
13172:	5339  32C407  		ld	(opnfiles),a	; .. reset max open files
13173:	533C  3AF30B  		ld	a,(l0bf3)
13174:	533F  B7      		or	a
13175:	5340  C23050  		jp	nz,l5030
13176:	5343  3A9E07  		ld	a,(l079e)
13177:	5346  B7      		or	a
13178:	5347  CA870D  		jp	z,l0d87
13179:	534A  C3A012  		jp	l12a0
13180:			;
13181:			;
13182:			;
13183:	534D          	l534d:
13184:	534D  CDE917  		call	clr.FP		; Reset file I/O
13185:	5350  CD0656  		call	l5606
13186:	5353  C3C943  		jp	l43c9
13187:			;
13188:			;
13189:			;
13190:	5356          	l5356:
13191:	5356  CD2143  		call	l4321
13192:	5359  C3DD42  		jp	l42dd		; .. overflow
13193:			;
13194:			; Statement : MERGE <filename>
13195:			;
13196:	535C          	l535c:
13197:	535C  C1      		pop	bc
13198:	535D  CD9452  		call	l5294
13199:	5360  2B      		dec	hl
13200:	5361  CD0513  		call	get.tok
13201:	5364  CA6D53  		jp	z,l536d
13202:	5367  CD4D53  		call	l534d
13203:	536A  C3C90C  		jp	l0cc9
13204:	536D          	l536d:
13205:	536D  AF      		xor	a
13206:	536E  329E07  		ld	(l079e),a
13207:	5371  CDC257  		call	fgetc		; Get from file
13208:	5374  DAA20D  		jp	c,l0da2		; .. end of file
13209:	5377  3C      		inc	a		; Verify not 0xFF or 0xFE
13210:	5378  CAA00C  		jp	z,l0ca0		; .. bad file mode otherwise
13211:	537B  3C      		inc	a
13212:	537C  CAA00C  		jp	z,l0ca0
13213:	537F          	l537f:
13214:	537F  2A9407  		ld	hl,(FP)		; Get file pointer
13215:	5382  012800  		ld	bc,l0028
13216:	5385  09      		add	hl,bc
13217:	5386  34      		inc	(hl)
13218:	5387  C3A20D  		jp	l0da2
13219:	538A          	l538a:
13220:	538A  E5      		push	hl
13221:	538B  2A9407  		ld	hl,(FP)		; Get file pointer
13222:	538E  7C      		ld	a,h
13223:	538F  B5      		or	l
13224:	5390  114200  		ld	de,66		; Direct statement in file
13225:	5393  C2E30C  		jp	nz,_error
13226:	5396  E1      		pop	hl
13227:	5397  C3E512  		jp	l12e5
13228:			;
13229:			; Statement : SAVE <filename> [,{A|P}]
13230:			;
13231:	539A          	l539a:
13232:	539A  1602    		ld	d,2
13233:	539C  CD9652  		call	l5296
13234:	539F  2B      		dec	hl
13235:	53A0  CD0513  		call	get.tok		; Get next
13236:	53A3  CAB653  		jp	z,l53b6		; .. simple save
13237:	53A6  CDD343  		call	ilcmp		; Test ',P'
13238:	53A9  2C      		db	','
13239:	53AA  FE50    		cp	'P'
13240:	53AC  CAD15C  		jp	z,l5cd1
13241:	53AF  CDD343  		call	ilcmp		; .. or ',A'
13242:	53B2  41      		db	'A'
13243:	53B3  C38920  		jp	l2089
13244:	53B6          	l53b6:
13245:	53B6  CD9223  		call	l2392
13246:	53B9  CD655D  		call	l5d65
13247:	53BC  3EFF    		ld	a,0ffh		; Set token marker
13248:	53BE          	l53be:
13249:	53BE  CD6856  		call	fput		; Put indicator to file
13250:	53C1  EB      		ex	de,hl
13251:	53C2  2AC20A  		ld	hl,(prg.top)	; Get top of program
13252:	53C5  EB      		ex	de,hl
13253:	53C6  2A9A07  		ld	hl,(prg.base)	; .. and base
13254:	53C9          	l53c9:
13255:	53C9  CDCD43  		call	cp.r
13256:	53CC  CA4D53  		jp	z,l534d		; HL = DE
13257:	53CF  7E      		ld	a,(hl)
13258:	53D0  23      		inc	hl
13259:	53D1  D5      		push	de
13260:	53D2  CD6856  		call	fput		; Put tokens to file
13261:	53D5  D1      		pop	de
13262:	53D6  C3C953  		jp	l53c9
13263:			;
13264:			; Statement : CLOSE [[#]<file number>[,[#]<file number>...]]
13265:			;
13266:	53D9          	l53d9:
13267:	53D9  010656  		ld	bc,l5606
13268:	53DC  3AC407  		ld	a,(opnfiles)	; Get max open files
13269:	53DF  C2FC53  		jp	nz,l53fc	; .. aha, not all files
13270:	53E2  E5      		push	hl
13271:	53E3          	l53e3:
13272:	53E3  C5      		push	bc
13273:	53E4  F5      		push	af
13274:	53E5  11EB53  		ld	de,l53eb
13275:	53E8  D5      		push	de
13276:	53E9  C5      		push	bc
13277:	53EA  C9      		ret
13278:	53EB          	l53eb:
13279:	53EB  F1      		pop	af
13280:	53EC  C1      		pop	bc
13281:	53ED  3D      		dec	a
13282:	53EE  F2E353  		jp	p,l53e3
13283:	53F1  E1      		pop	hl
13284:	53F2  C9      		ret
13285:	53F3          	l53f3:
13286:	53F3  C1      		pop	bc
13287:	53F4  E1      		pop	hl
13288:	53F5  7E      		ld	a,(hl)
13289:	53F6  FE2C    		cp	','
13290:	53F8  C0      		ret	nz
13291:	53F9  CD0513  		call	get.tok
13292:	53FC          	l53fc:
13293:	53FC  C5      		push	bc
13294:	53FD  7E      		ld	a,(hl)
13295:	53FE  FE23    		cp	'#'
13296:	5400  CC0513  		call	z,get.tok
13297:	5403  CD7520  		call	l2075
13298:	5406  E3      		ex	(sp),hl
13299:	5407  E5      		push	hl
13300:	5408  11F353  		ld	de,l53f3
13301:	540B  D5      		push	de
13302:	540C  E9      		jp	(hl)
13303:			;
13304:			;
13305:			;
13306:	540D          	l540d:
13307:	540D  D5      		push	de
13308:	540E  C5      		push	bc
13309:	540F  AF      		xor	a		; Set flag for all files
13310:	5410  CDD953  		call	l53d9
13311:	5413  C1      		pop	bc
13312:	5414  D1      		pop	de
13313:	5415  AF      		xor	a
13314:	5416  C9      		ret
13315:			;
13316:			; Statement : FIELD [#]<file number>,<field width> AS <string var> ...
13317:			;
13318:	5417          	l5417:
13319:	5417  CD2A51  		call	l512a
13320:	541A  CAA60C  		jp	z,l0ca6
13321:	541D  D603    		sub	3		; Verify random access
13322:	541F  C2A00C  		jp	nz,l0ca0	; Bad file mode if not
13323:	5422  EB      		ex	de,hl
13324:	5423  21A900  		ld	hl,l00a9
13325:	5426  09      		add	hl,bc
13326:	5427  7E      		ld	a,(hl)
13327:	5428  23      		inc	hl
13328:	5429  66      		ld	h,(hl)
13329:	542A  6F      		ld	l,a
13330:	542B  22E60B  		ld	(l0be6),hl
13331:	542E  210000  		ld	hl,l0000
13332:	5431  226F5D  		ld	(l5d6f),hl
13333:	5434  7C      		ld	a,h
13334:	5435  EB      		ex	de,hl
13335:	5436  11B200  		ld	de,l00b2
13336:	5439          	l5439:
13337:	5439  EB      		ex	de,hl
13338:	543A  09      		add	hl,bc
13339:	543B  47      		ld	b,a
13340:	543C  EB      		ex	de,hl
13341:	543D  7E      		ld	a,(hl)
13342:	543E  FE2C    		cp	','
13343:	5440  C0      		ret	nz
13344:	5441  D5      		push	de
13345:	5442  C5      		push	bc
13346:	5443  CD7220  		call	l2072
13347:	5446  F5      		push	af
13348:	5447  CDD343  		call	ilcmp
13349:	544A  41      		db	'A'
13350:	544B  CDD343  		call	ilcmp
13351:	544E  53      		db	'S'
13352:	544F  CD8B39  		call	var.adr		; Get address of variable
13353:	5452  CD3B2A  		call	vrf.str		; Verify string follows
13354:	5455  F1      		pop	af
13355:	5456  C1      		pop	bc
13356:	5457  E3      		ex	(sp),hl
13357:	5458  4F      		ld	c,a
13358:	5459  D5      		push	de
13359:	545A  E5      		push	hl
13360:	545B  2A6F5D  		ld	hl,(l5d6f)
13361:	545E  0600    		ld	b,0
13362:	5460  09      		add	hl,bc
13363:	5461  226F5D  		ld	(l5d6f),hl
13364:	5464  EB      		ex	de,hl
13365:	5465  2AE60B  		ld	hl,(l0be6)
13366:	5468  CDCD43  		call	cp.r
13367:	546B  DAB80C  		jp	c,l0cb8		; HL < DE
13368:	546E  E1      		pop	hl
13369:	546F  D1      		pop	de
13370:	5470  EB      		ex	de,hl
13371:	5471  71      		ld	(hl),c
13372:	5472  23      		inc	hl
13373:	5473  73      		ld	(hl),e
13374:	5474  23      		inc	hl
13375:	5475  72      		ld	(hl),d
13376:	5476  E1      		pop	hl
13377:	5477  C33954  		jp	l5439
13378:			;
13379:			; Statement : RSET <string variable>=<string expr>
13380:			;
13381:	547A          	l547a:
13382:	547A          		_OR
13383:			;
13384:			; Statement : LSET <string variable>=<string expr>
13385:			;
13386:	547B          	l547b:
13387:	547B  37      		scf
13388:	547C  F5      		push	af
13389:	547D  CD8B39  		call	var.adr		; Get address of variable
13390:	5480  CD3B2A  		call	vrf.str		; Verify string follows
13391:	5483  D5      		push	de
13392:	5484  CDF719  		call	l19f7
13393:	5487  C1      		pop	bc
13394:	5488  E3      		ex	(sp),hl
13395:	5489  E5      		push	hl
13396:	548A  C5      		push	bc
13397:	548B  CDA548  		call	str.adr		; Get address of string
13398:	548E  46      		ld	b,(hl)
13399:	548F  E3      		ex	(sp),hl
13400:	5490  7E      		ld	a,(hl)
13401:	5491  4F      		ld	c,a
13402:	5492  C5      		push	bc
13403:	5493  E5      		push	hl
13404:	5494  F5      		push	af
13405:	5495  23      		inc	hl
13406:	5496  5E      		ld	e,(hl)
13407:	5497  23      		inc	hl
13408:	5498  56      		ld	d,(hl)
13409:	5499  B7      		or	a
13410:	549A  CAFC54  		jp	z,l54fc
13411:	549D  2A9A07  		ld	hl,(prg.base)	; Get base of program
13412:	54A0  CDCD43  		call	cp.r
13413:	54A3  D2D754  		jp	nc,l54d7	; HL >= DE
13414:	54A6  2AC20A  		ld	hl,(prg.top)	; Get top of program
13415:	54A9  CDCD43  		call	cp.r
13416:	54AC  DAD754  		jp	c,l54d7		; HL < DE
13417:	54AF  59      		ld	e,c
13418:	54B0  1600    		ld	d,0
13419:	54B2  2AC60A  		ld	hl,(l0ac6)
13420:	54B5  19      		add	hl,de
13421:	54B6  EB      		ex	de,hl
13422:	54B7  2A9B0A  		ld	hl,(mem.top)	; Get top of memory
13423:	54BA  CDCD43  		call	cp.r
13424:	54BD  DA1055  		jp	c,l5510		; HL < DE
13425:	54C0  F1      		pop	af
13426:	54C1          	l54c1:
13427:	54C1  79      		ld	a,c
13428:	54C2  CD3C47  		call	l473c
13429:	54C5  E1      		pop	hl
13430:	54C6  C1      		pop	bc
13431:	54C7  E3      		ex	(sp),hl
13432:	54C8  D5      		push	de
13433:	54C9  C5      		push	bc
13434:	54CA  CDA548  		call	str.adr		; Get address of string
13435:	54CD  C1      		pop	bc
13436:	54CE  D1      		pop	de
13437:	54CF  E3      		ex	(sp),hl
13438:	54D0  C5      		push	bc
13439:	54D1  E5      		push	hl
13440:	54D2  23      		inc	hl
13441:	54D3  F5      		push	af
13442:	54D4  73      		ld	(hl),e
13443:	54D5  23      		inc	hl
13444:	54D6  72      		ld	(hl),d
13445:	54D7          	l54d7:
13446:	54D7  F1      		pop	af
13447:	54D8  E1      		pop	hl
13448:	54D9  23      		inc	hl
13449:	54DA  5E      		ld	e,(hl)
13450:	54DB  23      		inc	hl
13451:	54DC  56      		ld	d,(hl)
13452:	54DD  C1      		pop	bc
13453:	54DE  E1      		pop	hl
13454:	54DF  23      		inc	hl
13455:	54E0  7E      		ld	a,(hl)
13456:	54E1  23      		inc	hl
13457:	54E2  66      		ld	h,(hl)
13458:	54E3  6F      		ld	l,a
13459:	54E4  79      		ld	a,c
13460:	54E5  B8      		cp	b
13461:	54E6  D2EA54  		jp	nc,l54ea
13462:	54E9  47      		ld	b,a
13463:	54EA          	l54ea:
13464:	54EA  90      		sub	b
13465:	54EB  4F      		ld	c,a
13466:	54EC  F1      		pop	af
13467:	54ED  D40655  		call	nc,l5506
13468:	54F0  04      		inc	b
13469:	54F1          	l54f1:
13470:	54F1  05      		dec	b
13471:	54F2  CA0155  		jp	z,l5501
13472:	54F5  7E      		ld	a,(hl)
13473:	54F6  12      		ld	(de),a
13474:	54F7  23      		inc	hl
13475:	54F8  13      		inc	de
13476:	54F9  C3F154  		jp	l54f1
13477:	54FC          	l54fc:
13478:	54FC  C1      		pop	bc
13479:	54FD  C1      		pop	bc
13480:	54FE  C1      		pop	bc
13481:	54FF  C1      		pop	bc
13482:	5500          	l5500:
13483:	5500  C1      		pop	bc
13484:	5501          	l5501:
13485:	5501  DC0655  		call	c,l5506
13486:	5504  E1      		pop	hl
13487:	5505  C9      		ret
13488:	5506          	l5506:
13489:	5506  3E20    		ld	a,' '
13490:	5508  0C      		inc	c
13491:	5509          	l5509:
13492:	5509  0D      		dec	c
13493:	550A  C8      		ret	z
13494:	550B  12      		ld	(de),a
13495:	550C  13      		inc	de
13496:	550D  C30955  		jp	l5509
13497:	5510          	l5510:
13498:	5510  F1      		pop	af
13499:	5511  E1      		pop	hl
13500:	5512  C1      		pop	bc
13501:	5513  E3      		ex	(sp),hl
13502:	5514  EB      		ex	de,hl
13503:	5515  C22155  		jp	nz,l5521
13504:	5518  C5      		push	bc
13505:	5519  78      		ld	a,b
13506:	551A  CDB946  		call	l46b9
13507:	551D  CDFD46  		call	l46fd
13508:	5520  C1      		pop	bc
13509:	5521          	l5521:
13510:	5521  E3      		ex	(sp),hl
13511:	5522  C5      		push	bc
13512:	5523  E5      		push	hl
13513:	5524  C3C154  		jp	l54c1
13514:	5527          	l5527:
13515:	5527  CD0513  		call	get.tok
13516:	552A  CDD343  		call	ilcmp
13517:	552D  24      		db	'$'
13518:	552E  CDD343  		call	ilcmp
13519:	5531  28      		db	'('
13520:	5532  CD7520  		call	l2075
13521:	5535  D5      		push	de
13522:	5536  7E      		ld	a,(hl)
13523:	5537  FE2C    		cp	','
13524:	5539  C24B55  		jp	nz,l554b
13525:	553C  CD0513  		call	get.tok
13526:	553F  CD2A51  		call	l512a
13527:	5542  FE02    		cp	2		; Exclude 'O'
13528:	5544  CAA00C  		jp	z,l0ca0		; .. bad file mode
13529:	5547  CD2251  		call	l5122
13530:	554A  AF      		xor	a
13531:	554B          	l554b:
13532:	554B  F5      		push	af
13533:	554C  CDD343  		call	ilcmp
13534:	554F  29      		db	')'
13535:	5550  F1      		pop	af
13536:	5551  E3      		ex	(sp),hl
13537:	5552  F5      		push	af
13538:	5553  7D      		ld	a,l
13539:	5554  B7      		or	a
13540:	5555  CA1814  		jp	z,_ill.func	; Invalid if zero
13541:	5558  E5      		push	hl
13542:	5559  CDB946  		call	l46b9
13543:	555C  EB      		ex	de,hl
13544:	555D  C1      		pop	bc
13545:	555E          	l555e:
13546:	555E  F1      		pop	af
13547:	555F  F5      		push	af
13548:	5560  CA8555  		jp	z,l5585
13549:	5563  CD9942  		call	l4299
13550:	5566  C26C55  		jp	nz,l556c
13551:	5569  CDF541  		call	conin		; Get character from console
13552:	556C          	l556c:
13553:	556C  FE03    		cp	CtrlC		; Test break
13554:	556E  CA7E55  		jp	z,l557e		; .. yeap
13555:	5571          	l5571:
13556:	5571  77      		ld	(hl),a
13557:	5572  23      		inc	hl
13558:	5573  0D      		dec	c
13559:	5574  C25E55  		jp	nz,l555e
13560:	5577  F1      		pop	af
13561:	5578  CDE917  		call	clr.FP		; Reset file I/O
13562:	557B  C3FD46  		jp	l46fd
13563:	557E          	l557e:
13564:	557E  2AB10A  		ld	hl,(curstk)	; Get stack
13565:	5581  F9      		ld	sp,hl		; .. set it
13566:	5582  C31944  		jp	l4419
13567:	5585          	l5585:
13568:	5585  CDC257  		call	fgetc		; Get from file
13569:	5588  DAAC0C  		jp	c,l0cac		; .. error on eof
13570:	558B  C37155  		jp	l5571
13571:			;
13572:			; Function : EOF(<file number>)
13573:			;
13574:	558E          	l558e:
13575:	558E  CD3651  		call	filnum		; Get file number
13576:	5591  CAA60C  		jp	z,l0ca6		; .. bad file number
13577:	5594  FE02    		cp	2		; Exclude 'O'
13578:	5596  CAA00C  		jp	z,l0ca0		; .. bad file mode
13579:	5599          	l5599:
13580:	5599  212700  		ld	hl,l0027
13581:	559C  09      		add	hl,bc
13582:	559D  7E      		ld	a,(hl)
13583:	559E  B7      		or	a
13584:	559F  CAC355  		jp	z,l55c3
13585:	55A2  0A      		ld	a,(bc)
13586:	55A3  FE03    		cp	3
13587:	55A5  CAC355  		jp	z,l55c3
13588:	55A8  23      		inc	hl
13589:	55A9  7E      		ld	a,(hl)
13590:	55AA  B7      		or	a
13591:	55AB  C2B855  		jp	nz,l55b8
13592:	55AE  C5      		push	bc
13593:	55AF  60      		ld	h,b
13594:	55B0  69      		ld	l,c
13595:	55B1  CD7D57  		call	l577d
13596:	55B4  C1      		pop	bc
13597:	55B5  C39955  		jp	l5599
13598:	55B8          	l55b8:
13599:	55B8  3E80    		ld	a,reclng
13600:	55BA  96      		sub	(hl)
13601:	55BB  4F      		ld	c,a
13602:	55BC  0600    		ld	b,0
13603:	55BE  09      		add	hl,bc
13604:	55BF  23      		inc	hl
13605:	55C0  7E      		ld	a,(hl)
13606:	55C1  D61A    		sub	eof
13607:	55C3          	l55c3:
13608:	55C3  D601    		sub	1
13609:	55C5  9F      		sbc	a,a
13610:	55C6  C37F28  		jp	l287f
13611:			;
13612:			; Write record to file
13613:			;
13614:	55C9          	l55c9:
13615:	55C9  50      		ld	d,b
13616:	55CA  59      		ld	e,c
13617:	55CB  13      		inc	de
13618:	55CC          	l55cc:
13619:	55CC  212700  		ld	hl,l0027
13620:	55CF  09      		add	hl,bc
13621:	55D0  C5      		push	bc
13622:	55D1  AF      		xor	a
13623:	55D2  77      		ld	(hl),a
13624:	55D3  CDB157  		call	SetDskBuff	; Set disk buffer
13625:	55D6  3A2108  		ld	a,(f_wr)	; Get write function
13626:	55D9  CD9E5A  		call	l5a9e		; .. write
13627:	55DC  FEFF    		cp	OSerr
13628:	55DE  CABB0C  		jp	z,l0cbb
13629:	55E1  3D      		dec	a
13630:	55E2  CA9D0C  		jp	z,l0c9d
13631:	55E5  3D      		dec	a
13632:	55E6  C2F555  		jp	nz,l55f5
13633:	55E9  D1      		pop	de
13634:	55EA  AF      		xor	a
13635:	55EB  12      		ld	(de),a
13636:	55EC  0E10    		ld	c,.close
13637:	55EE  13      		inc	de
13638:	55EF  CD0500  		call	BDOS
13639:	55F2  C39A0C  		jp	l0c9a
13640:	55F5          	l55f5:
13641:	55F5  3C      		inc	a
13642:	55F6  CABB0C  		jp	z,l0cbb
13643:	55F9  C1      		pop	bc
13644:	55FA  212500  		ld	hl,l0025
13645:	55FD  09      		add	hl,bc
13646:	55FE  5E      		ld	e,(hl)
13647:	55FF  23      		inc	hl
13648:	5600  56      		ld	d,(hl)
13649:	5601  13      		inc	de
13650:	5602  72      		ld	(hl),d
13651:	5603  2B      		dec	hl
13652:	5604  73      		ld	(hl),e
13653:	5605  C9      		ret
13654:			;
13655:			;
13656:			;
13657:	5606          	l5606:
13658:	5606  CD3951  		call	fn.a		; Get state of file
13659:	5609  CA3656  		jp	z,l5636		; .. file is passive
13660:	560C  C5      		push	bc		; Save pointer
13661:	560D  0A      		ld	a,(bc)		; Get file number
13662:	560E  50      		ld	d,b
13663:	560F  59      		ld	e,c
13664:	5610  13      		inc	de
13665:	5611  D5      		push	de
13666:	5612  FE02    		cp	2		; Test 'O' ???
13667:	5614  C22C56  		jp	nz,l562c
13668:	5617  212356  		ld	hl,l5623
13669:	561A  E5      		push	hl
13670:	561B  E5      		push	hl
13671:	561C  60      		ld	h,b
13672:	561D  69      		ld	l,c
13673:	561E  3E1A    		ld	a,1ah
13674:	5620  C37956  		jp	l5679
13675:	5623          	l5623:
13676:	5623  212700  		ld	hl,l0027
13677:	5626  09      		add	hl,bc
13678:	5627  7E      		ld	a,(hl)
13679:	5628  B7      		or	a
13680:	5629  C4CC55  		call	nz,l55cc
13681:	562C          	l562c:
13682:	562C  D1      		pop	de
13683:	562D  CDB157  		call	SetDskBuff	; Set disk buffer
13684:	5630  0E10    		ld	c,.close
13685:	5632  CD0500  		call	BDOS
13686:	5635  C1      		pop	bc
13687:	5636          	l5636:
13688:	5636  1629    		ld	d,')'
13689:	5638  AF      		xor	a
13690:	5639          	l5639:
13691:	5639  02      		ld	(bc),a
13692:	563A  03      		inc	bc
13693:	563B  15      		dec	d
13694:	563C  C23956  		jp	nz,l5639
13695:	563F  C9      		ret
13696:			;
13697:			; Function : LOC(<file number>)
13698:			;
13699:	5640          	l5640:
13700:	5640  CD3651  		call	filnum		; Get file number
13701:	5643  CAA60C  		jp	z,l0ca6		; .. bad file number
13702:	5646  FE03    		cp	3
13703:	5648  212600  		ld	hl,l0026
13704:	564B  C25156  		jp	nz,l5651
13705:	564E  21AE00  		ld	hl,l00ae
13706:	5651          	l5651:
13707:	5651  09      		add	hl,bc
13708:	5652  7E      		ld	a,(hl)
13709:	5653  2B      		dec	hl
13710:	5654  6E      		ld	l,(hl)
13711:	5655  C3D71D  		jp	l1dd7
13712:			;
13713:			; Function : LOF(<file number>)
13714:			;
13715:	5658          	l5658:
13716:	5658  CD3651  		call	filnum		; Get file number
13717:	565B  CAA60C  		jp	z,l0ca6		; .. bad file number
13718:	565E  211000  		ld	hl,l0010
13719:	5661  09      		add	hl,bc
13720:	5662  7E      		ld	a,(hl)
13721:	5663  C3D51D  		jp	l1dd5
13722:			;
13723:			; Put character in Accu to file
13724:			;
13725:	5666          	fputc:
13726:	5666  E1      		pop	hl
13727:	5667  F1      		pop	af
13728:	5668          	fput:
13729:	5668  E5      		push	hl
13730:	5669  F5      		push	af
13731:	566A  2A9407  		ld	hl,(FP)		; Get file pointer
13732:	566D  7E      		ld	a,(hl)		; .. fetch mode
13733:	566E  FE01    		cp	1
13734:	5670  CA0045  		jp	z,l4500		; .. 'I'
13735:	5673  FE03    		cp	3
13736:	5675  CA655C  		jp	z,l5c65		; .. 'R'
13737:	5678  F1      		pop	af		; .. here on 'O'
13738:	5679          	l5679:
13739:	5679  D5      		push	de
13740:	567A  C5      		push	bc
13741:	567B  44      		ld	b,h
13742:	567C  4D      		ld	c,l
13743:	567D  F5      		push	af
13744:	567E  112700  		ld	de,l0027
13745:	5681  19      		add	hl,de
13746:	5682  7E      		ld	a,(hl)		; Get record pointer
13747:	5683  FE80    		cp	reclng
13748:	5685  E5      		push	hl
13749:	5686  CCC955  		call	z,l55c9		; Write record if filled
13750:	5689  E1      		pop	hl
13751:	568A  34      		inc	(hl)		; Bump record count
13752:	568B  4E      		ld	c,(hl)		; .. get for index
13753:	568C  0600    		ld	b,0
13754:	568E  23      		inc	hl
13755:	568F  F1      		pop	af		; Get back character
13756:	5690  F5      		push	af
13757:	5691  56      		ld	d,(hl)
13758:	5692  FE0D    		cp	cr
13759:	5694  70      		ld	(hl),b
13760:	5695  CA9D56  		jp	z,l569d
13761:	5698  C6E0    		add	a,0e0h
13762:	569A  7A      		ld	a,d
13763:	569B  88      		adc	a,b
13764:	569C  77      		ld	(hl),a
13765:	569D          	l569d:
13766:	569D  09      		add	hl,bc		; Position buffer
13767:	569E  F1      		pop	af
13768:	569F  C1      		pop	bc
13769:	56A0  D1      		pop	de
13770:	56A1  77      		ld	(hl),a		; .. save character
13771:	56A2  E1      		pop	hl
13772:	56A3  C9      		ret
13773:			;
13774:			;
13775:			;
13776:	56A4          	l56a4:
13777:	56A4  1B      		dec	de
13778:	56A5  2B      		dec	hl
13779:	56A6  73      		ld	(hl),e
13780:	56A7  23      		inc	hl
13781:	56A8  72      		ld	(hl),d
13782:	56A9  23      		inc	hl
13783:	56AA  3680    		ld	(hl),80h
13784:	56AC  23      		inc	hl
13785:	56AD  3680    		ld	(hl),80h
13786:	56AF  E1      		pop	hl
13787:	56B0  E3      		ex	(sp),hl
13788:	56B1  44      		ld	b,h
13789:	56B2  4D      		ld	c,l
13790:	56B3  E5      		push	hl
13791:	56B4  3A1F08  		ld	a,(OSvers)	; Get OS version
13792:	56B7  B7      		or	a
13793:	56B8  CAC856  		jp	z,l56c8		; Not CP/M 2.x or 3.x
13794:	56BB  212200  		ld	hl,l0022
13795:	56BE  09      		add	hl,bc
13796:	56BF  73      		ld	(hl),e
13797:	56C0  23      		inc	hl
13798:	56C1  72      		ld	(hl),d
13799:	56C2  23      		inc	hl
13800:	56C3  3600    		ld	(hl),0
13801:	56C5  C30D57  		jp	l570d
13802:	56C8          	l56c8:
13803:	56C8  210D00  		ld	hl,l000d
13804:	56CB  09      		add	hl,bc
13805:	56CC  7B      		ld	a,e
13806:	56CD  17      		rla
13807:	56CE  7A      		ld	a,d
13808:	56CF  17      		rla
13809:	56D0  56      		ld	d,(hl)
13810:	56D1  BA      		cp	d
13811:	56D2  CA0557  		jp	z,l5705
13812:	56D5  D5      		push	de
13813:	56D6  F5      		push	af
13814:	56D7  E5      		push	hl
13815:	56D8  C5      		push	bc
13816:	56D9  118000  		ld	de,DMA
13817:	56DC  0E1A    		ld	c,.setdma
13818:	56DE  CD0500  		call	BDOS
13819:	56E1  D1      		pop	de
13820:	56E2  D5      		push	de
13821:	56E3  13      		inc	de
13822:	56E4  0E10    		ld	c,.close
13823:	56E6  CD0500  		call	BDOS
13824:	56E9  D1      		pop	de
13825:	56EA  E1      		pop	hl
13826:	56EB  F1      		pop	af
13827:	56EC  77      		ld	(hl),a
13828:	56ED  D5      		push	de
13829:	56EE  13      		inc	de
13830:	56EF  0E0F    		ld	c,.open
13831:	56F1  D5      		push	de
13832:	56F2  CD0500  		call	BDOS
13833:	56F5  D1      		pop	de
13834:	56F6  3C      		inc	a
13835:	56F7  C20357  		jp	nz,l5703
13836:	56FA  0E16    		ld	c,.make
13837:	56FC  CD0500  		call	BDOS
13838:	56FF  3C      		inc	a
13839:	5700  CABB0C  		jp	z,l0cbb
13840:	5703          	l5703:
13841:	5703  C1      		pop	bc
13842:	5704  D1      		pop	de
13843:	5705          	l5705:
13844:	5705  212100  		ld	hl,l0021
13845:	5708  09      		add	hl,bc
13846:	5709  7B      		ld	a,e
13847:	570A  E67F    		and	7fh
13848:	570C  77      		ld	(hl),a
13849:	570D          	l570d:
13850:	570D  E1      		pop	hl
13851:	570E  3AA007  		ld	a,(l07a0)
13852:	5711  B7      		or	a
13853:	5712  C21A57  		jp	nz,l571a
13854:	5715  CD7D57  		call	l577d
13855:	5718  E1      		pop	hl
13856:	5719  C9      		ret
13857:	571A          	l571a:
13858:	571A  212100  		ld	hl,l0021
13859:	571D  09      		add	hl,bc
13860:	571E  7E      		ld	a,(hl)
13861:	571F  FE7F    		cp	7fh
13862:	5721  F5      		push	af
13863:	5722  118000  		ld	de,l0080
13864:	5725  212900  		ld	hl,l0029
13865:	5728  09      		add	hl,bc
13866:	5729  D5      		push	de
13867:	572A  E5      		push	hl
13868:	572B  CC3B57  		call	z,l573b
13869:	572E  CDC955  		call	l55c9
13870:	5731  D1      		pop	de
13871:	5732  E1      		pop	hl
13872:	5733  F1      		pop	af
13873:	5734  CC3B57  		call	z,l573b
13874:	5737  E1      		pop	hl
13875:	5738  C3E917  		jp	clr.FP		; Reset file I/O
13876:	573B          	l573b:
13877:	573B  C5      		push	bc
13878:	573C  0680    		ld	b,80h
13879:	573E          	l573e:
13880:	573E  7E      		ld	a,(hl)
13881:	573F  23      		inc	hl
13882:	5740  12      		ld	(de),a
13883:	5741  13      		inc	de
13884:	5742  05      		dec	b
13885:	5743  C23E57  		jp	nz,l573e
13886:	5746  C1      		pop	bc
13887:	5747  C9      		ret
13888:			;
13889:			; Get byte from active file
13890:			; EXIT	Accu holds character
13891:			;	Carry set indicates end of file
13892:			;
13893:	5748          	fget::
13894:	5748  C5      		push	bc
13895:	5749  E5      		push	hl
13896:	574A          	l574a:
13897:	574A  2A9407  		ld	hl,(FP)		; Get file pointer
13898:	574D  7E      		ld	a,(hl)		; Fetch mode
13899:	574E  FE03    		cp	3		; .. test 'R'
13900:	5750  CA965C  		jp	z,l5c96		; .. yeap
13901:	5753  012800  		ld	bc,l0028
13902:	5756  09      		add	hl,bc
13903:	5757  7E      		ld	a,(hl)
13904:	5758  B7      		or	a
13905:	5759  CA6857  		jp	z,l5768
13906:	575C  2B      		dec	hl
13907:	575D  7E      		ld	a,(hl)
13908:	575E  23      		inc	hl
13909:	575F  35      		dec	(hl)
13910:	5760  96      		sub	(hl)
13911:	5761  4F      		ld	c,a
13912:	5762  09      		add	hl,bc		; Calculate buffer index
13913:	5763  7E      		ld	a,(hl)		; .. get character
13914:	5764  B7      		or	a
13915:	5765  E1      		pop	hl
13916:	5766  C1      		pop	bc
13917:	5767  C9      		ret
13918:	5768          	l5768:
13919:	5768  2B      		dec	hl
13920:	5769  7E      		ld	a,(hl)		; Test end of file
13921:	576A  B7      		or	a
13922:	576B  CA7457  		jp	z,l5774		; .. yeap
13923:	576E  CD7A57  		call	l577a		; Read buffer
13924:	5771  C24A57  		jp	nz,l574a
13925:	5774          	l5774:
13926:	5774  37      		scf
13927:	5775  E1      		pop	hl
13928:	5776  C1      		pop	bc
13929:	5777  3E1A    		ld	a,eof
13930:	5779  C9      		ret
13931:			;
13932:			; Read from actual file
13933:			;
13934:	577A          	l577a:
13935:	577A  2A9407  		ld	hl,(FP)		; Get file pointer
13936:	577D          	l577d:
13937:	577D  D5      		push	de
13938:	577E  54      		ld	d,h
13939:	577F  5D      		ld	e,l
13940:	5780  13      		inc	de
13941:	5781  012500  		ld	bc,l0025
13942:	5784  09      		add	hl,bc		; Position pointer
13943:	5785  4E      		ld	c,(hl)
13944:	5786  23      		inc	hl
13945:	5787  46      		ld	b,(hl)
13946:	5788  03      		inc	bc		; .. bump
13947:	5789  2B      		dec	hl
13948:	578A  71      		ld	(hl),c		; .. bring it back
13949:	578B  23      		inc	hl
13950:	578C  70      		ld	(hl),b
13951:	578D  23      		inc	hl
13952:	578E  23      		inc	hl
13953:	578F  E5      		push	hl
13954:	5790  0E80    		ld	c,reclng	; Set length
13955:	5792          	l5792:
13956:	5792  23      		inc	hl
13957:	5793  3600    		ld	(hl),0		; Clear buffer
13958:	5795  0D      		dec	c
13959:	5796  C29257  		jp	nz,l5792
13960:	5799  CDB157  		call	SetDskBuff	; Set disk buffer
13961:	579C  3A2008  		ld	a,(f_rd)	; Get read function
13962:	579F  CD9E5A  		call	l5a9e		; .. read
13963:	57A2  B7      		or	a
13964:	57A3  3E00    		ld	a,0
13965:	57A5  C2AA57  		jp	nz,l57aa
13966:	57A8  3E80    		ld	a,reclng
13967:	57AA          	l57aa:
13968:	57AA  E1      		pop	hl
13969:	57AB  77      		ld	(hl),a
13970:	57AC  2B      		dec	hl
13971:	57AD  77      		ld	(hl),a
13972:	57AE  B7      		or	a
13973:	57AF  D1      		pop	de
13974:	57B0  C9      		ret
13975:			;
13976:			; Set disk buffer from file pointer in ^HL
13977:			;
13978:	57B1          	SetDskBuff:
13979:	57B1  C5      		push	bc
13980:	57B2  D5      		push	de
13981:	57B3  E5      		push	hl
13982:	57B4  212800  		ld	hl,l0028
13983:	57B7  19      		add	hl,de		; Position buffer
13984:	57B8  EB      		ex	de,hl
13985:	57B9  0E1A    		ld	c,.setdma
13986:	57BB  CD0500  		call	BDOS		; .. set it
13987:	57BE  E1      		pop	hl
13988:	57BF  D1      		pop	de
13989:	57C0  C1      		pop	bc
13990:	57C1  C9      		ret
13991:			;
13992:			; Get character from active file
13993:			; EXIT	Accu holds character
13994:			;	Carry set on end of file
13995:			;
13996:	57C2          	fgetc::
13997:	57C2  CD4857  		call	fget		; Get byte from file
13998:	57C5  D8      		ret	c		; .. end of file
13999:	57C6  FE1A    		cp	eof		; Test end of file
14000:	57C8  37      		scf
14001:	57C9  3F      		ccf
14002:	57CA  C0      		ret	nz		; .. nope
14003:	57CB  C5      		push	bc
14004:	57CC  E5      		push	hl
14005:	57CD  2A9407  		ld	hl,(FP)		; Get file pointer
14006:	57D0  012700  		ld	bc,l0027
14007:	57D3  09      		add	hl,bc		; Position pointer
14008:	57D4  3600    		ld	(hl),0		; .. clear value
14009:	57D6  23      		inc	hl
14010:	57D7  3600    		ld	(hl),0
14011:	57D9  37      		scf			; Set end of file
14012:	57DA  E1      		pop	hl
14013:	57DB  C1      		pop	bc
14014:	57DC  C9      		ret
14015:			;
14016:			; Parse file name
14017:			;
14018:	57DD          	parse:
14019:	57DD  CD021A  		call	EXPR		; Get expression
14020:	57E0  E5      		push	hl
14021:	57E1  CDA548  		call	str.adr		; Get address of string
14022:	57E4  7E      		ld	a,(hl)		; .. length
14023:	57E5  B7      		or	a
14024:	57E6  CAB20C  		jp	z,l0cb2		; .. empty
14025:	57E9  F5      		push	af
14026:	57EA  23      		inc	hl
14027:	57EB  5E      		ld	e,(hl)		; Fetch pointer
14028:	57EC  23      		inc	hl
14029:	57ED  66      		ld	h,(hl)
14030:	57EE  6B      		ld	l,e
14031:	57EF  5F      		ld	e,a		; Set length
14032:	57F0  FE02    		cp	2		; Test possible drive
14033:	57F2  DA0058  		jp	c,l5800		; .. nope
14034:	57F5  4E      		ld	c,(hl)		; Get possible drive
14035:	57F6  23      		inc	hl
14036:	57F7  7E      		ld	a,(hl)
14037:	57F8  1D      		dec	e
14038:	57F9  FE3A    		cp	':'		; Test drive delimiter
14039:	57FB  CA0458  		jp	z,l5804		; .. yeap
14040:	57FE  2B      		dec	hl
14041:	57FF  1C      		inc	e
14042:	5800          	l5800:
14043:	5800  2B      		dec	hl
14044:	5801  1C      		inc	e
14045:	5802  0E40    		ld	c,'A'-1		; Set default drive
14046:	5804          	l5804:
14047:	5804  1D      		dec	e		; Test end
14048:	5805  CA6258  		jp	z,l5862
14049:	5808  79      		ld	a,c
14050:	5809  E6DF    		and	11011111b	; Get upper case
14051:	580B  D640    		sub	'A'-1		; Get binary drive
14052:	580D  DA6258  		jp	c,l5862
14053:	5810  FE1B    		cp	'Z'-'A'+2
14054:	5812  D26258  		jp	nc,l5862
14055:	5815  01FE07  		ld	bc,@@FCB	; Get FCB
14056:	5818  02      		ld	(bc),a		; .. set drive
14057:	5819  03      		inc	bc
14058:	581A  160B    		ld	d,_nam+_ext	; Set max
14059:	581C          	l581c:
14060:	581C  23      		inc	hl
14061:	581D          	l581d:
14062:	581D  1D      		dec	e		; Count down
14063:	581E  FA5258  		jp	m,l5852		; .. end
14064:	5821  7E      		ld	a,(hl)
14065:	5822  FE2E    		cp	'.'		; Test delimiter
14066:	5824  C23058  		jp	nz,l5830	; .. nope
14067:	5827  CD3E58  		call	l583e		; .. fix name field
14068:	582A  F1      		pop	af
14069:	582B  37      		scf
14070:	582C  F5      		push	af
14071:	582D  C31C58  		jp	l581c
14072:	5830          	l5830:
14073:	5830  02      		ld	(bc),a		; ..save into FCB
14074:	5831  03      		inc	bc
14075:	5832  23      		inc	hl
14076:	5833  15      		dec	d
14077:	5834  C21D58  		jp	nz,l581d
14078:	5837          	l5837:
14079:	5837  AF      		xor	a
14080:	5838  320A08  		ld	(@@FCB+_EX),a	; .. clear extent
14081:	583B  F1      		pop	af
14082:	583C  E1      		pop	hl
14083:	583D  C9      		ret
14084:			;
14085:			;
14086:			;
14087:	583E          	l583e:
14088:	583E  7A      		ld	a,d
14089:	583F  FE0B    		cp	_nam+_ext	; Test empty name
14090:	5841  CA6258  		jp	z,l5862		; .. yeap
14091:	5844  FE03    		cp	_ext
14092:	5846  DA6258  		jp	c,l5862
14093:	5849  C8      		ret	z
14094:	584A  3E20    		ld	a,' '
14095:	584C  02      		ld	(bc),a		; .. blank remainder
14096:	584D  03      		inc	bc
14097:	584E  15      		dec	d
14098:	584F  C33E58  		jp	l583e
14099:			;
14100:			;
14101:			;
14102:	5852          	l5852:
14103:	5852  14      		inc	d		; Test FCB completely filled
14104:	5853  15      		dec	d
14105:	5854  CA3758  		jp	z,l5837		; .. yeap
14106:	5857          	l5857:
14107:	5857  3E20    		ld	a,' '
14108:	5859  02      		ld	(bc),a		; .. blank remainder
14109:	585A  03      		inc	bc
14110:	585B  15      		dec	d
14111:	585C  C25758  		jp	nz,l5857
14112:	585F  C33758  		jp	l5837
14113:	5862          	l5862:
14114:	5862  C3B20C  		jp	l0cb2
14115:			;
14116:			; Statement : NAME <old filename> AS <new filename>
14117:			;
14118:	5865          	l5865:
14119:	5865  CDDD57  		call	parse		; Parse file
14120:	5868  E5      		push	hl
14121:	5869  118000  		ld	de,DMA
14122:	586C  0E1A    		ld	c,.setdma
14123:	586E  CD0500  		call	BDOS
14124:	5871  11FE07  		ld	de,@@FCB
14125:	5874  0E0F    		ld	c,.open
14126:	5876  CD0500  		call	BDOS		; Find old file
14127:	5879  3C      		inc	a
14128:	587A  CAA30C  		jp	z,l0ca3
14129:	587D  21EE07  		ld	hl,l07ee
14130:	5880  11FE07  		ld	de,@@FCB
14131:	5883  060C    		ld	b,_drv+_nam+_ext
14132:	5885          	l5885:
14133:	5885  1A      		ld	a,(de)		; .. unpack old name
14134:	5886  77      		ld	(hl),a
14135:	5887  23      		inc	hl
14136:	5888  13      		inc	de
14137:	5889  05      		dec	b
14138:	588A  C28558  		jp	nz,l5885
14139:	588D  E1      		pop	hl
14140:	588E  CDD343  		call	ilcmp		; Verify 'AS'
14141:	5891  41      		db	'A'
14142:	5892  CDD343  		call	ilcmp
14143:	5895  53      		db	'S'
14144:	5896  CDDD57  		call	parse		; Parse file
14145:	5899  E5      		push	hl
14146:	589A  3AFE07  		ld	a,(@@FCB)
14147:	589D  21EE07  		ld	hl,l07ee
14148:	58A0  BE      		cp	(hl)
14149:	58A1  C21814  		jp	nz,_ill.func	; Invalid if not same
14150:	58A4  11FE07  		ld	de,@@FCB
14151:	58A7  0E0F    		ld	c,.open
14152:	58A9  CD0500  		call	BDOS		; Test new file already there
14153:	58AC  3C      		inc	a
14154:	58AD  C2BE0C  		jp	nz,l0cbe	; .. yeap
14155:	58B0  0E17    		ld	c,.rename
14156:	58B2  11EE07  		ld	de,l07ee
14157:	58B5  CD0500  		call	BDOS		; Rename file
14158:	58B8  E1      		pop	hl
14159:	58B9  C9      		ret
14160:			;
14161:			; Statement : OPEN <mode>,[#]<file number>,<filename>[,<reclen>]
14162:			;
14163:			; Mode mapping:	'I' -> 1
14164:			;		'O' -> 2
14165:			;		'R' -> 3
14166:			;
14167:	58BA          	_OPEN:
14168:	58BA  01E917  		ld	bc,clr.FP	; Reset file I/O routine
14169:	58BD  C5      		push	bc		; .. for reset
14170:	58BE  CD021A  		call	EXPR		; Get expression
14171:	58C1  E5      		push	hl
14172:	58C2  CDA548  		call	str.adr		; Get address of string
14173:	58C5  7E      		ld	a,(hl)		; .. length
14174:	58C6  B7      		or	a
14175:	58C7  CAA00C  		jp	z,l0ca0		; .. bad file mode if empty
14176:	58CA  23      		inc	hl
14177:	58CB  4E      		ld	c,(hl)
14178:	58CC  23      		inc	hl
14179:	58CD  46      		ld	b,(hl)
14180:	58CE  0A      		ld	a,(bc)		; Get mode
14181:	58CF  E6DF    		and	11011111b	; .. as upper case
14182:	58D1  1602    		ld	d,2
14183:	58D3  FE4F    		cp	'O'		; Test output
14184:	58D5  CAE658  		jp	z,l58e6
14185:	58D8  1601    		ld	d,1
14186:	58DA  FE49    		cp	'I'		; .. input
14187:	58DC  CAE658  		jp	z,l58e6
14188:	58DF  1603    		ld	d,3
14189:	58E1  FE52    		cp	'R'		; .. random
14190:	58E3  C2A00C  		jp	nz,l0ca0	; .. bad file mode if none
14191:	58E6          	l58e6:
14192:	58E6  E1      		pop	hl
14193:	58E7  CDD343  		call	ilcmp
14194:	58EA  2C      		db	','
14195:	58EB  D5      		push	de
14196:	58EC  FE23    		cp	'#'
14197:	58EE  CC0513  		call	z,get.tok
14198:	58F1  CD7520  		call	l2075
14199:	58F4  CDD343  		call	ilcmp
14200:	58F7  2C      		db	','
14201:	58F8  7B      		ld	a,e
14202:	58F9  B7      		or	a
14203:	58FA  CAA60C  		jp	z,l0ca6
14204:	58FD  D1      		pop	de
14205:			;
14206:			; ENTRY	Reg D holds file mode
14207:			;	Accu holds file number
14208:			;
14209:	58FE          	l58fe:
14210:	58FE  5F      		ld	e,a		; Save file number
14211:	58FF  D5      		push	de
14212:	5900  CD3951  		call	fn.a		; Test file active
14213:	5903  C2AF0C  		jp	nz,l0caf	; .. nope
14214:	5906  D1      		pop	de
14215:	5907  C5      		push	bc
14216:	5908  D5      		push	de
14217:	5909  CDDD57  		call	parse		; Parse file
14218:	590C  D1      		pop	de
14219:	590D  C1      		pop	bc
14220:	590E  C5      		push	bc
14221:	590F  F5      		push	af
14222:	5910  7A      		ld	a,d
14223:	5911  CDCD5A  		call	l5acd		; Set up for random access
14224:	5914  F1      		pop	af
14225:	5915  22A70A  		ld	(@@ptr),hl	; Save token pointer
14226:	5918  DA3159  		jp	c,l5931
14227:	591B  7B      		ld	a,e
14228:	591C  B7      		or	a
14229:	591D  C23159  		jp	nz,l5931
14230:	5920  210708  		ld	hl,@@FCB+_drv+_nam
14231:	5923  7E      		ld	a,(hl)		; Test extension
14232:	5924  FE20    		cp	' '
14233:	5926  C23159  		jp	nz,l5931	; .. yeap
14234:	5929  3642    		ld	(hl),'B'	; .. set '.BAS'
14235:	592B  23      		inc	hl
14236:	592C  3641    		ld	(hl),'A'
14237:	592E  23      		inc	hl
14238:	592F  3653    		ld	(hl),'S'
14239:	5931          	l5931:
14240:	5931  E1      		pop	hl
14241:	5932  7A      		ld	a,d
14242:	5933  F5      		push	af
14243:	5934  229407  		ld	(FP),hl		; .. save file pointer
14244:	5937  E5      		push	hl
14245:	5938  23      		inc	hl
14246:	5939  11FE07  		ld	de,@@FCB
14247:	593C  0E0C    		ld	c,_drv+_nam+_ext
14248:	593E          	l593e:
14249:	593E  1A      		ld	a,(de)		; Unpack FCB
14250:	593F  77      		ld	(hl),a
14251:	5940  13      		inc	de
14252:	5941  23      		inc	hl
14253:	5942  0D      		dec	c
14254:	5943  C23E59  		jp	nz,l593e
14255:	5946  AF      		xor	a
14256:	5947  77      		ld	(hl),a
14257:	5948  111400  		ld	de,l0014
14258:	594B  19      		add	hl,de
14259:	594C  77      		ld	(hl),a
14260:	594D  D1      		pop	de
14261:	594E  D5      		push	de
14262:	594F  13      		inc	de
14263:	5950  CDB157  		call	SetDskBuff	; Set disk buffer
14264:	5953  E1      		pop	hl
14265:	5954  F1      		pop	af
14266:	5955  F5      		push	af
14267:	5956  E5      		push	hl
14268:	5957  FE02    		cp	2		; Test 'O'
14269:	5959  C26F59  		jp	nz,l596f	; .. nope
14270:	595C  D5      		push	de
14271:	595D  0E13    		ld	c,.delete
14272:	595F  CD0500  		call	BDOS		; Delete old file
14273:	5962  D1      		pop	de
14274:	5963          	l5963:
14275:	5963  0E16    		ld	c,.make
14276:	5965  CD0500  		call	BDOS		; Create new one
14277:	5968  3C      		inc	a
14278:	5969  CABB0C  		jp	z,l0cbb
14279:	596C  C38559  		jp	l5985
14280:	596F          	l596f:
14281:	596F  0E0F    		ld	c,.open
14282:	5971  CD0500  		call	BDOS		; Open file
14283:	5974  3C      		inc	a
14284:	5975  C28559  		jp	nz,l5985	; .. got it
14285:	5978  D1      		pop	de
14286:	5979  F1      		pop	af
14287:	597A  F5      		push	af
14288:	597B  D5      		push	de
14289:	597C  FE03    		cp	3		; Test 'R'
14290:	597E  C2A30C  		jp	nz,l0ca3	; .. nope, error
14291:	5981  13      		inc	de
14292:	5982  C36359  		jp	l5963		; Create file
14293:	5985          	l5985:
14294:	5985  D1      		pop	de
14295:	5986  F1      		pop	af
14296:	5987  12      		ld	(de),a		; Set file type
14297:	5988  D5      		push	de
14298:	5989  212500  		ld	hl,l0025
14299:	598C  19      		add	hl,de
14300:	598D  AF      		xor	a
14301:	598E  77      		ld	(hl),a		; Clear ???
14302:	598F  23      		inc	hl
14303:	5990  77      		ld	(hl),a
14304:	5991  23      		inc	hl
14305:	5992  77      		ld	(hl),a
14306:	5993  23      		inc	hl
14307:	5994  77      		ld	(hl),a
14308:	5995  E1      		pop	hl		; Get back file pointer
14309:	5996  7E      		ld	a,(hl)
14310:	5997  FE03    		cp	3		; Test random
14311:	5999  CAA859  		jp	z,l59a8		; .. yeap, clear buffer
14312:	599C  FE01    		cp	1		; Test read
14313:	599E  C2C943  		jp	nz,l43c9	; .. nope
14314:	59A1  CD7A57  		call	l577a		; Read buffer
14315:	59A4  2AA70A  		ld	hl,(@@ptr)	; Get token pointer
14316:	59A7  C9      		ret
14317:	59A8          	l59a8:
14318:	59A8  012900  		ld	bc,l0029
14319:	59AB  09      		add	hl,bc		; Point to buffer
14320:	59AC  0E80    		ld	c,reclng
14321:	59AE          	l59ae:
14322:	59AE  70      		ld	(hl),b		; .. clear buffer
14323:	59AF  23      		inc	hl
14324:	59B0  0D      		dec	c
14325:	59B1  C2AE59  		jp	nz,l59ae
14326:	59B4  C3C943  		jp	l43c9
14327:			;
14328:			; Statement : SYSTEM
14329:			;
14330:	59B7          	l59b7:
14331:	59B7  C0      		ret	nz
14332:	59B8  CD0D54  		call	l540d
14333:	59BB          	l59bb:
14334:	59BB  C30000  		jp	OS
14335:			;
14336:			; Statement : RESET
14337:			;
14338:	59BE          	l59be:
14339:	59BE  C0      		ret	nz
14340:	59BF  E5      		push	hl
14341:	59C0  CD0D54  		call	l540d
14342:	59C3  0E19    		ld	c,.retdsk
14343:	59C5  CD0500  		call	BDOS		; Get logged drive
14344:	59C8  F5      		push	af
14345:	59C9  0E0D    		ld	c,.resdsk
14346:	59CB  CD0500  		call	BDOS		; Reset entire system
14347:	59CE  F1      		pop	af
14348:	59CF  5F      		ld	e,a
14349:	59D0  0E0E    		ld	c,.logdsk
14350:	59D2  CD0500  		call	BDOS		; .. log current one
14351:	59D5  E1      		pop	hl
14352:	59D6  C9      		ret
14353:			;
14354:			; Statement : KILL <filename>
14355:			;
14356:	59D7          	l59d7:
14357:	59D7  CDDD57  		call	parse		; Parse file
14358:	59DA  E5      		push	hl
14359:	59DB  118000  		ld	de,DMA
14360:	59DE  0E1A    		ld	c,.setdma
14361:	59E0  CD0500  		call	BDOS		; Set disk buffer
14362:	59E3  11FE07  		ld	de,@@FCB
14363:	59E6  D5      		push	de
14364:	59E7  0E0F    		ld	c,.open
14365:	59E9  CD0500  		call	BDOS		; Open file
14366:	59EC  3C      		inc	a
14367:	59ED  D1      		pop	de
14368:	59EE  D5      		push	de
14369:	59EF  F5      		push	af
14370:	59F0  0E10    		ld	c,.close
14371:	59F2  CAF859  		jp	z,l59f8		; .. not on board
14372:	59F5  CD0500  		call	BDOS		; .. else close
14373:	59F8          	l59f8:
14374:	59F8  F1      		pop	af
14375:	59F9  D1      		pop	de
14376:	59FA  CAA30C  		jp	z,l0ca3
14377:	59FD  0E13    		ld	c,.delete
14378:	59FF  CD0500  		call	BDOS		; Delete file
14379:	5A02  E1      		pop	hl
14380:	5A03  C9      		ret
14381:			;
14382:			; Statement : FILES [<filename>]
14383:			;
14384:	5A04          	l5a04:
14385:	5A04  C2145A  		jp	nz,l5a14
14386:	5A07  E5      		push	hl
14387:	5A08  21FE07  		ld	hl,@@FCB
14388:	5A0B  3600    		ld	(hl),0		; Set default drive
14389:	5A0D  23      		inc	hl
14390:	5A0E  0E0B    		ld	c,_nam+_ext
14391:	5A10  CD965A  		call	l5a96		; Set all wildcard
14392:	5A13  E1      		pop	hl
14393:	5A14          	l5a14:
14394:	5A14  C4DD57  		call	nz,parse	; .. parse file if argue
14395:	5A17  AF      		xor	a
14396:	5A18  320A08  		ld	(@@FCB+_EX),a	; Clear extent
14397:	5A1B  E5      		push	hl
14398:	5A1C  21FF07  		ld	hl,@@FCB+_drv
14399:	5A1F  0E08    		ld	c,_nam
14400:	5A21  CD925A  		call	l5a92		; Map '*' -> '??...'
14401:	5A24  210708  		ld	hl,@@FCB+_drv+_nam
14402:	5A27  0E03    		ld	c,_ext
14403:	5A29  CD925A  		call	l5a92		; .. again
14404:	5A2C  118000  		ld	de,DMA
14405:	5A2F  0E1A    		ld	c,.setdma
14406:	5A31  CD0500  		call	BDOS		; Set disk buffer
14407:	5A34  11FE07  		ld	de,@@FCB
14408:	5A37  0E11    		ld	c,.srcfrs
14409:	5A39  CD0500  		call	BDOS		; Search file
14410:	5A3C  FEFF    		cp	OSerr
14411:	5A3E  CAA30C  		jp	z,l0ca3		; .. none found
14412:	5A41          	l5a41:
14413:	5A41  E603    		and	00000011b	; Mask directory code
14414:	5A43  87      		add	a,a		; .. *32
14415:	5A44  87      		add	a,a
14416:	5A45  87      		add	a,a
14417:	5A46  87      		add	a,a
14418:	5A47  87      		add	a,a
14419:	5A48  4F      		ld	c,a
14420:	5A49  0600    		ld	b,0
14421:	5A4B  218100  		ld	hl,DMA+1
14422:	5A4E  09      		add	hl,bc		; Position name
14423:	5A4F  0E0B    		ld	c,_nam+_ext
14424:	5A51          	l5a51:
14425:	5A51  7E      		ld	a,(hl)
14426:	5A52  23      		inc	hl
14427:	5A53  CDD640  		call	putchar		; Print file name
14428:	5A56  79      		ld	a,c
14429:	5A57  FE04    		cp	_ext+1
14430:	5A59  C2675A  		jp	nz,l5a67
14431:	5A5C  7E      		ld	a,(hl)
14432:	5A5D  FE20    		cp	' '
14433:	5A5F  CA645A  		jp	z,l5a64
14434:	5A62  3E2E    		ld	a,'.'
14435:	5A64          	l5a64:
14436:	5A64  CDD640  		call	putchar		; Give blank or delimiter
14437:	5A67          	l5a67:
14438:	5A67  0D      		dec	c
14439:	5A68  C2515A  		jp	nz,l5a51
14440:	5A6B  3A650A  		ld	a,(colCON)	; Get console column
14441:	5A6E  C60D    		add	a,_nam+_ext+2
14442:	5A70  57      		ld	d,a
14443:	5A71  3A9007  		ld	a,(l0790)
14444:	5A74  BA      		cp	d
14445:	5A75  DA805A  		jp	c,l5a80
14446:	5A78  3E20    		ld	a,' '
14447:	5A7A  CDD640  		call	putchar		; Give two blanks
14448:	5A7D  CDD640  		call	putchar
14449:	5A80          	l5a80:
14450:	5A80  DC2142  		call	c,fnl		; Give new line
14451:	5A83  11FE07  		ld	de,@@FCB
14452:	5A86  0E12    		ld	c,.srcnxt
14453:	5A88  CD0500  		call	BDOS		; Try to get next file
14454:	5A8B  FEFF    		cp	OSerr
14455:	5A8D  C2415A  		jp	nz,l5a41	; .. yeap
14456:	5A90  E1      		pop	hl
14457:	5A91  C9      		ret
14458:			;
14459:			; Map '*' to '??..'
14460:			;
14461:	5A92          	l5a92:
14462:	5A92  7E      		ld	a,(hl)
14463:	5A93  FE2A    		cp	'*'		; Test wildcard
14464:	5A95  C0      		ret	nz		; .. nope
14465:			;
14466:			; Fill FCB with single wildcards
14467:			;
14468:	5A96          	l5a96:
14469:	5A96  363F    		ld	(hl),'?'	; .. do it
14470:	5A98  23      		inc	hl
14471:	5A99  0D      		dec	c
14472:	5A9A  C2965A  		jp	nz,l5a96
14473:	5A9D  C9      		ret
14474:			;
14475:			; Process R/W file function in Accu
14476:			;
14477:	5A9E          	l5a9e:
14478:	5A9E  D5      		push	de
14479:	5A9F  4F      		ld	c,a
14480:	5AA0  C5      		push	bc
14481:	5AA1  CD0500  		call	BDOS		; .. do it
14482:	5AA4  C1      		pop	bc
14483:	5AA5  D1      		pop	de
14484:	5AA6  F5      		push	af
14485:	5AA7  212100  		ld	hl,_RRN
14486:	5AAA  19      		add	hl,de
14487:	5AAB  34      		inc	(hl)		; Bump record count
14488:	5AAC  C2B65A  		jp	nz,l5ab6
14489:	5AAF  23      		inc	hl
14490:	5AB0  34      		inc	(hl)
14491:	5AB1  C2B65A  		jp	nz,l5ab6
14492:	5AB4  23      		inc	hl
14493:	5AB5  34      		inc	(hl)
14494:	5AB6          	l5ab6:
14495:	5AB6  79      		ld	a,c
14496:	5AB7  FE22    		cp	.wrrnd		; Test random write
14497:	5AB9  C2CB5A  		jp	nz,l5acb	; .. nope
14498:	5ABC  F1      		pop	af
14499:	5ABD  B7      		or	a		; Test write ok
14500:	5ABE  C8      		ret	z
14501:	5ABF  FE05    		cp	5		; .. no directory space
14502:	5AC1  CABB0C  		jp	z,l0cbb
14503:	5AC4  FE03    		cp	3		; .. cannot close extent
14504:	5AC6  3E01    		ld	a,1
14505:	5AC8  C8      		ret	z
14506:	5AC9  3C      		inc	a
14507:	5ACA  C9      		ret
14508:	5ACB          	l5acb:
14509:	5ACB  F1      		pop	af
14510:	5ACC  C9      		ret
14511:			;
14512:			;
14513:			;
14514:	5ACD          	l5acd:
14515:	5ACD  FE03    		cp	3		; Test random access
14516:	5ACF  C0      		ret	nz		; .. nope
14517:	5AD0  2B      		dec	hl
14518:	5AD1  CD0513  		call	get.tok
14519:	5AD4  D5      		push	de
14520:	5AD5  118000  		ld	de,l0080
14521:	5AD8  CAE05A  		jp	z,l5ae0
14522:	5ADB  C5      		push	bc
14523:	5ADC  CD1114  		call	l1411
14524:	5ADF  C1      		pop	bc
14525:	5AE0          	l5ae0:
14526:	5AE0  E5      		push	hl
14527:	5AE1  2AEA0B  		ld	hl,(recsiz)	; Get record size
14528:	5AE4  CDCD43  		call	cp.r
14529:	5AE7  DA1814  		jp	c,_ill.func	; HL < DE, invalid
14530:	5AEA  21A900  		ld	hl,l00a9
14531:	5AED  09      		add	hl,bc
14532:	5AEE  73      		ld	(hl),e
14533:	5AEF  23      		inc	hl
14534:	5AF0  72      		ld	(hl),d
14535:	5AF1  AF      		xor	a
14536:	5AF2  1E07    		ld	e,7
14537:	5AF4          	l5af4:
14538:	5AF4  23      		inc	hl
14539:	5AF5  77      		ld	(hl),a
14540:	5AF6  1D      		dec	e
14541:	5AF7  C2F45A  		jp	nz,l5af4
14542:	5AFA  E1      		pop	hl
14543:	5AFB  D1      		pop	de
14544:	5AFC  C9      		ret
14545:			;
14546:			; Statement : PUT [#]<file number>[,<record number>]
14547:			;
14548:	5AFD          	l5afd:
14549:	5AFD          		_OR
14550:			;
14551:			; Statement : GET [#]<file number>[,<record number>]
14552:			;
14553:	5AFE          	l5afe:
14554:	5AFE  AF      		xor	a
14555:	5AFF  32755D  		ld	(l5d75),a
14556:	5B02  CD2A51  		call	l512a
14557:	5B05  FE03    		cp	3		; Verify random access
14558:	5B07  C2A00C  		jp	nz,l0ca0	; .. bad file mode if not
14559:	5B0A  C5      		push	bc
14560:	5B0B  E5      		push	hl
14561:	5B0C  21AD00  		ld	hl,l00ad
14562:	5B0F  09      		add	hl,bc
14563:	5B10  5E      		ld	e,(hl)
14564:	5B11  23      		inc	hl
14565:	5B12  56      		ld	d,(hl)
14566:	5B13  13      		inc	de
14567:	5B14  E3      		ex	(sp),hl
14568:	5B15  7E      		ld	a,(hl)
14569:	5B16  FE2C    		cp	','
14570:	5B18  CC1114  		call	z,l1411
14571:	5B1B  2B      		dec	hl
14572:	5B1C  CD0513  		call	get.tok
14573:	5B1F  C2C90C  		jp	nz,l0cc9
14574:	5B22  E3      		ex	(sp),hl
14575:	5B23  7A      		ld	a,d
14576:	5B24  B3      		or	e
14577:	5B25  CAB50C  		jp	z,l0cb5
14578:	5B28  2B      		dec	hl
14579:	5B29  73      		ld	(hl),e
14580:	5B2A  23      		inc	hl
14581:	5B2B  72      		ld	(hl),d
14582:	5B2C  1B      		dec	de
14583:	5B2D  E1      		pop	hl
14584:	5B2E  C1      		pop	bc
14585:	5B2F  E5      		push	hl
14586:	5B30  C5      		push	bc
14587:	5B31  21B000  		ld	hl,l00b0
14588:	5B34  09      		add	hl,bc
14589:	5B35  AF      		xor	a
14590:	5B36  77      		ld	(hl),a
14591:	5B37  23      		inc	hl
14592:	5B38  77      		ld	(hl),a
14593:	5B39  21A900  		ld	hl,l00a9
14594:	5B3C  09      		add	hl,bc
14595:	5B3D  7E      		ld	a,(hl)
14596:	5B3E  23      		inc	hl
14597:	5B3F  66      		ld	h,(hl)
14598:	5B40  6F      		ld	l,a
14599:	5B41  EB      		ex	de,hl
14600:	5B42  D5      		push	de
14601:	5B43  E5      		push	hl
14602:	5B44  218000  		ld	hl,l0080
14603:	5B47  CDCD43  		call	cp.r		; Compare HL:DE
14604:	5B4A  E1      		pop	hl
14605:	5B4B  C2545B  		jp	nz,l5b54	; .. not same
14606:	5B4E  110000  		ld	de,l0000
14607:	5B51  C3925B  		jp	l5b92
14608:	5B54          	l5b54:
14609:	5B54  42      		ld	b,d
14610:	5B55  4B      		ld	c,e
14611:	5B56  3E10    		ld	a,10h
14612:	5B58  EB      		ex	de,hl
14613:	5B59  210000  		ld	hl,l0000
14614:	5B5C  E5      		push	hl
14615:	5B5D          	l5b5d:
14616:	5B5D  29      		add	hl,hl
14617:	5B5E  E3      		ex	(sp),hl
14618:	5B5F  D2675B  		jp	nc,l5b67
14619:	5B62  29      		add	hl,hl
14620:	5B63  23      		inc	hl
14621:	5B64  C3685B  		jp	l5b68
14622:	5B67          	l5b67:
14623:	5B67  29      		add	hl,hl
14624:	5B68          	l5b68:
14625:	5B68  E3      		ex	(sp),hl
14626:	5B69  EB      		ex	de,hl
14627:	5B6A  29      		add	hl,hl
14628:	5B6B  EB      		ex	de,hl
14629:	5B6C  D2765B  		jp	nc,l5b76
14630:	5B6F  09      		add	hl,bc
14631:	5B70  E3      		ex	(sp),hl
14632:	5B71  D2755B  		jp	nc,l5b75
14633:	5B74  23      		inc	hl
14634:	5B75          	l5b75:
14635:	5B75  E3      		ex	(sp),hl
14636:	5B76          	l5b76:
14637:	5B76  3D      		dec	a
14638:	5B77  C25D5B  		jp	nz,l5b5d
14639:	5B7A  7D      		ld	a,l
14640:	5B7B  E67F    		and	7fh
14641:	5B7D  5F      		ld	e,a
14642:	5B7E  1600    		ld	d,0
14643:	5B80  C1      		pop	bc
14644:	5B81  7D      		ld	a,l
14645:	5B82  6C      		ld	l,h
14646:	5B83  61      		ld	h,c
14647:	5B84  29      		add	hl,hl
14648:	5B85  DA1814  		jp	c,_ill.func	; .. invalid if overflow
14649:	5B88  17      		rla
14650:	5B89  D28D5B  		jp	nc,l5b8d
14651:	5B8C  23      		inc	hl
14652:	5B8D          	l5b8d:
14653:	5B8D  78      		ld	a,b
14654:	5B8E  B7      		or	a
14655:	5B8F  C21814  		jp	nz,_ill.func	; .. invalid if not zero
14656:	5B92          	l5b92:
14657:	5B92  226F5D  		ld	(l5d6f),hl
14658:	5B95  E1      		pop	hl
14659:	5B96  C1      		pop	bc
14660:	5B97  E5      		push	hl
14661:	5B98  21B200  		ld	hl,l00b2
14662:	5B9B  09      		add	hl,bc
14663:	5B9C  22715D  		ld	(l5d71),hl
14664:	5B9F          	l5b9f:
14665:	5B9F  212900  		ld	hl,l0029
14666:	5BA2  09      		add	hl,bc
14667:	5BA3  19      		add	hl,de
14668:	5BA4  22735D  		ld	(l5d73),hl
14669:	5BA7  E1      		pop	hl
14670:	5BA8  E5      		push	hl
14671:	5BA9  218000  		ld	hl,l0080
14672:	5BAC  7D      		ld	a,l
14673:	5BAD  93      		sub	e
14674:	5BAE  6F      		ld	l,a
14675:	5BAF  7C      		ld	a,h
14676:	5BB0  9A      		sbc	a,d
14677:	5BB1  67      		ld	h,a
14678:	5BB2  D1      		pop	de
14679:	5BB3  D5      		push	de
14680:	5BB4  CDCD43  		call	cp.r
14681:	5BB7  DABC5B  		jp	c,l5bbc		; HL < DE
14682:	5BBA  62      		ld	h,d
14683:	5BBB  6B      		ld	l,e
14684:	5BBC          	l5bbc:
14685:	5BBC  3A755D  		ld	a,(l5d75)
14686:	5BBF  B7      		or	a
14687:	5BC0  CA025C  		jp	z,l5c02
14688:	5BC3  118000  		ld	de,l0080
14689:	5BC6  CDCD43  		call	cp.r
14690:	5BC9  D2D15B  		jp	nc,l5bd1	; HL >= DE
14691:	5BCC  E5      		push	hl
14692:	5BCD  CD205C  		call	l5c20
14693:	5BD0  E1      		pop	hl
14694:	5BD1          	l5bd1:
14695:	5BD1  C5      		push	bc
14696:	5BD2  44      		ld	b,h
14697:	5BD3  4D      		ld	c,l
14698:	5BD4  EB      		ex	de,hl
14699:	5BD5  2A735D  		ld	hl,(l5d73)
14700:	5BD8  EB      		ex	de,hl
14701:	5BD9  2A715D  		ld	hl,(l5d71)
14702:	5BDC  CD585C  		call	l5c58
14703:	5BDF  22715D  		ld	(l5d71),hl
14704:	5BE2  50      		ld	d,b
14705:	5BE3  59      		ld	e,c
14706:	5BE4  C1      		pop	bc
14707:	5BE5  CD1F5C  		call	l5c1f
14708:	5BE8          	l5be8:
14709:	5BE8  2A6F5D  		ld	hl,(l5d6f)
14710:	5BEB  23      		inc	hl
14711:	5BEC  226F5D  		ld	(l5d6f),hl
14712:	5BEF  E1      		pop	hl
14713:	5BF0  7D      		ld	a,l
14714:	5BF1  93      		sub	e
14715:	5BF2  6F      		ld	l,a
14716:	5BF3  7C      		ld	a,h
14717:	5BF4  9A      		sbc	a,d
14718:	5BF5  67      		ld	h,a
14719:	5BF6  7C      		ld	a,h
14720:	5BF7  B5      		or	l
14721:	5BF8  110000  		ld	de,l0000
14722:	5BFB  E5      		push	hl
14723:	5BFC  C29F5B  		jp	nz,l5b9f
14724:	5BFF  E1      		pop	hl
14725:	5C00  E1      		pop	hl
14726:	5C01  C9      		ret
14727:	5C02          	l5c02:
14728:	5C02  E5      		push	hl
14729:	5C03  CD205C  		call	l5c20
14730:	5C06  E1      		pop	hl
14731:	5C07  C5      		push	bc
14732:	5C08  44      		ld	b,h
14733:	5C09  4D      		ld	c,l
14734:	5C0A  EB      		ex	de,hl
14735:	5C0B  2A715D  		ld	hl,(l5d71)
14736:	5C0E  EB      		ex	de,hl
14737:	5C0F  2A735D  		ld	hl,(l5d73)
14738:	5C12  CD585C  		call	l5c58
14739:	5C15  EB      		ex	de,hl
14740:	5C16  22715D  		ld	(l5d71),hl
14741:	5C19  50      		ld	d,b
14742:	5C1A  59      		ld	e,c
14743:	5C1B  C1      		pop	bc
14744:	5C1C  C3E85B  		jp	l5be8
14745:	5C1F          	l5c1f:
14746:	5C1F          		_OR
14747:	5C20          	l5c20:
14748:	5C20  AF      		xor	a
14749:	5C21  32A007  		ld	(l07a0),a
14750:	5C24  C5      		push	bc
14751:	5C25  D5      		push	de
14752:	5C26  E5      		push	hl
14753:	5C27  EB      		ex	de,hl
14754:	5C28  2A6F5D  		ld	hl,(l5d6f)
14755:	5C2B  EB      		ex	de,hl
14756:	5C2C  21AB00  		ld	hl,l00ab
14757:	5C2F  09      		add	hl,bc
14758:	5C30  E5      		push	hl
14759:	5C31  7E      		ld	a,(hl)
14760:	5C32  23      		inc	hl
14761:	5C33  66      		ld	h,(hl)
14762:	5C34  6F      		ld	l,a
14763:	5C35  13      		inc	de
14764:	5C36  CDCD43  		call	cp.r		; Compare HL:DE
14765:	5C39  E1      		pop	hl
14766:	5C3A  73      		ld	(hl),e
14767:	5C3B  23      		inc	hl
14768:	5C3C  72      		ld	(hl),d
14769:	5C3D  C2475C  		jp	nz,l5c47	; .. not same
14770:	5C40  3AA007  		ld	a,(l07a0)
14771:	5C43  B7      		or	a
14772:	5C44  CA545C  		jp	z,l5c54
14773:	5C47          	l5c47:
14774:	5C47  21545C  		ld	hl,l5c54
14775:	5C4A  E5      		push	hl
14776:	5C4B  C5      		push	bc
14777:	5C4C  E5      		push	hl
14778:	5C4D  212600  		ld	hl,l0026
14779:	5C50  09      		add	hl,bc
14780:	5C51  C3A456  		jp	l56a4
14781:	5C54          	l5c54:
14782:	5C54  E1      		pop	hl
14783:	5C55  D1      		pop	de
14784:	5C56  C1      		pop	bc
14785:	5C57  C9      		ret
14786:	5C58          	l5c58:
14787:	5C58  C5      		push	bc
14788:	5C59          	l5c59:
14789:	5C59  7E      		ld	a,(hl)
14790:	5C5A  12      		ld	(de),a
14791:	5C5B  23      		inc	hl
14792:	5C5C  13      		inc	de
14793:	5C5D  0B      		dec	bc
14794:	5C5E  78      		ld	a,b
14795:	5C5F  B1      		or	c
14796:	5C60  C2595C  		jp	nz,l5c59
14797:	5C63  C1      		pop	bc
14798:	5C64  C9      		ret
14799:	5C65          	l5c65:
14800:	5C65  F1      		pop	af
14801:	5C66  D5      		push	de
14802:	5C67  C5      		push	bc
14803:	5C68  F5      		push	af
14804:	5C69  44      		ld	b,h
14805:	5C6A  4D      		ld	c,l
14806:	5C6B  CDC45C  		call	l5cc4
14807:	5C6E  CA935C  		jp	z,l5c93
14808:	5C71  CDB95C  		call	l5cb9
14809:	5C74  21B100  		ld	hl,l00b1
14810:	5C77  09      		add	hl,bc
14811:	5C78  19      		add	hl,de
14812:	5C79  F1      		pop	af
14813:	5C7A  77      		ld	(hl),a
14814:	5C7B  F5      		push	af
14815:	5C7C  212800  		ld	hl,l0028
14816:	5C7F  09      		add	hl,bc
14817:	5C80  56      		ld	d,(hl)
14818:	5C81  3600    		ld	(hl),0
14819:	5C83  FE0D    		cp	0dh
14820:	5C85  CA8E5C  		jp	z,l5c8e
14821:	5C88  C6E0    		add	a,0e0h
14822:	5C8A  7A      		ld	a,d
14823:	5C8B  CE00    		adc	a,0
14824:	5C8D  77      		ld	(hl),a
14825:	5C8E          	l5c8e:
14826:	5C8E  F1      		pop	af
14827:	5C8F  C1      		pop	bc
14828:	5C90  D1      		pop	de
14829:	5C91  E1      		pop	hl
14830:	5C92  C9      		ret
14831:	5C93          	l5c93:
14832:	5C93  C3B80C  		jp	l0cb8
14833:	5C96          	l5c96:
14834:	5C96  D5      		push	de
14835:	5C97  CDC25C  		call	l5cc2
14836:	5C9A  CA935C  		jp	z,l5c93
14837:	5C9D  CDB95C  		call	l5cb9
14838:	5CA0  21B100  		ld	hl,l00b1
14839:	5CA3  09      		add	hl,bc
14840:	5CA4  19      		add	hl,de
14841:	5CA5  7E      		ld	a,(hl)
14842:	5CA6  B7      		or	a
14843:	5CA7  D1      		pop	de
14844:	5CA8  E1      		pop	hl
14845:	5CA9  C1      		pop	bc
14846:	5CAA  C9      		ret
14847:	5CAB          	l5cab:
14848:	5CAB  21A900  		ld	hl,l00a9
14849:	5CAE  C3B45C  		jp	l5cb4
14850:	5CB1          	l5cb1:
14851:	5CB1  21B000  		ld	hl,l00b0
14852:	5CB4          	l5cb4:
14853:	5CB4  09      		add	hl,bc
14854:	5CB5  5E      		ld	e,(hl)
14855:	5CB6  23      		inc	hl
14856:	5CB7  56      		ld	d,(hl)
14857:	5CB8  C9      		ret
14858:	5CB9          	l5cb9:
14859:	5CB9  13      		inc	de
14860:	5CBA  21B000  		ld	hl,l00b0
14861:	5CBD  09      		add	hl,bc
14862:	5CBE  73      		ld	(hl),e
14863:	5CBF  23      		inc	hl
14864:	5CC0  72      		ld	(hl),d
14865:	5CC1  C9      		ret
14866:	5CC2          	l5cc2:
14867:	5CC2  44      		ld	b,h
14868:	5CC3  4D      		ld	c,l
14869:	5CC4          	l5cc4:
14870:	5CC4  CDB15C  		call	l5cb1
14871:	5CC7  D5      		push	de
14872:	5CC8  CDAB5C  		call	l5cab
14873:	5CCB  EB      		ex	de,hl
14874:	5CCC  D1      		pop	de
14875:	5CCD  CDCD43  		call	cp.r		; Compare HL:DE (Z = C <)
14876:	5CD0  C9      		ret
14877:	5CD1          	l5cd1:
14878:	5CD1  CD0513  		call	get.tok
14879:	5CD4  22A70A  		ld	(@@ptr),hl	; Save token pointer
14880:	5CD7  CD9223  		call	l2392
14881:	5CDA  CDE85C  		call	fprotect	; Protect file
14882:	5CDD  3EFE    		ld	a,0feh		; Set protect marker
14883:	5CDF  CDBE53  		call	l53be		; .. save file
14884:	5CE2  CD225D  		call	funprot		; Unprotect file
14885:	5CE5  C3C943  		jp	l43c9
14886:			;
14887:			; Protect file in memory
14888:			;
14889:	5CE8          	fprotect:
14890:	5CE8  010B0D  		ld	bc,$PROT$	; Init loop value
14891:	5CEB  2A9A07  		ld	hl,(prg.base)	; Get base of program
14892:	5CEE  EB      		ex	de,hl
14893:	5CEF          	l5cef:
14894:	5CEF  2AC20A  		ld	hl,(prg.top)	; Get top of program
14895:	5CF2  CDCD43  		call	cp.r		; Test all done
14896:	5CF5  C8      		ret	z		; .. yeap
14897:	5CF6  215839  		ld	hl,l3958	; Get array pointer
14898:	5CF9  7D      		ld	a,l
14899:	5CFA  81      		add	a,c		; .. point into
14900:	5CFB  6F      		ld	l,a
14901:	5CFC  7C      		ld	a,h
14902:	5CFD  CE00    		adc	a,0
14903:	5CFF  67      		ld	h,a
14904:	5D00  1A      		ld	a,(de)		; Get token
14905:	5D01  90      		sub	b		; .. subtract index
14906:	5D02  AE      		xor	(hl)		; .. toggle from arry
14907:	5D03  F5      		push	af		; .. save
14908:	5D04  210739  		ld	hl,l3907	; Get 2nd array pointer
14909:	5D07  7D      		ld	a,l
14910:	5D08  80      		add	a,b		; .. point into
14911:	5D09  6F      		ld	l,a
14912:	5D0A  7C      		ld	a,h
14913:	5D0B  CE00    		adc	a,0
14914:	5D0D  67      		ld	h,a
14915:	5D0E  F1      		pop	af
14916:	5D0F  AE      		xor	(hl)		; .. toggle again
14917:	5D10  81      		add	a,c		; .. add offset
14918:	5D11  12      		ld	(de),a		; .. save byte
14919:	5D12  13      		inc	de
14920:	5D13  0D      		dec	c		; Count down index
14921:	5D14  C2195D  		jp	nz,l5d19
14922:	5D17  0E0B    		ld	c,LOW $PROT$	; Reset index
14923:	5D19          	l5d19:
14924:	5D19  05      		dec	b		; .. same for 2nd index
14925:	5D1A  C2EF5C  		jp	nz,l5cef
14926:	5D1D  060D    		ld	b,HIGH $PROT$
14927:	5D1F  C3EF5C  		jp	l5cef
14928:			;
14929:			; Unprotrect file in memory
14930:			;
14931:	5D22          	funprot:
14932:	5D22  010B0D  		ld	bc,$PROT$	; Init loop counts
14933:	5D25  2A9A07  		ld	hl,(prg.base)	; Get base of program
14934:	5D28  EB      		ex	de,hl
14935:	5D29          	l5d29:
14936:	5D29  2AC20A  		ld	hl,(prg.top)	; Get top of program
14937:	5D2C  CDCD43  		call	cp.r
14938:	5D2F  C8      		ret	z		; HL = DE
14939:	5D30  210739  		ld	hl,l3907	; Get 1st array
14940:	5D33  7D      		ld	a,l
14941:	5D34  80      		add	a,b		; .. point into
14942:	5D35  6F      		ld	l,a
14943:	5D36  7C      		ld	a,h
14944:	5D37  CE00    		adc	a,0
14945:	5D39  67      		ld	h,a
14946:	5D3A  1A      		ld	a,(de)		; Get byte
14947:	5D3B  91      		sub	c		; .. fix
14948:	5D3C  AE      		xor	(hl)		; .. toggle from table
14949:	5D3D  F5      		push	af
14950:	5D3E  215839  		ld	hl,l3958	; Get 2nd array
14951:	5D41  7D      		ld	a,l
14952:	5D42  81      		add	a,c		; .. point into
14953:	5D43  6F      		ld	l,a
14954:	5D44  7C      		ld	a,h
14955:	5D45  CE00    		adc	a,0
14956:	5D47  67      		ld	h,a
14957:	5D48  F1      		pop	af
14958:	5D49  AE      		xor	(hl)		; .. toggle
14959:	5D4A  80      		add	a,b		; .. fix
14960:	5D4B  12      		ld	(de),a		; .. save token
14961:	5D4C  13      		inc	de
14962:	5D4D  0D      		dec	c		; Count down index
14963:	5D4E  C2535D  		jp	nz,l5d53
14964:	5D51  0E0B    		ld	c,LOW $PROT$	; .. reset index
14965:	5D53          	l5d53:
14966:	5D53  05      		dec	b		; Same for 2nd index
14967:	5D54  C2295D  		jp	nz,l5d29
14968:	5D57  060D    		ld	b,HIGH $PROT$
14969:	5D59  C3295D  		jp	l5d29
14970:			;
14971:			;
14972:			;
14973:	5D5C          	l5d5c:
14974:	5D5C  E5      		push	hl
14975:	5D5D  2A9807  		ld	hl,(dir.mode)	; Get direct mode
14976:	5D60  7C      		ld	a,h
14977:	5D61  A5      		and	l
14978:	5D62  E1      		pop	hl
14979:	5D63  3C      		inc	a
14980:	5D64  C0      		ret	nz		; .. -1 is direct
14981:	5D65          	l5d65:
14982:	5D65  F5      		push	af
14983:	5D66  3AEC0B  		ld	a,(_prot)	; Test file protected
14984:			;;
14985:			;; CHANGE	or	a
14986:			;; TO		xor	a
14987:			;; IF A PROTECTED FILE SHOULD BE LISTED [OR SKIP ROUTINE]
14988:			;;
14989:	5D69  B7      		or	a
14990:	5D6A  C21814  		jp	nz,_ill.func	; .. yeap, invalid
14991:	5D6D  F1      		pop	af
14992:	5D6E  C9      		ret
14993:			;
14994:	5D6F          	l5d6f:
14995:	5D6F  0000    		dw	0
14996:	5D71          	l5d71:
14997:	5D71  0000    		dw	0
14998:	5D73          	l5d73:
14999:	5D73  0000    		dw	0
15000:	5D75          	l5d75:
15001:	5D75  00      		db	0
15002:			;
15003:			;
15004:			;
15005:	5D76          	l5d76:
15006:	5D76  CD0A43  		call	l430a
15007:	5D79  2A9A07  		ld	hl,(prg.base)	; Get base of program
15008:	5D7C  2B      		dec	hl
15009:	5D7D  3600    		ld	(hl),0
15010:	5D7F  2A9F0A  		ld	hl,(_f.$$)	; Get file pointer
15011:	5D82  7E      		ld	a,(hl)		; Test file given to be loaded
15012:	5D83  B7      		or	a
15013:	5D84  C29A52  		jp	nz,_FRUN	; .. yeap, load it
15014:	5D87  C3870D  		jp	l0d87
15015:			;
15016:			; +++++ DYNAMIC SPACE STARTS HERE +++++
15017:			;
15018:	5D8A          	_F.arr:
15019:	5D8A .. 5D8B 00		ds	2		; Start of file array
15020:			;
15021:			; ## COLD ENTRY ##
15022:			;
15023:	5D8C          	l5d8c::
15024:	5D8C  213F60  		ld	hl,l603f
15025:	5D8F  F9      		ld	sp,hl		; Set local stack
15026:	5D90  AF      		xor	a
15027:	5D91  32EC0B  		ld	(_prot),a	; Clear protection
15028:	5D94  229607  		ld	(heap),hl	; Init heap
15029:	5D97  F9      		ld	sp,hl		; .. for stack		**** ?????
15030:	5D98  212208  		ld	hl,l0822
15031:	5D9B  363A    		ld	(hl),':'
15032:	5D9D  CD9743  		call	l4397		; Init error environment
15033:	5DA0  32650A  		ld	(colCON),a	; Set console column
15034:	5DA3  22B10A  		ld	(curstk),hl	; .. save stack
15035:	5DA6  2A0100  		ld	hl,(OS+1)	; Get BIOS vector
15036:	5DA9  010400  		ld	bc,3*(_@CST-1)+1
15037:	5DAC  09      		add	hl,bc		; Point to console state
15038:	5DAD  5E      		ld	e,(hl)
15039:	5DAE  23      		inc	hl
15040:	5DAF  56      		ld	d,(hl)
15041:	5DB0  EB      		ex	de,hl
15042:	5DB1  227A42  		ld	($CST3),hl	; .. save it
15043:	5DB4  225542  		ld	($CST2),hl
15044:	5DB7  22A212  		ld	($CST1),hl
15045:	5DBA  EB      		ex	de,hl
15046:	5DBB  23      		inc	hl
15047:	5DBC  23      		inc	hl
15048:	5DBD  5E      		ld	e,(hl)		; Get console input routine
15049:	5DBE  23      		inc	hl
15050:	5DBF  56      		ld	d,(hl)
15051:	5DC0  EB      		ex	de,hl
15052:	5DC1  22F941  		ld	($CIN),hl	; .. save
15053:	5DC4  EB      		ex	de,hl
15054:	5DC5  23      		inc	hl
15055:	5DC6  23      		inc	hl
15056:	5DC7  5E      		ld	e,(hl)		; .. same for output
15057:	5DC8  23      		inc	hl
15058:	5DC9  56      		ld	d,(hl)
15059:	5DCA  EB      		ex	de,hl
15060:	5DCB  22B841  		ld	($COT),hl
15061:	5DCE  EB      		ex	de,hl
15062:	5DCF  23      		inc	hl
15063:	5DD0  23      		inc	hl
15064:	5DD1  5E      		ld	e,(hl)		; .. finally printer output
15065:	5DD2  23      		inc	hl
15066:	5DD3  56      		ld	d,(hl)
15067:	5DD4  EB      		ex	de,hl
15068:	5DD5  223D41  		ld	($POT),hl
15069:	5DD8  0E0C    		ld	c,.vers
15070:	5DDA  CD0500  		call	BDOS		; Get OS version
15071:	5DDD  321F08  		ld	(OSvers),a
15072:	5DE0  B7      		or	a
15073:	5DE1  211415  		ld	hl,.wrseq*256+.rdseq
15074:	5DE4  CAEA5D  		jp	z,l5dea
15075:	5DE7  212122  		ld	hl,.wrrnd*256+.rdrnd
15076:	5DEA          	l5dea:
15077:	5DEA  222008  		ld	(f_rd),hl	; Save R/W mode
15078:	5DED  21FEFF  		ld	hl,lfffe
15079:	5DF0  229807  		ld	(dir.mode),hl	; Set direct mode
15080:	5DF3  AF      		xor	a		; Init ..
15081:	5DF4  329307  		ld	(_brk),a	; .. console echo
15082:	5DF7  32640A  		ld	(l0a64),a
15083:	5DFA  32F30B  		ld	(l0bf3),a
15084:	5DFD  32ED0B  		ld	(l0bed),a
15085:	5E00  328A07  		ld	(err.num),a	; .. error number
15086:	5E03  210000  		ld	hl,0
15087:	5E06  228C07  		ld	(colLST),hl
15088:	5E09  218000  		ld	hl,reclng
15089:	5E0C  22EA0B  		ld	(recsiz),hl	; Init record size
15090:	5E0F  217A0A  		ld	hl,STR.arr
15091:	5E12  22780A  		ld	(STR.ptr),hl	; .. string pointer
15092:	5E15  21E40A  		ld	hl,l0ae4
15093:	5E18  224C0B  		ld	(l0b4c),hl
15094:	5E1B  2A0600  		ld	hl,(BDOS+1)
15095:	5E1E  22760A  		ld	(himem),hl	; Init highest memory
15096:	5E21  3E03    		ld	a,3
15097:	5E23  32C407  		ld	(opnfiles),a	; .. max number of open files
15098:	5E26  21D45E  		ld	hl,l5ed4
15099:	5E29  229F0A  		ld	(_f.$$),hl	; Set NULL pointer
15100:	5E2C  3AD55E  		ld	a,(l5ed5)
15101:	5E2F  B7      		or	a
15102:	5E30  C2D65E  		jp	nz,l5ed6
15103:	5E33  3C      		inc	a
15104:	5E34  32D55E  		ld	(l5ed5),a
15105:	5E37  218000  		ld	hl,CCP		; Init command buffer
15106:	5E3A  7E      		ld	a,(hl)		; .. get length
15107:	5E3B  B7      		or	a
15108:	5E3C  229F0A  		ld	(_f.$$),hl	; Save buffer
15109:	5E3F  CAD65E  		jp	z,l5ed6		; .. empty command
15110:	5E42  46      		ld	b,(hl)
15111:	5E43  23      		inc	hl
15112:	5E44          	l5e44:
15113:	5E44  7E      		ld	a,(hl)		; Unpack line right justified
15114:	5E45  2B      		dec	hl
15115:	5E46  77      		ld	(hl),a
15116:	5E47  23      		inc	hl
15117:	5E48  23      		inc	hl
15118:	5E49  05      		dec	b
15119:	5E4A  C2445E  		jp	nz,l5e44
15120:	5E4D  2B      		dec	hl
15121:	5E4E  3600    		ld	(hl),null	; .. close line
15122:	5E50  229F0A  		ld	(_f.$$),hl	; .. save final pointer
15123:	5E53  217F00  		ld	hl,CCP-1
15124:	5E56  CD0513  		call	get.tok		; Get character
15125:	5E59  B7      		or	a
15126:	5E5A  CAD65E  		jp	z,l5ed6
15127:	5E5D  FE2F    		cp	'/'		; Test option(s)
15128:	5E5F  CA785E  		jp	z,l5e78		; ..yeap
15129:	5E62  2B      		dec	hl
15130:	5E63  3622    		ld	(hl),'"'	; Set string
15131:	5E65  229F0A  		ld	(_f.$$),hl	; .. set pointer
15132:	5E68  23      		inc	hl
15133:	5E69          	l5e69:
15134:	5E69  FE2F    		cp	'/'
15135:	5E6B  CA785E  		jp	z,l5e78
15136:	5E6E  CD0513  		call	get.tok		; Get next character
15137:	5E71  B7      		or	a
15138:	5E72  C2695E  		jp	nz,l5e69
15139:	5E75  C3D65E  		jp	l5ed6
15140:	5E78          	l5e78:
15141:	5E78  3600    		ld	(hl),null	; Overwrite '/'
15142:	5E7A  CD0513  		call	get.tok		; Get next character
15143:	5E7D          	l5e7d:
15144:	5E7D  CD5A1C  		call	toupper_	; Get upper case
15145:	5E80  FE53    		cp	'S'		; Test max record size
15146:	5E82  CAC25E  		jp	z,l5ec2
15147:	5E85  FE4D    		cp	'M'		; .. highest memory location
15148:	5E87  F5      		push	af
15149:	5E88  CA905E  		jp	z,l5e90
15150:	5E8B  FE46    		cp	'F'		; .. number of files
15151:	5E8D  C2C90C  		jp	nz,l0cc9
15152:	5E90          	l5e90:
15153:	5E90  CD0513  		call	get.tok		; Get next character
15154:	5E93  CDD343  		call	ilcmp		; Position ':'
15155:	5E96  3A      		db	':'
15156:	5E97  CD641C  		call	ato??		; Convert ASCII to binary
15157:	5E9A  F1      		pop	af
15158:	5E9B  CAAF5E  		jp	z,l5eaf		; .. got /M
15159:	5E9E  7A      		ld	a,d
15160:	5E9F  B7      		or	a
15161:	5EA0  C21814  		jp	nz,_ill.func	; Invalid call if > 255
15162:	5EA3  7B      		ld	a,e
15163:	5EA4  FE10    		cp	15+1		; Test too many files
15164:	5EA6  D21814  		jp	nc,_ill.func	; .. yeap, invalid call
15165:	5EA9  32C407  		ld	(opnfiles),a	; .. set new max
15166:	5EAC  C3B45E  		jp	l5eb4
15167:	5EAF          	l5eaf:
15168:	5EAF  EB      		ex	de,hl
15169:	5EB0  22760A  		ld	(himem),hl	; Save top of memory
15170:	5EB3  EB      		ex	de,hl
15171:	5EB4          	l5eb4:
15172:	5EB4  2B      		dec	hl
15173:	5EB5  CD0513  		call	get.tok		; Get next character
15174:	5EB8  CAD65E  		jp	z,l5ed6		; .. end
15175:	5EBB  CDD343  		call	ilcmp		; Position '/'
15176:	5EBE  2F      		db	'/'
15177:	5EBF  C37D5E  		jp	l5e7d
15178:	5EC2          	l5ec2:
15179:	5EC2  CD0513  		call	get.tok		; Get next character
15180:	5EC5  CDD343  		call	ilcmp		; Position ':'
15181:	5EC8  3A      		db	':'
15182:	5EC9  CD641C  		call	ato??		; Convert ASCII to binary
15183:	5ECC  EB      		ex	de,hl
15184:	5ECD  22EA0B  		ld	(recsiz),hl	; .. set new size
15185:	5ED0  EB      		ex	de,hl
15186:	5ED1  C3B45E  		jp	l5eb4
15187:			;
15188:	5ED4          	l5ed4:
15189:	5ED4  00      		db	0
15190:	5ED5          	l5ed5:
15191:	5ED5  00      		db	0
15192:			;
15193:	5ED6          	l5ed6:
15194:	5ED6  2B      		dec	hl		; ** WHY ???
15195:	5ED7  2A760A  		ld	hl,(himem)	; Get top of memory
15196:	5EDA  2B      		dec	hl		; .. fix
15197:	5EDB  22760A  		ld	(himem),hl
15198:	5EDE  2B      		dec	hl
15199:	5EDF  E5      		push	hl		; Save top pointer
15200:	5EE0  3AC407  		ld	a,(opnfiles)	; Get max number of open files
15201:	5EE3  218A5D  		ld	hl,_F.arr	; Init data pointer
15202:	5EE6  22A207  		ld	(F.ptr),hl	; .. into base file pointer
15203:	5EE9  11A407  		ld	de,F.arr
15204:	5EEC  32C407  		ld	(opnfiles),a	; ** WHY ???
15205:	5EEF  3C      		inc	a		; .. bump
15206:	5EF0  01A900  		ld	bc,l00a9
15207:	5EF3          	l5ef3::
15208:	5EF3  EB      		ex	de,hl
15209:	5EF4  73      		ld	(hl),e		; Save into file array
15210:	5EF5  23      		inc	hl
15211:	5EF6  72      		ld	(hl),d
15212:	5EF7  23      		inc	hl
15213:	5EF8  EB      		ex	de,hl
15214:	5EF9  09      		add	hl,bc		; Add base amount
15215:	5EFA  E5      		push	hl
15216:	5EFB  2AEA0B  		ld	hl,(recsiz)	; Get record size
15217:	5EFE  01B200  		ld	bc,l00b2
15218:	5F01  09      		add	hl,bc		; .. add new amount
15219:	5F02  44      		ld	b,h		; .. copy
15220:	5F03  4D      		ld	c,l
15221:	5F04  E1      		pop	hl
15222:	5F05  3D      		dec	a		; .. for all files
15223:	5F06  C2F35E  		jp	nz,l5ef3
15224:	5F09  23      		inc	hl
15225:	5F0A  229A07  		ld	(prg.base),hl	; Set final pointer for base
15226:	5F0D  22B10A  		ld	(curstk),hl	; .. and stack
15227:	5F10  D1      		pop	de		; Get back top pointer
15228:	5F11  7B      		ld	a,e
15229:	5F12  95      		sub	l		; Test enough room
15230:	5F13  6F      		ld	l,a
15231:	5F14  7A      		ld	a,d
15232:	5F15  9C      		sbc	a,h
15233:	5F16  67      		ld	h,a
15234:	5F17  DADD42  		jp	c,l42dd		; .. nope
15235:	5F1A  0603    		ld	b,3
15236:	5F1C          	l5f1c:
15237:	5F1C  B7      		or	a
15238:	5F1D  7C      		ld	a,h		; Divide size by 8
15239:	5F1E  1F      		rra
15240:	5F1F  67      		ld	h,a
15241:	5F20  7D      		ld	a,l
15242:	5F21  1F      		rra
15243:	5F22  6F      		ld	l,a
15244:	5F23  05      		dec	b
15245:	5F24  C21C5F  		jp	nz,l5f1c
15246:	5F27  7C      		ld	a,h
15247:	5F28  FE02    		cp	HIGH 0200h	; Test space
15248:	5F2A  DA305F  		jp	c,l5f30
15249:	5F2D  210002  		ld	hl,0200h	; .. truncate it
15250:	5F30          	l5f30:
15251:	5F30  7B      		ld	a,e
15252:	5F31  95      		sub	l		; Test in range
15253:	5F32  6F      		ld	l,a
15254:	5F33  7A      		ld	a,d
15255:	5F34  9C      		sbc	a,h
15256:	5F35  67      		ld	h,a
15257:	5F36  DADD42  		jp	c,l42dd		; .. nope
15258:	5F39  22760A  		ld	(himem),hl	; .. save new top
15259:	5F3C  EB      		ex	de,hl
15260:	5F3D  229607  		ld	(heap),hl	; .. set heap
15261:	5F40  229B0A  		ld	(mem.top),hl	; .. and top of memory
15262:	5F43  F9      		ld	sp,hl		; .. load stack
15263:	5F44  22B10A  		ld	(curstk),hl	; .. save it
15264:	5F47  2A9A07  		ld	hl,(prg.base)	; Get base of program
15265:	5F4A  EB      		ex	de,hl
15266:	5F4B  CDEB42  		call	l42eb
15267:	5F4E  7D      		ld	a,l
15268:	5F4F  93      		sub	e
15269:	5F50  6F      		ld	l,a
15270:	5F51  7C      		ld	a,h
15271:	5F52  9A      		sbc	a,d
15272:	5F53  67      		ld	h,a
15273:	5F54  2B      		dec	hl
15274:	5F55  2B      		dec	hl
15275:	5F56  E5      		push	hl
15276:	5F57  219A5F  		ld	hl,l5f9a
15277:	5F5A  CD2347  		call	l4723
15278:	5F5D  E1      		pop	hl
15279:	5F5E  CD1A31  		call	l311a
15280:	5F61  218E5F  		ld	hl,l5f8e
15281:	5F64  CD2347  		call	l4723
15282:	5F67  212347  		ld	hl,l4723
15283:	5F6A  22980D  		ld	(@@MSG),hl	; Init string routine
15284:	5F6D  CD2142  		call	fnl		; Give new line
15285:	5F70  217F0C  		ld	hl,l0c7f
15286:	5F73  C3765D  		jp	l5d76
15287:			;
15288:	5F76  0D0A0A4F		db	cr,lf,lf,'Owned by Microsoft',cr,lf,null
	      776E6564
	      20627920
	      4D696372
	      6F736F66
	      740D0A00
15289:	5F8E          	l5f8e:
15290:	5F8E  20427974		db	' Bytes free',null
	      65732066
	      72656500
15291:	5F9A          	l5f9a:
15292:	5F9A  42415349		db	'BASIC-80 Rev. 5'
	      432D3830
	      20526576
	      2E2035
15293:	5FA9          	l5fa9:
15294:	5FA9  2E32310D		db	'.21',cr,lf
	      0A
15295:	5FAE  5B43502F		db	'[CP/M Version]',cr,lf
	      4D205665
	      7273696F
	      6E5D0D0A
15296:	5FBE  436F7079		db	'Copyright 1977-1981 (C) by Microsoft',cr,lf
	      72696768
	      74203139
	      37372D31
	      39383120
	      28432920
	      6279204D
	      6963726F
	      736F6674
	      0D0A
15297:	5FE4  43726561		db	'Created: 28-Jul-81',cr,lf,null
	      7465643A
	      2032382D
	      4A756C2D
	      38310D0A
	      00
15298:	5FF9          	l5ff9::
15299:			
15300:	603F          	l603f	equ	l5ff9+2*35
15301:	6040          	l6040	equ	l603f+1
15302:	60A3          	l60a3	equ	l6040+99
15303:			
15304:	5FF9          		end



Statistics:

     4	passes
     0	jr promotions
  1841	symbols
     0	bytes

    73	macro calls
   272	macro bytes
     0	invented symbols



Symbol Table:

$$arg            c00     l1d95           1d95     l3cd5           3cd5     
$arglen          a67     l1da0           1da0     l3ce3           3ce3     
$cin           =41f9+    l1dab           1dab     l3ce7           3ce7     
$cot           =41b8+    l1db8           1db8     l3ce8           3ce8     
$cst1          =12a2+    l1dc2           1dc2     l3cff           3cff     
$cst2          =4255+    l1dcb           1dcb     l3d17           3d17     
$cst3          =427a+    l1dd1           1dd1     l3d20           3d20     
$line            962     l1dd4           1dd4     l3d22           3d22     
$pot           =413d+    l1dd5           1dd5     l3d41           3d41     
$prot$         = d0b+    l1dd7           1dd7     l3d4c           3d4c     
.close         =  10+    l1ddb           1ddb     l3d67           3d67     
.delete        =  13+    l1dfa           1dfa     l3da8           3da8     
.logdsk        =   e+    l1e13           1e13     l3db5           3db5     
.make          =  16+    l1e1a           1e1a     l3dbb           3dbb     
.open          =   f+    l1e2b           1e2b     l3dc5           3dc5     
.rdrnd         =  21+    l1e2d           1e2d+    l3dd7           3dd7     
.rdseq         =  14+    l1e44           1e44     l3de0           3de0     
.rename        =  17+    l1e54           1e54     l3de2           3de2     
.resdsk        =   d+    l1e81           1e81     l3dec           3dec     
.retdsk        =  19+    l1ec7           1ec7     l3df4           3df4     
.setdma        =  1a+    l1ecb           1ecb     l3e03           3e03     
.srcfrs        =  11+    l1ee2           1ee2     l3e09           3e09     
.srcnxt        =  12+    l1f0f           1f0f     l3e0c           3e0c     
.vers          =   c+    l1f1e           1f1e     l3e1e           3e1e+    
.wrrnd         =  22+    l1f88           1f88     l3e2b           3e2b     
.wrseq         =  15+    l1fac           1fac     l3e36           3e36     
@@fcb            7fe     l1fbb           1fbb     l3e39           3e39     
@@msg          = d98+    l1fc0           1fc0     l3e3e           3e3e     
@@ptr            aa7     l1fc6           1fc6     l3e71           3e71     
@token           823     l1fd4           1fd4     l3e73           3e73     
_@cst          =   2+    l1fe2           1fe2     l3e81           3e81     
__edit          3d00     l1ff2           1ff2     l3e83           3e83     
_brk             793     l1ff9          =1ff9+    l3e91           3e91     
_cint           297a     l1ffd           1ffd     l3e99           3e99     
_cp               11     l2001          =2001+    l3e9e           3e9e     
_data           14ec     l2003           2003     l3ea1           3ea1     
_dim            3986     l2017           2017     l3eba           3eba     
_drv           =   1+    l2019           2019     l3ec9           3ec9     
_end            4406     l201a          =201a+    l3ed7           3ed7     
_error           ce3     l2024           2024     l3eda           3eda     
_ex            =   c+    l203a           203a     l3ee2           3ee2     
_ext           =   3+    l2048           2048     l3eec           3eec     
_f.$$            a9f     l2053           2053     l3ef7           3ef7     
_f.arr          5d8a     l2056           2056     l3f08           3f08     
_frun           529a     l2062           2062     l3f11           3f11     
_ill.func       1418     l2072           2072     l3f1b           3f1b     
_jp.c             ee     l2075           2075     l3f1e           3f1e+    
_jp.m             ff     l2084           2084     l3f26           3f26     
_jp.nc            dd     l2089           2089     l3f2a           3f2a     
_jp.nz            bb     l2091           2091     l3f3b           3f3b     
_jp.z             cc     l20cd           20cd     l3f3f           3f3f     
_ld.a             55     l20dc           20dc     l3f45           3f45     
_ld.b             66     l20e6           20e6     l3f48           3f48     
_ld.bc            22     l20f5           20f5     l3f92           3f92     
_ld.c             77     l20f9           20f9     l3f9a           3f9a     
_ld.d             88     l2108           2108     l3f9e           3f9e     
_ld.de            33     l211c           211c     l3fa1           3fa1     
_ld.hl            44     l212d           212d     l3fc0           3fc0     
_ld.l             99     l212f           212f     l3fcb           3fcb     
_lda              aa     l213d           213d     l3fd7           3fd7     
_let            1518     l2141           2141     l3ff4           3ff4     
_nam           =   8+    l214a           214a     l3ff6           3ff6     
_open           58ba     l2158           2158     l4011           4011     
_or                0     l216c           216c     l4016           4016     
_prot            bec     l2175           2175     l4035           4035     
_rrn           =  21+    l2176           2176     l404b           404b     
_run            1467     l2179           2179     l404e           404e     
_st.delim       1157     l218f           218f     l405f           405f     
_st.token       1159     l21a2           21a2     l4067           4067     
ato??           1c64     l21ae           21ae     l406d           406d     
ato??_          1c69     l21b7           21b7     l4072           4072     
auto.inc         aab     l21c2           21c2     l407d           407d     
auto.line        aad     l21c6           21c6     l4089           4089     
auto.mode        aaa     l21c9           21c9     l408e           408e     
bdos           =   5+    l21de           21de     l4091           4091     
bell           =   7+    l21e2           21e2     l4092           4092     
bs             =   8+    l21ed           21ed     l40c2           40c2     
ccp            =  80+    l220c           220c     l40cc           40cc     
clr.fp          17e9     l221f           221f     l40f8           40f8     
cls.con         4214     l222a           222a     l40fc           40fc     
cls.dev_io      4144     l223b           223b     l4101           4101     
cls.lst         414d     l2241           2241     l4110           4110     
cmp.top         42ff     l225e           225e     l412d           412d     
cnvdoub         2eca     l2268           2268     l4133           4133     
cnvnum          2ed1     l226d           226d     l4136           4136     
colcon           a65     l2276           2276     l417b           417b     
collst           78c     l227c           227c     l4180           4180     
condir          4251     l2294           2294     l418d           418d     
conin           41f5     l22a2           22a2     l4190           4190     
conout          415c     l22a6           22a6     l41a5           41a5     
cont.mode        ac0     l22b6           22b6     l41ae           41ae     
cp.r            43cd     l22c0           22c0     l41e7           41e7     
cp.str           fbe     l22d1           22d1     l421c           421c     
cp.token         f18     l22db           22db     l422b           422b     
cr             =   d+    l22f9           22f9     l4233           4233     
ctrlc          =   3+    l2311           2311     l423f           423f     
curstk           ab1     l232f           232f     l4246           4246     
data.ptr         ac8     l234b           234b     l425c           425c     
dir.mode         798     l235b           235b     l426f           426f     
direct_1         aa3     l236e           236e     l4283           4283     
direct_2         ab3     l2375           2375     l428c           428c     
direct_3         bc4     l238c           238c     l4299           4299     
direct_4         abe     l2391           2391     l42a5           42a5     
dma            =  80+    l2392           2392     l42b6           42b6     
eof            =  1a+    l239a           239a     l42b9           42b9     
err.num          78a     l23a3           23a3     l42bc           42bc     
esc            =  1b+    l23a6           23a6     l42dd           42dd     
expr            1a02     l23d4           23d4     l42e5           42e5     
f.arr            7a4     l23dd           23dd     l42eb           42eb     
f.ptr            7a2     l23f8           23f8     l430a           430a     
f_rd             820     l23fc           23fc     l4313           4313     
f_wr             821     l23fd           23fd     l4320           4320     
false          =   0+    l23ff           23ff     l4321           4321     
fget            5748     l2402           2402     l4337           4337     
fgetc           57c2     l2412           2412     l433b           433b     
filnum          5136     l2425           2425     l4351           4351     
fn.a            5139     l242c           242c     l4358           4358     
fn.e            513a     l2435           2435     l4383           4383     
fnl             4221     l243d           243d     l4397           4397     
fp               794     l2479           2479     l43a2           43a2     
fpact           4654     l2483           2483     l43c9           43c9     
fprotect        5ce8     l2487           2487     l43e3           43e3     
fput            5668     l2494           2494     l43e6           43e6     
fputc           5666     l2495           2495     l43fb           43fb     
funprot         5d22     l24b0           24b0     l43fc           43fc     
get.byte        2078     l24b8           24b8     l4401           4401     
get.tok         1305     l24dd           24dd     l440c           440c     
get.type        1d64     l24e2           24e2     l4416           4416     
get.word        2059     l24e4           24e4     l4419           4419     
getchar         41bf     l24ee           24ee     l442d           442d     
gets            4b28     l24ef           24ef     l4441           4441     
heap             796     l24f0           24f0     l444f           444f     
himem            a76     l2500           2500     l445d           445d     
ilcmp           43d3     l2515           2515     l4473           4473     
inc.hl          28be     l252e           252e     l447c           447c     
iodev            78d     l2538           2538     l447d           447d     
isalph          4503     l2563           2563     l4482           4482     
isalph_         4504     l256a           256a     l44c1           44c1     
j.i.bc          1d2c     l2572           2572     l44c4           44c4     
key.token        fd6     l2579           2579     l44d8           44d8     
l0000          =   0+    l257c           257c     l44e5           44e5     
l0001          =   1+    l2582           2582     l4500           4500     
l0002          =   2+    l2585           2585     l450b           450b     
l0004          =   4+    l2588           2588     l450e           450e     
l0005          =   5+    l25a2           25a2     l4520           4520     
l0006          =   6+    l25c9           25c9     l4534           4534     
l0007          =   7+    l25d7           25d7     l454d           454d     
l0008          =   8+    l25da           25da     l4579           4579     
l0009          =   9+    l25dd           25dd     l4582           4582     
l000a          =   a+    l25f4           25f4     l4585           4585     
l000d          =   d+    l25fb           25fb     l4597           4597     
l000e          =   e+    l2606           2606     l459e           459e     
l000f          =   f+    l260e           260e     l45a0           45a0     
l0010          =  10+    l2611           2611     l45a8           45a8     
l0011          =  11+    l2623           2623     l45e7           45e7     
l0014          =  14+    l2624           2624     l45f9           45f9     
l001e          =  1e+    l2635           2635     l4615           4615     
l0021          =  21+    l2642           2642     l4620           4620     
l0022          =  22+    l264e           264e     l462f           462f     
l0025          =  25+    l2662           2662     l4641           4641     
l0026          =  26+    l2664           2664     l465c           465c     
l0027          =  27+    l2671           2671     l4672           4672     
l0028          =  28+    l267b           267b     l468a           468a     
l0029          =  29+    l2685           2685     l4690           4690     
l0042          =  42+    l2689           2689     l4696           4696     
l004e          =  4e+    l268b           268b     l4699           4699     
l007f          =  7f+    l2697           2697     l46a3           46a3     
l0080          =  80+    l269b           269b     l46b7           46b7     
l0082          =  82+    l26ac           26ac     l46b9           46b9     
l00a9          =  a9+    l26bd           26bd     l46bc           46bc     
l00aa          =  aa+    l26d0           26d0     l46c7           46c7     
l00ab          =  ab+    l2703           2703     l46c8           46c8     
l00ad          =  ad+    l2725           2725     l46ca           46ca     
l00ae          =  ae+    l272f           272f     l46cb           46cb     
l00b0          =  b0+    l2737          =2737+    l46ce           46ce     
l00b1          =  b1+    l273c          =273c+    l46dd           46dd     
l00b2          =  b2+    l273d           273d     l46ea           46ea     
l00b4          =  b4+    l2751           2751     l46f5           46f5     
l00b8          =  b8+    l2757           2757     l46fd           46fd     
l00c5          =  c5+    l2759           2759     l4701           4701     
l00ff          =  ff+    l275e           275e     l4722           4722     
l0107            107     l2767           2767     l4723           4723     
l019f            19f     l2769           2769     l4726           4726     
l0207            207     l2794           2794     l472d           472d     
l023b            23b     l2798          =2798+    l473c           473c     
l024c            24c     l279c          =279c+    l473e           473e+    
l024d            24d     l27a0          =27a0+    l475a           475a     
l0287            287     l27a3          =27a3+    l4767           4767     
l02b0            2b0     l27b1           27b1     l476a           476a     
l02d5            2d5     l27ca           27ca     l4778           4778     
l02eb            2eb     l27cf           27cf     l4795           4795     
l02fd            2fd     l27f6           27f6     l47b2           47b2     
l0302            302     l27f9           27f9     l47b9           47b9     
l031e            31e     l2803           2803     l47da           47da     
l031f            31f     l281f           281f     l47db           47db     
l0324            324     l2826           2826     l47xx           4764+    
l0358            358     l2827           2827     l4804           4804     
l0371            371     l282e           282e     l4812           4812     
l0384            384     l2845           2845     l4813           4813     
l039a            39a     l284e           284e     l4837           4837     
l03ae            3ae     l284f           284f     l485b           485b     
l03af            3af     l2850           2850     l4893           4893     
l03ed            3ed     l2854           2854     l489b           489b     
l0422            422     l2859           2859     l489c           489c     
l0439            439     l2867           2867     l48a8           48a8     
l0442            442     l286b           286b     l48ab           48ab     
l044c            44c     l2874           2874     l48ac           48ac     
l0464            464     l287c           287c     l48c4           48c4     
l0468            468     l287f           287f     l48c6           48c6     
l0469            469     l2886           2886     l48d6           48d6     
l046a            46a     l2892           2892     l48da           48da     
l047f            47f     l2899           2899     l48e2           48e2     
l048b            48b     l28a6           28a6     l48e6           48e6     
l0495            495     l28a9           28a9     l48f2           48f2     
l049f            49f     l28b4           28b4     l48f8           48f8     
l04a9            4a9     l28b7           28b7     l48fc           48fc     
l04b3            4b3     l28b9           28b9     l4900           4900     
l0509            509     l28c0           28c0     l4924           4924     
l0562            562     l28c3           28c3     l4927           4927     
l0774            774     l28c8           28c8     l492b           492b     
l0788            788     l28c9           28c9     l4930           4930     
l0789            789     l28cd           28cd     l493f           493f     
l078e            78e     l28d6           28d6     l4948           4948     
l078f            78f     l28eb           28eb     l494c           494c     
l0790            790     l28ee           28ee     l494f           494f     
l0791            791     l28f4           28f4     l4950           4950     
l079c            79c     l28f7           28f7     l4958           4958     
l079e            79e     l28fa           28fa     l4979           4979     
l07a0            7a0     l2906           2906     l4983           4983     
l07c5            7c5     l291d           291d     l49a4           49a4     
l07c6            7c6     l2920           2920     l49c1           49c1     
l07ec            7ec     l2933           2933     l49c6           49c6     
l07ee            7ee     l2940           2940     l49cb           49cb     
l0822            822     l2943           2943     l49ed           49ed     
l0961            961     l2949           2949     l4a34           4a34     
l0a64            a64     l2966           2966     l4a37           4a37     
l0a66            a66     l2973           2973     l4a49           4a49     
l0a68            a68     l2999           2999     l4a4c           4a4c     
l0a69            a69     l299c           299c     l4a55           4a55     
l0a6a            a6a     l29bd           29bd     l4a60           4a60     
l0a6c            a6c     l29c2           29c2     l4a8d           4a8d     
l0a6d            a6d     l29c8           29c8     l4ac0           4ac0     
l0a6e            a6e     l29cf           29cf     l4ad8           4ad8     
l0a70            a70     l29db           29db     l4ae3           4ae3     
l0a9d            a9d     l29e5           29e5     l4af1           4af1     
l0aa1            aa1     l29f4           29f4     l4af6           4af6     
l0aa5            aa5     l29fe           29fe     l4b02           4b02     
l0aa6            aa6     l2a11           2a11     l4b0d           4b0d     
l0aa9            aa9     l2a14           2a14     l4b1a           4b1a     
l0aaf            aaf     l2a20           2a20     l4b27           4b27     
l0ab5            ab5     l2a2a           2a2a     l4b30           4b30     
l0ab7            ab7     l2a42           2a42     l4b38           4b38     
l0ab9            ab9     l2a66           2a66     l4b41           4b41     
l0abb            abb     l2a6b           2a6b     l4b55           4b55     
l0abc            abc     l2a6d           2a6d     l4b62           4b62     
l0ac4            ac4     l2a80           2a80     l4b69           4b69     
l0ac6            ac6     l2a8d           2a8d     l4b6f           4b6f     
l0aca            aca     l2aa6           2aa6     l4b7a           4b7a     
l0ae4            ae4     l2ab6           2ab6     l4b90           4b90     
l0ae6            ae6     l2ac9           2ac9     l4bb4           4bb4     
l0ae8            ae8     l2aca           2aca     l4bd2           4bd2     
l0b4c            b4c     l2acf           2acf     l4bdc           4bdc     
l0b4e            b4e     l2afa           2afa     l4bf5           4bf5     
l0b50            b50     l2afd           2afd     l4bfa           4bfa     
l0bb4            bb4     l2b05           2b05     l4c18           4c18     
l0bb5            bb5     l2b10           2b10     l4c1c           4c1c     
l0bb6            bb6     l2b1e           2b1e     l4c2c           4c2c     
l0bb7            bb7     l2b22           2b22     l4c3b           4c3b     
l0bb8            bb8     l2b25           2b25     l4c48           4c48     
l0bba            bba     l2b31           2b31     l4c58           4c58     
l0bbc            bbc     l2b34           2b34     l4c6f           4c6f     
l0bbd            bbd     l2b51           2b51     l4c7b           4c7b     
l0bbf            bbf     l2b63           2b63     l4ca1           4ca1     
l0bc0            bc0     l2b71           2b71     l4cb5           4cb5     
l0bc6            bc6     l2b77           2b77     l4cc1           4cc1     
l0bc7            bc7     l2b81           2b81     l4cc5           4cc5     
l0be6            be6     l2b89           2b89     l4cd5           4cd5     
l0be7            be7     l2b95           2b95     l4ceb           4ceb     
l0be8            be8     l2b9a           2b9a     l4cf1           4cf1     
l0bed            bed     l2ba8           2ba8     l4d23           4d23     
l0bee            bee     l2bc1           2bc1     l4d3d           4d3d     
l0bef            bef     l2bca           2bca     l4d5f           4d5f     
l0bf1            bf1     l2bcb           2bcb     l4d6a           4d6a     
l0bf3            bf3     l2be2           2be2     l4d74           4d74     
l0bf4            bf4     l2be9           2be9     l4d87           4d87     
l0bf6            bf6     l2bea           2bea     l4db8           4db8     
l0bff            bff     l2bee           2bee     l4ddb           4ddb     
l0c08            c08     l2bf8           2bf8     l4e00           4e00     
l0c09            c09     l2c03           2c03     l4e07           4e07     
l0c0a            c0a     l2c08           2c08     l4e0f           4e0f     
l0c0b            c0b     l2c0d           2c0d     l4e1f           4e1f     
l0c0c            c0c     l2c1f           2c1f     l4e22           4e22     
l0c0d            c0d     l2c20           2c20     l4e3c           4e3c     
l0c13            c13     l2c26           2c26     l4e42           4e42     
l0c14            c14     l2c42           2c42     l4e68           4e68     
l0c15            c15     l2c52           2c52     l4e6e           4e6e     
l0c16            c16     l2c86           2c86     l4e8a           4e8a     
l0c30            c30     l2c91           2c91     l4e8f           4e8f     
l0c36            c36     l2c92           2c92     l4e96           4e96     
l0c37            c37     l2c9f           2c9f     l4e97           4e97     
l0c40            c40     l2cb2           2cb2     l4ea2           4ea2     
l0c44            c44     l2cba           2cba     l4eb1           4eb1     
l0c45            c45     l2ccb           2ccb     l4ebe           4ebe     
l0c4a            c4a     l2cce           2cce     l4ec8           4ec8     
l0c50            c50     l2cdd           2cdd     l4ecf           4ecf     
l0c54            c54     l2ce2           2ce2     l4edb           4edb     
l0c62            c62     l2cf1           2cf1     l4f07           4f07     
l0c76            c76     l2cfa           2cfa     l4f0b           4f0b     
l0c7f            c7f     l2cfc           2cfc     l4f23           4f23     
l0c85            c85     l2cff           2cff     l4f28           4f28     
l0c97            c97     l2d02           2d02     l4f4e           4f4e     
l0c9a            c9a     l2d08           2d08     l4f51           4f51     
l0c9d            c9d     l2d09           2d09     l4f6e           4f6e     
l0ca0            ca0     l2d12           2d12     l4f75           4f75     
l0ca3            ca3     l2d1c           2d1c     l4f76           4f76     
l0ca6            ca6     l2d25           2d25     l4f9f           4f9f     
l0ca9            ca9+    l2d27           2d27     l4fae           4fae     
l0cac            cac     l2d2d           2d2d     l4fd8           4fd8     
l0caf            caf     l2d31           2d31     l501b           501b     
l0cb2            cb2     l2d3c           2d3c     l5030           5030     
l0cb5            cb5     l2d3f           2d3f     l504e           504e     
l0cb8            cb8     l2d43           2d43     l507b           507b     
l0cbb            cbb     l2d46           2d46     l5087           5087     
l0cbe            cbe     l2d51           2d51     l50aa           50aa     
l0cc3            cc3     l2d59           2d59     l50ad           50ad     
l0cc9            cc9     l2d5b           2d5b     l50bf           50bf     
l0ccc            ccc     l2d64           2d64     l50ca           50ca     
l0ccf            ccf     l2d79           2d79     l50da           50da     
l0cd2            cd2     l2d82           2d82     l50f9           50f9     
l0cd5            cd5     l2d91           2d91     l5104           5104     
l0cd8            cd8     l2d99           2d99     l510b           510b     
l0cdb            cdb     l2da2           2da2     l510d           510d     
l0cde            cde     l2dae           2dae     l511e           511e     
l0ce1            ce1     l2db2           2db2     l5122           5122     
l0cf9            cf9     l2dc6           2dc6     l512a           512a     
l0cfc            cfc     l2dd6           2dd6     l5150           5150     
l0d02            d02     l2df3           2df3     l515e           515e     
l0d1f            d1f     l2e0e           2e0e     l5161           5161     
l0d34            d34     l2e16           2e16     l5164           5164     
l0d50            d50     l2e1b           2e1b     l5167           5167     
l0d52            d52     l2e22           2e22     l517a           517a     
l0d55            d55     l2e28           2e28     l517d           517d     
l0d62            d62     l2e33           2e33     l5180           5180     
l0d6f            d6f     l2e39           2e39     l5197           5197     
l0d86            d86     l2e44           2e44     l51a7           51a7     
l0d87            d87     l2e62           2e62     l51bb           51bb     
l0da2            da2     l2e74           2e74     l51be           51be     
l0dc2            dc2     l2e9d           2e9d     l51ce           51ce     
l0dd3            dd3     l2ea8           2ea8     l51e3           51e3     
l0dda            dda     l2eb2           2eb2     l51e8           51e8     
l0def            def     l2ef9           2ef9     l521c           521c     
l0df9            df9     l2f0b           2f0b     l522b           522b     
l0e14            e14     l2f23           2f23     l5231           5231     
l0e3b            e3b     l2f34           2f34     l523c           523c     
l0e5c            e5c     l2f35           2f35     l5251           5251     
l0e7d            e7d     l2f4e           2f4e     l525c           525c     
l0e87            e87     l2f58           2f58     l5264           5264     
l0eab            eab     l2f65           2f65     l5265           5265     
l0eaf            eaf     l2f69           2f69     l5278           5278     
l0eb7            eb7     l2f86           2f86     l528a           528a     
l0eb9            eb9     l2f93           2f93     l5294           5294     
l0ed0            ed0     l2fa4           2fa4     l5296           5296     
l0ed8            ed8     l2fa5           2fa5     l529b           529b     
l0eeb            eeb     l2fae           2fae     l52b9           52b9     
l0ef4            ef4     l2fbd           2fbd     l52be           52be     
l0ef6            ef6     l2fbe           2fbe     l52e9           52e9     
l0ef8            ef8     l2fcb           2fcb     l52fa           52fa     
l0efb            efb     l2fcd           2fcd     l52fe           52fe     
l0f25            f25     l2fe0           2fe0     l5301           5301     
l0f2a            f2a     l2xxx           29cb+    l534d           534d     
l0f3d            f3d     l300d           300d     l5356           5356     
l0f4f            f4f     l3013           3013     l535c           535c     
l0f61            f61     l3015           3015     l536d           536d     
l0f67            f67     l3019           3019     l537f           537f     
l0f6d            f6d     l3032           3032     l538a           538a     
l0f79            f79     l3035           3035     l539a           539a     
l0f7b            f7b     l3048           3048     l53b6           53b6     
l0f82            f82     l304e           304e     l53be           53be     
l0fb8            fb8     l3053           3053     l53c9           53c9     
l0fcc            fcc     l3062           3062     l53d9           53d9     
l0fd0            fd0     l3067           3067     l53e3           53e3     
l0fd3            fd3     l3077           3077     l53eb           53eb     
l0fea            fea     l3078           3078     l53f3           53f3     
l0feb            feb     l307e           307e     l53fc           53fc     
l101c           101c     l3080           3080     l540d           540d     
l1021           1021     l3087           3087     l5417           5417     
l103c           103c     l3088           3088     l5439           5439     
l103d           103d     l3090           3090     l547a           547a     
l1047           1047     l3094           3094     l547b           547b     
l1048           1048     l3097           3097     l54c1           54c1     
l104d           104d     l309e           309e     l54d7           54d7     
l105a           105a     l30b8           30b8     l54ea           54ea     
l1069           1069     l30cb           30cb     l54f1           54f1     
l106b           106b     l30d8           30d8     l54fc           54fc     
l106d           106d     l30ea           30ea     l5500           5500+    
l1084           1084     l3105           3105     l5501           5501     
l1097           1097     l310a           310a     l5506           5506     
l10a7           10a7     l310e           310e     l5509           5509     
l10c5           10c5     l3112           3112     l5510           5510     
l10c7           10c7     l311a           311a     l5521           5521     
l10cc           10cc     l3129           3129     l5527           5527     
l10d3           10d3     l312a           312a     l554b           554b     
l10ff           10ff     l3134           3134     l555e           555e     
l1112           1112     l3146           3146     l556c           556c     
l1113           1113     l3162           3162     l5571           5571     
l1122           1122     l317f           317f     l557e           557e     
l1125           1125     l319f           319f     l5585           5585     
l1135           1135     l31a2           31a2     l558e           558e     
l114b           114b     l31ab           31ab     l5599           5599     
l115f           115f     l31b2           31b2     l55b8           55b8     
l1164           1164     l31bb           31bb     l55c3           55c3     
l116f           116f     l31d6           31d6     l55c9           55c9     
l118b           118b     l31d8           31d8     l55cc           55cc     
l118e           118e     l31e7           31e7     l55f5           55f5     
l11a0           11a0     l31f7           31f7     l5606           5606     
l11a9           11a9     l3207           3207     l5623           5623     
l11bf           11bf     l320c           320c     l562c           562c     
l11f1           11f1     l321e           321e+    l5636           5636     
l1211           1211     l3225           3225     l5639           5639     
l124e           124e     l323b           323b     l5640           5640     
l1271           1271     l3243           3243     l5651           5651     
l1272           1272     l324e           324e     l5658           5658     
l129c           129c     l3253           3253     l5679           5679     
l12a0           12a0     l3266           3266     l569d           569d     
l12c0           12c0     l3281           3281     l56a4           56a4     
l12e4           12e4     l328b           328b     l56c8           56c8     
l12e5           12e5     l328f           328f     l5703           5703     
l12ed           12ed     l329e           329e     l5705           5705     
l1306           1306     l32ae           32ae     l570d           570d     
l130a           130a     l32c1           32c1     l571a           571a     
l1323           1323     l32c3           32c3     l573b           573b     
l133e           133e     l32cf           32cf     l573e           573e     
l1343           1343     l32d0           32d0     l574a           574a     
l1352           1352     l32d7           32d7     l5768           5768     
l135d           135d     l32f3           32f3     l5774           5774     
l1360           1360     l32fc           32fc     l577a           577a     
l1366           1366     l3306           3306     l577d           577d     
l1381           1381     l330b           330b     l5792           5792     
l1386           1386     l330c           330c     l57aa           57aa     
l138c           138c     l331e           331e+    l5800           5800     
l138e           138e     l331f           331f     l5804           5804     
l13a8           13a8     l333f           333f     l581c           581c     
l13ab           13ab     l3349           3349     l581d           581d     
l13c3           13c3     l3351           3351     l5830           5830     
l13c9           13c9     l3364           3364     l5837           5837     
l13cc           13cc     l336d           336d     l583e           583e     
l13cf           13cf     l337b           337b     l5852           5852     
l13d2           13d2     l33a0           33a0     l5857           5857     
l13d4           13d4     l33ab           33ab     l5862           5862     
l13f5           13f5     l33ad           33ad     l5865           5865     
l1400           1400     l33c9           33c9     l5885           5885     
l1411           1411     l33da           33da     l58e6           58e6     
l1414           1414     l33e5           33e5     l58fe           58fe     
l141d           141d     l33ee           33ee     l5931           5931     
l1428           1428     l33f5           33f5     l593e           593e     
l1429           1429     l33fb           33fb     l5963           5963     
l1433           1433     l341b           341b     l596f           596f     
l1443           1443     l341e           341e+    l5985           5985     
l1464           1464     l3429           3429     l59a8           59a8     
l1474           1474     l344c           344c     l59ae           59ae     
l147d           147d     l3453           3453     l59b7           59b7     
l1494           1494     l345c           345c     l59bb           59bb     
l1495           1495     l3465           3465     l59be           59be     
l1498           1498     l3480           3480     l59d7           59d7     
l14cc           14cc     l3483           3483     l59f8           59f8     
l14d1           14d1     l3495           3495     l5a04           5a04     
l14eb           14eb+    l349b           349b     l5a14           5a14     
l14ee           14ee     l34a6           34a6     l5a41           5a41     
l14f2           14f2     l34ae           34ae     l5a51           5a51     
l14f5           14f5     l34b2           34b2     l5a64           5a64     
l14f6           14f6     l34c4           34c4     l5a67           5a67     
l1512           1512     l34ca           34ca     l5a80           5a80     
l152d           152d     l34cf           34cf     l5a92           5a92     
l152e           152e     l34d0           34d0     l5a96           5a96     
l153a           153a     l34d8           34d8     l5a9e           5a9e     
l153d           153d     l34db           34db     l5ab6           5ab6     
l1548           1548     l34df           34df     l5acb           5acb     
l1573           1573     l34e6           34e6     l5acd           5acd     
l157b           157b     l34eb           34eb     l5ae0           5ae0     
l157f           157f     l34f3           34f3     l5af4           5af4     
l1585           1585     l34fb           34fb     l5afd           5afd     
l15a2           15a2     l3504           3504     l5afe           5afe     
l15b5           15b5     l350e           350e     l5b54           5b54     
l15c4           15c4     l350f           350f     l5b5d           5b5d     
l15c5           15c5     l3512           3512     l5b67           5b67     
l15d3           15d3     l351a           351a     l5b68           5b68     
l15f3           15f3     l351e           351e+    l5b75           5b75     
l15f7           15f7     l3522           3522     l5b76           5b76     
l160c           160c     l3542           3542     l5b8d           5b8d     
l1610           1610     l354b           354b     l5b92           5b92     
l161b           161b     l3571           3571     l5b9f           5b9f     
l163d           163d     l357e           357e     l5bbc           5bbc     
l163e           163e     l3584           3584     l5bd1           5bd1     
l1651           1651     l3592           3592     l5be8           5be8     
l1664           1664     l35ba           35ba     l5c02           5c02     
l166c           166c     l35c0           35c0     l5c1f           5c1f     
l167e           167e     l35d3           35d3     l5c20           5c20     
l1680           1680     l35f1           35f1     l5c47           5c47     
l1694           1694     l35f9           35f9     l5c54           5c54     
l169c           169c     l3601           3601     l5c58           5c58     
l16a1           16a1     l3609           3609     l5c59           5c59     
l16a8           16a8     l360d           360d     l5c65           5c65     
l16dc           16dc     l3611           3611     l5c8e           5c8e     
l1705           1705     l3619           3619     l5c93           5c93     
l171b           171b     l365f           365f     l5c96           5c96     
l171e           171e     l3665           3665     l5cab           5cab     
l1725           1725     l366f           366f     l5cb1           5cb1     
l1749           1749     l3672           3672     l5cb4           5cb4     
l1756           1756     l3688           3688     l5cb9           5cb9     
l175c           175c     l368a           368a     l5cc2           5cc2     
l1765           1765     l368e           368e     l5cc4           5cc4     
l1774           1774     l369f           369f     l5cd1           5cd1     
l177c           177c     l36a8           36a8     l5cef           5cef     
l1790           1790     l36ab           36ab     l5d19           5d19     
l179b           179b     l36b8           36b8     l5d29           5d29     
l17c3           17c3     l36bb           36bb     l5d53           5d53     
l17c6           17c6     l36c0           36c0     l5d5c           5d5c     
l17d7           17d7     l36cc           36cc     l5d65           5d65     
l17db           17db     l36cf           36cf     l5d6f           5d6f     
l17e2           17e2     l36e8           36e8     l5d71           5d71     
l17f5           17f5     l3704           3704     l5d73           5d73     
l1821           1821     l3713           3713     l5d75           5d75     
l1834           1834     l371e           371e+    l5d76           5d76     
l1842           1842     l372b           372b     l5d8c           5d8c     
l1847           1847     l3760           3760     l5dea           5dea     
l184e           184e     l3763           3763     l5e44           5e44     
l1859           1859     l376f           376f     l5e69           5e69     
l1863           1863     l3772           3772     l5e78           5e78     
l186f           186f     l377b           377b     l5e7d           5e7d     
l188f           188f     l3798           3798     l5e90           5e90     
l1893           1893     l37a7           37a7     l5eaf           5eaf     
l1899           1899     l37b0           37b0     l5eb4           5eb4     
l18ab           18ab     l37c8           37c8     l5ec2           5ec2     
l18bf           18bf     l37cc           37cc     l5ed4           5ed4     
l18d6           18d6     l37cf           37cf     l5ed5           5ed5     
l18d9           18d9     l37dd           37dd     l5ed6           5ed6     
l18da           18da     l3819           3819     l5ef3           5ef3     
l18f9           18f9     l3835           3835     l5f1c           5f1c     
l18fd           18fd     l383e           383e     l5f30           5f30     
l1908           1908     l3846           3846     l5f8e           5f8e     
l193b           193b     l3847           3847     l5f9a           5f9a     
l1940           1940     l3848           3848     l5fa9           5fa9+    
l1945           1945     l3869           3869     l5ff9           5ff9     
l194d           194d     l386a           386a     l603f          =603f+    
l1951           1951     l3879           3879     l6040          =6040+    
l1963           1963     l387f           387f     l60a3          =60a3+    
l1964           1964     l3895           3895     l6404          =6404+    
l1989           1989     l38d9           38d9     l7218          =7218+    
l198c           198c     l38e6           38e6     l772b          =772b+    
l198f           198f     l38ff           38ff     l7e22          =7e22+    
l1998           1998     l3907           3907     l7f00          =7f00+    
l19a2           19a2     l391c           391c     l7f80          =7f80+    
l19b1           19b1     l3931           3931     l8000          =8000+    
l19bd           19bd     l394e           394e     l8031          =8031+    
l19d3           19d3     l3958           3958     l8080          =8080+    
l19ec           19ec     l397d           397d     l8138          =8138+    
l19f7           19f7     l3990           3990     l9080          =9080+    
l19fe           19fe     l39af           39af     l9143          =9143+    
l1a03           1a03     l39b5           39b5     l9180          =9180+    
l1a05           1a05     l39bc           39bc     l9474          =9474+    
l1a12           1a12     l39cd           39cd     laa3b          =aa3b+    
l1a15           1a15     l39e3           39e3     lb60e          =b60e+    
l1a34           1a34     l39ff           39ff     lf             =   a+    
l1a58           1a58     l3a0d           3a0d     lf983          =f983+    
l1a7f           1a7f     l3a1e           3a1e+    lffaa          =ffaa+    
l1a87           1a87     l3a29           3a29     lffc0          =ffc0+    
l1a8e           1a8e     l3a46           3a46     lfff8          =fff8+    
l1a90           1a90     l3a5b           3a5b     lfff9          =fff9+    
l1aac           1aac     l3a5c           3a5c     lfffa          =fffa+    
l1aba           1aba     l3a5d           3a5d     lfffe          =fffe+    
l1ac6           1ac6     l3a63           3a63     lffff          =ffff+    
l1ae3           1ae3     l3a7d           3a7d     lstout          4137     
l1afc           1afc     l3a89           3a89     lxxx            4b61+    
l1b18           1b18     l3a8c           3a8c     mem.top          a9b     
l1b28           1b28     l3a8d           3a8d     msb            =  80+    
l1b2b           1b2b     l3a92           3a92     nomsb          =  7f+    
l1b36           1b36     l3ace           3ace     null           =   0+    
l1b3b           1b3b     l3ae5           3ae5     opnfiles         7c4     
l1b41           1b41     l3af6           3af6     opnsave          79f     
l1b4f           1b4f     l3b00           3b00     os             =   0+    
l1b64           1b64     l3b14           3b14     oserr          =  ff+    
l1b67           1b67     l3b16           3b16     osvers           81f     
l1b69           1b69     l3b1c           3b1c     parse           57dd     
l1b6f           1b6f     l3b2f           3b2f     pop.a           4758     
l1b84           1b84     l3b49           3b49     prctrl          4443     
l1b93           1b93     l3b58           3b58     prg.base         79a     
l1bca           1bca     l3b5f           3b5f     prg.top          ac2     
l1bd6           1bd6     l3b6c           3b6c     putchar         40d6     
l1be7           1be7     l3b84           3b84     reclng         =  80+    
l1c03           1c03     l3b92           3b92     recsiz           bea     
l1c06           1c06     l3b98           3b98     rub.flg          792     
l1c16           1c16     l3bb8           3bb8     rubout         =  7f+    
l1c34           1c34     l3bb9           3bb9     setdskbuff      57b1     
l1c3c           1c3c     l3bbe           3bbe     st.exp          25f0     
l1c48           1c48     l3bd6           3bd6     st.int          29dc     
l1c4a           1c4a     l3bdc           3bdc     st.zero         25ef     
l1c4d           1c4d     l3bf0           3bf0     str.adr         48a5     
l1c7e           1c7e     l3c13           3c13     str.arr          a7a     
l1c97           1c97     l3c23           3c23     str.ptr          a78     
l1c9e           1c9e     l3c25           3c25     tab            =   9+    
l1cac           1cac     l3c40           3c40     toklen         = 13b+    
l1cad           1cad     l3c5d           3c5d     toupper         1c5b     
l1cce           1cce     l3c62           3c62     toupper_        1c5a     
l1cd3           1cd3     l3c8a           3c8a     tp.???          29e1     
l1ce8           1ce8     l3c8f           3c8f     tp.doub         2a33     
l1d0f           1d0f     l3c92           3c92     tp.int          29df     
l1d20           1d20     l3c96           3c96     tp.sngl         2a36     
l1d29           1d29     l3c9a           3c9a     trcflg           bfe     
l1d32           1d32     l3c9c           3c9c     trlskip         11ac     
l1d42           1d42     l3ca3           3ca3     true           =ffff+    
l1d4f           1d4f     l3cac           3cac     tstmem          42c7     
l1d61           1d61     l3cb8           3cb8     var.adr         398b     
l1d71           1d71     l3cc0           3cc0     vrf.str         2a3b     
l1d75           1d75     l3cd2           3cd2     
