   1:			;
   2:			; disk test
   3:			;
   4:			
   5:			rsym bios.sym
   6:			
   7:			;DSELBF	EQU	$004E
   8:			;CR	EQU	$0D
   9:			;--------------------
  10:	0100          		org $0100
  11:			
  12:			
  13:	0100  C39103  	START:	JP	RECOVER
  14:			
  15:	0103 .. 0182 00	SCRTCH:	DEFS	128			; local stack area
  16:	0183          	SPAREA	EQU	$
  17:			
  18:				; include routines to print ascii values
  19:			include ../ASM/bit2040.asm
**** ../ASM/bit2040.asm ****
   1:			;;
   2:			;; Routines for binary to decimal conversion
   3:			;;
   4:			;; (C) Piergiorgio Betti <pbetti@lpconsul.net> - 2006
   5:			;;
   6:			;; The active part is taken from:
   7:			;; David Barrow - Assembler routines for the Z80
   8:			;; CENTURY COMMUNICATIONS LTD - ISBN 0 7126 0506 1
   9:			;;
  10:			
  11:			
  12:			;;
  13:			;; BIN2A8 - Convert an 8 bit value to ASCII
  14:			;;
  15:			;; INPUT	C = Value to be converted
  16:			;; OUTPUT	DE = Converted string address
  17:			;
  18:	0183  E5      	BIN2A8: PUSH	HL
  19:	0184  F5      		PUSH	AF
  20:	0185  0600    		LD	B,0
  21:	0187  ED43B301		LD	(IVAL16),BC
  22:	018B  21B301  		LD	HL,IVAL16
  23:	018E  11B501  		LD	DE,OVAL16
  24:	0191  3E01    		LD	A,1			; one byte conversion
  25:	0193  CDBD01  		CALL	LNGIBD
  26:	0196  11B501  		LD	DE,OVAL16
  27:	0199  F1      		POP	AF
  28:	019A  E1      		POP	HL
  29:	019B  C9      		RET
  30:				;
  31:			;;
  32:			;; BN2A16 - Convert a 16 bit value to ASCII
  33:			;;
  34:			;; INPUT	BC = Value to be converted
  35:			;; OUTPUT	DE = Converted string address
  36:			;
  37:	019C  E5      	BN2A16: PUSH	HL
  38:	019D  F5      		PUSH	AF
  39:	019E  ED43B301		LD	(IVAL16),BC
  40:	01A2  21B301  		LD	HL,IVAL16
  41:	01A5  11B501  		LD	DE,OVAL16
  42:	01A8  3E02    		LD	A,2			; two byte conversion
  43:	01AA  CDBD01  		CALL	LNGIBD
  44:	01AD  11B501  		LD	DE,OVAL16
  45:	01B0  F1      		POP	AF
  46:	01B1  E1      		POP	HL
  47:	01B2  C9      		RET
  48:				;
  49:			;; Generic storage
  50:			
  51:	01B3 .. 01B4 00	IVAL16:	DEFS	2
  52:	01B5 .. 01BA 00	OVAL16:	DEFS	6
  53:			
  54:			;;
  55:			;;
  56:			;; LNGIBD - Convert long integer of given precision to ASCII
  57:			;;
  58:			;; INPUT	HL addresses the first byte of the binary value
  59:			;;		which must be stored with the low order byte in
  60:			;;		lowest memory.
  61:			;;		DE addresses the first byte of the destination
  62:			;;		area which must be larger enough to accept the
  63:			;;		decimal result (2.42 * binary lenght + 1).
  64:			;;		A = binary byte lenght (1 to 255)
  65:			
  66:			;;
  67:	000A          	CVBASE	EQU	10		; CONVERSION BASE
  68:	01BB          	VPTR	EQU	HILO		; STORAGE AREA EQU
  69:			
  70:			
  71:	01BB .. 01BC 00	HILO:	DEFS	2		; STORAGE AREA
  72:			
  73:	01BD  4F      	LNGIBD:	LD	C,A
  74:	01BE  0600    		LD	B,0
  75:	01C0  2B      		DEC	HL
  76:	01C1  22BB01  		LD	(VPTR),HL
  77:	01C4  3EFF    		LD	A,-1
  78:	01C6  12      		LD	(DE),A
  79:	01C7  09      		ADD	HL,BC
  80:				;
  81:	01C8  7E      	NXTMSB:	LD	A,(HL)
  82:	01C9  B7      		OR	A
  83:	01CA  C2D901  		JP	NZ,MSBFND
  84:	01CD  2B      		DEC	HL
  85:	01CE  0D      		DEC	C
  86:	01CF  C2C801  		JP	NZ,NXTMSB
  87:				;
  88:	01D2  EB      		EX	DE,HL
  89:	01D3  3630    		LD	(HL),'0'
  90:	01D5  23      		INC	HL
  91:	01D6  3600    		LD	(HL),0
  92:	01D8  C9      		RET
  93:				;
  94:	01D9  47      	MSBFND:	LD	B,A
  95:	01DA  3E80    		LD	A,$80
  96:				;
  97:	01DC  B8      	NXTMSK:	CP	B
  98:	01DD  DAE701  		JP	C,MSKFND
  99:	01E0  CAE701  		JP	Z,MSKFND
 100:	01E3  0F      		RRCA
 101:	01E4  C3DC01  		JP	NXTMSK
 102:				;
 103:	01E7  47      	MSKFND:	LD	B,A
 104:	01E8  C5      		PUSH	BC
 105:	01E9  2ABB01  		LD	HL,(VPTR)
 106:	01EC  0600    		LD	B,0
 107:	01EE  09      		ADD	HL,BC
 108:	01EF  A6      		AND	(HL)
 109:	01F0  C6FF    		ADD	A,$FF
 110:	01F2  6B      		LD	L,E
 111:	01F3  62      		LD	H,D
 112:				;
 113:	01F4  7E      	NXTOPV:	LD	A,(HL)
 114:	01F5  3C      		INC	A
 115:	01F6  CA0802  		JP	Z,OPVDON
 116:	01F9  3D      		DEC	A
 117:	01FA  8F      		ADC	A,A
 118:				;
 119:	01FB  FE0A    		CP	CVBASE
 120:	01FD  DA0202  		JP	C,NOCOUL
 121:	0200  D60A    		SUB	CVBASE
 122:	0202  3F      	NOCOUL:	CCF
 123:				;
 124:	0203  77      		LD	(HL),A
 125:	0204  23      		INC	HL
 126:	0205  C3F401  		JP	NXTOPV
 127:				;
 128:	0208  D21002  	OPVDON:	JP	NC,EXTDON
 129:	020B  3601    		LD	(HL),1
 130:	020D  23      		INC	HL
 131:	020E  36FF    		LD	(HL),-1
 132:				;
 133:	0210  C1      	EXTDON:	POP	BC
 134:	0211  78      		LD	A,B
 135:	0212  0F      		RRCA
 136:	0213  D2E701  		JP	NC,MSKFND
 137:	0216  0D      		DEC	C
 138:	0217  C2E701  		JP	NZ,MSKFND
 139:				;
 140:				; REVERSE DIGIT ORDER. ADD ASCII DIGITS HI-NIBBLES
 141:	021A  3600    		LD	(HL),0
 142:				;
 143:	021C  2B      	NXTCNV:	DEC	HL
 144:	021D  7D      		LD	A,L
 145:	021E  93      		SUB	E
 146:	021F  7C      		LD	A,H
 147:	0220  9A      		SBC	A,D
 148:	0221  D8      		RET	C
 149:				;
 150:	0222  1A      		LD	A,(DE)
 151:	0223  F630    		OR	$30
 152:	0225  47      		LD	B,A
 153:	0226  7E      		LD	A,(HL)
 154:	0227  F630    		OR	$30
 155:	0229  70      		LD	(HL),B
 156:	022A  12      		LD	(DE),A
 157:				;
 158:	022B  13      		INC	DE
 159:	022C  C31C02  		JP	NXTCNV
 160:			
 161:			;-----------------------------------------------
**** diskcopy.asm ****
  20:			
  21:			;START:	jp	STEP4
  22:			;
  23:	0001          	NDRIVE	EQU	1
  24:	0200          	SECSIZ	EQU	512
  25:	000B          	SECNUM	EQU	11
  26:	00A0          	NTRACK	EQU	160
  27:	0005          	NTRYS	EQU	5
  28:			
  29:	0008          	BS	EQU	08H		;ASCII 	backspace
  30:	0009          	TAB	EQU	09H		;	tab
  31:	000A          	LF	EQU	0AH		;	line feed
  32:	000C          	FORMF	EQU	0CH		;	form feed
  33:	000D          	CR	EQU	0DH		;	carriage return
  34:	001B          	ESC	EQU	1BH		;       escape
  35:	0018          	CTLX	EQU	'X' and	1fh	;	control	x - delete line
  36:	0003          	CTLC	EQU	'C' and	1fh	;	control	c - warm boot
  37:	001A          	EOF	EQU	'Z' and	1fh	;	control	z - logical eof
  38:	0027          	QUOTE	EQU	27H		;	quote
  39:	007E          	TILDE	EQU	7EH		;	tilde
  40:	007F          	DEL	EQU	7FH		;	del
  41:			
  42:	0005          	BDOSA	EQU	5
  43:	0003          	CTLC	EQU	'C' and	1fh	;	control	c - warm boot
  44:			
  45:			
  46:	022F  2054726B	STMSG1:	defb	" Trk.: ",0
	      2E3A2000
  47:	0237  20536563	STMSG2:	defb	" Sec.: ",0
	      2E3A2000
  48:	023F  20205265	RSTMOK:	defb	"  Read -> ",0
	      6164202D
	      3E2000
  49:	024A  20577269	WSTMOK:	defb	" Write -> ",0
	      7465202D
	      3E2000
  50:	0255  56657269	VSTMOK:	defb	"Verify -> ",0
	      6679202D
	      3E2000
  51:	0260  4552524F	ESTMOK:	defb	"ERROR! -> ",0
	      5221202D
	      3E2000
  52:	026B  5A383020	SGON:	DEFB	"Z80 DarkStar - Fast Diskette copy program.",CR,LF
	      4461726B
	      53746172
	      202D2046
	      61737420
	      4469736B
	      65747465
	      20636F70
	      79207072
	      6F677261
	      6D2E0D0A
  53:	0297  28632920		DEFB	"(c) 2006 Piergiorgio Betti <pbetti@lpconsul.net>",CR,LF
	      32303036
	      20506965
	      7267696F
	      7267696F
	      20426574
	      7469203C
	      70626574
	      7469406C
	      70636F6E
	      73756C2E
	      6E65743E
	      0D0A
  54:	02C9  0D0A00  	MCRLF:	DEFB	CR,LF,0
  55:	02CC  53656C65	SDCHO:	DEFB	"Select SOURCE drive : ",$00
	      63742053
	      4F555243
	      45206472
	      69766520
	      3A2000
  56:	02E3  53656C65	DDCHO:	DEFB	"Select DESTINATION drive : ",$00
	      63742044
	      45535449
	      4E415449
	      4F4E2064
	      72697665
	      203A2000
  57:	02FF  2A2A2053	MEQUAL:	DEFB	"** Source and destination cannot be the same.",CR,LF,0
	      6F757263
	      6520616E
	      64206465
	      7374696E
	      6174696F
	      6E206361
	      6E6E6F74
	      20626520
	      74686520
	      73616D65
	      2E0D0A00
  58:	032F  0D0A5072	MCONF:	DEFB	CR,LF,"Press any key to start, CTRL+C to abort.  ",0
	      65737320
	      616E7920
	      6B657920
	      746F2073
	      74617274
	      2C204354
	      524C2B43
	      20746F20
	      61626F72
	      742E2020
	      00
  59:	035C  42756666	MBFSZ:	DEFB	"Buffer size   : ",0
	      65722073
	      697A6520
	      20203A20
	      00
  60:	036D  53746F72	MTRSZ:	DEFB	"Stored tracks : ",0
	      65642074
	      7261636B
	      73203A20
	      00
  61:	037E  0D0A436F	MCOMP:	DEFB	CR,LF,"Copy complete.",CR,LF,0
	      70792063
	      6F6D706C
	      6574652E
	      0D0A00
  62:			
  63:			;
  64:			;       begin the load operation
  65:			;
  66:	0391          	RECOVER:
  67:	0391  318301  		LD	SP,SPAREA		; init stack
  68:	0394  216B02  		LD	HL,SGON
  69:	0397  CD4307  		CALL	ZSDSP
  70:	039A  3A4B00  		LD	A,(TMPBYTE)
  71:	039D  CB7F    		BIT	7,A
  72:	039F  2805    		JR	Z,RAFSVD
  73:	03A1  3E01    		LD	A,1
  74:	03A3  32B907  		LD	(RAFS),A		; save RAF status
  75:	03A6          	RAFSVD:
  76:	03A6  3A4B00  		LD	A,(TMPBYTE)
  77:	03A9  CBBF    		RES	7,A
  78:	03AB  324B00  		LD	(TMPBYTE),A		; ... and clear it
  79:			; 	CALL	TTYI
  80:			; 	CP	CTLC
  81:			; 	JP	Z,EXIT
  82:			
  83:				; get source drive
  84:	03AE  21CC02  	DRVID:	LD	HL,SDCHO		; ask for drive id
  85:	03B1  CD4307  		CALL	ZSDSP			;
  86:	03B4  CD2A07  		CALL	GCHR			;
  87:	03B7  FE03    		CP	$03			; CTRL+C ?
  88:	03B9  CA1207  		JP	Z,EXIT			; exit
  89:	03BC  FE41    		CP	'A'			; is A -> P ?
  90:	03BE  FAAE03  		JP	M,DRVID			;
  91:	03C1  FE51    		CP	'Q'			;
  92:	03C3  F2AE03  		JP	P,DRVID			; no
  93:	03C6  D641    		SUB	'A'			; makes number
  94:	03C8  329F07  		LD	(RDSK),A
  95:	03CB  CD4005  		CALL	LFEED
  96:			
  97:				; get destination drive
  98:	03CE  21E302  	DDRVID:	LD	HL,DDCHO		; ask for drive id
  99:	03D1  CD4307  		CALL	ZSDSP			;
 100:	03D4  CD2A07  		CALL	GCHR			;
 101:	03D7  FE03    		CP	$03			; CTRL+C ?
 102:	03D9  CA1207  		JP	Z,EXIT			; exit
 103:	03DC  FE41    		CP	'A'			; is A -> P ?
 104:	03DE  FACE03  		JP	M,DDRVID			;
 105:	03E1  FE51    		CP	'Q'			;
 106:	03E3  F2CE03  		JP	P,DDRVID		; no
 107:	03E6  D641    		SUB	'A'			; makes number
 108:	03E8  32A007  		LD	(DDSK),A
 109:	03EB  CD4005  		CALL	LFEED
 110:	03EE  21A007  		LD	HL,DDSK
 111:	03F1  3A9F07  		LD	A,(RDSK)		; are equals ?
 112:	03F4  BE      		CP	(HL)
 113:	03F5  2008    		JR	NZ,CONFIRM
 114:	03F7  21FF02  		LD	HL,MEQUAL
 115:	03FA  CD4307  		CALL	ZSDSP
 116:	03FD  18AF    		JR	DRVID
 117:			
 118:	03FF          	CONFIRM:
 119:	03FF  212F03  		LD	HL,MCONF
 120:	0402  CD4307  		CALL	ZSDSP
 121:	0405  CD2A07  		CALL	GCHR			;
 122:	0408  FE03    		CP	$03			; CTRL+C ?
 123:	040A  CA1207  		JP	Z,EXIT			; exit
 124:	040D  CD4005  		CALL	LFEED
 125:	0410  CD4005  		CALL	LFEED
 126:			
 127:				; how many blocks ?
 128:	0413  11BB09  		LD	DE,ENDSTO
 129:	0416  2A0600  		LD	HL,(6)			; bios base
 130:	0419  ED52    		SBC	HL,DE			; available space in HL
 131:			
 132:	041B  E5      		PUSH	HL			; save in stack
 133:	041C  215C03  		LD	HL,MBFSZ
 134:	041F  CD4307  		CALL	ZSDSP
 135:	0422  C1      		POP	BC			; move size in BC
 136:	0423  C5      		PUSH	BC			; saves again
 137:	0424  CD9C01  		CALL	BN2A16			;
 138:	0427  21B501  		LD	HL,OVAL16		;
 139:	042A  CD4307  		CALL	ZSDSP			;
 140:	042D  CD4005  		CALL	LFEED
 141:	0430  C1      		POP	BC			; re-get
 142:	0431  110016  		LD	DE,SECSIZ*SECNUM	; block (track) size
 143:	0434  CD8707  		CALL	LDIV16			; calculate
 144:	0437  79      		LD	A,C
 145:	0438  32B207  		LD	(ABLK),A
 146:	043B  CD8301  		CALL	BIN2A8
 147:	043E  216D03  		LD	HL,MTRSZ
 148:	0441  CD4307  		CALL	ZSDSP
 149:	0444  21B501  		LD	HL,OVAL16		;
 150:	0447  CD4307  		CALL	ZSDSP			;
 151:	044A  CD4005  		CALL	LFEED
 152:	044D  CD4005  		CALL	LFEED
 153:			
 154:				; read start
 155:	0450  210000  		LD	HL,0			; init read counters
 156:	0453  22AA07  		LD	(RTRK),HL
 157:	0456  22AC07  		LD	(DTRK),HL
 158:	0459  22AE07  		LD	(VTRK),HL
 159:	045C  23      		INC	HL
 160:	045D  22A407  		LD	(RSEC),HL
 161:	0460  22A207  		LD	(DSEC),HL
 162:	0463  22A607  		LD	(VSEC),HL
 163:	0466  21BB09  		LD	HL,ENDSTO
 164:	0469  22B507  		LD	(RDMA),HL
 165:	046C  AF      		XOR	A
 166:	046D  32B307  		LD	(CBLK),A
 167:			
 168:	0470          	STEP1:
 169:	0470  CD7107  		CALL	TTYQ
 170:	0473  FE03    		CP	CTLC
 171:	0475  CA1207  		JP	Z,EXIT
 172:			
 173:	0478  ED4BB507		LD	BC,(RDMA)
 174:	047C  CDB305  		CALL	SETSEK
 175:	047F  CDFDDA  		CALL	READHST
 176:			
 177:	0482  CD5506  		CALL	RAVMSG
 178:	0485          	STEP2:
 179:			; 	CALL	GCHR
 180:	0485  2AB507  		LD	HL,(RDMA)	; next DMA addr.
 181:	0488  110002  		LD	DE,SECSIZ
 182:	048B  19      		ADD	HL,DE
 183:	048C  22B507  		LD	(RDMA),HL
 184:			
 185:	048F  21A407  		LD	HL,RSEC
 186:	0492  34      		INC	(HL)
 187:	0493  3AA407  		LD	A,(RSEC)
 188:	0496  FE0C    		CP	SECNUM+1	; EOT ?
 189:	0498  2802    		JR	Z, STEP3	; NXT TRK
 190:	049A  18D4    		JR	STEP1		; NXT SEC
 191:	049C          	STEP3:
 192:	049C  21AA07  		LD	HL,RTRK		; EOD ?
 193:	049F  34      		INC	(HL)
 194:	04A0  3AAA07  		LD	A,(RTRK)
 195:	04A3  FEA0    		CP	NTRACK
 196:	04A5  2812    		JR	Z,WRITEIMG
 197:			
 198:	04A7  21B307  		LD	HL,CBLK		; buffer full ??
 199:	04AA  34      		INC	(HL)
 200:	04AB  3AB207  		LD	A,(ABLK)
 201:	04AE  BE      		CP	(HL)
 202:	04AF  2808    		JR	Z,WRITEIMG
 203:			
 204:	04B1  3E01    		LD	A,1
 205:	04B3  32A407  		LD	(RSEC),A	; LOOP
 206:	04B6  C37004  		JP	STEP1
 207:			
 208:				; write start
 209:	04B9          	WRITEIMG:
 210:			; 	CALL	LFEED
 211:			; 	CALL	WBGSAV
 212:	04B9  3E05    		LD	A,NTRYS
 213:	04BB  32BA07  		LD	(TRYC),A
 214:	04BE  21BB09  		LD	HL,ENDSTO
 215:	04C1  22B507  		LD	(RDMA),HL
 216:	04C4  AF      		XOR	A
 217:	04C5  32B307  		LD	(CBLK),A
 218:	04C8          	WRTRET:
 219:	04C8  3E01    		LD	A,1
 220:	04CA  32A207  		LD	(DSEC),A	; LOOP
 221:	04CD  CDEB05  		CALL	WBGSAV
 222:	04D0          	STEP4:
 223:	04D0  CD7107  		CALL	TTYQ
 224:	04D3  FE03    		CP	CTLC
 225:	04D5  CA1207  		JP	Z,EXIT
 226:			
 227:	04D8  ED4BB507		LD	BC,(RDMA)
 228:	04DC  CDCF05  		CALL	WSETSEK
 229:	04DF  CD2DDB  		CALL	WRITEHST
 230:			
 231:	04E2  CD8C06  		CALL	WAVMSG
 232:	04E5          	STEP5:
 233:			; 	CALL	GCHR
 234:	04E5  2AB507  		LD	HL,(RDMA)	; next DMA addr.
 235:	04E8  110002  		LD	DE,SECSIZ
 236:	04EB  19      		ADD	HL,DE
 237:	04EC  22B507  		LD	(RDMA),HL
 238:			
 239:	04EF  21A207  		LD	HL,DSEC
 240:	04F2  34      		INC	(HL)
 241:	04F3  3AA207  		LD	A,(DSEC)
 242:	04F6  FE0C    		CP	SECNUM+1	; EOT ?
 243:	04F8  2802    		JR	Z, STEP6	; NXT TRK
 244:	04FA  18D4    		JR	STEP4		; NXT SEC
 245:	04FC          	STEP6:
 246:	04FC  CD4705  		CALL	VERIFY
 247:	04FF  B7      		OR	A
 248:	0500  20C6    		JR	NZ,WRTRET
 249:	0502  21AC07  		LD	HL,DTRK		; EOD ?
 250:	0505  34      		INC	(HL)
 251:	0506  3AAC07  		LD	A,(DTRK)
 252:	0509  FEA0    		CP	NTRACK
 253:	050B  2827    		JR	Z,CPYCMP
 254:			
 255:	050D  21B307  		LD	HL,CBLK		; buffer empty ??
 256:	0510  34      		INC	(HL)
 257:	0511  3AB207  		LD	A,(ABLK)
 258:	0514  BE      		CP	(HL)
 259:	0515  280B    		JR	Z,NXTBUF
 260:			
 261:				; CALL CHKTRK QUI!!!!!!!!
 262:	0517  3E01    		LD	A,1
 263:	0519  32A207  		LD	(DSEC),A	; LOOP
 264:	051C  CDEB05  		CALL	WBGSAV
 265:	051F  C3D004  		JP	STEP4
 266:			
 267:				; perform another cycle
 268:	0522          	NXTBUF:
 269:			; 	CALL	VERIFY
 270:	0522  21BB09  		LD	HL,ENDSTO
 271:	0525  22B507  		LD	(RDMA),HL
 272:	0528  AF      		XOR	A
 273:	0529  32B307  		LD	(CBLK),A
 274:	052C  3E01    		LD	A,1
 275:	052E  32A407  		LD	(RSEC),A	; LOOP
 276:			; 	CALL	LFEED
 277:	0531  C37004  		JP	STEP1
 278:			
 279:	0534          	CPYCMP:
 280:			; 	CALL	VERIFY
 281:	0534  217E03  		LD	HL,MCOMP
 282:	0537  CD4307  		CALL	ZSDSP
 283:	053A  C31807  		JP	EXIT1
 284:	053D          	RECOVEND:
 285:	053D  C31207  		JP	EXIT
 286:			
 287:	0540          	LFEED:
 288:	0540  21C902  		LD	HL,MCRLF
 289:	0543  CD4307  		CALL	ZSDSP
 290:	0546  C9      		RET
 291:			
 292:	0547          	VERIFY:
 293:	0547  2AB707  		LD	HL,(BDMA)
 294:	054A  22B507  		LD	(RDMA),HL
 295:			; 	XOR	A
 296:			; 	LD	(CBLK),A
 297:	054D  3E01    		LD	A,1
 298:	054F  32A607  		LD	(VSEC),A	; LOOP
 299:	0552          	VSTEP1:
 300:	0552  CD7107  		CALL	TTYQ
 301:	0555  FE03    		CP	CTLC
 302:	0557  CA1207  		JP	Z,EXIT
 303:			
 304:	055A  01BB07  		LD	BC,BUFDMA
 305:	055D  CD3906  		CALL	VSETSEK
 306:	0560  CDFDDA  		CALL	READHST
 307:			
 308:	0563  21BB07  		LD	HL,BUFDMA
 309:	0566  ED5BB507		LD	DE,(RDMA)
 310:	056A  010002  		LD	BC,SECSIZ
 311:	056D  1A      	CTBUF:	LD	A,(DE)
 312:	056E  EDA1    		CPI
 313:	0570  2007    		JR	NZ,CTNOK
 314:	0572  13      		INC	DE
 315:	0573  78      		LD	A,B
 316:	0574  B1      		OR	C
 317:	0575  20F6    		JR	NZ,CTBUF
 318:	0577  181E    		JR	VSTEP2
 319:	0579          	CTNOK:
 320:	0579  216002  		LD	HL,ESTMOK
 321:	057C  CDC606  		CALL	VAVMS1
 322:	057F  0E0A    		LD	C,LF
 323:	0581  CD5007  		CALL	TTYO
 324:	0584  CD4005  		CALL	LFEED
 325:	0587  3ABA07  		LD	A,(TRYC)
 326:	058A  3D      		DEC	A
 327:	058B  CA1207  		JP	Z,EXIT
 328:	058E  32BA07  		LD	(TRYC),A
 329:	0591  CD1006  		CALL	WBGRST
 330:	0594  3E01    		LD	A,1
 331:	0596  C9      		RET
 332:			
 333:	0597          	VSTEP2:
 334:	0597  CDC306  		CALL	VAVMSG
 335:			; 	CALL	GCHR
 336:	059A  2AB507  		LD	HL,(RDMA)	; next DMA addr.
 337:	059D  110002  		LD	DE,SECSIZ
 338:	05A0  19      		ADD	HL,DE
 339:	05A1  22B507  		LD	(RDMA),HL
 340:			
 341:	05A4  21A607  		LD	HL,VSEC
 342:	05A7  34      		INC	(HL)
 343:	05A8  3AA607  		LD	A,(VSEC)
 344:	05AB  FE0C    		CP	SECNUM+1	; EOT ?
 345:	05AD  2802    		JR	Z, VSTEP3	; NXT TRK
 346:	05AF  18A1    		JR	VSTEP1		; NXT SEC
 347:	05B1          	VSTEP3:
 348:	05B1  AF      		XOR	A
 349:	05B2  C9      		RET
 350:			; 	LD	HL,VTRK		; EOD ?
 351:			; 	INC	(HL)
 352:			; 	LD	A,(VTRK)
 353:			; 	CP	NTRACK
 354:			; 	RET	Z
 355:			;
 356:			; 	LD	HL,CBLK		; buffer full ??
 357:			; 	INC	(HL)
 358:			; 	LD	A,(ABLK)
 359:			; 	CP	(HL)
 360:			; 	RET	Z
 361:			;
 362:			; 	LD	A,1
 363:			; 	LD	(VSEC),A	; LOOP
 364:			; 	JP	VSTEP1
 365:			
 366:			
 367:	05B3          	SETSEK:
 368:			; 	LD	BC,BUFDMA		; set DMA to buffer
 369:	05B3  CD11DD  		CALL	BSETDMA
 370:	05B6  3A9F07  		LD	A,(RDSK)		; set disk
 371:	05B9  4F      		LD	C,A
 372:	05BA  CD16DD  		CALL	BSELDSK			; ... hw
 373:	05BD  CD7DDA  		CALL	SELDSK			; ... logical
 374:	05C0  ED4BAA07		LD	BC,(RTRK)		; set track
 375:	05C4  CD07DD  		CALL	BSETTRK
 376:	05C7  3AA407  		LD	A,(RSEC)		; set sector
 377:	05CA  3D      		DEC	A
 378:	05CB  326DDD  		LD	(HSTLGS),A
 379:	05CE  C9      		RET
 380:			
 381:	05CF          	WSETSEK:
 382:			; 	LD	BC,BUFDMA		; set DMA to buffer
 383:	05CF  CD11DD  		CALL	BSETDMA
 384:	05D2  3AA007  		LD	A,(DDSK)		; set disk
 385:	05D5  4F      		LD	C,A
 386:	05D6  CD16DD  		CALL	BSELDSK			; ... hw
 387:	05D9  CD7DDA  		CALL	SELDSK			; ... logical
 388:	05DC  ED4BAC07		LD	BC,(DTRK)		; set track
 389:	05E0  CD07DD  		CALL	BSETTRK
 390:	05E3  3AA207  		LD	A,(DSEC)		; set sector
 391:	05E6  3D      		DEC	A
 392:	05E7  326DDD  		LD	(HSTLGS),A
 393:	05EA  C9      		RET
 394:			
 395:	05EB          	WBGSAV:
 396:	05EB  3AA007  		LD	A,(DDSK)		; set disk
 397:	05EE  32A107  		LD	(BDSK),A
 398:	05F1  ED4BAC07		LD	BC,(DTRK)		; set track
 399:	05F5  ED43B007		LD	(BTRK),BC
 400:	05F9  ED4BA207		LD	BC,(DSEC)		; set sector
 401:	05FD  ED43A807		LD	(BSEC),BC
 402:	0601  ED4BB507		LD	BC,(RDMA)		; set sector
 403:	0605  ED43B707		LD	(BDMA),BC
 404:	0609  3AB307  		LD	A,(CBLK)		; set disk
 405:	060C  32B407  		LD	(BBLK),A
 406:	060F  C9      		RET
 407:			
 408:	0610          	WBGRST:
 409:	0610  3AA107  		LD	A,(BDSK)		; set disk
 410:	0613  32A007  		LD	(DDSK),A
 411:	0616  ED4BB007		LD	BC,(BTRK)		; set track
 412:	061A  ED43AC07		LD	(DTRK),BC
 413:	061E  ED43AE07		LD	(VTRK),BC
 414:	0622  ED4BA807		LD	BC,(BSEC)		; set sector
 415:	0626  ED43A207		LD	(DSEC),BC
 416:	062A  ED4BB707		LD	BC,(BDMA)		; set sector
 417:	062E  ED43B507		LD	(RDMA),BC
 418:	0632  3AB407  		LD	A,(BBLK)		; set disk
 419:	0635  32B307  		LD	(CBLK),A
 420:	0638  C9      		RET
 421:			
 422:	0639          	VSETSEK:
 423:			; 	LD	BC,BUFDMA		; set DMA to buffer
 424:	0639  CD11DD  		CALL	BSETDMA
 425:	063C  3AA007  		LD	A,(DDSK)		; set disk
 426:	063F  4F      		LD	C,A
 427:	0640  CD16DD  		CALL	BSELDSK			; ... hw
 428:	0643  CD7DDA  		CALL	SELDSK			; ... logical
 429:	0646  ED4BAC07		LD	BC,(DTRK)		; set track
 430:	064A  CD07DD  		CALL	BSETTRK
 431:	064D  3AA607  		LD	A,(VSEC)		; set sector
 432:	0650  3D      		DEC	A
 433:	0651  326DDD  		LD	(HSTLGS),A
 434:	0654  C9      		RET
 435:			
 436:	0655          	RAVMSG:
 437:	0655  213F02  		LD	HL,RSTMOK
 438:	0658  CD4307  		CALL	ZSDSP			;
 439:	065B  212F02  		LD	HL,STMSG1		; inform user about progress
 440:	065E  CD4307  		CALL	ZSDSP			;
 441:	0661  3AAA07  		LD	A,(RTRK)		; track
 442:	0664  4F      		LD	C,A			;
 443:	0665  CD8301  		CALL	BIN2A8			;
 444:	0668  21B501  		LD	HL,OVAL16		;
 445:	066B  CD4307  		CALL	ZSDSP			;
 446:	066E  213702  		LD	HL,STMSG2		;
 447:	0671  CD4307  		CALL	ZSDSP			;
 448:	0674  3AA407  		LD	A,(RSEC)		; side
 449:	0677  4F      		LD	C,A			;
 450:	0678  CD8301  		CALL	BIN2A8			;
 451:	067B  21B501  		LD	HL,OVAL16		;
 452:	067E  CD4307  		CALL	ZSDSP			;
 453:	0681  0E20    		LD	C,' '
 454:	0683  CD5007  		CALL	TTYO
 455:	0686  0E0D    		LD	C,CR			;
 456:	0688  CD5007  		CALL	TTYO			; at beginning of line
 457:	068B  C9      		RET
 458:			
 459:	068C          	WAVMSG:
 460:	068C  214A02  		LD	HL,WSTMOK
 461:	068F  CD4307  		CALL	ZSDSP			;
 462:	0692  212F02  		LD	HL,STMSG1		; inform user about progress
 463:	0695  CD4307  		CALL	ZSDSP			;
 464:	0698  3AAC07  		LD	A,(DTRK)		; track
 465:	069B  4F      		LD	C,A			;
 466:	069C  CD8301  		CALL	BIN2A8			;
 467:	069F  21B501  		LD	HL,OVAL16		;
 468:	06A2  CD4307  		CALL	ZSDSP			;
 469:	06A5  213702  		LD	HL,STMSG2		;
 470:	06A8  CD4307  		CALL	ZSDSP			;
 471:	06AB  3AA207  		LD	A,(DSEC)		; side
 472:	06AE  4F      		LD	C,A			;
 473:	06AF  CD8301  		CALL	BIN2A8			;
 474:	06B2  21B501  		LD	HL,OVAL16		;
 475:	06B5  CD4307  		CALL	ZSDSP			;
 476:	06B8  0E20    		LD	C,' '
 477:	06BA  CD5007  		CALL	TTYO
 478:	06BD  0E0D    		LD	C,CR			;
 479:	06BF  CD5007  		CALL	TTYO			; at beginning of line
 480:	06C2  C9      		RET
 481:			
 482:	06C3          	VAVMSG:
 483:	06C3  215502  		LD	HL,VSTMOK
 484:	06C6  CD4307  	VAVMS1:	CALL	ZSDSP			;
 485:	06C9  212F02  		LD	HL,STMSG1		; inform user about progress
 486:	06CC  CD4307  		CALL	ZSDSP			;
 487:	06CF  3AAC07  		LD	A,(DTRK)		; track
 488:	06D2  4F      		LD	C,A			;
 489:	06D3  CD8301  		CALL	BIN2A8			;
 490:	06D6  21B501  		LD	HL,OVAL16		;
 491:	06D9  CD4307  		CALL	ZSDSP			;
 492:	06DC  213702  		LD	HL,STMSG2		;
 493:	06DF  CD4307  		CALL	ZSDSP			;
 494:	06E2  3AA607  		LD	A,(VSEC)		; side
 495:	06E5  4F      		LD	C,A			;
 496:	06E6  CD8301  		CALL	BIN2A8			;
 497:	06E9  21B501  		LD	HL,OVAL16		;
 498:	06EC  CD4307  		CALL	ZSDSP			;
 499:	06EF  0E20    		LD	C,' '
 500:	06F1  CD5007  		CALL	TTYO
 501:	06F4  0E0D    		LD	C,CR			;
 502:	06F6  CD5007  		CALL	TTYO			; at beginning of line
 503:	06F9  C9      		RET
 504:			
 505:	06FA  0D0A0D0A	MTRM:	DEFB	CR,LF,CR,LF,"*** TERMINATED...",CR,LF,0
	      2A2A2A20
	      5445524D
	      494E4154
	      45442E2E
	      2E0D0A00
 506:	0712          	EXIT:
 507:	0712  21FA06  		LD	HL,MTRM
 508:	0715  CD4307  		CALL	ZSDSP
 509:	0718          	EXIT1:
 510:	0718  3AB907  		LD	A,(RAFS)
 511:	071B  B7      		OR	A
 512:	071C  CA0000  		JP	Z,$0000
 513:	071F  3A4B00  		LD	A,(TMPBYTE)
 514:	0722  CBFF    		SET	7,A
 515:	0724  324B00  		LD	(TMPBYTE),A
 516:	0727  C30000  		JP	$0000
 517:			
 518:	072A          	GCHR:
 519:	072A  CD5F07  		CALL	TTYI			; take from console
 520:	072D  E67F    		AND	$7F			;
 521:	072F  FE60    		CP	$60			;
 522:	0731  FA3B07  		JP	M,GCDSP			; verify alpha
 523:	0734  FE7B    		CP	$7B			;
 524:	0736  F23B07  		JP	P,GCDSP			;
 525:	0739  CBAF    		RES	5,A			; convert to uppercase
 526:	073B  C5      	GCDSP:	PUSH	BC			;
 527:	073C  4F      		LD	C,A			;
 528:	073D  CD5007  		CALL	TTYO			;
 529:	0740  79      		LD	A,C			;
 530:	0741  C1      		POP	BC			;
 531:	0742  C9      		RET				;
 532:			
 533:			
 534:	0743  7E      	ZSDSP:	LD	A,(HL)			; pick char pointed by HL
 535:	0744  B7      		OR	A			; is the terminating NUL ?
 536:	0745  C8      		RET	Z			; yes
 537:	0746  E5      		PUSH	HL			; no
 538:	0747  4F      		LD	C,A			;
 539:	0748  CD5007  		CALL	TTYO			; display it
 540:	074B  E1      		POP	HL			;
 541:	074C  23      		INC	HL			;
 542:	074D  C34307  		JP	ZSDSP			;
 543:			
 544:	0750          	TTYO:
 545:	0750  F5      		PUSH	AF
 546:	0751  C5      		PUSH	BC
 547:	0752  D5      		PUSH	DE
 548:	0753  E5      		PUSH	HL
 549:	0754  59      		LD	E,C
 550:	0755  0E02    		LD	C,2
 551:	0757  CD0500  		CALL 	BDOSA
 552:	075A  E1      		POP	HL
 553:	075B  D1      		POP	DE
 554:	075C  C1      		POP	BC
 555:	075D  F1      		POP	AF
 556:	075E  C9      		RET
 557:			
 558:	075F          	TTYI:
 559:	075F  C5      		PUSH	BC
 560:	0760  D5      		PUSH	DE
 561:	0761  E5      		PUSH	HL
 562:	0762  0E06    	TTYI00:	LD	C,6
 563:	0764  1EFF    		LD	E,0FFH
 564:	0766  CD0500  		CALL 	BDOSA
 565:	0769  E67F    		AND	7FH
 566:	076B  28F5    		JR	Z,TTYI00
 567:	076D  E1      		POP	HL
 568:	076E  D1      		POP	DE
 569:	076F  C1      		POP	BC
 570:	0770  C9      		RET
 571:	0771          	TTYQ:
 572:	0771  C5      		PUSH	BC
 573:	0772  D5      		PUSH	DE
 574:	0773  E5      		PUSH	HL
 575:	0774  0E0B    		LD	C,11
 576:	0776  CD0500  		CALL	BDOSA
 577:	0779  A7      		AND	A
 578:	077A  0E06    		LD	C,6
 579:	077C  1EFF    		LD	E,0FFH
 580:	077E  C406CA  		CALL	NZ,BDOS
 581:	0781  E1      		POP	HL
 582:	0782  D1      		POP	DE
 583:	0783  C1      		POP	BC
 584:	0784  E67F    		AND	7FH
 585:	0786  C9      		RET
 586:			
 587:			;;
 588:			;; DIV16 - 16 BY 16 BIT DIVISION
 589:			;;
 590:			;; in BC = dividend
 591:			;; in DE = divisor
 592:			;; ----
 593:			;; out BC = quotient
 594:			;; out HL = remainder
 595:	0787  78      	LDIV16:	LD	A,B
 596:	0788  0610    		LD	B,16
 597:	078A  210000  		LD	HL,0
 598:	078D  CB11    	LDIVLO:	RL	C
 599:	078F  17      		RLA
 600:	0790  ED6A    		ADC	HL,HL
 601:	0792  ED52    		SBC	HL,DE
 602:	0794  3001    		JR	NC,$+3
 603:	0796  19      		ADD	HL,DE
 604:	0797  3F      		CCF
 605:	0798  10F3    		DJNZ	LDIVLO
 606:	079A  CB11    		RL	C
 607:	079C  17      		RLA
 608:	079D  47      		LD	B,A
 609:	079E  C9      		RET
 610:			
 611:	079F          	ENDTXT	EQU	$
 612:			
 613:	079F  01      	RDSK:	DEFB	NDRIVE
 614:	07A0  00      	DDSK:	DEFB	0
 615:	07A1 .. 07A1 00	BDSK:	DEFS	1
 616:	07A2  0100    	DSEC:	DEFW	1
 617:	07A4  0100    	RSEC:	DEFW	1
 618:	07A6  0100    	VSEC:	DEFW	1
 619:	07A8 .. 07A9 00	BSEC:	DEFS	2
 620:	07AA  0000    	RTRK:	DEFW	0
 621:	07AC  0000    	DTRK:	DEFW	0
 622:	07AE  0000    	VTRK:	DEFW	0
 623:	07B0 .. 07B1 00	BTRK:	DEFS	2
 624:	07B2  00      	ABLK:	DEFB	0
 625:	07B3  00      	CBLK:	DEFB	0
 626:	07B4 .. 07B4 00	BBLK:	DEFS	1
 627:	07B5  0000    	RDMA:	DEFW	0
 628:	07B7 .. 07B8 00	BDMA:	DEFS	2
 629:	07B9  00      	RAFS:	DEFB	0
 630:	07BA  05      	TRYC:	DEFB	NTRYS
 631:	07BB .. 09BA 00	BUFDMA:	DEFS	SECSIZ
 632:			
 633:	09BB          	ENDSTO	EQU	$
 634:			
 635:			
 636:	09BB          		END



Statistics:

     5	passes
     0	jr promotions
   621	symbols
     0	bytes



Symbol Table:

ablk             7b2     dly2            fd87+    ram1buf           3c+    
aftrio          dca3+    dmaadr          dd75+    ram2buf           3d+    
all00           dff7+    dpbase          d837+    ram3buf           3e+    
all01           e02e+    dpbnds          d882+    ramtbl          e000+    
all02           e0e5+    dpbvrt          d857+    ravmsg           655     
all03           e11c+    dreadh          db00+    rcp             e200+    
alloc           dbfb+    drvid            3ae     rcps              10+    
altprnprt          3+    dsec             7a2     rdflo           db13+    
appbuf            2e+    dselbf            4e+    rdma             7b5     
base               0+    dtrk             7ac     rdsk             79f     
bbappp             e+    dwrith          db30+    rdvrt           db22+    
bbbase          f000+    eep29c             4+    readcfg8255       92+    
bbcalret        fd5a+    eep29ee            1+    readhst         dafd     
bbcbank            c+    eep29xe            2+    recovend         53d+    
bbcomn          fc00+    eepage0           c0+    recover          391     
bbconin         fd94+    eeproglock        10+    regastatus        16+    
bbconout        fd9f+    eepsta          f000+    regcommand         f+    
bbconst         fdaa+    eepunsupp          8+    regcontrol        16+    
bbcpboot        fcc9+    eerineprom        80+    regcyllsb          c+    
bbcptime        fcc3+    enddat          e1d3+    regcylmsb          d+    
bbcrtcini       fc03+    endsto         = 9bb+    regdata            8+    
bbcrtfill       fc09+    endtxt         = 79f+    regerr             9+    
bbcstck            d+    eof            =  1a+    regseccnt          a+    
bbcurset        fc21+    erflag          dd5f+    regsector          b+    
bbdebug         ffff+    esc            =  1b+    regshd             e+    
bbdiv16         fce1+    estmok           260     regstatus          f+    
bbdmaset        fcb7+    exit             712     resroom          400+    
bbdriveid       fcf9+    exit1            718     rhstfi          dc66+    
bbdsksel        fcbd+    expath          edf4+    rldrom          fe79+    
bbeidck         fd23+    expaths            5+    rsec             7a4     
bbepmngr        fd1d+    extdon           210     rst7sp1           38+    
bbexec          fd29+    extfcb          edd0+    rst7sp2           39+    
bbfdrvsel       fcdb+    extrabias       1200+    rst7sp3           3a+    
bbfhome         fc81+    extstk          efd0+    rstmok           23f     
bbflopio        fc93+    false              0+    rtbsiz           3c0+    
bbfread         fc87+    fcp             ea00+    rtcbuf          da5b+    
bbfwrite        fc8d+    fcps               4+    rtrk             7aa     
bbhdboot        fd11+    fdcbase           d0+    rwmove          dcef+    
bbhdgeo         fd0b+    fdccmdstatr       d0+    rwoper          dc02+    
bbhdinit        fcf3+    fdcdatareg        d7+    rwoshf          dc09+    
bbhdrd          fd05+    fdcdrvrcnt        d6+    sconin          fc2d+    
bbhdwr          fcff+    fdcreadc          88+    sconout         fc27+    
bbimgp             4+    fdcrestc           7+    sconst          fc33+    
bbinictc        fc57+    fdcsectreg        d2+    scrtch           103+    
bbjtobnk        fc00+    fdcseekc          17+    sdcho            2cc     
bbldpart        fd17+    fdctrakreg        d1+    secnum         =   b+    
bblk             7b4     fdcwritc          a8+    secsiz         = 200+    
bbmul16         fce7+    fdrvbuf           45+    sectran         dade+    
bboffcal        fced+    ff                 c+    seg1            e200+    
bbpag              f+    fifblok            b+    seg10           ec00+    
bbprcvblk       fc6f+    fifoend           25+    seg11           ef00+    
bbprnchr        fc99+    fifokb            1a+    seg12           efd0+    
bbpsndblk       fc63+    fifosto            f+    seg2            ea00+    
bbrdtime        fca5+    fifou0             f+    seg3            ea00+    
bbrdvdsk        fc75+    fifsize            8+    seg4            ed00+    
bbresctc        fc5d+    fin             fdc4+    seg5            ed80+    
bbsecset        fcb1+    fixblock           0+    seg6            edd0+    
bbsidset        fcd5+    formf          =   c+    seg7            edf4+    
bbstack         feb4+    fout            fde1+    seg8            edff+    
bbstbase        fe90+    frdpbuf           41+    seg9            ee00+    
bbsttim         fc9f+    fsecbuf           43+    sekdsk          dd65+    
bbtrkset        fcab+    fsekbuf           3f+    sekhst          dd74+    
bbu0ini         fc39+    fstat           fdb5+    seksec          dd68+    
bbu1ini         fc51+    ftrkbuf           46+    sektrk          dd66+    
bbu1rx          fc45+    gcdsp            73b     selact          da98+    
bbu1st          fc4b+    gchr             72a     seldsk          da7d     
bbu1tx          fc3f+    gocpm           d9f1+    selflp          dac0+    
bbuplchr        fc69+    haseds          ffff+    selhdd          dac6+    
bbvcpmbt        fccf+    hilo             1bb     selndb          dabb+    
bbvoid          fd6a+    hmempag            b+    selvrt          dac7+    
bbwrvdsk        fc7b+    home            da65+    setdma          dad9+    
bdma             7b7     homflo          da73+    setsec          dad4+    
bdos            ca06+    hstact          dd5e+    setsek           5b3     
bdosa          =   5+    hstbsz           200+    settrk          dacf+    
bdosb           ca00+    hstbuf          dd77+    sgon             26b     
bdsk             7a1     hstdsk          dd6f+    shsize            20+    
bdwtyp          dd62+    hstfil          dc6e+    shstk           ed00+    
begdat          dd5e+    hstfrd          dca0+    shstks             4+    
bfailmsg        d902+    hstful          dc48+    signon          d8a8+    
bias            8e00+    hstlgs          dd6d     sintvec         fff0+    
bin2a8           183     hstloa          dc37+    sk2hst          dcb2+    
biohby            d8+    hstrdd          dc3a+    sparea         = 183+    
bioreas          a00+    hstrsf          dcc5+    start            100+    
bios            d800+    hstsec          dd72+    step1            470     
biosiz           55e+    hstsyn          dc45+    step2            485+    
biostds          600+    hsttmp          dd6e+    step3            49c     
bldoffs         3000+    hsttrk          dd70+    step4            4d0     
blifastblok       60+    hstwrt          dd60+    step5            4e5+    
blifastline       6a+    idea0line          1+    step6            4fc     
blislowblok       40+    idea1line          2+    stmpp2          ffff+    
blislowline       4a+    idea2line          4+    stmpzs             0+    
bn2a16           19c     idecs0line         8+    stmsg1           22f     
bootfail        d9e9+    idecs1line        10+    stmsg2           237     
botdsk          d836+    ideporta          e0+    synpnd          dcf2+    
botok           d93f+    ideportb          e1+    sysbase         f000+    
bs             =   8+    ideportc          e2+    syscmlo         feb4+    
bsec             7a8     ideportctrl       e3+    syscom          fc00+    
bseldsk         dd16     iderdline         40+    syshertz          13+    
bsetdma         dd11     iderstline        80+    sytimr          fe19+    
bsetsec         dd0c+    idewrline         20+    tab            =   9+    
bsettrk         dd07     idisk1            24+    tblblk            30+    
btpasiz            6+    idisk2            24+    tdesclen          14+    
btrk             7b0     idisk3             1+    tiaddrlen          4+    
bufdma           7bb     idisk4             1+    tilde          =  7e+    
cbboot          d914+    imtpag            ff+    time            da54+    
cblk             7b3     imtsiz           400+    timrcon           28+    
cbread          db7b+    intrdi          fe0f+    tmpbyte           4b+    
cbrev              f+    intren          fdfe+    tnamelen           8+    
ccp             c200+    intron             0+    tpa              100+    
cdisk              4+    iobval            95+    tpagelen           2+    
chk00           e065+    iobyte             3+    trans           d877+    
chk01           e0a5+    ioflag          dd61+    trnpag             d+    
chk02           e153+    iop                0+    true            ffff+    
chk03           e193+    iops               0+    tryc             7ba     
chksid          db61+    iuser1            24+    tsizelen           4+    
chkuna          dbb6+    iuser2             f+    ttyi             75f     
cldcmnd         da28+    iuser3            24+    ttyi00           762     
clkday          da5e+    iuser4             f+    ttyo             750     
clkdow          da60+    ival16           1b3     ttyq             771     
clkhr           da5d+    kbdbyte           4d+    u0defspeed         6+    
clkio              6+    keybstrbbit        7+    u0isr           fe25+    
clkmm           da5c+    ldiv16           787     u1defspeed         c+    
clkmon          da5f+    ldivlo           78d     u1isr           fe59+    
clkrst             7+    lf             =   a+    u1nul           fe70+    
clksclk            5+    lfeed            540     uart0             c0+    
clkse           da5b+    lngibd           1bd     uart0base         c0+    
clkyea          da61+    lsect           d9c1+    uart0br           2c+    
cloisr          da62+    maxblk            14+    uart1             c8+    
cmdid             ec+    mbfsz            35c     uart115k2          1+    
cmdinit           91+    mcomp            37e     uart1200          60+    
cmdread           20+    mconf            32f     uart19k2           6+    
cmdrecal          10+    mconin          dd1b+    uart1base         c8+    
cmdset          da4f+    mconout         dd2c+    uart1br           2b+    
cmdspindown       e0+    mconst          dd3b+    uart2400          30+    
cmdspinup         e1+    mcrlf            2c9     uart38k4           3+    
cmdwrite          30+    menaprt           21+    uart4800          18+    
cnfbyte           27+    mequal           2ff     uart57k6           2+    
colbuf            4f+    miobyte           4c+    uart9600           c+    
coldbeg         da3e+    mmgetp          fd78+    uastav          fe84+    
coldend         da45+    mmpmap          fd6b+    uastkb          fe86+    
confirm          3ff     mmtpapag          ef+    uisre           fe4e+    
constr          dd4f+    mmuport           20+    uisri           fe32+    
cont            d9d1+    mmutstaddr      d000+    unacnt          dd64+    
copsys            2d+    mmutstpage         d+    unadsk          dd69+    
cpmsiz          1bde+    mnodev          dd4a+    unasec          dd6c+    
cpycmp           534     monmaj            33+    unatrk          dd6a+    
cr             =   d+    monmin            32+    usenodeblock       0+    
crdureg         fc27+    msbfnd           1d9     vavms1           6c6     
crt6545adst       8c+    mscnt             f6+    vavmsg           6c3     
crt6545data       8d+    msize             3c+    vconin          fc15+    
crtbase           80+    mskfnd           1e7     vconout         fc0f+    
crtbeepport       8f+    mtrm             6fa     vconst          fc1b+    
crtblinkbit        0+    mtrsz            36d     vdbufsz            a+    
crthilitbit        3+    mzmac              1+    vdrdsec            0+    
crtkeybcnt        87+    ndrive         =   1+    vdskbuf           30+    
crtkeybdat        85+    nextop          d9d4+    vdwrsec            1+    
crtmodebit         4+    nocoul           202     verify           547     
crtprntcnt        83+    noovf           dbf4+    vers              16+    
crtprntdat        81+    noprow          dd63+    voidisr         fe22+    
crtram0cnt        82+    ntrack         =  a0+    vptr           = 1bb+    
crtram0dat        80+    ntrys          =   5+    vsec             7a6     
crtram1cnt        86+    nxtbuf           522     vsetsek          639     
crtram1dat        84+    nxtcnv           21c     vstep1           552     
crtram2cnt        8a+    nxtmsb           1c8     vstep2           597     
crtram2dat        88+    nxtmsk           1dc     vstep3           5b1     
crtram3port       8e+    nxtopv           1f4     vstmok           255     
crtrevrsbit        1+    opvdon           208     vtrk             7ae     
crtservcnt        8b+    oval16           1b5     wavmsg           68c     
crtservdat        89+    path            da46+    wbgrst           610     
crtunderbit        2+    phydpt          d8a6+    wbgsav           5eb     
crtwidthbit        1+    phylen             a+    wboot           d986+    
cslp0           dd50+    phyoff             f+    wboote          d803+    
ctbuf            56d     phyprm          d89b+    whstfi          dc5f+    
ctc0tc            2a+    physpt          d8a5+    wrall              0+    
ctc0tchi          20+    phystr          dae1+    wrdir              1+    
ctc1tc            29+    pio2bit2           2+    wrfl2           db53+    
ctc1tc100hz        5+    pio2bit3           3+    wrflo           db43+    
ctc1tc10hz        30+    pio2bit4           4+    wrflt           db47+    
ctc1tc25hz        13+    ppakstb            1+    write           db8e+    
ctc1tc2hz         f4+    ppcntrp            2+    writecfg8255      80+    
ctc1tc50hz         a+    ppdatap            3+    writehst        db2d     
ctcbase           e8+    ppdini             0+    writeimg         4b9     
ctcchan0          e8+    ppdokg             2+    wrtret           4c8     
ctcchan1          e9+    ppdrdy             4+    wrttmp          dd73+    
ctcchan2          ea+    ppdstp             6+    wrual              2+    
ctcchan3          eb+    ppstrob            0+    wrvrt           db56+    
ctlc           =   3+    ppuack             7+    wsetsek          5cf     
ctlx           =  18+    ppuini             1+    wstmok           24a     
ctnok            579     ppuokg             3+    z3cl            ef00+    
curpbuf           48+    ppurdy             5+    z3cls             d0+    
cursoroff         20+    prntbusybit        0+    z3env           ec00+    
cursoron           a+    prvtop            4f+    z3envs             2+    
cursshp           4a+    quote          =  27+    z3msg           ed80+    
cvbase         =   a+    r0brdl             0+    z3ndir          ee00+    
cwflg           da3d+    r0rxtx             0+    z3ndirs           1c+    
datsiz           475+    r1brdm             1+    z3rev             21+    
ddcho            2e3     r1ier              1+    z3whl           edff+    
ddrvid           3ce     r2fcr              2+    zbufbas         e200+    
ddsk             7a0     r2iir              2+    zdsstpr         e838+    
del            =  7f+    r3lcr              3+    zdsstsz          1c8+    
delay           fd85+    r4mcr              4+    zero128         da35+    
dfmt128            0+    r5lsr              5+    zerom           da37+    
dfmt256            0+    r6msr              6+    zflopkg          200+    
dfmt512         ffff+    r7spr              7+    ziopkg             0+    
diff16          dd01+    rafs             7b9     zrespkg          800+    
dirbf           df77+    rafsvd           3a6     zsdsp            743     
dly1            fd89+    ram0buf           3b+    zstdovr          400+    
